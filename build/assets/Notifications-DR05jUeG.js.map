{"version":3,"file":"Notifications-DR05jUeG.js","sources":["../../components/NotificationsList.tsx","../../pages/Notifications.tsx"],"sourcesContent":["// React import not required with new JSX runtime\nimport { useState } from 'react';\nimport { useI18n } from '../src/lib/useI18n';\n\nexport type NotificationItem = {\n  id: string;\n  title?: string;\n  body?: string | null;\n  data?: unknown;\n  read: boolean;\n  createdAt: string | Date;\n};\n\ntype Props = {\n  items?: NotificationItem[];\n  loading?: boolean;\n  onRefresh?: () => void;\n  onDeleted?: () => void;\n};\n\nexport default function NotificationsList({ items = [], loading = false, onRefresh = () => {}, onDeleted = () => {} }: Props) {\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n  const { t } = useI18n();\n\n  function relativeTime(dateLike: string | Date) {\n    const d = new Date(String(dateLike));\n    const diff = Date.now() - d.getTime();\n    const mins = Math.round(diff / 60000);\n    if (mins < 1) return t('time.now');\n    if (mins < 60) return t('time.minutes', { n: String(mins) });\n    const hours = Math.round(mins / 60);\n    if (hours < 24) return t('time.hours', { n: String(hours) });\n    const days = Math.round(hours / 24);\n    return t('time.days', { n: String(days) });\n  }\n\n  async function markRead(id: string) {\n    await fetch(`/api/notifications/${id}/read`, { method: 'PUT', credentials: 'include' });\n  onRefresh();\n    if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n      window.dispatchEvent(new CustomEvent('notifications:changed', { detail: { action: 'read', id } }));\n    }\n  }\n  async function markUnread(id: string) {\n    await fetch(`/api/notifications/${id}/unread`, { method: 'PUT', credentials: 'include' });\n  onRefresh();\n    if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n      window.dispatchEvent(new CustomEvent('notifications:changed', { detail: { action: 'unread', id } }));\n    }\n  }\n  // open confirm modal\n  function del(id: string) {\n    setDeletingId(id);\n  }\n\n  // called when user confirms deletion in modal\n  async function confirmDelete(id: string) {\n    try {\n      setDeleteLoading(true);\n      await fetch(`/api/notifications/${id}`, { method: 'DELETE', credentials: 'include' });\n      onDeleted();\n      if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n        window.dispatchEvent(new CustomEvent('notifications:changed', { detail: { action: 'delete', id } }));\n      }\n    } catch (e) {\n      console.error('Failed to delete notification', e);\n    } finally {\n      setDeleteLoading(false);\n      setDeletingId(null);\n    }\n  }\n\n  if (loading) return <div className=\"text-gray-600\">{t('notifications.loading')}</div>;\n  if (!items || items.length === 0) return <div className=\"text-gray-500\">{t('notifications.none')}</div>;\n\n  const cardColors = [\n    'bg-blue-50',\n    'bg-yellow-50',\n    'bg-purple-50',\n    'bg-green-50',\n    'bg-pink-50',\n    'bg-orange-50',\n  ];\n\n  return (\n    <>\n    <ul className=\"space-y-4\">\n      {items.map((n: NotificationItem, idx: number) => {\n  const maybeData = n.data && typeof n.data === 'object' ? n.data as Record<string, unknown> : null;\n  const dtype = (maybeData && typeof maybeData.type === 'string') ? (maybeData.type as string) : '';\n        const map: Record<string, string> = {\n          activity: 'bg-emerald-500',\n          message: 'bg-sky-500',\n          reminder: 'bg-amber-500',\n          report: 'bg-violet-500',\n          system: 'bg-red-500'\n        };\n  const bg = map[dtype] || 'bg-indigo-500';\n        const tags = maybeData && Array.isArray(maybeData.tags) ? (maybeData.tags as string[]) : [];\n\n        function renderIcon(type: string, small = false) {\n          const size = small ? 16 : 20;\n          const props: Record<string, string | number> = { width: size, height: size, viewBox: '0 0 24 24', fill: 'none', xmlns: 'http://www.w3.org/2000/svg' };\n          switch (type) {\n            case 'activity':\n              return (\n                <svg {...props}><path d=\"M12 2v6l4 2\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><circle cx=\"12\" cy=\"16\" r=\"4\" fill=\"currentColor\"/></svg>\n              );\n            case 'message':\n              return (\n                <svg {...props}><path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n              );\n            case 'reminder':\n              return (\n                <svg {...props}><path d=\"M12 7v5l3 3\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M5 3h14\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n              );\n            case 'report':\n              return (\n                <svg {...props}><path d=\"M3 7h18M6 11h12M9 15h6\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n              );\n            case 'system':\n              return (\n                <svg {...props}><path d=\"M12 9v4\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M12 17h.01\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n              );\n            default:\n              return (\n                <svg {...props}><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\" fill=\"currentColor\"/><path d=\"M12 7v6l4 2\" stroke=\"#fff\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n              );\n          }\n        }\n\n        const iconCls = n.read ? 'bg-gray-100 text-gray-500' : `${bg} text-white`;\n\n        return (\n          <li key={n.id} className={`rounded-lg p-4 pb-12 sm:pb-6 relative ${cardColors[idx % cardColors.length]} border border-blue-50 shadow-sm`}>\n            {/* mobile top: icon left, time right */}\n            <div className=\"w-full flex items-center justify-between sm:hidden\">\n              <div className=\"flex items-center\">\n                <div className={`w-8 h-8 rounded-lg ${iconCls} flex items-center justify-center text-base font-bold`}>{renderIcon(dtype, true)}</div>\n              </div>\n              <div className=\"text-xs text-gray-500\">{relativeTime(n.createdAt)}</div>\n            </div>\n\n            {/* desktop row */}\n            <div className=\"hidden sm:flex items-start gap-3\">\n              <div className=\"w-12 flex-shrink-0\">\n                <div className={`w-12 h-12 rounded-lg ${iconCls} flex items-center justify-center text-xl font-bold`}>{renderIcon(dtype, false)}</div>\n              </div>\n\n              <div className=\"flex-1 px-3\">\n                <div className=\"text-sm font-semibold\" title={n.title}>{n.title}</div>\n                {n.body ? <div className=\"text-sm text-gray-600 mt-1 break-words\">{n.body}</div> : null}\n                {tags.length > 0 ? (\n                  <div className=\"flex flex-wrap gap-2 mt-2\">\n                    {tags.map((tg) => (\n                      <span key={tg} className=\"text-xs px-2 py-1 rounded-full bg-white text-gray-700 border border-gray-100\">{tg}</span>\n                    ))}\n                  </div>\n                ) : null}\n              </div>\n\n              <div className=\"flex flex-col items-end\">\n                <div className=\"text-xs text-gray-500\">{relativeTime(n.createdAt)}</div>\n                <div className=\"hidden sm:flex mt-3 gap-2\">\n                  {(() => {\n                    const isRead = !!n.read;\n                    const btnCls = isRead ? 'px-3 py-2 rounded-full bg-gray-100 text-gray-600 border border-gray-100' : 'px-3 py-2 rounded-full bg-blue-600 text-white border border-blue-600';\n                    return (\n                      <button onClick={() => isRead ? markUnread(n.id) : markRead(n.id)} className={btnCls} title={isRead ? t('notifications.mark_unread') : t('notifications.mark_read')}>\n                        {isRead ? (\n                          <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M21 12a9 9 0 1 0-9 9\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M3 3l6 6\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                        ) : (\n                          <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6 12l4 4L18 8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                        )}\n                      </button>\n                    );\n                  })()}\n                  <button onClick={() => del(n.id)} className=\"px-3 py-2 rounded-full bg-red-50 text-red-600 border border-red-100\">\n                    <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path d=\"M3 6h18\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                      <path d=\"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                      <path d=\"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* mobile content below icon */}\n            <div className=\"sm:hidden mt-3\">\n              <div className=\"text-sm font-semibold\" title={n.title}>{n.title}</div>\n              {n.body ? <div className=\"text-sm text-gray-600 mt-1 break-words\">{n.body}</div> : null}\n              {tags.length > 0 ? (\n                <div className=\"flex flex-wrap gap-2 mt-2\">\n                  {tags.map((tg) => (\n                    <span key={tg} className=\"text-xs px-2 py-1 rounded-full bg-white text-gray-700 border border-gray-100\">{tg}</span>\n                  ))}\n                </div>\n              ) : null}\n            </div>\n\n            {/* mobile actions bottom-right (timestamp shown on the icon line above) */}\n            <div className=\"sm:hidden absolute right-4 bottom-4 flex items-center gap-2\">\n              {(() => {\n                const isRead = !!n.read;\n                const btnCls = isRead ? 'px-3 py-2 rounded-full bg-gray-100 text-gray-600 border border-gray-100' : 'px-3 py-2 rounded-full bg-blue-600 text-white border border-blue-600';\n                return (\n                  <button onClick={() => isRead ? markUnread(n.id) : markRead(n.id)} className={btnCls} title={isRead ? t('notifications.mark_unread') : t('notifications.mark_read')}>\n                    {isRead ? (\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M21 12a9 9 0 1 0-9 9\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/><path d=\"M3 3l6 6\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                    ) : (\n                      <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6 12l4 4L18 8\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n                    )}\n                  </button>\n                );\n              })()}\n              <button onClick={() => del(n.id)} className=\"px-3 py-2 rounded-full bg-red-50 text-red-600 border border-red-100\">\n                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M3 6h18\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                  <path d=\"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6\" stroke=\"currentColor\" strokeWidth=\"1.75\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                </svg>\n              </button>\n            </div>\n          </li>\n        );\n      })}\n    </ul>\n    <DeleteModal id={deletingId} open={!!deletingId} onCancel={() => setDeletingId(null)} onConfirm={confirmDelete} loading={deleteLoading} />\n    </>\n  );\n}\n\nfunction DeleteModal({ id, open, onCancel, onConfirm, loading }: { id: string | null; open: boolean; onCancel: () => void; onConfirm: (id: string) => void; loading: boolean; }) {\n  const { t } = useI18n();\n  if (!open || !id) return null;\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/30\">\n      <div className=\"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md relative\">\n        <button onClick={onCancel} className=\"absolute top-3 right-3 text-gray-500\">×</button>\n  <div className=\"text-red-500 text-4xl mb-2 mt-2 flex justify-center\">🗑️</div>\n        <div className=\"text-lg font-semibold mb-2 text-gray-900 text-center\">{t('notifications.confirm_delete.title')}</div>\n        <div className=\"text-gray-500 mb-6 text-center\">{t('notifications.confirm_delete.body')}</div>\n        <div className=\"flex gap-3 w-full\">\n          <button onClick={onCancel} className=\"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition\" disabled={loading}>{t('notifications.confirm_delete.cancel')}</button>\n          <button onClick={() => onConfirm(id)} className=\"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition shadow\" disabled={loading}>{loading ? t('notifications.deleting') : t('notifications.confirm_delete.confirm')}</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport { DeleteModal };\n","import { useEffect, useState } from 'react';\nimport type { NotificationItem } from '../components/NotificationsList';\nimport NotificationsList from '../components/NotificationsList';\nimport { fetchWithRefresh } from '../utils/fetchWithRefresh';\nimport { useI18n } from '../src/lib/useI18n';\nimport ConfirmDialog from '../components/ConfirmDialog';\n\nexport default function NotificationsPage() {\n  const [isShortLandscape, setIsShortLandscape] = useState(false);\n  useEffect(() => {\n    if (typeof window === 'undefined' || typeof window.matchMedia !== 'function') return;\n    const mql = window.matchMedia('(max-height: 600px) and (orientation: landscape)');\n    const onChange = () => setIsShortLandscape(Boolean(mql.matches));\n    onChange();\n    if (typeof mql.addEventListener === 'function') mql.addEventListener('change', onChange); else mql.addListener(onChange);\n    window.addEventListener('resize', onChange);\n    window.addEventListener('orientationchange', onChange);\n    return () => { try { if (typeof mql.removeEventListener === 'function') mql.removeEventListener('change', onChange); else mql.removeListener(onChange); } catch { /* ignore */ } window.removeEventListener('resize', onChange); window.removeEventListener('orientationchange', onChange); };\n  }, []);\n  const [page, setPage] = useState(1);\n  const [items, setItems] = useState<NotificationItem[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  async function load(p = 1) {\n    setLoading(true);\n    try {\n      const res = await fetchWithRefresh(`/api/notifications?page=${p}`, { credentials: 'include' });\n      const json = await res.json();\n      setItems(json.items || []);\n      setPage(json.page || p);\n    } catch (e) {\n      console.error(e);\n    } finally { setLoading(false); }\n  }\n\n  const [stats, setStats] = useState({ unread: 0, today: 0, week: 0 });\n\n  async function loadStats() {\n    try {\n      const res = await fetchWithRefresh('/api/notifications/stats', { credentials: 'include' });\n      const json = await res.json();\n      setStats({ unread: json.unread || 0, today: json.today || 0, week: json.week || 0 });\n    } catch (e) {\n      console.error('Failed to load notification stats', e);\n    }\n  }\n\n  useEffect(() => {\n    // when the user opens the Notifications page: mark as viewed locally and on the server\n    if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n      window.dispatchEvent(new CustomEvent('notifications:viewed'));\n    }\n    // mark-all-read on the server so the unread count won't reappear after the next poll\n    (async () => {\n      try {\n        await fetchWithRefresh('/api/notifications/mark-all-read', { method: 'PUT', credentials: 'include' });\n      } catch (e) {\n        // ignore errors — we still load stats which will reflect server state\n        console.debug('mark-all-read on mount failed', e);\n      }\n    })();\n    loadStats();\n    const handler = () => { loadStats(); load(page); };\n    window.addEventListener('notifications:changed', handler as EventListener);\n    return () => window.removeEventListener('notifications:changed', handler as EventListener);\n  }, [page]);\n\n  useEffect(() => { load(1); }, []);\n\n  const { t } = useI18n();\n  const [confirmOpen, setConfirmOpen] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(false);\n\n  return (\n    <div className={`min-h-screen bg-[#f7f8fa] w-full flex flex-col items-center ${!isShortLandscape ? 'md:pl-64' : ''} px-2 md:px-8 py-8`}>\n      <div className=\"w-full max-w-6xl mx-auto\">\n        <div>\n          <h1 className=\"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight\" style={{ color: '#0b5566' }}>{t('page.notifications.title')}</h1>\n          <div className=\"text-base md:text-lg font-medium mb-4 md:mb-6\" style={{ color: '#08323a' }}>{t('page.notifications.desc')}</div>\n        </div>\n\n  {/* Stats chips + mark-all button (responsive) */}\n  <div className=\"flex flex-col items-start sm:items-start justify-start mb-6\">\n          <div className=\"flex gap-2 items-center mb-3 overflow-x-auto no-scrollbar\" style={{ WebkitOverflowScrolling: 'touch' }}>\n            <div className=\"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-red-200 bg-red-50 text-red-700 font-semibold text-sm sm:text-base\">{stats.unread}<div className=\"text-[10px] sm:text-xs text-red-500\">{t('notifications.stats.unread')}</div></div>\n            <div className=\"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-blue-200 bg-blue-50 text-blue-700 font-semibold text-sm sm:text-base\">{stats.today}<div className=\"text-[10px] sm:text-xs text-blue-500\">{t('notifications.stats.today')}</div></div>\n            <div className=\"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-green-200 bg-green-50 text-green-700 font-semibold text-sm sm:text-base\">{stats.week}<div className=\"text-[10px] sm:text-xs text-green-500\">{t('notifications.stats.week')}</div></div>\n          </div>\n          <div className=\"w-full sm:w-auto mt-3 flex flex-col sm:flex-row sm:items-center gap-2 sm:justify-start\">\n            {/* Actions below badges: stacked on mobile, inline from sm+ */}\n            <button\n              onClick={async () => {\n                try {\n                  await fetchWithRefresh('/api/notifications/mark-all-read', { method: 'PUT', credentials: 'include' });\n                  loadStats();\n                  load(1);\n                    if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n                      window.dispatchEvent(new CustomEvent('notifications:changed'));\n                      window.dispatchEvent(new CustomEvent('notifications:viewed'));\n                    }\n                } catch (e) {\n                  console.error('Failed to mark all read', e);\n                }\n              }}\n              className=\"inline-flex items-center justify-center gap-2 px-3 py-1.5 bg-white border border-gray-200 text-gray-700 rounded-full shadow-sm w-auto text-sm\"\n              title={t('notifications.mark_all')}\n              style={{pointerEvents: 'auto'}}\n            >\n              <svg className=\"w-3.5 h-3.5 text-gray-500\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden>\n                <path d=\"M20 6L9 17l-5-5\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              </svg>\n              <span className=\"text-sm font-medium\">{t('notifications.mark_all')}</span>\n            </button>\n            <button\n              onClick={() => setConfirmOpen(true)}\n              className=\"inline-flex items-center justify-center gap-2 px-3 py-1.5 bg-red-50 border border-red-200 text-red-700 rounded-full shadow-sm w-auto sm:ml-2 text-sm\"\n              title={t('notifications.delete_all')}\n              style={{pointerEvents: 'auto'}}\n            >\n              <svg className=\"w-3.5 h-3.5 text-red-500\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden>\n                <path d=\"M3 6h18\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M10 11v6\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M14 11v6\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M9 6V4h6v2\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              </svg>\n              <span className=\"text-sm font-medium\">{t('notifications.delete_all')}</span>\n            </button>\n          </div>\n        </div>\n\n        <NotificationsList\n          items={items}\n          loading={loading}\n          onRefresh={() => load(page)}\n          onDeleted={() => load(page)}\n        />\n\n        <ConfirmDialog\n          open={confirmOpen}\n          title={t('notifications.confirm_delete.title')}\n          body={t('notifications.confirm_delete_all')}\n          confirmLabel={t('notifications.confirm_delete.confirm')}\n          cancelLabel={t('notifications.confirm_delete.cancel')}\n          loading={confirmLoading}\n          onCancel={() => setConfirmOpen(false)}\n          onConfirm={async () => {\n            try {\n              setConfirmLoading(true);\n              const res = await fetchWithRefresh('/api/notifications', { method: 'DELETE', credentials: 'include' });\n              if (!res.ok) throw new Error('Delete failed');\n              setConfirmOpen(false);\n              loadStats();\n              load(1);\n                if (typeof window !== 'undefined' && typeof window.dispatchEvent === 'function') {\n                  window.dispatchEvent(new CustomEvent('notifications:changed'));\n                  window.dispatchEvent(new CustomEvent('notifications:viewed'));\n                }\n            } catch (e) {\n              console.error('Failed to delete all notifications', e);\n              alert(t('notifications.delete_all_failed') || 'Échec de la suppression');\n            } finally {\n              setConfirmLoading(false);\n            }\n          }}\n        />\n\n      </div>\n    </div>\n  );\n}\n"],"names":["NotificationsList","items","loading","onRefresh","onDeleted","deletingId","setDeletingId","useState","deleteLoading","setDeleteLoading","t","useI18n","relativeTime","dateLike","d","diff","mins","hours","days","markRead","id","markUnread","del","confirmDelete","e","jsx","cardColors","jsxs","Fragment","n","idx","maybeData","dtype","bg","tags","renderIcon","type","small","size","props","iconCls","tg","isRead","btnCls","DeleteModal","open","onCancel","onConfirm","NotificationsPage","isShortLandscape","setIsShortLandscape","useEffect","mql","onChange","page","setPage","setItems","setLoading","load","p","json","fetchWithRefresh","stats","setStats","loadStats","handler","confirmOpen","setConfirmOpen","confirmLoading","setConfirmLoading","ConfirmDialog"],"mappings":"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"}