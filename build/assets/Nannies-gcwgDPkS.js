import{b as Ye,r as i,R as j,g as He,f as b,s as Je,j as t}from"./index-BlCxgRmJ.js";import{u as ye}from"./useI18n-BzDKbdEV.js";/* empty css                          */import{N as Ge}from"./NannyCalendar-BlPQO4tG.js";const x="https://api.monsite.fr";function Ke({nanny:a,onClose:o}){const{t:N}=ye();return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl relative",children:[t.jsx("button",{onClick:o,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),t.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:N("nanny.planning.of",{name:a.name})}),t.jsx(Ge,{nannyId:a.id})]})})}const F={name:"",availability:"Disponible",experience:"",specializations:[],status:"Disponible",contact:"",email:"",password:"",birthDate:void 0,address:"",postalCode:"",city:"",region:"",country:""};function tt(){const{t:a}=ye(),{user:o}=Ye(),[N,we]=i.useState(!1);i.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const e=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),s=()=>we(!!e.matches);return s(),typeof e.addEventListener=="function"?e.addEventListener("change",s):e.addListener(s),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{try{typeof e.removeEventListener=="function"?e.removeEventListener("change",s):e.removeListener(s)}catch{}window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]);const[D,re]=i.useState([]),[ve,y]=i.useState({}),[B,C]=i.useState({}),[je,Ne]=i.useState({}),[L,Ce]=i.useState([]),[Se,O]=i.useState(!0),[l,u]=i.useState(F),[le,f]=i.useState([]),[ke,q]=i.useState(!1),[I,Ee]=i.useState(null),S=j.useRef(null),ie=j.useCallback(async e=>{if(!(I&&Date.now()<I)){if(!e||e.length<3){f([]);return}try{const s=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(e)}&limit=12`);if(s.status===422){f([]);return}if(s.status===429){Ee(Date.now()+6e4),f([]);return}if(!s.ok){f([]);return}const c=(await s.json()||[]).filter(d=>!!(d.house_number||d.street));f(c)}catch(s){console.error("geodata fetch error",s),f([])}}},[I]);j.useEffect(()=>{const e=(l.address||l.city||"").trim();return S.current&&window.clearTimeout(S.current),S.current=window.setTimeout(()=>{const s=l.city?` ${l.city}`:"";ie(`${e}${s}`.trim())},600),()=>{S.current&&window.clearTimeout(S.current)}},[l.address,l.city,ie]),j.useEffect(()=>{const e=s=>{const n=s.target;if(!n)return;const r=document.querySelector("#nanny-form-address");r&&r.contains(n)||q(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]);const $e=e=>{const s=e.house_number?String(e.house_number).trim():"",n=e.street?String(e.street).trim():"",c=(s?`${s} ${n}`.trim():n||"")||e.name||"",d=String(l.address||"").trim();let v=c;if(!s){const $=d.match(/^(\d+)\s+(.+)$/);if($&&$[1]){const U=$[1];c.startsWith(U+" ")||(v=`${U} ${c}`.trim())}}u({...l,address:v,city:e.city||"",postalCode:e.postcode||"",region:e.state||"",country:e.country||""}),f([]),q(!1)},[_,W]=i.useState(!1),[V,oe]=i.useState("text"),[ce,P]=i.useState(""),[p,T]=i.useState(null),[De,Y]=i.useState(!1),M=i.useRef(null),[de,m]=i.useState(""),[me,ue]=i.useState(null),[H,Le]=i.useState(""),[k,_e]=i.useState(""),[J,Pe]=i.useState(""),G=async e=>{y(s=>({...s,[e]:{...s[e],loading:!0}}));try{const n=await(await b(`${x}/nannies/${e}/cotisation`,{credentials:"include"})).json();y(r=>({...r,[e]:{paidUntil:n.cotisationPaidUntil,loading:!1}})),n.lastCotisationAmount&&C(r=>({...r,[e]:Number(n.lastCotisationAmount)}))}catch{y(s=>({...s,[e]:{paidUntil:null,loading:!1}}))}},xe=async e=>{try{const s=await b(`${x}/nannies/${e}/cotisation-total`,{credentials:"include"});if(!s.ok)return;const n=await s.json();n&&typeof n.totalMonthly=="number"&&Ne(r=>({...r,[e]:Number(n.totalMonthly)}))}catch{}},[K,w]=i.useState({}),[E,X]=i.useState(null),[pe,Q]=i.useState(null),[Z,ee]=i.useState(null),Te=async(e,s)=>{y(n=>({...n,[e]:{...n[e],loading:!0}}));try{const n=s?JSON.stringify({amount:s}):void 0,c=await(await b(`${x}/nannies/${e}/cotisation`,{method:"PUT",credentials:"include",headers:n?{"Content-Type":"application/json"}:void 0,body:n})).json();y(d=>({...d,[e]:{paidUntil:c.cotisationPaidUntil,loading:!1}})),w(d=>({...d,[e]:{text:a("nanny.payment.success"),type:"success"}})),c.lastCotisationAmount&&C(d=>({...d,[e]:Number(c.lastCotisationAmount)})),setTimeout(()=>w(d=>({...d,[e]:null})),3e3),await G(e)}catch{y(n=>({...n,[e]:{paidUntil:null,loading:!1}})),w(n=>({...n,[e]:{text:a("nanny.payment.error"),type:"error"}})),setTimeout(()=>w(n=>({...n,[e]:null})),4e3)}},Me=e=>{const s=B[e]||10;X({nannyId:e,amount:s})},Ae=async()=>{if(!E)return;const{nannyId:e,amount:s}=E;X(null),await Te(e,s)},A=j.useCallback(()=>{O(!0);const e=`${x}/nannies`,s=He(e);if(s){re(s);const n={};s.forEach(r=>{n[r.id]=10,G(r.id),xe(r.id)}),C(n),O(!1);return}b(`${x}/nannies`,{credentials:"include"}).then(n=>n.json()).then(n=>{re(n);const r={};n.forEach(c=>{r[c.id]=10,G(c.id),xe(c.id)}),C(r),Je(e,n)}).finally(()=>O(!1))},[]);i.useEffect(()=>{A(),b(`${x}/assignments`,{credentials:"include"}).then(e=>e.json()).then(Ce)},[A]);const g=e=>{u({...l,[e.target.name]:e.target.value})},Re=async e=>{if(e.preventDefault(),m(""),l.password&&l.password!==ce){m("Les mots de passe ne correspondent pas");return}try{const s={...l,experience:Number(l.experience)};(s.birthDate===null||s.birthDate==="")&&delete s.birthDate,s.email||delete s.email;const n=o&&typeof o.role=="string"&&(o.role.toLowerCase()==="admin"||o.role.toLowerCase().includes("super"));s.password||delete s.password;const r=p&&o&&String(o.nannyId)===String(p);if(p&&(n||r)&&l.password){if(s.newPassword=l.password,delete s.password,n&&!r){ee({payload:s,editingId:p}),Q({open:!0,nannyId:p,password:l.password});return}}else!n&&!r&&delete s.newPassword;await fe(s,p)}catch(s){s instanceof Error?m(s.message):m("Erreur")}},fe=async(e,s)=>{try{const n=await b(s?`${x}/nannies/${s}`:`${x}/nannies`,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(n.status===402){try{const r=await n.json().catch(()=>({}));m(r&&r.error?String(r.error):"Limite atteinte pour votre plan.")}catch{m("Limite atteinte pour votre plan.")}return}if(n.status===409){try{const r=await n.json().catch(()=>({})),c=r&&(r.message||r.error)?String(r.message||r.error):"Un utilisateur avec cet email existe déjà.";m(c)}catch{m("Un utilisateur avec cet email existe déjà.")}return}if(!n.ok){try{const r=await n.json().catch(()=>({})),c=r&&(r.message||r.error)?String(r.message||r.error):"Erreur lors de la sauvegarde";m(c)}catch{m("Erreur lors de la sauvegarde")}return}u(F),P(""),T(null),A(),s&&(w(r=>({...r,[s]:{text:"Mise à jour effectuée",type:"success"}})),setTimeout(()=>w(r=>({...r,[s]:null})),3e3))}catch(n){n instanceof Error?m(n.message):m("Erreur")}},Ue=async()=>{Z&&(await fe(Z.payload,Z.editingId),ee(null),Q(null))},ze=()=>{ee(null),Q(null)},Fe=e=>{u({name:e.name,availability:e.availability,experience:e.experience,specializations:e.specializations||[],status:e.status||"Disponible",contact:e.contact,email:e.email,birthDate:e.birthDate,address:e.address||"",postalCode:e.postalCode||"",city:e.city||"",region:e.region||"",country:e.country||"",password:""}),T(e.id),Y(!1),P(""),W(!1),setTimeout(()=>{M.current&&(M.current.scrollIntoView({behavior:"smooth",block:"start"}),window.scrollBy({top:-12,left:0,behavior:"smooth"}),M.current.querySelector('input[name="name"]')?.focus())},80)},[te,se]=i.useState(null),Be=async()=>{if(te)try{if(!(await b(`${x}/nannies/${te}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Erreur lors de la suppression");se(null),A()}catch(e){e instanceof Error?m(e.message):m("Erreur")}},ge=o&&typeof o.role=="string"&&o.role.toLowerCase()==="nanny",he=o&&typeof o.role=="string"&&(o.role.toLowerCase().includes("admin")||o.role.toLowerCase().includes("super")),R=j.useMemo(()=>{if(!ge)return D;const e=o&&(o.nannyId||o.id);if(!e)return[];const s=new Set(L.filter(r=>r.nanny&&String(r.nanny.id)===String(e)).map(r=>r.child.id)),n=new Set(L.filter(r=>s.has(r.child.id)).map(r=>r.nanny.id));return n.add(e),D.filter(r=>n.has(r.id))},[D,L,o,ge]),Oe=R.length,qe=R.filter(e=>e.availability==="Disponible").length,Ie=R.filter(e=>e.availability==="En_congé"||e.availability==="En congé").length,We=D.filter(e=>(!H||e.name.toLowerCase().includes(H.toLowerCase()))&&(!k||k==="Disponible"&&e.availability==="Disponible"||k==="En congé"&&(e.availability==="En_congé"||e.availability==="En congé")||k==="")&&(!J||(J==="junior"?e.experience<3:e.experience>=3)));return t.jsxs("div",{className:`min-h-screen bg-[#fcfcff] p-2 sm:p-4 ${N?"":"md:pl-64"} w-full`,children:[t.jsxs("div",{className:"max-w-7xl mx-auto w-full px-0 sm:px-2 md:px-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-6 w-full",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:a("page.nannies")}),t.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:a("page.nannies.description")})]}),t.jsx("div",{className:"flex gap-2 items-center self-start md:ml-auto",children:o&&typeof o.role=="string"&&(o.role.toLowerCase().includes("admin")||o.role.toLowerCase().includes("super"))&&t.jsx("button",{type:"button",onClick:()=>{u(F),T(null),Y(!0)},className:`bg-[#0b5566] text-white font-semibold rounded-lg px-5 py-2 text-base shadow hover:bg-[#08323a] transition min-h-[44px] md:h-[60px] ${N?"-translate-x-3":""}`,style:{transform:N?"translateX(-12px)":void 0},children:a("nanny.add")})})]}),t.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-6 w-full lg:flex-row lg:items-center lg:gap-4 lg:mb-6 lg:w-full md:max-w-md md:w-full",children:t.jsxs("div",{className:"flex gap-2 flex-wrap justify-start w-full",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[t.jsx("div",{className:"text-xs text-gray-400",children:a("stats.total")}),t.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:Oe})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[t.jsx("div",{className:"text-xs text-gray-400",children:a("nanny.available_label")}),t.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:qe})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[t.jsx("div",{className:"text-xs text-gray-400",children:a("nanny.on_leave_label")}),t.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:Ie})]})]})}),t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-6 w-full filter-responsive",children:[t.jsx("input",{type:"text",value:H,onChange:e=>Le(e.target.value),placeholder:a("nanny.search_placeholder"),className:"border border-gray-200 rounded-lg px-3 py-2 text-gray-700 bg-white shadow-sm text-base w-full md:w-64"}),t.jsxs("select",{value:k,onChange:e=>_e(e.target.value),className:"border rounded px-3 py-2 text-xs md:text-base bg-white text-gray-700 shadow-sm w-full md:w-auto",children:[t.jsx("option",{value:"",children:a("nanny.filter.any")}),t.jsx("option",{value:"Disponible",children:a("nanny.filter.disponible")}),t.jsx("option",{value:"En congé",children:a("nanny.filter.en_conge")})]}),t.jsxs("select",{value:J,onChange:e=>Pe(e.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 bg-white text-gray-700 shadow-sm text-xs md:text-base w-full md:w-auto",children:[t.jsx("option",{value:"",children:a("nanny.filter.experience_any")}),t.jsx("option",{value:"junior",children:a("nanny.filter.experience_junior")}),t.jsx("option",{value:"senior",children:a("nanny.filter.experience_senior")})]}),t.jsx("div",{className:"flex-1"})]}),(De||p)&&t.jsxs("form",{ref:M,onSubmit:Re,className:"mb-6 bg-white rounded-2xl shadow p-4 md:p-6 grid gap-4 md:grid-cols-3 lg:grid-cols-3",children:[t.jsx("input",{name:"name",value:l.name,onChange:g,placeholder:a("nanny.form.name"),required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsxs("select",{name:"availability",value:l.availability,onChange:g,required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",children:[t.jsx("option",{value:"Disponible",children:a("nanny.availability.available")}),t.jsx("option",{value:"En_congé",children:a("nanny.availability.on_leave")}),t.jsx("option",{value:"Maladie",children:a("nanny.availability.sick")})]}),t.jsx("div",{id:"nanny-form-address",className:"md:col-span-2",children:t.jsx("label",{className:"block text-left font-medium text-[#08323a]",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{name:"address",value:l.address||"",onChange:e=>u({...l,address:e.target.value}),placeholder:a("parent.form.address"),className:"mt-1 h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",onFocus:()=>q(!0)}),ke&&le.length>0&&t.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-56 overflow-auto rounded shadow",children:le.map((e,s)=>{const n=[e.house_number&&`${e.house_number} ${e.street}`,e.street||e.name,e.postcode,e.state,e.country].filter(Boolean).join(", "),r=e.name||(e.house_number?`${e.house_number} ${e.street}`:e.street||"");return t.jsxs("li",{role:"button",tabIndex:0,onClick:()=>{$e(e)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[t.jsx("div",{className:"text-sm font-medium",children:r}),t.jsx("div",{className:"text-xs text-gray-500",children:n})]},s)})})]})})}),t.jsxs("label",{className:"block text-left font-medium",children:[t.jsx("span",{className:"sr-only",children:a("parent.form.postalCode")}),t.jsx("input",{name:"postalCode",value:l.postalCode||"",onChange:e=>u({...l,postalCode:e.target.value}),placeholder:a("parent.form.postalCode"),className:"mt-1 h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),t.jsx("input",{name:"city",value:l.city||"",onChange:e=>u({...l,city:e.target.value}),placeholder:a("parent.form.city"),className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"region",value:l.region||"",onChange:e=>u({...l,region:e.target.value}),placeholder:a("parent.form.region")||"Région",className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"country",value:l.country||"",onChange:e=>u({...l,country:e.target.value}),placeholder:a("parent.form.country")||"Pays",className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"experience",type:"number",value:l.experience||"",onChange:g,placeholder:a("nanny.form.experience")||"Expérience",required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"birthDate",type:V,value:V==="date"?l.birthDate||"":l.birthDate?(()=>{try{const e=new Date(String(l.birthDate));if(!isNaN(e.getTime())){const s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getFullYear());return`${s}/${n}/${r}`}}catch{}return String(l.birthDate)})():"",onChange:g,placeholder:a("nanny.form.birthDate")||"Date de naissance",className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",onFocus:()=>oe("date"),onBlur:()=>oe("text"),readOnly:V==="text"}),t.jsx("input",{name:"specializations",value:l.specializations?.join(", "),onChange:e=>u({...l,specializations:e.target.value.split(",").map(s=>s.trim())}),placeholder:a("nanny.form.specializations"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base md:col-span-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"contact",type:"tel",value:l.contact||"",onChange:g,placeholder:a("nanny.form.contact"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("input",{name:"email",type:"email",value:l.email||"",onChange:g,placeholder:a("nanny.form.email"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsxs("div",{className:"relative md:col-span-1",children:[t.jsx("input",{name:"password",autoComplete:"new-password",type:_?"text":"password",value:l.password||"",onChange:g,placeholder:a("nanny.form.password"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base pr-10 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>W(e=>!e),children:_?"🙈":"👁️"})]}),t.jsxs("div",{className:"relative md:col-span-1",children:[t.jsx("input",{name:"confirmPassword",autoComplete:"new-password",type:_?"text":"password",value:ce,onChange:e=>P(e.target.value),placeholder:a("nanny.form.confirmPassword"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base pr-10 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),t.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>W(e=>!e),children:_?"🙈":"👁️"})]}),t.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[t.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded hover:bg-[#08323a] transition",children:a(p?"global.save":"global.add")}),t.jsx("button",{type:"button",onClick:()=>{u(F),P(""),T(null),Y(!1)},className:"bg-gray-300 px-4 py-2 rounded",children:a("global.cancel")})]}),de&&t.jsx("div",{className:"text-red-600 md:col-span-2",children:de})]}),Se?t.jsx("div",{children:"Chargement..."}):t.jsx("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 w-full children-responsive-grid",children:We.filter(e=>R.some(s=>String(s.id)===String(e.id))).map((e,s)=>{const n=ve[e.id],r=n&&n.paidUntil?Math.max(0,Math.ceil((new Date(n.paidUntil).getTime()-Date.now())/(1e3*60*60*24))):0,c=["bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-pink-50","bg-orange-50"],d=c[s%c.length],v=te===e.id,$=new Date().toISOString().split("T")[0],U=L.filter(h=>h.nanny&&h.nanny.id===e.id&&h.date.split("T")[0]===$).length,be=E?.nannyId===e.id,ae=String(e.availability||"").toLowerCase(),Ve=e.availability==="En_congé"||e.availability==="En congé"?a("nanny.availability.on_leave"):e.availability==="Disponible"?a("nanny.availability.available"):a("nanny.availability.sick");let z="px-2 py-1 rounded-full text-xs font-medium ";return ae.includes("dispon")?z+="bg-green-100 text-green-800 border border-green-200":ae.includes("malad")||ae.includes("cong")?z+="bg-red-100 text-red-700 border border-red-200":z+="bg-white border border-gray-200 text-gray-600",t.jsx("div",{className:`rounded-2xl shadow ${d} relative flex flex-col min-h-[440px] h-full transition-transform duration-500 perspective-1000 overflow-hidden`,style:{height:"100%",perspective:"1000px"},children:t.jsxs("div",{className:`w-full h-full transition-transform duration-500 ${v?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",position:"relative",width:"100%",height:"100%"},children:[t.jsxs("div",{className:`absolute inset-0 w-full h-full p-3 sm:p-4 md:p-6 flex flex-col items-center ${v?"opacity-0 pointer-events-none":"opacity-100"} bg-transparent`,style:{backfaceVisibility:"hidden"},children:[t.jsxs("div",{className:"w-full pt-2 sm:pt-3 text-center",children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-[#08323a] truncate max-w-[220px] -mt-1 -translate-y-0.5",title:e.name,style:{transform:"translateY(-2px)"},children:e.name})}),t.jsxs("div",{className:"mt-2 flex items-center justify-center gap-4 text-sm text-gray-600",children:[t.jsx("span",{className:z,children:Ve}),t.jsx("span",{className:"px-2 py-1 rounded-full bg-white border border-gray-200 text-xs font-medium",children:`${e.experience} ${e.experience===1?"an":"ans"} exp`}),e.birthDate?t.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700 whitespace-nowrap",title:a("label.birthDate"),children:["🎂 ",new Date(e.birthDate).toLocaleDateString("fr-FR")]}):t.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 text-gray-600 whitespace-nowrap",title:a("label.birthDate"),children:["🎂 ",a("children.birthDate.undefined")]})]})]}),t.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:gap-3 text-xs sm:text-sm text-gray-700 mb-3 sm:mb-4",children:[t.jsxs("span",{className:"flex items-start gap-2 w-full justify-start",children:[t.jsx("span",{"aria-hidden":!0,className:`inline-block ${e.address?"":"text-gray-300"}`,children:"📍"}),t.jsxs("div",{className:"leading-snug",children:[e.address?t.jsx("div",{className:"truncate",children:e.address}):t.jsx("div",{className:"text-gray-300",children:"—"}),e.postalCode||e.city?t.jsx("div",{className:"truncate",children:[e.postalCode,e.city].filter(Boolean).join(" ")}):t.jsx("div",{className:"text-gray-300",children:"—"})]})]}),t.jsxs("span",{className:"flex items-center gap-2 w-full justify-start",children:[t.jsx("span",{className:"w-5 text-center text-sm sm:text-base",role:"img","aria-label":"Email",children:"✉️"}),e.email?t.jsx("a",{href:`mailto:${e.email}`,className:"text-blue-700 underline text-xs sm:text-sm break-words max-w-full sm:max-w-none","aria-label":`Envoyer un mail à ${e.name}`,children:e.email}):t.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"—"})]}),t.jsxs("span",{className:"flex items-center gap-2 w-full justify-start",children:[t.jsx("span",{"aria-hidden":!0,className:`inline-block ${e.contact?"":"text-gray-300"}`,children:"📞"}),e.contact?t.jsx("a",{href:`tel:${e.contact}`,className:"text-blue-700 underline text-xs sm:text-sm break-words max-w-full sm:max-w-none","aria-label":`Appeler ${e.name}`,children:e.contact}):t.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"—"})]})]}),e.specializations&&e.specializations.length>0&&t.jsx("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 mb-2 w-full px-2 sm:px-4",children:e.specializations.map((h,ne)=>t.jsx("span",{className:"bg-purple-100 text-purple-700 px-1 sm:px-2 py-1 rounded-full text-xs font-semibold border border-purple-200 truncate max-w-[80px] sm:max-w-none",children:h},ne))}),t.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-2 w-full flex flex-col items-center",children:t.jsxs("span",{className:"block font-medium mb-1 text-center",children:[a("nanny.assignments_today"),t.jsx("span",{className:"inline-block bg-white text-gray-700 px-2 py-0.5 rounded-full text-xs font-semibold border border-gray-200 ml-1",children:U})]})}),t.jsxs("div",{className:"flex flex-col gap-2 mt-auto mb-4 w-full min-w-0 items-center",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-xs font-semibold text-gray-700",children:a("nanny.cotisation.label")}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[n?.loading?t.jsx("span",{className:"text-sm text-gray-500",children:a("loading")}):r>0?t.jsxs("span",{className:"text-base font-bold text-[#08323a]",children:[B[e.id]??10,"€"]}):he?t.jsx("input",{type:"number",className:"w-20 px-2 py-1 border rounded text-sm",value:B[e.id]??10,onChange:h=>C(ne=>({...ne,[e.id]:Number(h.target.value)}))}):t.jsx("span",{className:"text-base font-bold text-[#08323a]",children:"10€"}),n?.loading?t.jsx("span",{className:"text-gray-400 text-xl",children:"…"}):r>0?t.jsx("span",{className:"text-[#0b5566] text-xl",children:"✔️"}):t.jsx("span",{className:"text-red-500 text-xl",children:"❌"})]}),r<=0&&he&&t.jsx("button",{className:"ml-2 text-[#0b5566] text-xs font-semibold px-3 py-1 rounded bg-[#a9ddf2] hover:bg-[#f7f4d7] transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:n?.loading||be,onClick:()=>Me(e.id),children:n?.loading?a("nanny.payment.loading"):a(be?"nanny.payment.confirming":"nanny.payment.pay")})]}),t.jsx("span",{className:"text-xs text-gray-500 text-center mt-1",children:n?n.loading?a("loading"):n.paidUntil&&r>0?a("nanny.cotisation.days_remaining",{n:String(r)}):a("nanny.cotisation.renew"):"—"}),t.jsxs("div",{className:"text-xs text-gray-600 text-center mt-2",children:[t.jsxs("span",{className:"block font-medium",children:[a("nanny.cotisation.total_parents")||"Cotisation totale mensuelle des parents"," "]}),t.jsxs("span",{className:"text-base font-bold text-[#08323a]",children:[je[e.id]??0,"€"]})]}),r<=0&&K[e.id]&&t.jsx("div",{className:`mt-1 text-xs ${K[e.id]?.type==="success"?"text-[#0b5566]":"text-red-600"}`,children:K[e.id]?.text})]}),t.jsx("div",{className:"flex items-center gap-2 mt-2",children:t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>ue(e),className:"bg-white border border-gray-200 text-gray-500 hover:text-[#08323a] rounded-full p-2 shadow-sm",title:a("nanny.planning.button"),"aria-label":a("nanny.planning.button"),children:t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-current",children:[t.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),t.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),t.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),t.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),t.jsx("button",{onClick:()=>Fe(e),className:"bg-white border border-gray-200 text-gray-500 hover:text-[#08323a] rounded-full p-2 shadow-sm",title:a("children.action.edit"),children:t.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z"})})}),t.jsx("button",{onClick:()=>se(e.id),className:"bg-white border border-gray-200 text-gray-500 hover:text-red-500 rounded-full p-2 shadow-sm",title:a("children.action.delete"),children:t.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})})})]})})]})]}),t.jsxs("div",{className:`absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-white rounded-2xl shadow-xl p-8 ${v?"opacity-100":"opacity-0 pointer-events-none"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[t.jsx("div",{className:"text-red-500 text-4xl mb-2",children:"🗑️"}),t.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-900 text-center",children:a("modal.delete.title")}),t.jsx("div",{className:"text-gray-500 mb-6 text-center",children:a("nanny.delete.confirm_body")}),t.jsxs("div",{className:"flex gap-3 w-full",children:[t.jsx("button",{onClick:()=>se(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition",children:a("modal.cancel")}),t.jsx("button",{onClick:Be,className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition shadow",children:a("children.action.delete")})]})]})]})},e.id)})})]}),E&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-bold mb-2",children:a("nanny.payment.confirm_title")}),t.jsx("p",{className:"mb-4",children:a("nanny.payment.confirm_body",{amount:String(E.amount)})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>X(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:a("modal.cancel")}),t.jsx("button",{onClick:Ae,className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2",children:a("common.confirm")})]})]})}),me&&t.jsx(Ke,{nanny:me,onClose:()=>ue(null)}),pe&&pe.open&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-bold mb-2",children:a("parent.reset.confirm_title")}),t.jsx("p",{className:"mb-4",children:a("parent.reset.confirm_body")}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:ze,className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:a("modal.cancel")}),t.jsx("button",{onClick:Ue,className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2",children:a("parent.reset.confirm")})]})]})})]})}export{tt as default};
//# sourceMappingURL=Nannies-gcwgDPkS.js.map
