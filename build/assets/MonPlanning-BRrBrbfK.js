import{r as t,f as x,j as e}from"./index-BlCxgRmJ.js";import{N as h}from"./NannyCalendar-BlPQO4tG.js";import"./useI18n-BzDKbdEV.js";function g(){const[a,l]=t.useState(null),[m,f]=t.useState(!0),[i,u]=t.useState(!1),[d,p]=t.useState([]);return t.useEffect(()=>{x("api/me").then(n=>n.json()).then(async n=>{if(n.role==="nanny"&&n.nannyId){l(n.nannyId);return}if(n.role==="admin"||n.role==="super-admin"){u(!0);try{const s=await x("api/nannies");if(s.ok){const c=await s.json(),r=Array.isArray(c)?c.map(o=>({id:String(o.id??""),name:String(o.name??"")})):[];p(r),r.length>0&&l(r[0].id)}}catch(s){console.error("Failed to load nannies for admin",s)}}}).finally(()=>f(!1))},[]),m?e.jsx("div",{className:"p-8 text-center text-[#0b5566]",children:"Chargement..."}):a?e.jsx("div",{className:"min-h-screen bg-[#f7f4d7] flex flex-col md:flex-row",children:e.jsx("main",{className:"flex-1 flex flex-col items-center py-4 px-2 md:py-8 md:px-2 md:ml-64",children:e.jsx("div",{className:"w-full max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 md:p-10 min-h-[600px] md:min-h-[700px] flex flex-col",style:{border:"1px solid #fcdcdf"},children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6 text-center text-[#0b5566]",children:"Mon planning"}),i&&d.length>0&&e.jsxs("div",{className:"mb-4 flex justify-center",children:[e.jsx("label",{className:"mr-2 self-center",children:"Voir le planning de :"}),e.jsx("select",{value:a||"",onChange:n=>l(n.target.value),className:"border rounded px-2 py-1",children:d.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"flex-1 p-4 rounded-lg",style:{background:"#a9ddf2"},children:e.jsx(h,{nannyId:a})})})]})})})}):i?e.jsx("div",{className:"p-8 text-center text-red-500",children:"Aucune nounou trouvée pour votre structure."}):e.jsx("div",{className:"p-8 text-center text-red-500",children:"Accès réservé aux nounous."})}export{g as default};
//# sourceMappingURL=MonPlanning-BRrBrbfK.js.map
