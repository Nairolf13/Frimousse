import{r as a,j as e}from"./index-BlCxgRmJ.js";const h="https://api.monsite.fr";function b(){const[l,d]=a.useState(""),[o,u]=a.useState(""),[c,m]=a.useState(""),[n,p]=a.useState(!1),[i,s]=a.useState("");a.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("token")||"";d(r)},[]);const f=async t=>{if(t.preventDefault(),s(""),!l)return s("Token manquant");if(!o)return s("Entrez un mot de passe");if(o!==c)return s("Les mots de passe ne correspondent pas");try{const r=await fetch(`${h}/auth/reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l,password:o})}),x=await r.json().catch(()=>({}));if(!r.ok){s(x?.error||"Erreur");return}s("Mot de passe mis à jour. Vous pouvez vous connecter."),setTimeout(()=>{window.location.href="/login"},1500)}catch(r){console.error("reset error",r),s("Erreur réseau")}};return e.jsx("div",{className:"min-h-screen w-screen max-w-full overflow-x-hidden flex items-center justify-center  bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2]",children:e.jsxs("form",{onSubmit:f,className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md flex flex-col items-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Réinitialiser le mot de passe"}),i&&e.jsx("div",{className:"mb-4 text-center text-sm",children:i}),e.jsxs("label",{className:"block w-full mb-3",children:["Nouveau mot de passe",e.jsxs("div",{className:"relative mt-1",children:[e.jsx("input",{type:n?"text":"password",value:o,onChange:t=>u(t.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),e.jsx("button",{type:"button",onClick:()=>p(t=>!t),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 hover:text-gray-700","aria-label":n?"Masquer le mot de passe":"Afficher le mot de passe",children:n?"🙈":"👁️"})]})]}),e.jsxs("label",{className:"block w-full mb-3",children:["Confirmer mot de passe",e.jsx("input",{type:n?"text":"password",value:c,onChange:t=>m(t.target.value),className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2"})]}),e.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded",children:"Valider"})]})})}export{b as default};
//# sourceMappingURL=ResetPassword-u42P_SDl.js.map
