function hj(s,t){for(var r=0;r<t.length;r++){const l=t[r];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in s)){const u=Object.getOwnPropertyDescriptor(l,o);u&&Object.defineProperty(s,o,u.get?u:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();function jl(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function mj(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var r=function l(){var o=!1;try{o=this instanceof l}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(l){var o=Object.getOwnPropertyDescriptor(s,l);Object.defineProperty(r,l,o.get?o:{enumerable:!0,get:function(){return s[l]}})}),r}var Gd={exports:{}},el={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function pj(){if(yx)return el;yx=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(l,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:l,key:d,ref:o!==void 0?o:null,props:u}}return el.Fragment=t,el.jsx=r,el.jsxs=r,el}var wx;function gj(){return wx||(wx=1,Gd.exports=pj()),Gd.exports}var a=gj(),Yd={exports:{}},tl={},Kd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx;function xj(){return jx||(jx=1,(function(s){function t(C,R){var Y=C.length;C.push(R);e:for(;0<Y;){var te=Y-1>>>1,Ne=C[te];if(0<o(Ne,R))C[te]=R,C[Y]=Ne,Y=te;else break e}}function r(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var R=C[0],Y=C.pop();if(Y!==R){C[0]=Y;e:for(var te=0,Ne=C.length,z=Ne>>>1;te<z;){var J=2*(te+1)-1,se=C[J],ue=J+1,ye=C[ue];if(0>o(se,Y))ue<Ne&&0>o(ye,se)?(C[te]=ye,C[ue]=Y,te=ue):(C[te]=se,C[J]=Y,te=J);else if(ue<Ne&&0>o(ye,Y))C[te]=ye,C[ue]=Y,te=ue;else break e}}return R}function o(C,R){var Y=C.sortIndex-R.sortIndex;return Y!==0?Y:C.id-R.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var f=[],m=[],x=1,v=null,w=3,N=!1,T=!1,S=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function q(C){for(var R=r(m);R!==null;){if(R.callback===null)l(m);else if(R.startTime<=C)l(m),R.sortIndex=R.expirationTime,t(f,R);else break;R=r(m)}}function M(C){if(S=!1,q(C),!T)if(r(f)!==null)T=!0,L||(L=!0,Q());else{var R=r(m);R!==null&&G(M,R.startTime-C)}}var L=!1,U=-1,W=5,Z=-1;function I(){return j?!0:!(s.unstable_now()-Z<W)}function P(){if(j=!1,L){var C=s.unstable_now();Z=C;var R=!0;try{e:{T=!1,S&&(S=!1,_(U),U=-1),N=!0;var Y=w;try{t:{for(q(C),v=r(f);v!==null&&!(v.expirationTime>C&&I());){var te=v.callback;if(typeof te=="function"){v.callback=null,w=v.priorityLevel;var Ne=te(v.expirationTime<=C);if(C=s.unstable_now(),typeof Ne=="function"){v.callback=Ne,q(C),R=!0;break t}v===r(f)&&l(f),q(C)}else l(f);v=r(f)}if(v!==null)R=!0;else{var z=r(m);z!==null&&G(M,z.startTime-C),R=!1}}break e}finally{v=null,w=Y,N=!1}R=void 0}}finally{R?Q():L=!1}}}var Q;if(typeof O=="function")Q=function(){O(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,E=$.port2;$.port1.onmessage=P,Q=function(){E.postMessage(null)}}else Q=function(){k(P,0)};function G(C,R){U=k(function(){C(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(C){C.callback=null},s.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(C){switch(w){case 1:case 2:case 3:var R=3;break;default:R=w}var Y=w;w=R;try{return C()}finally{w=Y}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(C,R){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var Y=w;w=C;try{return R()}finally{w=Y}},s.unstable_scheduleCallback=function(C,R,Y){var te=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,C){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=Y+Ne,C={id:x++,callback:R,priorityLevel:C,startTime:Y,expirationTime:Ne,sortIndex:-1},Y>te?(C.sortIndex=Y,t(m,C),r(f)===null&&C===r(m)&&(S?(_(U),U=-1):S=!0,G(M,Y-te))):(C.sortIndex=Ne,t(f,C),T||N||(T=!0,L||(L=!0,Q()))),C},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(C){var R=w;return function(){var Y=w;w=R;try{return C.apply(this,arguments)}finally{w=Y}}}})(Jd)),Jd}var Nx;function bj(){return Nx||(Nx=1,Kd.exports=xj()),Kd.exports}var Wd={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function vj(){if(Sx)return Ze;Sx=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function N(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function k(z,J,se){this.props=z,this.context=J,this.refs=j,this.updater=se||T}k.prototype.isReactComponent={},k.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=k.prototype;function O(z,J,se){this.props=z,this.context=J,this.refs=j,this.updater=se||T}var q=O.prototype=new _;q.constructor=O,S(q,k.prototype),q.isPureReactComponent=!0;var M=Array.isArray;function L(){}var U={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function Z(z,J,se){var ue=se.ref;return{$$typeof:s,type:z,key:J,ref:ue!==void 0?ue:null,props:se}}function I(z,J){return Z(z.type,J,z.props)}function P(z){return typeof z=="object"&&z!==null&&z.$$typeof===s}function Q(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(se){return J[se]})}var $=/\/+/g;function E(z,J){return typeof z=="object"&&z!==null&&z.key!=null?Q(""+z.key):J.toString(36)}function G(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(L,L):(z.status="pending",z.then(function(J){z.status==="pending"&&(z.status="fulfilled",z.value=J)},function(J){z.status==="pending"&&(z.status="rejected",z.reason=J)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function C(z,J,se,ue,ye){var Te=typeof z;(Te==="undefined"||Te==="boolean")&&(z=null);var De=!1;if(z===null)De=!0;else switch(Te){case"bigint":case"string":case"number":De=!0;break;case"object":switch(z.$$typeof){case s:case t:De=!0;break;case x:return De=z._init,C(De(z._payload),J,se,ue,ye)}}if(De)return ye=ye(z),De=ue===""?"."+E(z,0):ue,M(ye)?(se="",De!=null&&(se=De.replace($,"$&/")+"/"),C(ye,J,se,"",function(Ye){return Ye})):ye!=null&&(P(ye)&&(ye=I(ye,se+(ye.key==null||z&&z.key===ye.key?"":(""+ye.key).replace($,"$&/")+"/")+De)),J.push(ye)),1;De=0;var Ce=ue===""?".":ue+":";if(M(z))for(var $e=0;$e<z.length;$e++)ue=z[$e],Te=Ce+E(ue,$e),De+=C(ue,J,se,Te,ye);else if($e=N(z),typeof $e=="function")for(z=$e.call(z),$e=0;!(ue=z.next()).done;)ue=ue.value,Te=Ce+E(ue,$e++),De+=C(ue,J,se,Te,ye);else if(Te==="object"){if(typeof z.then=="function")return C(G(z),J,se,ue,ye);throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return De}function R(z,J,se){if(z==null)return z;var ue=[],ye=0;return C(z,ue,"","",function(Te){return J.call(se,Te,ye++)}),ue}function Y(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(se){(z._status===0||z._status===-1)&&(z._status=1,z._result=se)},function(se){(z._status===0||z._status===-1)&&(z._status=2,z._result=se)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var te=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Ne={map:R,forEach:function(z,J,se){R(z,function(){J.apply(this,arguments)},se)},count:function(z){var J=0;return R(z,function(){J++}),J},toArray:function(z){return R(z,function(J){return J})||[]},only:function(z){if(!P(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ze.Activity=v,Ze.Children=Ne,Ze.Component=k,Ze.Fragment=r,Ze.Profiler=o,Ze.PureComponent=O,Ze.StrictMode=l,Ze.Suspense=f,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(z){return U.H.useMemoCache(z)}},Ze.cache=function(z){return function(){return z.apply(null,arguments)}},Ze.cacheSignal=function(){return null},Ze.cloneElement=function(z,J,se){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ue=S({},z.props),ye=z.key;if(J!=null)for(Te in J.key!==void 0&&(ye=""+J.key),J)!W.call(J,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&J.ref===void 0||(ue[Te]=J[Te]);var Te=arguments.length-2;if(Te===1)ue.children=se;else if(1<Te){for(var De=Array(Te),Ce=0;Ce<Te;Ce++)De[Ce]=arguments[Ce+2];ue.children=De}return Z(z.type,ye,ue)},Ze.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:u,_context:z},z},Ze.createElement=function(z,J,se){var ue,ye={},Te=null;if(J!=null)for(ue in J.key!==void 0&&(Te=""+J.key),J)W.call(J,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=J[ue]);var De=arguments.length-2;if(De===1)ye.children=se;else if(1<De){for(var Ce=Array(De),$e=0;$e<De;$e++)Ce[$e]=arguments[$e+2];ye.children=Ce}if(z&&z.defaultProps)for(ue in De=z.defaultProps,De)ye[ue]===void 0&&(ye[ue]=De[ue]);return Z(z,Te,ye)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(z){return{$$typeof:p,render:z}},Ze.isValidElement=P,Ze.lazy=function(z){return{$$typeof:x,_payload:{_status:-1,_result:z},_init:Y}},Ze.memo=function(z,J){return{$$typeof:m,type:z,compare:J===void 0?null:J}},Ze.startTransition=function(z){var J=U.T,se={};U.T=se;try{var ue=z(),ye=U.S;ye!==null&&ye(se,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(L,te)}catch(Te){te(Te)}finally{J!==null&&se.types!==null&&(J.types=se.types),U.T=J}},Ze.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},Ze.use=function(z){return U.H.use(z)},Ze.useActionState=function(z,J,se){return U.H.useActionState(z,J,se)},Ze.useCallback=function(z,J){return U.H.useCallback(z,J)},Ze.useContext=function(z){return U.H.useContext(z)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(z,J){return U.H.useDeferredValue(z,J)},Ze.useEffect=function(z,J){return U.H.useEffect(z,J)},Ze.useEffectEvent=function(z){return U.H.useEffectEvent(z)},Ze.useId=function(){return U.H.useId()},Ze.useImperativeHandle=function(z,J,se){return U.H.useImperativeHandle(z,J,se)},Ze.useInsertionEffect=function(z,J){return U.H.useInsertionEffect(z,J)},Ze.useLayoutEffect=function(z,J){return U.H.useLayoutEffect(z,J)},Ze.useMemo=function(z,J){return U.H.useMemo(z,J)},Ze.useOptimistic=function(z,J){return U.H.useOptimistic(z,J)},Ze.useReducer=function(z,J,se){return U.H.useReducer(z,J,se)},Ze.useRef=function(z){return U.H.useRef(z)},Ze.useState=function(z){return U.H.useState(z)},Ze.useSyncExternalStore=function(z,J,se){return U.H.useSyncExternalStore(z,J,se)},Ze.useTransition=function(){return U.H.useTransition()},Ze.version="19.2.0",Ze}var _x;function ih(){return _x||(_x=1,Wd.exports=vj()),Wd.exports}var Xd={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cx;function yj(){if(Cx)return on;Cx=1;var s=ih();function t(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(f,m,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:f,containerInfo:m,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,on.createPortal=function(f,m){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(f,m,null,x)},on.flushSync=function(f){var m=d.T,x=l.p;try{if(d.T=null,l.p=2,f)return f()}finally{d.T=m,l.p=x,l.d.f()}},on.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(f,m))},on.prefetchDNS=function(f){typeof f=="string"&&l.d.D(f)},on.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var x=m.as,v=p(x,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;x==="style"?l.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:N}):x==="script"&&l.d.X(f,{crossOrigin:v,integrity:w,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},on.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var x=p(m.as,m.crossOrigin);l.d.M(f,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(f)},on.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var x=m.as,v=p(x,m.crossOrigin);l.d.L(f,x,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},on.preloadModule=function(f,m){if(typeof f=="string")if(m){var x=p(m.as,m.crossOrigin);l.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(f)},on.requestFormReset=function(f){l.d.r(f)},on.unstable_batchedUpdates=function(f,m){return f(m)},on.useFormState=function(f,m,x){return d.H.useFormState(f,m,x)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.2.0",on}var Ex;function av(){if(Ex)return Xd.exports;Ex=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Xd.exports=yj(),Xd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function wj(){if(Tx)return tl;Tx=1;var s=bj(),t=ih(),r=av();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(u(e)!==e)throw Error(l(188))}function m(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var i=e,c=n;;){var h=i.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){i=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===i)return f(h),e;if(g===c)return f(h),n;g=g.sibling}throw Error(l(188))}if(i.return!==c.return)i=h,c=g;else{for(var y=!1,A=h.child;A;){if(A===i){y=!0,i=h,c=g;break}if(A===c){y=!0,c=h,i=g;break}A=A.sibling}if(!y){for(A=g.child;A;){if(A===i){y=!0,i=g,c=h;break}if(A===c){y=!0,c=g,i=h;break}A=A.sibling}if(!y)throw Error(l(189))}}if(i.alternate!==c)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?e:n}function x(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=x(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var $=Symbol.for("react.client.reference");function E(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case O:return e.displayName||"Context";case _:return(e._context.displayName||"Context")+".Consumer";case q:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case U:return n=e.displayName||null,n!==null?n:E(e.type)||"Memo";case W:n=e._payload,e=e._init;try{return E(e(n))}catch{}}return null}var G=Array.isArray,C=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},te=[],Ne=-1;function z(e){return{current:e}}function J(e){0>Ne||(e.current=te[Ne],te[Ne]=null,Ne--)}function se(e,n){Ne++,te[Ne]=e.current,e.current=n}var ue=z(null),ye=z(null),Te=z(null),De=z(null);function Ce(e,n){switch(se(Te,n),se(ye,e),se(ue,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Hg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Hg(n),e=Vg(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(ue),se(ue,e)}function $e(){J(ue),J(ye),J(Te)}function Ye(e){e.memoizedState!==null&&se(De,e);var n=ue.current,i=Vg(n,e.type);n!==i&&(se(ye,e),se(ue,i))}function Xe(e){ye.current===e&&(J(ue),J(ye)),De.current===e&&(J(De),Wi._currentValue=Y)}var Se,Me;function ke(e){if(Se===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Se=n&&n[1]||"",Me=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+e+Me}var Je=!1;function V(e,n){if(!e||Je)return"";Je=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(oe){var re=oe}Reflect.construct(e,[],ge)}else{try{ge.call()}catch(oe){re=oe}e.call(ge.prototype)}}else{try{throw Error()}catch(oe){re=oe}(ge=e())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),y=g[0],A=g[1];if(y&&A){var B=y.split(`
`),ae=A.split(`
`);for(h=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;h<ae.length&&!ae[h].includes("DetermineComponentFrameRoot");)h++;if(c===B.length||h===ae.length)for(c=B.length-1,h=ae.length-1;1<=c&&0<=h&&B[c]!==ae[h];)h--;for(;1<=c&&0<=h;c--,h--)if(B[c]!==ae[h]){if(c!==1||h!==1)do if(c--,h--,0>h||B[c]!==ae[h]){var de=`
`+B[c].replace(" at new "," at ");return e.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",e.displayName)),de}while(1<=c&&0<=h);break}}}finally{Je=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ke(i):""}function ce(e,n){switch(e.tag){case 26:case 27:case 5:return ke(e.type);case 16:return ke("Lazy");case 13:return e.child!==n&&n!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);case 31:return ke("Activity");default:return""}}function le(e){try{var n="",i=null;do n+=ce(e,i),i=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ve=Object.prototype.hasOwnProperty,Ee=s.unstable_scheduleCallback,Ie=s.unstable_cancelCallback,K=s.unstable_shouldYield,xe=s.unstable_requestPaint,we=s.unstable_now,Oe=s.unstable_getCurrentPriorityLevel,Pe=s.unstable_ImmediatePriority,ut=s.unstable_UserBlockingPriority,Ve=s.unstable_NormalPriority,Be=s.unstable_LowPriority,Qe=s.unstable_IdlePriority,ie=s.log,he=s.unstable_setDisableYieldValue,ee=null,me=null;function be(e){if(typeof ie=="function"&&he(e),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(ee,e)}catch{}}var _e=Math.clz32?Math.clz32:Dt,Ue=Math.log,dt=Math.LN2;function Dt(e){return e>>>=0,e===0?32:31-(Ue(e)/dt|0)|0}var vt=256,Yt=262144,H=4194304;function je(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,n,i){var c=e.pendingLanes;if(c===0)return 0;var h=0,g=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var A=c&134217727;return A!==0?(c=A&~g,c!==0?h=je(c):(y&=A,y!==0?h=je(y):i||(i=A&~e,i!==0&&(h=je(i))))):(A=c&~g,A!==0?h=je(A):y!==0?h=je(y):i||(i=c&~e,i!==0&&(h=je(i)))),h===0?0:n!==0&&n!==h&&(n&g)===0&&(g=h&-h,i=n&-n,g>=i||g===32&&(i&4194048)!==0)?n:h}function Re(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ct(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kt(){var e=H;return H<<=1,(H&62914560)===0&&(H=4194304),e}function Dn(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function en(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Jn(e,n,i,c,h,g){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var A=e.entanglements,B=e.expirationTimes,ae=e.hiddenUpdates;for(i=y&~i;0<i;){var de=31-_e(i),ge=1<<de;A[de]=0,B[de]=-1;var re=ae[de];if(re!==null)for(ae[de]=null,de=0;de<re.length;de++){var oe=re[de];oe!==null&&(oe.lane&=-536870913)}i&=~ge}c!==0&&ui(e,c,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(y&~n))}function ui(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-_e(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|i&261930}function Fs(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var c=31-_e(i),h=1<<c;h&n|e[c]&n&&(e[c]|=n),i&=~h}}function Tl(e,n){var i=n&-n;return i=(i&42)!==0?1:qa(i),(i&(e.suspendedLanes|n))!==0?0:i}function qa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gs(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:hx(e.type))}function kh(e,n){var i=R.p;try{return R.p=e,n()}finally{R.p=i}}var Ha=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ha,hn="__reactProps$"+Ha,Ys="__reactContainer$"+Ha,zc="__reactEvents$"+Ha,ny="__reactListeners$"+Ha,ay="__reactHandles$"+Ha,Ah="__reactResources$"+Ha,di="__reactMarker$"+Ha;function Pc(e){delete e[tn],delete e[hn],delete e[zc],delete e[ny],delete e[ay]}function Ks(e){var n=e[tn];if(n)return n;for(var i=e.parentNode;i;){if(n=i[Ys]||i[tn]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Xg(e);e!==null;){if(i=e[tn])return i;e=Xg(e)}return n}e=i,i=e.parentNode}return null}function Js(e){if(e=e[tn]||e[Ys]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function fi(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function Ws(e){var n=e[Ah];return n||(n=e[Ah]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Xt(e){e[di]=!0}var Oh=new Set,Rh={};function bs(e,n){Xs(e,n),Xs(e+"Capture",n)}function Xs(e,n){for(Rh[e]=n,e=0;e<n.length;e++)Oh.add(n[e])}var sy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dh={},Mh={};function ry(e){return ve.call(Mh,e)?!0:ve.call(Dh,e)?!1:sy.test(e)?Mh[e]=!0:(Dh[e]=!0,!1)}function kl(e,n,i){if(ry(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Al(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function ga(e,n,i,c){if(c===null)e.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+c)}}function Mn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function iy(e,n,i){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,g=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(y){i=""+y,g.call(this,y)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Uc(e){if(!e._valueTracker){var n=Lh(e)?"checked":"value";e._valueTracker=iy(e,n,""+e[n])}}function $h(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),c="";return e&&(c=Lh(e)?e.checked?"true":"false":e.value),e=c,e!==i?(n.setValue(e),!0):!1}function Ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ly=/[\n"\\]/g;function Ln(e){return e.replace(ly,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ic(e,n,i,c,h,g,y,A){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Mn(n)):e.value!==""+Mn(n)&&(e.value=""+Mn(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?Bc(e,y,Mn(n)):i!=null?Bc(e,y,Mn(i)):c!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+Mn(A):e.removeAttribute("name")}function zh(e,n,i,c,h,g,y,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){Uc(e);return}i=i!=null?""+Mn(i):"",n=n!=null?""+Mn(n):i,A||n===e.value||(e.value=n),e.defaultValue=n}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=A?e.checked:!!c,e.defaultChecked=!!c,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Uc(e)}function Bc(e,n,i){n==="number"&&Ol(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Qs(e,n,i,c){if(e=e.options,n){n={};for(var h=0;h<i.length;h++)n["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=n.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&c&&(e[i].defaultSelected=!0)}else{for(i=""+Mn(i),n=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,c&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function Ph(e,n,i){if(n!=null&&(n=""+Mn(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Mn(i):""}function Uh(e,n,i,c){if(n==null){if(c!=null){if(i!=null)throw Error(l(92));if(G(c)){if(1<c.length)throw Error(l(93));c=c[0]}i=c}i==null&&(i=""),n=i}i=Mn(n),e.defaultValue=i,c=e.textContent,c===i&&c!==""&&c!==null&&(e.value=c),Uc(e)}function Zs(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var oy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ih(e,n,i){var c=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,i):typeof i!="number"||i===0||oy.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Bh(e,n,i){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var h in n)c=n[h],n.hasOwnProperty(h)&&i[h]!==c&&Ih(e,h,c)}else for(var g in n)n.hasOwnProperty(g)&&Ih(e,g,n[g])}function qc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(e){return uy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xa(){}var Hc=null;function Vc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var er=null,tr=null;function qh(e){var n=Js(e);if(n&&(e=n.stateNode)){var i=e[hn]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ic(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ln(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var c=i[n];if(c!==e&&c.form===e.form){var h=c[hn]||null;if(!h)throw Error(l(90));Ic(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<i.length;n++)c=i[n],c.form===e.form&&$h(c)}break e;case"textarea":Ph(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Qs(e,!!i.multiple,n,!1)}}}var Fc=!1;function Hh(e,n,i){if(Fc)return e(n,i);Fc=!0;try{var c=e(n);return c}finally{if(Fc=!1,(er!==null||tr!==null)&&(yo(),er&&(n=er,e=tr,tr=er=null,qh(n),e)))for(n=0;n<e.length;n++)qh(e[n])}}function hi(e,n){var i=e.stateNode;if(i===null)return null;var c=i[hn]||null;if(c===null)return null;i=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(l(231,n,typeof i));return i}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=!1;if(ba)try{var mi={};Object.defineProperty(mi,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",mi,mi),window.removeEventListener("test",mi,mi)}catch{Gc=!1}var Va=null,Yc=null,Dl=null;function Vh(){if(Dl)return Dl;var e,n=Yc,i=n.length,c,h="value"in Va?Va.value:Va.textContent,g=h.length;for(e=0;e<i&&n[e]===h[e];e++);var y=i-e;for(c=1;c<=y&&n[i-c]===h[g-c];c++);return Dl=h.slice(e,1<c?1-c:void 0)}function Ml(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ll(){return!0}function Fh(){return!1}function mn(e){function n(i,c,h,g,y){this._reactName=i,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=y,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(i=e[A],this[A]=i?i(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ll:Fh,this.isPropagationStopped=Fh,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),n}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$l=mn(vs),pi=v({},vs,{view:0,detail:0}),dy=mn(pi),Kc,Jc,gi,zl=v({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gi&&(gi&&e.type==="mousemove"?(Kc=e.screenX-gi.screenX,Jc=e.screenY-gi.screenY):Jc=Kc=0,gi=e),Kc)},movementY:function(e){return"movementY"in e?e.movementY:Jc}}),Gh=mn(zl),fy=v({},zl,{dataTransfer:0}),hy=mn(fy),my=v({},pi,{relatedTarget:0}),Wc=mn(my),py=v({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),gy=mn(py),xy=v({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),by=mn(xy),vy=v({},vs,{data:0}),Yh=mn(vy),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ny(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=jy[e])?!!n[e]:!1}function Xc(){return Ny}var Sy=v({},pi,{key:function(e){if(e.key){var n=yy[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_y=mn(Sy),Cy=v({},zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=mn(Cy),Ey=v({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),Ty=mn(Ey),ky=v({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=mn(ky),Oy=v({},zl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ry=mn(Oy),Dy=v({},vs,{newState:0,oldState:0}),My=mn(Dy),Ly=[9,13,27,32],Qc=ba&&"CompositionEvent"in window,xi=null;ba&&"documentMode"in document&&(xi=document.documentMode);var $y=ba&&"TextEvent"in window&&!xi,Jh=ba&&(!Qc||xi&&8<xi&&11>=xi),Wh=" ",Xh=!1;function Qh(e,n){switch(e){case"keyup":return Ly.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function zy(e,n){switch(e){case"compositionend":return Zh(n);case"keypress":return n.which!==32?null:(Xh=!0,Wh);case"textInput":return e=n.data,e===Wh&&Xh?null:e;default:return null}}function Py(e,n){if(nr)return e==="compositionend"||!Qc&&Qh(e,n)?(e=Vh(),Dl=Yc=Va=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Jh&&n.locale!=="ko"?null:n.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Uy[e.type]:n==="textarea"}function tm(e,n,i,c){er?tr?tr.push(c):tr=[c]:er=c,n=Eo(n,"onChange"),0<n.length&&(i=new $l("onChange","change",null,i,c),e.push({event:i,listeners:n}))}var bi=null,vi=null;function Iy(e){zg(e,0)}function Pl(e){var n=fi(e);if($h(n))return e}function nm(e,n){if(e==="change")return n}var am=!1;if(ba){var Zc;if(ba){var eu="oninput"in document;if(!eu){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),eu=typeof sm.oninput=="function"}Zc=eu}else Zc=!1;am=Zc&&(!document.documentMode||9<document.documentMode)}function rm(){bi&&(bi.detachEvent("onpropertychange",im),vi=bi=null)}function im(e){if(e.propertyName==="value"&&Pl(vi)){var n=[];tm(n,vi,e,Vc(e)),Hh(Iy,n)}}function By(e,n,i){e==="focusin"?(rm(),bi=n,vi=i,bi.attachEvent("onpropertychange",im)):e==="focusout"&&rm()}function qy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pl(vi)}function Hy(e,n){if(e==="click")return Pl(n)}function Vy(e,n){if(e==="input"||e==="change")return Pl(n)}function Fy(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var jn=typeof Object.is=="function"?Object.is:Fy;function yi(e,n){if(jn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var h=i[c];if(!ve.call(n,h)||!jn(e[h],n[h]))return!1}return!0}function lm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function om(e,n){var i=lm(e);e=0;for(var c;i;){if(i.nodeType===3){if(c=e+i.textContent.length,e<=n&&c>=n)return{node:i,offset:n-e};e=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lm(i)}}function cm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?cm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function um(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Ol(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=Ol(e.document)}return n}function tu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Gy=ba&&"documentMode"in document&&11>=document.documentMode,ar=null,nu=null,wi=null,au=!1;function dm(e,n,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;au||ar==null||ar!==Ol(c)||(c=ar,"selectionStart"in c&&tu(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wi&&yi(wi,c)||(wi=c,c=Eo(nu,"onSelect"),0<c.length&&(n=new $l("onSelect","select",null,n,i),e.push({event:n,listeners:c}),n.target=ar)))}function ys(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var sr={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionrun:ys("Transition","TransitionRun"),transitionstart:ys("Transition","TransitionStart"),transitioncancel:ys("Transition","TransitionCancel"),transitionend:ys("Transition","TransitionEnd")},su={},fm={};ba&&(fm=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function ws(e){if(su[e])return su[e];if(!sr[e])return e;var n=sr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in fm)return su[e]=n[i];return e}var hm=ws("animationend"),mm=ws("animationiteration"),pm=ws("animationstart"),Yy=ws("transitionrun"),Ky=ws("transitionstart"),Jy=ws("transitioncancel"),gm=ws("transitionend"),xm=new Map,ru="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ru.push("scrollEnd");function Xn(e,n){xm.set(e,n),bs(n,[e])}var Ul=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},$n=[],rr=0,iu=0;function Il(){for(var e=rr,n=iu=rr=0;n<e;){var i=$n[n];$n[n++]=null;var c=$n[n];$n[n++]=null;var h=$n[n];$n[n++]=null;var g=$n[n];if($n[n++]=null,c!==null&&h!==null){var y=c.pending;y===null?h.next=h:(h.next=y.next,y.next=h),c.pending=h}g!==0&&bm(i,h,g)}}function Bl(e,n,i,c){$n[rr++]=e,$n[rr++]=n,$n[rr++]=i,$n[rr++]=c,iu|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function lu(e,n,i,c){return Bl(e,n,i,c),ql(e)}function js(e,n){return Bl(e,null,null,n),ql(e)}function bm(e,n,i){e.lanes|=i;var c=e.alternate;c!==null&&(c.lanes|=i);for(var h=!1,g=e.return;g!==null;)g.childLanes|=i,c=g.alternate,c!==null&&(c.childLanes|=i),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&n!==null&&(h=31-_e(i),e=g.hiddenUpdates,c=e[h],c===null?e[h]=[n]:c.push(n),n.lane=i|536870912),g):null}function ql(e){if(50<Hi)throw Hi=0,gd=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ir={};function Wy(e,n,i,c){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,n,i,c){return new Wy(e,n,i,c)}function ou(e){return e=e.prototype,!(!e||!e.isReactComponent)}function va(e,n){var i=e.alternate;return i===null?(i=Nn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function vm(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Hl(e,n,i,c,h,g){var y=0;if(c=e,typeof e=="function")ou(e)&&(y=1);else if(typeof e=="string")y=tj(e,i,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=Nn(31,i,n,h),e.elementType=Z,e.lanes=g,e;case S:return Ns(i.children,h,g,n);case j:y=8,h|=24;break;case k:return e=Nn(12,i,n,h|2),e.elementType=k,e.lanes=g,e;case M:return e=Nn(13,i,n,h),e.elementType=M,e.lanes=g,e;case L:return e=Nn(19,i,n,h),e.elementType=L,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:y=10;break e;case _:y=9;break e;case q:y=11;break e;case U:y=14;break e;case W:y=16,c=null;break e}y=29,i=Error(l(130,e===null?"null":typeof e,"")),c=null}return n=Nn(y,i,n,h),n.elementType=e,n.type=c,n.lanes=g,n}function Ns(e,n,i,c){return e=Nn(7,e,c,n),e.lanes=i,e}function cu(e,n,i){return e=Nn(6,e,null,n),e.lanes=i,e}function ym(e){var n=Nn(18,null,null,0);return n.stateNode=e,n}function uu(e,n,i){return n=Nn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var wm=new WeakMap;function zn(e,n){if(typeof e=="object"&&e!==null){var i=wm.get(e);return i!==void 0?i:(n={value:e,source:n,stack:le(n)},wm.set(e,n),n)}return{value:e,source:n,stack:le(n)}}var lr=[],or=0,Vl=null,ji=0,Pn=[],Un=0,Fa=null,ia=1,la="";function ya(e,n){lr[or++]=ji,lr[or++]=Vl,Vl=e,ji=n}function jm(e,n,i){Pn[Un++]=ia,Pn[Un++]=la,Pn[Un++]=Fa,Fa=e;var c=ia;e=la;var h=32-_e(c)-1;c&=~(1<<h),i+=1;var g=32-_e(n)+h;if(30<g){var y=h-h%5;g=(c&(1<<y)-1).toString(32),c>>=y,h-=y,ia=1<<32-_e(n)+h|i<<h|c,la=g+e}else ia=1<<g|i<<h|c,la=e}function du(e){e.return!==null&&(ya(e,1),jm(e,1,0))}function fu(e){for(;e===Vl;)Vl=lr[--or],lr[or]=null,ji=lr[--or],lr[or]=null;for(;e===Fa;)Fa=Pn[--Un],Pn[Un]=null,la=Pn[--Un],Pn[Un]=null,ia=Pn[--Un],Pn[Un]=null}function Nm(e,n){Pn[Un++]=ia,Pn[Un++]=la,Pn[Un++]=Fa,ia=n.id,la=n.overflow,Fa=e}var nn=null,Et=null,lt=!1,Ga=null,In=!1,hu=Error(l(519));function Ya(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ni(zn(n,e)),hu}function Sm(e){var n=e.stateNode,i=e.type,c=e.memoizedProps;switch(n[tn]=e,n[hn]=c,i){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(i=0;i<Fi.length;i++)st(Fi[i],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":st("invalid",n),zh(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":st("invalid",n);break;case"textarea":st("invalid",n),Uh(n,c.value,c.defaultValue,c.children)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||c.suppressHydrationWarning===!0||Bg(n.textContent,i)?(c.popover!=null&&(st("beforetoggle",n),st("toggle",n)),c.onScroll!=null&&st("scroll",n),c.onScrollEnd!=null&&st("scrollend",n),c.onClick!=null&&(n.onclick=xa),n=!0):n=!1,n||Ya(e,!0)}function _m(e){for(nn=e.return;nn;)switch(nn.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:nn=nn.return}}function cr(e){if(e!==nn)return!1;if(!lt)return _m(e),lt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Od(e.type,e.memoizedProps)),i=!i),i&&Et&&Ya(e),_m(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Et=Wg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Et=Wg(e)}else n===27?(n=Et,ls(e.type)?(e=$d,$d=null,Et=e):Et=n):Et=nn?qn(e.stateNode.nextSibling):null;return!0}function Ss(){Et=nn=null,lt=!1}function mu(){var e=Ga;return e!==null&&(bn===null?bn=e:bn.push.apply(bn,e),Ga=null),e}function Ni(e){Ga===null?Ga=[e]:Ga.push(e)}var pu=z(null),_s=null,wa=null;function Ka(e,n,i){se(pu,n._currentValue),n._currentValue=i}function ja(e){e._currentValue=pu.current,J(pu)}function gu(e,n,i){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===i)break;e=e.return}}function xu(e,n,i,c){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var y=h.child;g=g.firstContext;e:for(;g!==null;){var A=g;g=h;for(var B=0;B<n.length;B++)if(A.context===n[B]){g.lanes|=i,A=g.alternate,A!==null&&(A.lanes|=i),gu(g.return,i,e),c||(y=null);break e}g=A.next}}else if(h.tag===18){if(y=h.return,y===null)throw Error(l(341));y.lanes|=i,g=y.alternate,g!==null&&(g.lanes|=i),gu(y,i,e),y=null}else y=h.child;if(y!==null)y.return=h;else for(y=h;y!==null;){if(y===e){y=null;break}if(h=y.sibling,h!==null){h.return=y.return,y=h;break}y=y.return}h=y}}function ur(e,n,i,c){e=null;for(var h=n,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var y=h.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var A=h.type;jn(h.pendingProps.value,y.value)||(e!==null?e.push(A):e=[A])}}else if(h===De.current){if(y=h.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Wi):e=[Wi])}h=h.return}e!==null&&xu(n,e,i,c),n.flags|=262144}function Fl(e){for(e=e.firstContext;e!==null;){if(!jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){_s=e,wa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return Cm(_s,e)}function Gl(e,n){return _s===null&&Cs(e),Cm(e,n)}function Cm(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},wa===null){if(e===null)throw Error(l(308));wa=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else wa=wa.next=n;return i}var Xy=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Qy=s.unstable_scheduleCallback,Zy=s.unstable_NormalPriority,Ut={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bu(){return{controller:new Xy,data:new Map,refCount:0}}function Si(e){e.refCount--,e.refCount===0&&Qy(Zy,function(){e.controller.abort()})}var _i=null,vu=0,dr=0,fr=null;function ew(e,n){if(_i===null){var i=_i=[];vu=0,dr=jd(),fr={status:"pending",value:void 0,then:function(c){i.push(c)}}}return vu++,n.then(Em,Em),n}function Em(){if(--vu===0&&_i!==null){fr!==null&&(fr.status="fulfilled");var e=_i;_i=null,dr=0,fr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function tw(e,n){var i=[],c={status:"pending",value:null,reason:null,then:function(h){i.push(h)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var h=0;h<i.length;h++)(0,i[h])(n)},function(h){for(c.status="rejected",c.reason=h,h=0;h<i.length;h++)(0,i[h])(void 0)}),c}var Tm=C.S;C.S=function(e,n){dg=we(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&ew(e,n),Tm!==null&&Tm(e,n)};var Es=z(null);function yu(){var e=Es.current;return e!==null?e:_t.pooledCache}function Yl(e,n){n===null?se(Es,Es.current):se(Es,n.pool)}function km(){var e=yu();return e===null?null:{parent:Ut._currentValue,pool:e}}var hr=Error(l(460)),wu=Error(l(474)),Kl=Error(l(542)),Jl={then:function(){}};function Am(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Om(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(xa,xa),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Dm(e),e;default:if(typeof n.status=="string")n.then(xa,xa);else{if(e=_t,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=c}},function(c){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Dm(e),e}throw ks=n,hr}}function Ts(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ks=i,hr):i}}var ks=null;function Rm(){if(ks===null)throw Error(l(459));var e=ks;return ks=null,e}function Dm(e){if(e===hr||e===Kl)throw Error(l(483))}var mr=null,Ci=0;function Wl(e){var n=Ci;return Ci+=1,mr===null&&(mr=[]),Om(mr,e,n)}function Ei(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Xl(e,n){throw n.$$typeof===w?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Mm(e){function n(X,F){if(e){var ne=X.deletions;ne===null?(X.deletions=[F],X.flags|=16):ne.push(F)}}function i(X,F){if(!e)return null;for(;F!==null;)n(X,F),F=F.sibling;return null}function c(X){for(var F=new Map;X!==null;)X.key!==null?F.set(X.key,X):F.set(X.index,X),X=X.sibling;return F}function h(X,F){return X=va(X,F),X.index=0,X.sibling=null,X}function g(X,F,ne){return X.index=ne,e?(ne=X.alternate,ne!==null?(ne=ne.index,ne<F?(X.flags|=67108866,F):ne):(X.flags|=67108866,F)):(X.flags|=1048576,F)}function y(X){return e&&X.alternate===null&&(X.flags|=67108866),X}function A(X,F,ne,pe){return F===null||F.tag!==6?(F=cu(ne,X.mode,pe),F.return=X,F):(F=h(F,ne),F.return=X,F)}function B(X,F,ne,pe){var qe=ne.type;return qe===S?de(X,F,ne.props.children,pe,ne.key):F!==null&&(F.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===W&&Ts(qe)===F.type)?(F=h(F,ne.props),Ei(F,ne),F.return=X,F):(F=Hl(ne.type,ne.key,ne.props,null,X.mode,pe),Ei(F,ne),F.return=X,F)}function ae(X,F,ne,pe){return F===null||F.tag!==4||F.stateNode.containerInfo!==ne.containerInfo||F.stateNode.implementation!==ne.implementation?(F=uu(ne,X.mode,pe),F.return=X,F):(F=h(F,ne.children||[]),F.return=X,F)}function de(X,F,ne,pe,qe){return F===null||F.tag!==7?(F=Ns(ne,X.mode,pe,qe),F.return=X,F):(F=h(F,ne),F.return=X,F)}function ge(X,F,ne){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=cu(""+F,X.mode,ne),F.return=X,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case N:return ne=Hl(F.type,F.key,F.props,null,X.mode,ne),Ei(ne,F),ne.return=X,ne;case T:return F=uu(F,X.mode,ne),F.return=X,F;case W:return F=Ts(F),ge(X,F,ne)}if(G(F)||Q(F))return F=Ns(F,X.mode,ne,null),F.return=X,F;if(typeof F.then=="function")return ge(X,Wl(F),ne);if(F.$$typeof===O)return ge(X,Gl(X,F),ne);Xl(X,F)}return null}function re(X,F,ne,pe){var qe=F!==null?F.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return qe!==null?null:A(X,F,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ne.key===qe?B(X,F,ne,pe):null;case T:return ne.key===qe?ae(X,F,ne,pe):null;case W:return ne=Ts(ne),re(X,F,ne,pe)}if(G(ne)||Q(ne))return qe!==null?null:de(X,F,ne,pe,null);if(typeof ne.then=="function")return re(X,F,Wl(ne),pe);if(ne.$$typeof===O)return re(X,F,Gl(X,ne),pe);Xl(X,ne)}return null}function oe(X,F,ne,pe,qe){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(ne)||null,A(F,X,""+pe,qe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case N:return X=X.get(pe.key===null?ne:pe.key)||null,B(F,X,pe,qe);case T:return X=X.get(pe.key===null?ne:pe.key)||null,ae(F,X,pe,qe);case W:return pe=Ts(pe),oe(X,F,ne,pe,qe)}if(G(pe)||Q(pe))return X=X.get(ne)||null,de(F,X,pe,qe,null);if(typeof pe.then=="function")return oe(X,F,ne,Wl(pe),qe);if(pe.$$typeof===O)return oe(X,F,ne,Gl(F,pe),qe);Xl(F,pe)}return null}function Le(X,F,ne,pe){for(var qe=null,ft=null,ze=F,nt=F=0,it=null;ze!==null&&nt<ne.length;nt++){ze.index>nt?(it=ze,ze=null):it=ze.sibling;var ht=re(X,ze,ne[nt],pe);if(ht===null){ze===null&&(ze=it);break}e&&ze&&ht.alternate===null&&n(X,ze),F=g(ht,F,nt),ft===null?qe=ht:ft.sibling=ht,ft=ht,ze=it}if(nt===ne.length)return i(X,ze),lt&&ya(X,nt),qe;if(ze===null){for(;nt<ne.length;nt++)ze=ge(X,ne[nt],pe),ze!==null&&(F=g(ze,F,nt),ft===null?qe=ze:ft.sibling=ze,ft=ze);return lt&&ya(X,nt),qe}for(ze=c(ze);nt<ne.length;nt++)it=oe(ze,X,nt,ne[nt],pe),it!==null&&(e&&it.alternate!==null&&ze.delete(it.key===null?nt:it.key),F=g(it,F,nt),ft===null?qe=it:ft.sibling=it,ft=it);return e&&ze.forEach(function(fs){return n(X,fs)}),lt&&ya(X,nt),qe}function Ke(X,F,ne,pe){if(ne==null)throw Error(l(151));for(var qe=null,ft=null,ze=F,nt=F=0,it=null,ht=ne.next();ze!==null&&!ht.done;nt++,ht=ne.next()){ze.index>nt?(it=ze,ze=null):it=ze.sibling;var fs=re(X,ze,ht.value,pe);if(fs===null){ze===null&&(ze=it);break}e&&ze&&fs.alternate===null&&n(X,ze),F=g(fs,F,nt),ft===null?qe=fs:ft.sibling=fs,ft=fs,ze=it}if(ht.done)return i(X,ze),lt&&ya(X,nt),qe;if(ze===null){for(;!ht.done;nt++,ht=ne.next())ht=ge(X,ht.value,pe),ht!==null&&(F=g(ht,F,nt),ft===null?qe=ht:ft.sibling=ht,ft=ht);return lt&&ya(X,nt),qe}for(ze=c(ze);!ht.done;nt++,ht=ne.next())ht=oe(ze,X,nt,ht.value,pe),ht!==null&&(e&&ht.alternate!==null&&ze.delete(ht.key===null?nt:ht.key),F=g(ht,F,nt),ft===null?qe=ht:ft.sibling=ht,ft=ht);return e&&ze.forEach(function(fj){return n(X,fj)}),lt&&ya(X,nt),qe}function St(X,F,ne,pe){if(typeof ne=="object"&&ne!==null&&ne.type===S&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:e:{for(var qe=ne.key;F!==null;){if(F.key===qe){if(qe=ne.type,qe===S){if(F.tag===7){i(X,F.sibling),pe=h(F,ne.props.children),pe.return=X,X=pe;break e}}else if(F.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===W&&Ts(qe)===F.type){i(X,F.sibling),pe=h(F,ne.props),Ei(pe,ne),pe.return=X,X=pe;break e}i(X,F);break}else n(X,F);F=F.sibling}ne.type===S?(pe=Ns(ne.props.children,X.mode,pe,ne.key),pe.return=X,X=pe):(pe=Hl(ne.type,ne.key,ne.props,null,X.mode,pe),Ei(pe,ne),pe.return=X,X=pe)}return y(X);case T:e:{for(qe=ne.key;F!==null;){if(F.key===qe)if(F.tag===4&&F.stateNode.containerInfo===ne.containerInfo&&F.stateNode.implementation===ne.implementation){i(X,F.sibling),pe=h(F,ne.children||[]),pe.return=X,X=pe;break e}else{i(X,F);break}else n(X,F);F=F.sibling}pe=uu(ne,X.mode,pe),pe.return=X,X=pe}return y(X);case W:return ne=Ts(ne),St(X,F,ne,pe)}if(G(ne))return Le(X,F,ne,pe);if(Q(ne)){if(qe=Q(ne),typeof qe!="function")throw Error(l(150));return ne=qe.call(ne),Ke(X,F,ne,pe)}if(typeof ne.then=="function")return St(X,F,Wl(ne),pe);if(ne.$$typeof===O)return St(X,F,Gl(X,ne),pe);Xl(X,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,F!==null&&F.tag===6?(i(X,F.sibling),pe=h(F,ne),pe.return=X,X=pe):(i(X,F),pe=cu(ne,X.mode,pe),pe.return=X,X=pe),y(X)):i(X,F)}return function(X,F,ne,pe){try{Ci=0;var qe=St(X,F,ne,pe);return mr=null,qe}catch(ze){if(ze===hr||ze===Kl)throw ze;var ft=Nn(29,ze,null,X.mode);return ft.lanes=pe,ft.return=X,ft}finally{}}}var As=Mm(!0),Lm=Mm(!1),Ja=!1;function ju(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Wa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(e,n,i){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(mt&2)!==0){var h=c.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),c.pending=n,n=ql(e),bm(e,null,i),n}return Bl(e,c,n,i),ql(e)}function Ti(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,Fs(e,i)}}function Su(e,n){var i=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var h=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?h=g=y:g=g.next=y,i=i.next}while(i!==null);g===null?h=g=n:g=g.next=n}else h=g=n;i={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var _u=!1;function ki(){if(_u){var e=fr;if(e!==null)throw e}}function Ai(e,n,i,c){_u=!1;var h=e.updateQueue;Ja=!1;var g=h.firstBaseUpdate,y=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var B=A,ae=B.next;B.next=null,y===null?g=ae:y.next=ae,y=B;var de=e.alternate;de!==null&&(de=de.updateQueue,A=de.lastBaseUpdate,A!==y&&(A===null?de.firstBaseUpdate=ae:A.next=ae,de.lastBaseUpdate=B))}if(g!==null){var ge=h.baseState;y=0,de=ae=B=null,A=g;do{var re=A.lane&-536870913,oe=re!==A.lane;if(oe?(rt&re)===re:(c&re)===re){re!==0&&re===dr&&(_u=!0),de!==null&&(de=de.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Le=e,Ke=A;re=n;var St=i;switch(Ke.tag){case 1:if(Le=Ke.payload,typeof Le=="function"){ge=Le.call(St,ge,re);break e}ge=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Ke.payload,re=typeof Le=="function"?Le.call(St,ge,re):Le,re==null)break e;ge=v({},ge,re);break e;case 2:Ja=!0}}re=A.callback,re!==null&&(e.flags|=64,oe&&(e.flags|=8192),oe=h.callbacks,oe===null?h.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:A.tag,payload:A.payload,callback:A.callback,next:null},de===null?(ae=de=oe,B=ge):de=de.next=oe,y|=re;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;oe=A,A=oe.next,oe.next=null,h.lastBaseUpdate=oe,h.shared.pending=null}}while(!0);de===null&&(B=ge),h.baseState=B,h.firstBaseUpdate=ae,h.lastBaseUpdate=de,g===null&&(h.shared.lanes=0),ns|=y,e.lanes=y,e.memoizedState=ge}}function $m(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function zm(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)$m(i[e],n)}var pr=z(null),Ql=z(0);function Pm(e,n){e=Oa,se(Ql,e),se(pr,n),Oa=e|n.baseLanes}function Cu(){se(Ql,Oa),se(pr,pr.current)}function Eu(){Oa=Ql.current,J(pr),J(Ql)}var Sn=z(null),Bn=null;function Qa(e){var n=e.alternate;se(zt,zt.current&1),se(Sn,e),Bn===null&&(n===null||pr.current!==null||n.memoizedState!==null)&&(Bn=e)}function Tu(e){se(zt,zt.current),se(Sn,e),Bn===null&&(Bn=e)}function Um(e){e.tag===22?(se(zt,zt.current),se(Sn,e),Bn===null&&(Bn=e)):Za()}function Za(){se(zt,zt.current),se(Sn,Sn.current)}function _n(e){J(Sn),Bn===e&&(Bn=null),J(zt)}var zt=z(0);function Zl(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Md(i)||Ld(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Na=0,tt=null,jt=null,It=null,eo=!1,gr=!1,Os=!1,to=0,Oi=0,xr=null,nw=0;function Mt(){throw Error(l(321))}function ku(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!jn(e[i],n[i]))return!1;return!0}function Au(e,n,i,c,h,g){return Na=g,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,C.H=e===null||e.memoizedState===null?jp:Fu,Os=!1,g=i(c,h),Os=!1,gr&&(g=Bm(n,i,c,h)),Im(e),g}function Im(e){C.H=Mi;var n=jt!==null&&jt.next!==null;if(Na=0,It=jt=tt=null,eo=!1,Oi=0,xr=null,n)throw Error(l(300));e===null||Bt||(e=e.dependencies,e!==null&&Fl(e)&&(Bt=!0))}function Bm(e,n,i,c){tt=e;var h=0;do{if(gr&&(xr=null),Oi=0,gr=!1,25<=h)throw Error(l(301));if(h+=1,It=jt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}C.H=Np,g=n(i,c)}while(gr);return g}function aw(){var e=C.H,n=e.useState()[0];return n=typeof n.then=="function"?Ri(n):n,e=e.useState()[0],(jt!==null?jt.memoizedState:null)!==e&&(tt.flags|=1024),n}function Ou(){var e=to!==0;return to=0,e}function Ru(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Du(e){if(eo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}eo=!1}Na=0,It=jt=tt=null,gr=!1,Oi=to=0,xr=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?tt.memoizedState=It=e:It=It.next=e,It}function Pt(){if(jt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=jt.next;var n=It===null?tt.memoizedState:It.next;if(n!==null)It=n,jt=e;else{if(e===null)throw tt.alternate===null?Error(l(467)):Error(l(310));jt=e,e={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},It===null?tt.memoizedState=It=e:It=It.next=e}return It}function no(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ri(e){var n=Oi;return Oi+=1,xr===null&&(xr=[]),e=Om(xr,e,n),n=tt,(It===null?n.memoizedState:It.next)===null&&(n=n.alternate,C.H=n===null||n.memoizedState===null?jp:Fu),e}function ao(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ri(e);if(e.$$typeof===O)return an(e)}throw Error(l(438,String(e)))}function Mu(e){var n=null,i=tt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var c=tt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=no(),tt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),c=0;c<e;c++)i[c]=I;return n.index++,i}function Sa(e,n){return typeof n=="function"?n(e):n}function so(e){var n=Pt();return Lu(n,jt,e)}function Lu(e,n,i){var c=e.queue;if(c===null)throw Error(l(311));c.lastRenderedReducer=i;var h=e.baseQueue,g=c.pending;if(g!==null){if(h!==null){var y=h.next;h.next=g.next,g.next=y}n.baseQueue=h=g,c.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{n=h.next;var A=y=null,B=null,ae=n,de=!1;do{var ge=ae.lane&-536870913;if(ge!==ae.lane?(rt&ge)===ge:(Na&ge)===ge){var re=ae.revertLane;if(re===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ge===dr&&(de=!0);else if((Na&re)===re){ae=ae.next,re===dr&&(de=!0);continue}else ge={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},B===null?(A=B=ge,y=g):B=B.next=ge,tt.lanes|=re,ns|=re;ge=ae.action,Os&&i(g,ge),g=ae.hasEagerState?ae.eagerState:i(g,ge)}else re={lane:ge,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},B===null?(A=B=re,y=g):B=B.next=re,tt.lanes|=ge,ns|=ge;ae=ae.next}while(ae!==null&&ae!==n);if(B===null?y=g:B.next=A,!jn(g,e.memoizedState)&&(Bt=!0,de&&(i=fr,i!==null)))throw i;e.memoizedState=g,e.baseState=y,e.baseQueue=B,c.lastRenderedState=g}return h===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function $u(e){var n=Pt(),i=n.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=e;var c=i.dispatch,h=i.pending,g=n.memoizedState;if(h!==null){i.pending=null;var y=h=h.next;do g=e(g,y.action),y=y.next;while(y!==h);jn(g,n.memoizedState)||(Bt=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),i.lastRenderedState=g}return[g,c]}function qm(e,n,i){var c=tt,h=Pt(),g=lt;if(g){if(i===void 0)throw Error(l(407));i=i()}else i=n();var y=!jn((jt||h).memoizedState,i);if(y&&(h.memoizedState=i,Bt=!0),h=h.queue,Uu(Fm.bind(null,c,h,e),[e]),h.getSnapshot!==n||y||It!==null&&It.memoizedState.tag&1){if(c.flags|=2048,br(9,{destroy:void 0},Vm.bind(null,c,h,i,n),null),_t===null)throw Error(l(349));g||(Na&127)!==0||Hm(c,n,i)}return i}function Hm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=tt.updateQueue,n===null?(n=no(),tt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Vm(e,n,i,c){n.value=i,n.getSnapshot=c,Gm(n)&&Ym(e)}function Fm(e,n,i){return i(function(){Gm(n)&&Ym(e)})}function Gm(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!jn(e,i)}catch{return!0}}function Ym(e){var n=js(e,2);n!==null&&vn(n,e,2)}function zu(e){var n=un();if(typeof e=="function"){var i=e;if(e=i(),Os){be(!0);try{i()}finally{be(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:e},n}function Km(e,n,i,c){return e.baseState=i,Lu(e,jt,typeof c=="function"?c:Sa)}function sw(e,n,i,c,h){if(lo(e))throw Error(l(485));if(e=n.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){g.listeners.push(y)}};C.T!==null?i(!0):g.isTransition=!1,c(g),i=n.pending,i===null?(g.next=n.pending=g,Jm(n,g)):(g.next=i.next,n.pending=i.next=g)}}function Jm(e,n){var i=n.action,c=n.payload,h=e.state;if(n.isTransition){var g=C.T,y={};C.T=y;try{var A=i(h,c),B=C.S;B!==null&&B(y,A),Wm(e,n,A)}catch(ae){Pu(e,n,ae)}finally{g!==null&&y.types!==null&&(g.types=y.types),C.T=g}}else try{g=i(h,c),Wm(e,n,g)}catch(ae){Pu(e,n,ae)}}function Wm(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){Xm(e,n,c)},function(c){return Pu(e,n,c)}):Xm(e,n,i)}function Xm(e,n,i){n.status="fulfilled",n.value=i,Qm(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Jm(e,i)))}function Pu(e,n,i){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=i,Qm(n),n=n.next;while(n!==c)}e.action=null}function Qm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Zm(e,n){return n}function ep(e,n){if(lt){var i=_t.formState;if(i!==null){e:{var c=tt;if(lt){if(Et){t:{for(var h=Et,g=In;h.nodeType!==8;){if(!g){h=null;break t}if(h=qn(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Et=qn(h.nextSibling),c=h.data==="F!";break e}}Ya(c)}c=!1}c&&(n=i[0])}}return i=un(),i.memoizedState=i.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zm,lastRenderedState:n},i.queue=c,i=vp.bind(null,tt,c),c.dispatch=i,c=zu(!1),g=Vu.bind(null,tt,!1,c.queue),c=un(),h={state:n,dispatch:null,action:e,pending:null},c.queue=h,i=sw.bind(null,tt,h,g,i),h.dispatch=i,c.memoizedState=e,[n,i,!1]}function tp(e){var n=Pt();return np(n,jt,e)}function np(e,n,i){if(n=Lu(e,n,Zm)[0],e=so(Sa)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Ri(n)}catch(y){throw y===hr?Kl:y}else c=n;n=Pt();var h=n.queue,g=h.dispatch;return i!==n.memoizedState&&(tt.flags|=2048,br(9,{destroy:void 0},rw.bind(null,h,i),null)),[c,g,e]}function rw(e,n){e.action=n}function ap(e){var n=Pt(),i=jt;if(i!==null)return np(n,i,e);Pt(),n=n.memoizedState,i=Pt();var c=i.queue.dispatch;return i.memoizedState=e,[n,c,!1]}function br(e,n,i,c){return e={tag:e,create:i,deps:c,inst:n,next:null},n=tt.updateQueue,n===null&&(n=no(),tt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(c=i.next,i.next=e,e.next=c,n.lastEffect=e),e}function sp(){return Pt().memoizedState}function ro(e,n,i,c){var h=un();tt.flags|=e,h.memoizedState=br(1|n,{destroy:void 0},i,c===void 0?null:c)}function io(e,n,i,c){var h=Pt();c=c===void 0?null:c;var g=h.memoizedState.inst;jt!==null&&c!==null&&ku(c,jt.memoizedState.deps)?h.memoizedState=br(n,g,i,c):(tt.flags|=e,h.memoizedState=br(1|n,g,i,c))}function rp(e,n){ro(8390656,8,e,n)}function Uu(e,n){io(2048,8,e,n)}function iw(e){tt.flags|=4;var n=tt.updateQueue;if(n===null)n=no(),tt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function ip(e){var n=Pt().memoizedState;return iw({ref:n,nextImpl:e}),function(){if((mt&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function lp(e,n){return io(4,2,e,n)}function op(e,n){return io(4,4,e,n)}function cp(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function up(e,n,i){i=i!=null?i.concat([e]):null,io(4,4,cp.bind(null,n,e),i)}function Iu(){}function dp(e,n){var i=Pt();n=n===void 0?null:n;var c=i.memoizedState;return n!==null&&ku(n,c[1])?c[0]:(i.memoizedState=[e,n],e)}function fp(e,n){var i=Pt();n=n===void 0?null:n;var c=i.memoizedState;if(n!==null&&ku(n,c[1]))return c[0];if(c=e(),Os){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[c,n],c}function Bu(e,n,i){return i===void 0||(Na&1073741824)!==0&&(rt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=hg(),tt.lanes|=e,ns|=e,i)}function hp(e,n,i,c){return jn(i,n)?i:pr.current!==null?(e=Bu(e,i,c),jn(e,n)||(Bt=!0),e):(Na&42)===0||(Na&1073741824)!==0&&(rt&261930)===0?(Bt=!0,e.memoizedState=i):(e=hg(),tt.lanes|=e,ns|=e,n)}function mp(e,n,i,c,h){var g=R.p;R.p=g!==0&&8>g?g:8;var y=C.T,A={};C.T=A,Vu(e,!1,n,i);try{var B=h(),ae=C.S;if(ae!==null&&ae(A,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var de=tw(B,c);Di(e,n,de,Tn(e))}else Di(e,n,c,Tn(e))}catch(ge){Di(e,n,{then:function(){},status:"rejected",reason:ge},Tn())}finally{R.p=g,y!==null&&A.types!==null&&(y.types=A.types),C.T=y}}function lw(){}function qu(e,n,i,c){if(e.tag!==5)throw Error(l(476));var h=pp(e).queue;mp(e,h,n,Y,i===null?lw:function(){return gp(e),i(c)})}function pp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:Y},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function gp(e){var n=pp(e);n.next===null&&(n=e.alternate.memoizedState),Di(e,n.next.queue,{},Tn())}function Hu(){return an(Wi)}function xp(){return Pt().memoizedState}function bp(){return Pt().memoizedState}function ow(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=Tn();e=Wa(i);var c=Xa(n,e,i);c!==null&&(vn(c,n,i),Ti(c,n,i)),n={cache:bu()},e.payload=n;return}n=n.return}}function cw(e,n,i){var c=Tn();i={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},lo(e)?yp(n,i):(i=lu(e,n,i,c),i!==null&&(vn(i,e,c),wp(i,n,c)))}function vp(e,n,i){var c=Tn();Di(e,n,i,c)}function Di(e,n,i,c){var h={lane:c,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(lo(e))yp(n,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var y=n.lastRenderedState,A=g(y,i);if(h.hasEagerState=!0,h.eagerState=A,jn(A,y))return Bl(e,n,h,0),_t===null&&Il(),!1}catch{}finally{}if(i=lu(e,n,h,c),i!==null)return vn(i,e,c),wp(i,n,c),!0}return!1}function Vu(e,n,i,c){if(c={lane:2,revertLane:jd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},lo(e)){if(n)throw Error(l(479))}else n=lu(e,i,c,2),n!==null&&vn(n,e,2)}function lo(e){var n=e.alternate;return e===tt||n!==null&&n===tt}function yp(e,n){gr=eo=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function wp(e,n,i){if((i&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,i|=c,n.lanes=i,Fs(e,i)}}var Mi={readContext:an,use:ao,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Mi.useEffectEvent=Mt;var jp={readContext:an,use:ao,useCallback:function(e,n){return un().memoizedState=[e,n===void 0?null:n],e},useContext:an,useEffect:rp,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,ro(4194308,4,cp.bind(null,n,e),i)},useLayoutEffect:function(e,n){return ro(4194308,4,e,n)},useInsertionEffect:function(e,n){ro(4,2,e,n)},useMemo:function(e,n){var i=un();n=n===void 0?null:n;var c=e();if(Os){be(!0);try{e()}finally{be(!1)}}return i.memoizedState=[c,n],c},useReducer:function(e,n,i){var c=un();if(i!==void 0){var h=i(n);if(Os){be(!0);try{i(n)}finally{be(!1)}}}else h=n;return c.memoizedState=c.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},c.queue=e,e=e.dispatch=cw.bind(null,tt,e),[c.memoizedState,e]},useRef:function(e){var n=un();return e={current:e},n.memoizedState=e},useState:function(e){e=zu(e);var n=e.queue,i=vp.bind(null,tt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Iu,useDeferredValue:function(e,n){var i=un();return Bu(i,e,n)},useTransition:function(){var e=zu(!1);return e=mp.bind(null,tt,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var c=tt,h=un();if(lt){if(i===void 0)throw Error(l(407));i=i()}else{if(i=n(),_t===null)throw Error(l(349));(rt&127)!==0||Hm(c,n,i)}h.memoizedState=i;var g={value:i,getSnapshot:n};return h.queue=g,rp(Fm.bind(null,c,g,e),[e]),c.flags|=2048,br(9,{destroy:void 0},Vm.bind(null,c,g,i,n),null),i},useId:function(){var e=un(),n=_t.identifierPrefix;if(lt){var i=la,c=ia;i=(c&~(1<<32-_e(c)-1)).toString(32)+i,n="_"+n+"R_"+i,i=to++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=nw++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Hu,useFormState:ep,useActionState:ep,useOptimistic:function(e){var n=un();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=Vu.bind(null,tt,!0,i),i.dispatch=n,[e,n]},useMemoCache:Mu,useCacheRefresh:function(){return un().memoizedState=ow.bind(null,tt)},useEffectEvent:function(e){var n=un(),i={impl:e};return n.memoizedState=i,function(){if((mt&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Fu={readContext:an,use:ao,useCallback:dp,useContext:an,useEffect:Uu,useImperativeHandle:up,useInsertionEffect:lp,useLayoutEffect:op,useMemo:fp,useReducer:so,useRef:sp,useState:function(){return so(Sa)},useDebugValue:Iu,useDeferredValue:function(e,n){var i=Pt();return hp(i,jt.memoizedState,e,n)},useTransition:function(){var e=so(Sa)[0],n=Pt().memoizedState;return[typeof e=="boolean"?e:Ri(e),n]},useSyncExternalStore:qm,useId:xp,useHostTransitionStatus:Hu,useFormState:tp,useActionState:tp,useOptimistic:function(e,n){var i=Pt();return Km(i,jt,e,n)},useMemoCache:Mu,useCacheRefresh:bp};Fu.useEffectEvent=ip;var Np={readContext:an,use:ao,useCallback:dp,useContext:an,useEffect:Uu,useImperativeHandle:up,useInsertionEffect:lp,useLayoutEffect:op,useMemo:fp,useReducer:$u,useRef:sp,useState:function(){return $u(Sa)},useDebugValue:Iu,useDeferredValue:function(e,n){var i=Pt();return jt===null?Bu(i,e,n):hp(i,jt.memoizedState,e,n)},useTransition:function(){var e=$u(Sa)[0],n=Pt().memoizedState;return[typeof e=="boolean"?e:Ri(e),n]},useSyncExternalStore:qm,useId:xp,useHostTransitionStatus:Hu,useFormState:ap,useActionState:ap,useOptimistic:function(e,n){var i=Pt();return jt!==null?Km(i,jt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:bp};Np.useEffectEvent=ip;function Gu(e,n,i,c){n=e.memoizedState,i=i(c,n),i=i==null?n:v({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Yu={enqueueSetState:function(e,n,i){e=e._reactInternals;var c=Tn(),h=Wa(c);h.payload=n,i!=null&&(h.callback=i),n=Xa(e,h,c),n!==null&&(vn(n,e,c),Ti(n,e,c))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var c=Tn(),h=Wa(c);h.tag=1,h.payload=n,i!=null&&(h.callback=i),n=Xa(e,h,c),n!==null&&(vn(n,e,c),Ti(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=Tn(),c=Wa(i);c.tag=2,n!=null&&(c.callback=n),n=Xa(e,c,i),n!==null&&(vn(n,e,i),Ti(n,e,i))}};function Sp(e,n,i,c,h,g,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,g,y):n.prototype&&n.prototype.isPureReactComponent?!yi(i,c)||!yi(h,g):!0}function _p(e,n,i,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,c),n.state!==e&&Yu.enqueueReplaceState(n,n.state,null)}function Rs(e,n){var i=n;if("ref"in n){i={};for(var c in n)c!=="ref"&&(i[c]=n[c])}if(e=e.defaultProps){i===n&&(i=v({},i));for(var h in e)i[h]===void 0&&(i[h]=e[h])}return i}function Cp(e){Ul(e)}function Ep(e){console.error(e)}function Tp(e){Ul(e)}function oo(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function kp(e,n,i){try{var c=e.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ku(e,n,i){return i=Wa(i),i.tag=3,i.payload={element:null},i.callback=function(){oo(e,n)},i}function Ap(e){return e=Wa(e),e.tag=3,e}function Op(e,n,i,c){var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;e.payload=function(){return h(g)},e.callback=function(){kp(n,i,c)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){kp(n,i,c),typeof h!="function"&&(as===null?as=new Set([this]):as.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function uw(e,n,i,c,h){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=i.alternate,n!==null&&ur(n,i,h,!0),i=Sn.current,i!==null){switch(i.tag){case 31:case 13:return Bn===null?wo():i.alternate===null&&Lt===0&&(Lt=3),i.flags&=-257,i.flags|=65536,i.lanes=h,c===Jl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([c]):n.add(c),vd(e,c,h)),!1;case 22:return i.flags|=65536,c===Jl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([c]):i.add(c)),vd(e,c,h)),!1}throw Error(l(435,i.tag))}return vd(e,c,h),wo(),!1}if(lt)return n=Sn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,c!==hu&&(e=Error(l(422),{cause:c}),Ni(zn(e,i)))):(c!==hu&&(n=Error(l(423),{cause:c}),Ni(zn(n,i))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,c=zn(c,i),h=Ku(e.stateNode,c,h),Su(e,h),Lt!==4&&(Lt=2)),!1;var g=Error(l(520),{cause:c});if(g=zn(g,i),qi===null?qi=[g]:qi.push(g),Lt!==4&&(Lt=2),n===null)return!0;c=zn(c,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=h&-h,i.lanes|=e,e=Ku(i.stateNode,c,e),Su(i,e),!1;case 1:if(n=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(as===null||!as.has(g))))return i.flags|=65536,h&=-h,i.lanes|=h,h=Ap(h),Op(h,e,i,c),Su(i,h),!1}i=i.return}while(i!==null);return!1}var Ju=Error(l(461)),Bt=!1;function sn(e,n,i,c){n.child=e===null?Lm(n,null,i,c):As(n,e.child,i,c)}function Rp(e,n,i,c,h){i=i.render;var g=n.ref;if("ref"in c){var y={};for(var A in c)A!=="ref"&&(y[A]=c[A])}else y=c;return Cs(n),c=Au(e,n,i,y,g,h),A=Ou(),e!==null&&!Bt?(Ru(e,n,h),_a(e,n,h)):(lt&&A&&du(n),n.flags|=1,sn(e,n,c,h),n.child)}function Dp(e,n,i,c,h){if(e===null){var g=i.type;return typeof g=="function"&&!ou(g)&&g.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=g,Mp(e,n,g,c,h)):(e=Hl(i.type,null,c,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!ad(e,h)){var y=g.memoizedProps;if(i=i.compare,i=i!==null?i:yi,i(y,c)&&e.ref===n.ref)return _a(e,n,h)}return n.flags|=1,e=va(g,c),e.ref=n.ref,e.return=n,n.child=e}function Mp(e,n,i,c,h){if(e!==null){var g=e.memoizedProps;if(yi(g,c)&&e.ref===n.ref)if(Bt=!1,n.pendingProps=c=g,ad(e,h))(e.flags&131072)!==0&&(Bt=!0);else return n.lanes=e.lanes,_a(e,n,h)}return Wu(e,n,i,c,h)}function Lp(e,n,i,c){var h=c.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|i:i,e!==null){for(c=n.child=e.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~g}else c=0,n.child=null;return $p(e,n,g,i,c)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Yl(n,g!==null?g.cachePool:null),g!==null?Pm(n,g):Cu(),Um(n);else return c=n.lanes=536870912,$p(e,n,g!==null?g.baseLanes|i:i,i,c)}else g!==null?(Yl(n,g.cachePool),Pm(n,g),Za(),n.memoizedState=null):(e!==null&&Yl(n,null),Cu(),Za());return sn(e,n,h,i),n.child}function Li(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function $p(e,n,i,c,h){var g=yu();return g=g===null?null:{parent:Ut._currentValue,pool:g},n.memoizedState={baseLanes:i,cachePool:g},e!==null&&Yl(n,null),Cu(),Um(n),e!==null&&ur(e,n,c,!0),n.childLanes=h,null}function co(e,n){return n=fo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function zp(e,n,i){return As(n,e.child,null,i),e=co(n,n.pendingProps),e.flags|=2,_n(n),n.memoizedState=null,e}function dw(e,n,i){var c=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(lt){if(c.mode==="hidden")return e=co(n,c),n.lanes=536870912,Li(null,e);if(Tu(n),(e=Et)?(e=Jg(e,In),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},i=ym(e),i.return=n,n.child=i,nn=n,Et=null)):e=null,e===null)throw Ya(n);return n.lanes=536870912,null}return co(n,c)}var g=e.memoizedState;if(g!==null){var y=g.dehydrated;if(Tu(n),h)if(n.flags&256)n.flags&=-257,n=zp(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if(Bt||ur(e,n,i,!1),h=(i&e.childLanes)!==0,Bt||h){if(c=_t,c!==null&&(y=Tl(c,i),y!==0&&y!==g.retryLane))throw g.retryLane=y,js(e,y),vn(c,e,y),Ju;wo(),n=zp(e,n,i)}else e=g.treeContext,Et=qn(y.nextSibling),nn=n,lt=!0,Ga=null,In=!1,e!==null&&Nm(n,e),n=co(n,c),n.flags|=4096;return n}return e=va(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function uo(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function Wu(e,n,i,c,h){return Cs(n),i=Au(e,n,i,c,void 0,h),c=Ou(),e!==null&&!Bt?(Ru(e,n,h),_a(e,n,h)):(lt&&c&&du(n),n.flags|=1,sn(e,n,i,h),n.child)}function Pp(e,n,i,c,h,g){return Cs(n),n.updateQueue=null,i=Bm(n,c,i,h),Im(e),c=Ou(),e!==null&&!Bt?(Ru(e,n,g),_a(e,n,g)):(lt&&c&&du(n),n.flags|=1,sn(e,n,i,g),n.child)}function Up(e,n,i,c,h){if(Cs(n),n.stateNode===null){var g=ir,y=i.contextType;typeof y=="object"&&y!==null&&(g=an(y)),g=new i(c,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yu,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=c,g.state=n.memoizedState,g.refs={},ju(n),y=i.contextType,g.context=typeof y=="object"&&y!==null?an(y):ir,g.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Gu(n,i,y,c),g.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(y=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),y!==g.state&&Yu.enqueueReplaceState(g,g.state,null),Ai(n,c,g,h),ki(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){g=n.stateNode;var A=n.memoizedProps,B=Rs(i,A);g.props=B;var ae=g.context,de=i.contextType;y=ir,typeof de=="object"&&de!==null&&(y=an(de));var ge=i.getDerivedStateFromProps;de=typeof ge=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=n.pendingProps!==A,de||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||ae!==y)&&_p(n,g,c,y),Ja=!1;var re=n.memoizedState;g.state=re,Ai(n,c,g,h),ki(),ae=n.memoizedState,A||re!==ae||Ja?(typeof ge=="function"&&(Gu(n,i,ge,c),ae=n.memoizedState),(B=Ja||Sp(n,i,B,c,re,ae,y))?(de||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=ae),g.props=c,g.state=ae,g.context=y,c=B):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{g=n.stateNode,Nu(e,n),y=n.memoizedProps,de=Rs(i,y),g.props=de,ge=n.pendingProps,re=g.context,ae=i.contextType,B=ir,typeof ae=="object"&&ae!==null&&(B=an(ae)),A=i.getDerivedStateFromProps,(ae=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(y!==ge||re!==B)&&_p(n,g,c,B),Ja=!1,re=n.memoizedState,g.state=re,Ai(n,c,g,h),ki();var oe=n.memoizedState;y!==ge||re!==oe||Ja||e!==null&&e.dependencies!==null&&Fl(e.dependencies)?(typeof A=="function"&&(Gu(n,i,A,c),oe=n.memoizedState),(de=Ja||Sp(n,i,de,c,re,oe,B)||e!==null&&e.dependencies!==null&&Fl(e.dependencies))?(ae||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,oe,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,oe,B)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=oe),g.props=c,g.state=oe,g.context=B,c=de):(typeof g.componentDidUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&re===e.memoizedState||(n.flags|=1024),c=!1)}return g=c,uo(e,n),c=(n.flags&128)!==0,g||c?(g=n.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&c?(n.child=As(n,e.child,null,h),n.child=As(n,null,i,h)):sn(e,n,i,h),n.memoizedState=g.state,e=n.child):e=_a(e,n,h),e}function Ip(e,n,i,c){return Ss(),n.flags|=256,sn(e,n,i,c),n.child}var Xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qu(e){return{baseLanes:e,cachePool:km()}}function Zu(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=En),e}function Bp(e,n,i){var c=n.pendingProps,h=!1,g=(n.flags&128)!==0,y;if((y=g)||(y=e!==null&&e.memoizedState===null?!1:(zt.current&2)!==0),y&&(h=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(lt){if(h?Qa(n):Za(),(e=Et)?(e=Jg(e,In),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Fa!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},i=ym(e),i.return=n,n.child=i,nn=n,Et=null)):e=null,e===null)throw Ya(n);return Ld(e)?n.lanes=32:n.lanes=536870912,null}var A=c.children;return c=c.fallback,h?(Za(),h=n.mode,A=fo({mode:"hidden",children:A},h),c=Ns(c,h,i,null),A.return=n,c.return=n,A.sibling=c,n.child=A,c=n.child,c.memoizedState=Qu(i),c.childLanes=Zu(e,y,i),n.memoizedState=Xu,Li(null,c)):(Qa(n),ed(n,A))}var B=e.memoizedState;if(B!==null&&(A=B.dehydrated,A!==null)){if(g)n.flags&256?(Qa(n),n.flags&=-257,n=td(e,n,i)):n.memoizedState!==null?(Za(),n.child=e.child,n.flags|=128,n=null):(Za(),A=c.fallback,h=n.mode,c=fo({mode:"visible",children:c.children},h),A=Ns(A,h,i,null),A.flags|=2,c.return=n,A.return=n,c.sibling=A,n.child=c,As(n,e.child,null,i),c=n.child,c.memoizedState=Qu(i),c.childLanes=Zu(e,y,i),n.memoizedState=Xu,n=Li(null,c));else if(Qa(n),Ld(A)){if(y=A.nextSibling&&A.nextSibling.dataset,y)var ae=y.dgst;y=ae,c=Error(l(419)),c.stack="",c.digest=y,Ni({value:c,source:null,stack:null}),n=td(e,n,i)}else if(Bt||ur(e,n,i,!1),y=(i&e.childLanes)!==0,Bt||y){if(y=_t,y!==null&&(c=Tl(y,i),c!==0&&c!==B.retryLane))throw B.retryLane=c,js(e,c),vn(y,e,c),Ju;Md(A)||wo(),n=td(e,n,i)}else Md(A)?(n.flags|=192,n.child=e.child,n=null):(e=B.treeContext,Et=qn(A.nextSibling),nn=n,lt=!0,Ga=null,In=!1,e!==null&&Nm(n,e),n=ed(n,c.children),n.flags|=4096);return n}return h?(Za(),A=c.fallback,h=n.mode,B=e.child,ae=B.sibling,c=va(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,ae!==null?A=va(ae,A):(A=Ns(A,h,i,null),A.flags|=2),A.return=n,c.return=n,c.sibling=A,n.child=c,Li(null,c),c=n.child,A=e.child.memoizedState,A===null?A=Qu(i):(h=A.cachePool,h!==null?(B=Ut._currentValue,h=h.parent!==B?{parent:B,pool:B}:h):h=km(),A={baseLanes:A.baseLanes|i,cachePool:h}),c.memoizedState=A,c.childLanes=Zu(e,y,i),n.memoizedState=Xu,Li(e.child,c)):(Qa(n),i=e.child,e=i.sibling,i=va(i,{mode:"visible",children:c.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function ed(e,n){return n=fo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function fo(e,n){return e=Nn(22,e,null,n),e.lanes=0,e}function td(e,n,i){return As(n,e.child,null,i),e=ed(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function qp(e,n,i){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),gu(e.return,n,i)}function nd(e,n,i,c,h,g){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:h,treeForkCount:g}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=i,y.tailMode=h,y.treeForkCount=g)}function Hp(e,n,i){var c=n.pendingProps,h=c.revealOrder,g=c.tail;c=c.children;var y=zt.current,A=(y&2)!==0;if(A?(y=y&1|2,n.flags|=128):y&=1,se(zt,y),sn(e,n,c,i),c=lt?ji:0,!A&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qp(e,i,n);else if(e.tag===19)qp(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(i=n.child,h=null;i!==null;)e=i.alternate,e!==null&&Zl(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=n.child,n.child=null):(h=i.sibling,i.sibling=null),nd(n,!1,h,i,g,c);break;case"backwards":case"unstable_legacy-backwards":for(i=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&Zl(e)===null){n.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}nd(n,!0,i,null,g,c);break;case"together":nd(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function _a(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),ns|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(ur(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,i=va(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=va(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function ad(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Fl(e)))}function fw(e,n,i){switch(n.tag){case 3:Ce(n,n.stateNode.containerInfo),Ka(n,Ut,e.memoizedState.cache),Ss();break;case 27:case 5:Ye(n);break;case 4:Ce(n,n.stateNode.containerInfo);break;case 10:Ka(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Tu(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Qa(n),n.flags|=128,null):(i&n.child.childLanes)!==0?Bp(e,n,i):(Qa(n),e=_a(e,n,i),e!==null?e.sibling:null);Qa(n);break;case 19:var h=(e.flags&128)!==0;if(c=(i&n.childLanes)!==0,c||(ur(e,n,i,!1),c=(i&n.childLanes)!==0),h){if(c)return Hp(e,n,i);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),se(zt,zt.current),c)break;return null;case 22:return n.lanes=0,Lp(e,n,i,n.pendingProps);case 24:Ka(n,Ut,e.memoizedState.cache)}return _a(e,n,i)}function Vp(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)Bt=!0;else{if(!ad(e,i)&&(n.flags&128)===0)return Bt=!1,fw(e,n,i);Bt=(e.flags&131072)!==0}else Bt=!1,lt&&(n.flags&1048576)!==0&&jm(n,ji,n.index);switch(n.lanes=0,n.tag){case 16:e:{var c=n.pendingProps;if(e=Ts(n.elementType),n.type=e,typeof e=="function")ou(e)?(c=Rs(e,c),n.tag=1,n=Up(null,n,e,c,i)):(n.tag=0,n=Wu(null,n,e,c,i));else{if(e!=null){var h=e.$$typeof;if(h===q){n.tag=11,n=Rp(null,n,e,c,i);break e}else if(h===U){n.tag=14,n=Dp(null,n,e,c,i);break e}}throw n=E(e)||e,Error(l(306,n,""))}}return n;case 0:return Wu(e,n,n.type,n.pendingProps,i);case 1:return c=n.type,h=Rs(c,n.pendingProps),Up(e,n,c,h,i);case 3:e:{if(Ce(n,n.stateNode.containerInfo),e===null)throw Error(l(387));c=n.pendingProps;var g=n.memoizedState;h=g.element,Nu(e,n),Ai(n,c,null,i);var y=n.memoizedState;if(c=y.cache,Ka(n,Ut,c),c!==g.cache&&xu(n,[Ut],i,!0),ki(),c=y.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Ip(e,n,c,i);break e}else if(c!==h){h=zn(Error(l(424)),n),Ni(h),n=Ip(e,n,c,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Et=qn(e.firstChild),nn=n,lt=!0,Ga=null,In=!0,i=Lm(n,null,c,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ss(),c===h){n=_a(e,n,i);break e}sn(e,n,c,i)}n=n.child}return n;case 26:return uo(e,n),e===null?(i=tx(n.type,null,n.pendingProps,null))?n.memoizedState=i:lt||(i=n.type,e=n.pendingProps,c=To(Te.current).createElement(i),c[tn]=n,c[hn]=e,rn(c,i,e),Xt(c),n.stateNode=c):n.memoizedState=tx(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Ye(n),e===null&&lt&&(c=n.stateNode=Qg(n.type,n.pendingProps,Te.current),nn=n,In=!0,h=Et,ls(n.type)?($d=h,Et=qn(c.firstChild)):Et=h),sn(e,n,n.pendingProps.children,i),uo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&lt&&((h=c=Et)&&(c=qw(c,n.type,n.pendingProps,In),c!==null?(n.stateNode=c,nn=n,Et=qn(c.firstChild),In=!1,h=!0):h=!1),h||Ya(n)),Ye(n),h=n.type,g=n.pendingProps,y=e!==null?e.memoizedProps:null,c=g.children,Od(h,g)?c=null:y!==null&&Od(h,y)&&(n.flags|=32),n.memoizedState!==null&&(h=Au(e,n,aw,null,null,i),Wi._currentValue=h),uo(e,n),sn(e,n,c,i),n.child;case 6:return e===null&&lt&&((e=i=Et)&&(i=Hw(i,n.pendingProps,In),i!==null?(n.stateNode=i,nn=n,Et=null,e=!0):e=!1),e||Ya(n)),null;case 13:return Bp(e,n,i);case 4:return Ce(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=As(n,null,c,i):sn(e,n,c,i),n.child;case 11:return Rp(e,n,n.type,n.pendingProps,i);case 7:return sn(e,n,n.pendingProps,i),n.child;case 8:return sn(e,n,n.pendingProps.children,i),n.child;case 12:return sn(e,n,n.pendingProps.children,i),n.child;case 10:return c=n.pendingProps,Ka(n,n.type,c.value),sn(e,n,c.children,i),n.child;case 9:return h=n.type._context,c=n.pendingProps.children,Cs(n),h=an(h),c=c(h),n.flags|=1,sn(e,n,c,i),n.child;case 14:return Dp(e,n,n.type,n.pendingProps,i);case 15:return Mp(e,n,n.type,n.pendingProps,i);case 19:return Hp(e,n,i);case 31:return dw(e,n,i);case 22:return Lp(e,n,i,n.pendingProps);case 24:return Cs(n),c=an(Ut),e===null?(h=yu(),h===null&&(h=_t,g=bu(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=i),h=g),n.memoizedState={parent:c,cache:h},ju(n),Ka(n,Ut,h)):((e.lanes&i)!==0&&(Nu(e,n),Ai(n,null,null,i),ki()),h=e.memoizedState,g=n.memoizedState,h.parent!==c?(h={parent:c,cache:c},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Ka(n,Ut,c)):(c=g.cache,Ka(n,Ut,c),c!==h.cache&&xu(n,[Ut],i,!0))),sn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Ca(e){e.flags|=4}function sd(e,n,i,c,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(xg())e.flags|=8192;else throw ks=Jl,wu}else e.flags&=-16777217}function Fp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ix(n))if(xg())e.flags|=8192;else throw ks=Jl,wu}function ho(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Kt():536870912,e.lanes|=n,jr|=n)}function $i(e,n){if(!lt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Tt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,c=0;if(n)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=c,e.childLanes=i,n}function hw(e,n,i){var c=n.pendingProps;switch(fu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(n),null;case 1:return Tt(n),null;case 3:return i=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),ja(Ut),$e(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(cr(n)?Ca(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mu())),Tt(n),null;case 26:var h=n.type,g=n.memoizedState;return e===null?(Ca(n),g!==null?(Tt(n),Fp(n,g)):(Tt(n),sd(n,h,null,c,i))):g?g!==e.memoizedState?(Ca(n),Tt(n),Fp(n,g)):(Tt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&Ca(n),Tt(n),sd(n,h,e,c,i)),null;case 27:if(Xe(n),i=Te.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Ca(n);else{if(!c){if(n.stateNode===null)throw Error(l(166));return Tt(n),null}e=ue.current,cr(n)?Sm(n):(e=Qg(h,c,i),n.stateNode=e,Ca(n))}return Tt(n),null;case 5:if(Xe(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&Ca(n);else{if(!c){if(n.stateNode===null)throw Error(l(166));return Tt(n),null}if(g=ue.current,cr(n))Sm(n);else{var y=To(Te.current);switch(g){case 1:g=y.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=y.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=y.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=y.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?y.createElement("select",{is:c.is}):y.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?y.createElement(h,{is:c.is}):y.createElement(h)}}g[tn]=n,g[hn]=c;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)g.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=g;e:switch(rn(g,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ca(n)}}return Tt(n),sd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&Ca(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(l(166));if(e=Te.current,cr(n)){if(e=n.stateNode,i=n.memoizedProps,c=null,h=nn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}e[tn]=n,e=!!(e.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Bg(e.nodeValue,i)),e||Ya(n,!0)}else e=To(e).createTextNode(c),e[tn]=n,n.stateNode=e}return Tt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(c=cr(n),i!==null){if(e===null){if(!c)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[tn]=n}else Ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),e=!1}else i=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(_n(n),n):(_n(n),null);if((n.flags&128)!==0)throw Error(l(558))}return Tt(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=cr(n),c!==null&&c.dehydrated!==null){if(e===null){if(!h)throw Error(l(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(l(317));h[tn]=n}else Ss(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Tt(n),h=!1}else h=mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(_n(n),n):(_n(n),null)}return _n(n),(n.flags&128)!==0?(n.lanes=i,n):(i=c!==null,e=e!==null&&e.memoizedState!==null,i&&(c=n.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),ho(n,n.updateQueue),Tt(n),null);case 4:return $e(),e===null&&Cd(n.stateNode.containerInfo),Tt(n),null;case 10:return ja(n.type),Tt(n),null;case 19:if(J(zt),c=n.memoizedState,c===null)return Tt(n),null;if(h=(n.flags&128)!==0,g=c.rendering,g===null)if(h)$i(c,!1);else{if(Lt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=Zl(e),g!==null){for(n.flags|=128,$i(c,!1),e=g.updateQueue,n.updateQueue=e,ho(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)vm(i,e),i=i.sibling;return se(zt,zt.current&1|2),lt&&ya(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&we()>bo&&(n.flags|=128,h=!0,$i(c,!1),n.lanes=4194304)}else{if(!h)if(e=Zl(g),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,ho(n,e),$i(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!lt)return Tt(n),null}else 2*we()-c.renderingStartTime>bo&&i!==536870912&&(n.flags|=128,h=!0,$i(c,!1),n.lanes=4194304);c.isBackwards?(g.sibling=n.child,n.child=g):(e=c.last,e!==null?e.sibling=g:n.child=g,c.last=g)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=we(),e.sibling=null,i=zt.current,se(zt,h?i&1|2:i&1),lt&&ya(n,c.treeForkCount),e):(Tt(n),null);case 22:case 23:return _n(n),Eu(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(i&536870912)!==0&&(n.flags&128)===0&&(Tt(n),n.subtreeFlags&6&&(n.flags|=8192)):Tt(n),i=n.updateQueue,i!==null&&ho(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==i&&(n.flags|=2048),e!==null&&J(Es),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),ja(Ut),Tt(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function mw(e,n){switch(fu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ja(Ut),$e(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Xe(n),null;case 31:if(n.memoizedState!==null){if(_n(n),n.alternate===null)throw Error(l(340));Ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(_n(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));Ss()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(zt),null;case 4:return $e(),null;case 10:return ja(n.type),null;case 22:case 23:return _n(n),Eu(),e!==null&&J(Es),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ja(Ut),null;case 25:return null;default:return null}}function Gp(e,n){switch(fu(n),n.tag){case 3:ja(Ut),$e();break;case 26:case 27:case 5:Xe(n);break;case 4:$e();break;case 31:n.memoizedState!==null&&_n(n);break;case 13:_n(n);break;case 19:J(zt);break;case 10:ja(n.type);break;case 22:case 23:_n(n),Eu(),e!==null&&J(Es);break;case 24:ja(Ut)}}function zi(e,n){try{var i=n.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var h=c.next;i=h;do{if((i.tag&e)===e){c=void 0;var g=i.create,y=i.inst;c=g(),y.destroy=c}i=i.next}while(i!==h)}}catch(A){wt(n,n.return,A)}}function es(e,n,i){try{var c=n.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&e)===e){var y=c.inst,A=y.destroy;if(A!==void 0){y.destroy=void 0,h=n;var B=i,ae=A;try{ae()}catch(de){wt(h,B,de)}}}c=c.next}while(c!==g)}}catch(de){wt(n,n.return,de)}}function Yp(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{zm(n,i)}catch(c){wt(e,e.return,c)}}}function Kp(e,n,i){i.props=Rs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(c){wt(e,n,c)}}function Pi(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof i=="function"?e.refCleanup=i(c):i.current=c}}catch(h){wt(e,n,h)}}function oa(e,n){var i=e.ref,c=e.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(h){wt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(h){wt(e,n,h)}else i.current=null}function Jp(e){var n=e.type,i=e.memoizedProps,c=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(h){wt(e,e.return,h)}}function rd(e,n,i){try{var c=e.stateNode;$w(c,e.type,i,n),c[hn]=n}catch(h){wt(e,e.return,h)}}function Wp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ls(e.type)||e.tag===4}function id(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ls(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ld(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=xa));else if(c!==4&&(c===27&&ls(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(ld(e,n,i),e=e.sibling;e!==null;)ld(e,n,i),e=e.sibling}function mo(e,n,i){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(c!==4&&(c===27&&ls(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(mo(e,n,i),e=e.sibling;e!==null;)mo(e,n,i),e=e.sibling}function Xp(e){var n=e.stateNode,i=e.memoizedProps;try{for(var c=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);rn(n,c,i),n[tn]=e,n[hn]=i}catch(g){wt(e,e.return,g)}}var Ea=!1,qt=!1,od=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function pw(e,n){if(e=e.containerInfo,kd=Lo,e=um(e),tu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var y=0,A=-1,B=-1,ae=0,de=0,ge=e,re=null;t:for(;;){for(var oe;ge!==i||h!==0&&ge.nodeType!==3||(A=y+h),ge!==g||c!==0&&ge.nodeType!==3||(B=y+c),ge.nodeType===3&&(y+=ge.nodeValue.length),(oe=ge.firstChild)!==null;)re=ge,ge=oe;for(;;){if(ge===e)break t;if(re===i&&++ae===h&&(A=y),re===g&&++de===c&&(B=y),(oe=ge.nextSibling)!==null)break;ge=re,re=ge.parentNode}ge=oe}i=A===-1||B===-1?null:{start:A,end:B}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ad={focusedElem:e,selectionRange:i},Lo=!1,Qt=n;Qt!==null;)if(n=Qt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Qt=e;else for(;Qt!==null;){switch(n=Qt,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)h=e[i],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,i=n,h=g.memoizedProps,g=g.memoizedState,c=i.stateNode;try{var Le=Rs(i.type,h);e=c.getSnapshotBeforeUpdate(Le,g),c.__reactInternalSnapshotBeforeUpdate=e}catch(Ke){wt(i,i.return,Ke)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Dd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Dd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,Qt=e;break}Qt=n.return}}function Zp(e,n,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ka(e,i),c&4&&zi(5,i);break;case 1:if(ka(e,i),c&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){wt(i,i.return,y)}else{var h=Rs(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){wt(i,i.return,y)}}c&64&&Yp(i),c&512&&Pi(i,i.return);break;case 3:if(ka(e,i),c&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{zm(e,n)}catch(y){wt(i,i.return,y)}}break;case 27:n===null&&c&4&&Xp(i);case 26:case 5:ka(e,i),n===null&&c&4&&Jp(i),c&512&&Pi(i,i.return);break;case 12:ka(e,i);break;case 31:ka(e,i),c&4&&ng(e,i);break;case 13:ka(e,i),c&4&&ag(e,i),c&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Sw.bind(null,i),Vw(e,i))));break;case 22:if(c=i.memoizedState!==null||Ea,!c){n=n!==null&&n.memoizedState!==null||qt,h=Ea;var g=qt;Ea=c,(qt=n)&&!g?Aa(e,i,(i.subtreeFlags&8772)!==0):ka(e,i),Ea=h,qt=g}break;case 30:break;default:ka(e,i)}}function eg(e){var n=e.alternate;n!==null&&(e.alternate=null,eg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Pc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kt=null,pn=!1;function Ta(e,n,i){for(i=i.child;i!==null;)tg(e,n,i),i=i.sibling}function tg(e,n,i){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(ee,i)}catch{}switch(i.tag){case 26:qt||oa(i,n),Ta(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:qt||oa(i,n);var c=kt,h=pn;ls(i.type)&&(kt=i.stateNode,pn=!1),Ta(e,n,i),Yi(i.stateNode),kt=c,pn=h;break;case 5:qt||oa(i,n);case 6:if(c=kt,h=pn,kt=null,Ta(e,n,i),kt=c,pn=h,kt!==null)if(pn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(i.stateNode)}catch(g){wt(i,n,g)}else try{kt.removeChild(i.stateNode)}catch(g){wt(i,n,g)}break;case 18:kt!==null&&(pn?(e=kt,Yg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Ar(e)):Yg(kt,i.stateNode));break;case 4:c=kt,h=pn,kt=i.stateNode.containerInfo,pn=!0,Ta(e,n,i),kt=c,pn=h;break;case 0:case 11:case 14:case 15:es(2,i,n),qt||es(4,i,n),Ta(e,n,i);break;case 1:qt||(oa(i,n),c=i.stateNode,typeof c.componentWillUnmount=="function"&&Kp(i,n,c)),Ta(e,n,i);break;case 21:Ta(e,n,i);break;case 22:qt=(c=qt)||i.memoizedState!==null,Ta(e,n,i),qt=c;break;default:Ta(e,n,i)}}function ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ar(e)}catch(i){wt(n,n.return,i)}}}function ag(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ar(e)}catch(i){wt(n,n.return,i)}}function gw(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Qp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Qp),n;default:throw Error(l(435,e.tag))}}function po(e,n){var i=gw(e);n.forEach(function(c){if(!i.has(c)){i.add(c);var h=_w.bind(null,e,c);c.then(h,h)}})}function gn(e,n){var i=n.deletions;if(i!==null)for(var c=0;c<i.length;c++){var h=i[c],g=e,y=n,A=y;e:for(;A!==null;){switch(A.tag){case 27:if(ls(A.type)){kt=A.stateNode,pn=!1;break e}break;case 5:kt=A.stateNode,pn=!1;break e;case 3:case 4:kt=A.stateNode.containerInfo,pn=!0;break e}A=A.return}if(kt===null)throw Error(l(160));tg(g,y,h),kt=null,pn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)sg(n,e),n=n.sibling}var Qn=null;function sg(e,n){var i=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(n,e),xn(e),c&4&&(es(3,e,e.return),zi(3,e),es(5,e,e.return));break;case 1:gn(n,e),xn(e),c&512&&(qt||i===null||oa(i,i.return)),c&64&&Ea&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var h=Qn;if(gn(n,e),xn(e),c&512&&(qt||i===null||oa(i,i.return)),c&4){var g=i!==null?i.memoizedState:null;if(c=e.memoizedState,i===null)if(c===null)if(e.stateNode===null){e:{c=e.type,i=e.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[di]||g[tn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),rn(g,c,i),g[tn]=e,Xt(g),c=g;break e;case"link":var y=sx("link","href",h).get(c+(i.href||""));if(y){for(var A=0;A<y.length;A++)if(g=y[A],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(A,1);break t}}g=h.createElement(c),rn(g,c,i),h.head.appendChild(g);break;case"meta":if(y=sx("meta","content",h).get(c+(i.content||""))){for(A=0;A<y.length;A++)if(g=y[A],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(A,1);break t}}g=h.createElement(c),rn(g,c,i),h.head.appendChild(g);break;default:throw Error(l(468,c))}g[tn]=e,Xt(g),c=g}e.stateNode=c}else rx(h,e.type,e.stateNode);else e.stateNode=ax(h,c,e.memoizedProps);else g!==c?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,c===null?rx(h,e.type,e.stateNode):ax(h,c,e.memoizedProps)):c===null&&e.stateNode!==null&&rd(e,e.memoizedProps,i.memoizedProps)}break;case 27:gn(n,e),xn(e),c&512&&(qt||i===null||oa(i,i.return)),i!==null&&c&4&&rd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(gn(n,e),xn(e),c&512&&(qt||i===null||oa(i,i.return)),e.flags&32){h=e.stateNode;try{Zs(h,"")}catch(Le){wt(e,e.return,Le)}}c&4&&e.stateNode!=null&&(h=e.memoizedProps,rd(e,h,i!==null?i.memoizedProps:h)),c&1024&&(od=!0);break;case 6:if(gn(n,e),xn(e),c&4){if(e.stateNode===null)throw Error(l(162));c=e.memoizedProps,i=e.stateNode;try{i.nodeValue=c}catch(Le){wt(e,e.return,Le)}}break;case 3:if(Oo=null,h=Qn,Qn=ko(n.containerInfo),gn(n,e),Qn=h,xn(e),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Ar(n.containerInfo)}catch(Le){wt(e,e.return,Le)}od&&(od=!1,rg(e));break;case 4:c=Qn,Qn=ko(e.stateNode.containerInfo),gn(n,e),xn(e),Qn=c;break;case 12:gn(n,e),xn(e);break;case 31:gn(n,e),xn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,po(e,c)));break;case 13:gn(n,e),xn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(xo=we()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,po(e,c)));break;case 22:h=e.memoizedState!==null;var B=i!==null&&i.memoizedState!==null,ae=Ea,de=qt;if(Ea=ae||h,qt=de||B,gn(n,e),qt=de,Ea=ae,xn(e),c&8192)e:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(i===null||B||Ea||qt||Ds(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){B=i=n;try{if(g=B.stateNode,h)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{A=B.stateNode;var ge=B.memoizedProps.style,re=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;A.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Le){wt(B,B.return,Le)}}}else if(n.tag===6){if(i===null){B=n;try{B.stateNode.nodeValue=h?"":B.memoizedProps}catch(Le){wt(B,B.return,Le)}}}else if(n.tag===18){if(i===null){B=n;try{var oe=B.stateNode;h?Kg(oe,!0):Kg(B.stateNode,!1)}catch(Le){wt(B,B.return,Le)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,po(e,i))));break;case 19:gn(n,e),xn(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,po(e,c)));break;case 30:break;case 21:break;default:gn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{for(var i,c=e.return;c!==null;){if(Wp(c)){i=c;break}c=c.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var h=i.stateNode,g=id(e);mo(e,g,h);break;case 5:var y=i.stateNode;i.flags&32&&(Zs(y,""),i.flags&=-33);var A=id(e);mo(e,A,y);break;case 3:case 4:var B=i.stateNode.containerInfo,ae=id(e);ld(e,ae,B);break;default:throw Error(l(161))}}catch(de){wt(e,e.return,de)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function rg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;rg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function ka(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Zp(e,n.alternate,n),n=n.sibling}function Ds(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:es(4,n,n.return),Ds(n);break;case 1:oa(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Kp(n,n.return,i),Ds(n);break;case 27:Yi(n.stateNode);case 26:case 5:oa(n,n.return),Ds(n);break;case 22:n.memoizedState===null&&Ds(n);break;case 30:Ds(n);break;default:Ds(n)}e=e.sibling}}function Aa(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,h=e,g=n,y=g.flags;switch(g.tag){case 0:case 11:case 15:Aa(h,g,i),zi(4,g);break;case 1:if(Aa(h,g,i),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(ae){wt(c,c.return,ae)}if(c=g,h=c.updateQueue,h!==null){var A=c.stateNode;try{var B=h.shared.hiddenCallbacks;if(B!==null)for(h.shared.hiddenCallbacks=null,h=0;h<B.length;h++)$m(B[h],A)}catch(ae){wt(c,c.return,ae)}}i&&y&64&&Yp(g),Pi(g,g.return);break;case 27:Xp(g);case 26:case 5:Aa(h,g,i),i&&c===null&&y&4&&Jp(g),Pi(g,g.return);break;case 12:Aa(h,g,i);break;case 31:Aa(h,g,i),i&&y&4&&ng(h,g);break;case 13:Aa(h,g,i),i&&y&4&&ag(h,g);break;case 22:g.memoizedState===null&&Aa(h,g,i),Pi(g,g.return);break;case 30:break;default:Aa(h,g,i)}n=n.sibling}}function cd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Si(i))}function ud(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Si(e))}function Zn(e,n,i,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ig(e,n,i,c),n=n.sibling}function ig(e,n,i,c){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Zn(e,n,i,c),h&2048&&zi(9,n);break;case 1:Zn(e,n,i,c);break;case 3:Zn(e,n,i,c),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Si(e)));break;case 12:if(h&2048){Zn(e,n,i,c),e=n.stateNode;try{var g=n.memoizedProps,y=g.id,A=g.onPostCommit;typeof A=="function"&&A(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){wt(n,n.return,B)}}else Zn(e,n,i,c);break;case 31:Zn(e,n,i,c);break;case 13:Zn(e,n,i,c);break;case 23:break;case 22:g=n.stateNode,y=n.alternate,n.memoizedState!==null?g._visibility&2?Zn(e,n,i,c):Ui(e,n):g._visibility&2?Zn(e,n,i,c):(g._visibility|=2,vr(e,n,i,c,(n.subtreeFlags&10256)!==0||!1)),h&2048&&cd(y,n);break;case 24:Zn(e,n,i,c),h&2048&&ud(n.alternate,n);break;default:Zn(e,n,i,c)}}function vr(e,n,i,c,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,y=n,A=i,B=c,ae=y.flags;switch(y.tag){case 0:case 11:case 15:vr(g,y,A,B,h),zi(8,y);break;case 23:break;case 22:var de=y.stateNode;y.memoizedState!==null?de._visibility&2?vr(g,y,A,B,h):Ui(g,y):(de._visibility|=2,vr(g,y,A,B,h)),h&&ae&2048&&cd(y.alternate,y);break;case 24:vr(g,y,A,B,h),h&&ae&2048&&ud(y.alternate,y);break;default:vr(g,y,A,B,h)}n=n.sibling}}function Ui(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,c=n,h=c.flags;switch(c.tag){case 22:Ui(i,c),h&2048&&cd(c.alternate,c);break;case 24:Ui(i,c),h&2048&&ud(c.alternate,c);break;default:Ui(i,c)}n=n.sibling}}var Ii=8192;function yr(e,n,i){if(e.subtreeFlags&Ii)for(e=e.child;e!==null;)lg(e,n,i),e=e.sibling}function lg(e,n,i){switch(e.tag){case 26:yr(e,n,i),e.flags&Ii&&e.memoizedState!==null&&nj(i,Qn,e.memoizedState,e.memoizedProps);break;case 5:yr(e,n,i);break;case 3:case 4:var c=Qn;Qn=ko(e.stateNode.containerInfo),yr(e,n,i),Qn=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Ii,Ii=16777216,yr(e,n,i),Ii=c):yr(e,n,i));break;default:yr(e,n,i)}}function og(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Bi(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];Qt=c,ug(c,e)}og(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cg(e),e=e.sibling}function cg(e){switch(e.tag){case 0:case 11:case 15:Bi(e),e.flags&2048&&es(9,e,e.return);break;case 3:Bi(e);break;case 12:Bi(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,go(e)):Bi(e);break;default:Bi(e)}}function go(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];Qt=c,ug(c,e)}og(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:es(8,n,n.return),go(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,go(n));break;default:go(n)}e=e.sibling}}function ug(e,n){for(;Qt!==null;){var i=Qt;switch(i.tag){case 0:case 11:case 15:es(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Si(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,Qt=c;else e:for(i=e;Qt!==null;){c=Qt;var h=c.sibling,g=c.return;if(eg(c),c===i){Qt=null;break e}if(h!==null){h.return=g,Qt=h;break e}Qt=g}}}var xw={getCacheForType:function(e){var n=an(Ut),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return an(Ut).controller.signal}},bw=typeof WeakMap=="function"?WeakMap:Map,mt=0,_t=null,at=null,rt=0,yt=0,Cn=null,ts=!1,wr=!1,dd=!1,Oa=0,Lt=0,ns=0,Ms=0,fd=0,En=0,jr=0,qi=null,bn=null,hd=!1,xo=0,dg=0,bo=1/0,vo=null,as=null,Jt=0,ss=null,Nr=null,Ra=0,md=0,pd=null,fg=null,Hi=0,gd=null;function Tn(){return(mt&2)!==0&&rt!==0?rt&-rt:C.T!==null?jd():Gs()}function hg(){if(En===0)if((rt&536870912)===0||lt){var e=Yt;Yt<<=1,(Yt&3932160)===0&&(Yt=262144),En=e}else En=536870912;return e=Sn.current,e!==null&&(e.flags|=32),En}function vn(e,n,i){(e===_t&&(yt===2||yt===9)||e.cancelPendingCommit!==null)&&(Sr(e,0),rs(e,rt,En,!1)),en(e,i),((mt&2)===0||e!==_t)&&(e===_t&&((mt&2)===0&&(Ms|=i),Lt===4&&rs(e,rt,En,!1)),ca(e))}function mg(e,n,i){if((mt&6)!==0)throw Error(l(327));var c=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Re(e,n),h=c?ww(e,n):bd(e,n,!0),g=c;do{if(h===0){wr&&!c&&rs(e,n,0,!1);break}else{if(i=e.current.alternate,g&&!vw(i)){h=bd(e,n,!1),g=!1;continue}if(h===2){if(g=n,e.errorRecoveryDisabledLanes&g)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var A=e;h=qi;var B=A.current.memoizedState.isDehydrated;if(B&&(Sr(A,y).flags|=256),y=bd(A,y,!1),y!==2){if(dd&&!B){A.errorRecoveryDisabledLanes|=g,Ms|=g,h=4;break e}g=bn,bn=h,g!==null&&(bn===null?bn=g:bn.push.apply(bn,g))}h=y}if(g=!1,h!==2)continue}}if(h===1){Sr(e,0),rs(e,n,0,!0);break}e:{switch(c=e,g=h,g){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:rs(c,n,En,!ts);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(h=xo+300-we(),10<h)){if(rs(c,n,En,!ts),Ae(c,0,!0)!==0)break e;Ra=n,c.timeoutHandle=Fg(pg.bind(null,c,i,bn,vo,hd,n,En,Ms,jr,ts,g,"Throttled",-0,0),h);break e}pg(c,i,bn,vo,hd,n,En,Ms,jr,ts,g,null,-0,0)}}break}while(!0);ca(e)}function pg(e,n,i,c,h,g,y,A,B,ae,de,ge,re,oe){if(e.timeoutHandle=-1,ge=n.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},lg(n,g,ge);var Le=(g&62914560)===g?xo-we():(g&4194048)===g?dg-we():0;if(Le=aj(ge,Le),Le!==null){Ra=g,e.cancelPendingCommit=Le(Ng.bind(null,e,n,g,i,c,h,y,A,B,de,ge,null,re,oe)),rs(e,g,y,!ae);return}}Ng(e,n,g,i,c,h,y,A,B)}function vw(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var h=i[c],g=h.getSnapshot;h=h.value;try{if(!jn(g(),h))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function rs(e,n,i,c){n&=~fd,n&=~Ms,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var h=n;0<h;){var g=31-_e(h),y=1<<g;c[g]=-1,h&=~y}i!==0&&ui(e,i,n)}function yo(){return(mt&6)===0?(Vi(0),!1):!0}function xd(){if(at!==null){if(yt===0)var e=at.return;else e=at,wa=_s=null,Du(e),mr=null,Ci=0,e=at;for(;e!==null;)Gp(e.alternate,e),e=e.return;at=null}}function Sr(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Uw(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ra=0,xd(),_t=e,at=i=va(e.current,null),rt=n,yt=0,Cn=null,ts=!1,wr=Re(e,n),dd=!1,jr=En=fd=Ms=ns=Lt=0,bn=qi=null,hd=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var h=31-_e(c),g=1<<h;n|=e[h],c&=~g}return Oa=n,Il(),i}function gg(e,n){tt=null,C.H=Mi,n===hr||n===Kl?(n=Rm(),yt=3):n===wu?(n=Rm(),yt=4):yt=n===Ju?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Cn=n,at===null&&(Lt=1,oo(e,zn(n,e.current)))}function xg(){var e=Sn.current;return e===null?!0:(rt&4194048)===rt?Bn===null:(rt&62914560)===rt||(rt&536870912)!==0?e===Bn:!1}function bg(){var e=C.H;return C.H=Mi,e===null?Mi:e}function vg(){var e=C.A;return C.A=xw,e}function wo(){Lt=4,ts||(rt&4194048)!==rt&&Sn.current!==null||(wr=!0),(ns&134217727)===0&&(Ms&134217727)===0||_t===null||rs(_t,rt,En,!1)}function bd(e,n,i){var c=mt;mt|=2;var h=bg(),g=vg();(_t!==e||rt!==n)&&(vo=null,Sr(e,n)),n=!1;var y=Lt;e:do try{if(yt!==0&&at!==null){var A=at,B=Cn;switch(yt){case 8:xd(),y=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(n=!0);var ae=yt;if(yt=0,Cn=null,_r(e,A,B,ae),i&&wr){y=0;break e}break;default:ae=yt,yt=0,Cn=null,_r(e,A,B,ae)}}yw(),y=Lt;break}catch(de){gg(e,de)}while(!0);return n&&e.shellSuspendCounter++,wa=_s=null,mt=c,C.H=h,C.A=g,at===null&&(_t=null,rt=0,Il()),y}function yw(){for(;at!==null;)yg(at)}function ww(e,n){var i=mt;mt|=2;var c=bg(),h=vg();_t!==e||rt!==n?(vo=null,bo=we()+500,Sr(e,n)):wr=Re(e,n);e:do try{if(yt!==0&&at!==null){n=at;var g=Cn;t:switch(yt){case 1:yt=0,Cn=null,_r(e,n,g,1);break;case 2:case 9:if(Am(g)){yt=0,Cn=null,wg(n);break}n=function(){yt!==2&&yt!==9||_t!==e||(yt=7),ca(e)},g.then(n,n);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Am(g)?(yt=0,Cn=null,wg(n)):(yt=0,Cn=null,_r(e,n,g,7));break;case 5:var y=null;switch(at.tag){case 26:y=at.memoizedState;case 5:case 27:var A=at;if(y?ix(y):A.stateNode.complete){yt=0,Cn=null;var B=A.sibling;if(B!==null)at=B;else{var ae=A.return;ae!==null?(at=ae,jo(ae)):at=null}break t}}yt=0,Cn=null,_r(e,n,g,5);break;case 6:yt=0,Cn=null,_r(e,n,g,6);break;case 8:xd(),Lt=6;break e;default:throw Error(l(462))}}jw();break}catch(de){gg(e,de)}while(!0);return wa=_s=null,C.H=c,C.A=h,mt=i,at!==null?0:(_t=null,rt=0,Il(),Lt)}function jw(){for(;at!==null&&!K();)yg(at)}function yg(e){var n=Vp(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,n===null?jo(e):at=n}function wg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Pp(i,n,n.pendingProps,n.type,void 0,rt);break;case 11:n=Pp(i,n,n.pendingProps,n.type.render,n.ref,rt);break;case 5:Du(n);default:Gp(i,n),n=at=vm(n,Oa),n=Vp(i,n,Oa)}e.memoizedProps=e.pendingProps,n===null?jo(e):at=n}function _r(e,n,i,c){wa=_s=null,Du(n),mr=null,Ci=0;var h=n.return;try{if(uw(e,h,n,i,rt)){Lt=1,oo(e,zn(i,e.current)),at=null;return}}catch(g){if(h!==null)throw at=h,g;Lt=1,oo(e,zn(i,e.current)),at=null;return}n.flags&32768?(lt||c===1?e=!0:wr||(rt&536870912)!==0?e=!1:(ts=e=!0,(c===2||c===9||c===3||c===6)&&(c=Sn.current,c!==null&&c.tag===13&&(c.flags|=16384))),jg(n,e)):jo(n)}function jo(e){var n=e;do{if((n.flags&32768)!==0){jg(n,ts);return}e=n.return;var i=hw(n.alternate,n,Oa);if(i!==null){at=i;return}if(n=n.sibling,n!==null){at=n;return}at=n=e}while(n!==null);Lt===0&&(Lt=5)}function jg(e,n){do{var i=mw(e.alternate,e);if(i!==null){i.flags&=32767,at=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){at=e;return}at=e=i}while(e!==null);Lt=6,at=null}function Ng(e,n,i,c,h,g,y,A,B){e.cancelPendingCommit=null;do No();while(Jt!==0);if((mt&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(g=n.lanes|n.childLanes,g|=iu,Jn(e,i,g,y,A,B),e===_t&&(at=_t=null,rt=0),Nr=n,ss=e,Ra=i,md=g,pd=h,fg=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Cw(Ve,function(){return Tg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=C.T,C.T=null,h=R.p,R.p=2,y=mt,mt|=4;try{pw(e,n,i)}finally{mt=y,R.p=h,C.T=c}}Jt=1,Sg(),_g(),Cg()}}function Sg(){if(Jt===1){Jt=0;var e=ss,n=Nr,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=C.T,C.T=null;var c=R.p;R.p=2;var h=mt;mt|=4;try{sg(n,e);var g=Ad,y=um(e.containerInfo),A=g.focusedElem,B=g.selectionRange;if(y!==A&&A&&A.ownerDocument&&cm(A.ownerDocument.documentElement,A)){if(B!==null&&tu(A)){var ae=B.start,de=B.end;if(de===void 0&&(de=ae),"selectionStart"in A)A.selectionStart=ae,A.selectionEnd=Math.min(de,A.value.length);else{var ge=A.ownerDocument||document,re=ge&&ge.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Le=A.textContent.length,Ke=Math.min(B.start,Le),St=B.end===void 0?Ke:Math.min(B.end,Le);!oe.extend&&Ke>St&&(y=St,St=Ke,Ke=y);var X=om(A,Ke),F=om(A,St);if(X&&F&&(oe.rangeCount!==1||oe.anchorNode!==X.node||oe.anchorOffset!==X.offset||oe.focusNode!==F.node||oe.focusOffset!==F.offset)){var ne=ge.createRange();ne.setStart(X.node,X.offset),oe.removeAllRanges(),Ke>St?(oe.addRange(ne),oe.extend(F.node,F.offset)):(ne.setEnd(F.node,F.offset),oe.addRange(ne))}}}}for(ge=[],oe=A;oe=oe.parentNode;)oe.nodeType===1&&ge.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ge.length;A++){var pe=ge[A];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Lo=!!kd,Ad=kd=null}finally{mt=h,R.p=c,C.T=i}}e.current=n,Jt=2}}function _g(){if(Jt===2){Jt=0;var e=ss,n=Nr,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=C.T,C.T=null;var c=R.p;R.p=2;var h=mt;mt|=4;try{Zp(e,n.alternate,n)}finally{mt=h,R.p=c,C.T=i}}Jt=3}}function Cg(){if(Jt===4||Jt===3){Jt=0,xe();var e=ss,n=Nr,i=Ra,c=fg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Jt=5:(Jt=0,Nr=ss=null,Eg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(as=null),Wn(i),n=n.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(ee,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=C.T,h=R.p,R.p=2,C.T=null;try{for(var g=e.onRecoverableError,y=0;y<c.length;y++){var A=c[y];g(A.value,{componentStack:A.stack})}}finally{C.T=n,R.p=h}}(Ra&3)!==0&&No(),ca(e),h=e.pendingLanes,(i&261930)!==0&&(h&42)!==0?e===gd?Hi++:(Hi=0,gd=e):Hi=0,Vi(0)}}function Eg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Si(n)))}function No(){return Sg(),_g(),Cg(),Tg()}function Tg(){if(Jt!==5)return!1;var e=ss,n=md;md=0;var i=Wn(Ra),c=C.T,h=R.p;try{R.p=32>i?32:i,C.T=null,i=pd,pd=null;var g=ss,y=Ra;if(Jt=0,Nr=ss=null,Ra=0,(mt&6)!==0)throw Error(l(331));var A=mt;if(mt|=4,cg(g.current),ig(g,g.current,y,i),mt=A,Vi(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(ee,g)}catch{}return!0}finally{R.p=h,C.T=c,Eg(e,n)}}function kg(e,n,i){n=zn(i,n),n=Ku(e.stateNode,n,2),e=Xa(e,n,2),e!==null&&(en(e,2),ca(e))}function wt(e,n,i){if(e.tag===3)kg(e,e,i);else for(;n!==null;){if(n.tag===3){kg(n,e,i);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(as===null||!as.has(c))){e=zn(i,e),i=Ap(2),c=Xa(n,i,2),c!==null&&(Op(i,c,n,e),en(c,2),ca(c));break}}n=n.return}}function vd(e,n,i){var c=e.pingCache;if(c===null){c=e.pingCache=new bw;var h=new Set;c.set(n,h)}else h=c.get(n),h===void 0&&(h=new Set,c.set(n,h));h.has(i)||(dd=!0,h.add(i),e=Nw.bind(null,e,n,i),n.then(e,e))}function Nw(e,n,i){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,_t===e&&(rt&i)===i&&(Lt===4||Lt===3&&(rt&62914560)===rt&&300>we()-xo?(mt&2)===0&&Sr(e,0):fd|=i,jr===rt&&(jr=0)),ca(e)}function Ag(e,n){n===0&&(n=Kt()),e=js(e,n),e!==null&&(en(e,n),ca(e))}function Sw(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Ag(e,i)}function _w(e,n){var i=0;switch(e.tag){case 31:case 13:var c=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(l(314))}c!==null&&c.delete(n),Ag(e,i)}function Cw(e,n){return Ee(e,n)}var So=null,Cr=null,yd=!1,_o=!1,wd=!1,is=0;function ca(e){e!==Cr&&e.next===null&&(Cr===null?So=Cr=e:Cr=Cr.next=e),_o=!0,yd||(yd=!0,Tw())}function Vi(e,n){if(!wd&&_o){wd=!0;do for(var i=!1,c=So;c!==null;){if(e!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var y=c.suspendedLanes,A=c.pingedLanes;g=(1<<31-_e(42|e)+1)-1,g&=h&~(y&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,Mg(c,g))}else g=rt,g=Ae(c,c===_t?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Re(c,g)||(i=!0,Mg(c,g));c=c.next}while(i);wd=!1}}function Ew(){Og()}function Og(){_o=yd=!1;var e=0;is!==0&&Pw()&&(e=is);for(var n=we(),i=null,c=So;c!==null;){var h=c.next,g=Rg(c,n);g===0?(c.next=null,i===null?So=h:i.next=h,h===null&&(Cr=i)):(i=c,(e!==0||(g&3)!==0)&&(_o=!0)),c=h}Jt!==0&&Jt!==5||Vi(e),is!==0&&(is=0)}function Rg(e,n){for(var i=e.suspendedLanes,c=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var y=31-_e(g),A=1<<y,B=h[y];B===-1?((A&i)===0||(A&c)!==0)&&(h[y]=ct(A,n)):B<=n&&(e.expiredLanes|=A),g&=~A}if(n=_t,i=rt,i=Ae(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,i===0||e===n&&(yt===2||yt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&Ie(c),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Re(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(c!==null&&Ie(c),Wn(i)){case 2:case 8:i=ut;break;case 32:i=Ve;break;case 268435456:i=Qe;break;default:i=Ve}return c=Dg.bind(null,e),i=Ee(i,c),e.callbackPriority=n,e.callbackNode=i,n}return c!==null&&c!==null&&Ie(c),e.callbackPriority=2,e.callbackNode=null,2}function Dg(e,n){if(Jt!==0&&Jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(No()&&e.callbackNode!==i)return null;var c=rt;return c=Ae(e,e===_t?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(mg(e,c,n),Rg(e,we()),e.callbackNode!=null&&e.callbackNode===i?Dg.bind(null,e):null)}function Mg(e,n){if(No())return null;mg(e,n,!0)}function Tw(){Iw(function(){(mt&6)!==0?Ee(Pe,Ew):Og()})}function jd(){if(is===0){var e=dr;e===0&&(e=vt,vt<<=1,(vt&261888)===0&&(vt=256)),is=e}return is}function Lg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Rl(""+e)}function $g(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function kw(e,n,i,c,h){if(n==="submit"&&i&&i.stateNode===h){var g=Lg((h[hn]||null).action),y=c.submitter;y&&(n=(n=y[hn]||null)?Lg(n.formAction):y.getAttribute("formAction"),n!==null&&(g=n,y=null));var A=new $l("action","action",null,c,h);e.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(is!==0){var B=y?$g(h,y):new FormData(h);qu(i,{pending:!0,data:B,method:h.method,action:g},null,B)}}else typeof g=="function"&&(A.preventDefault(),B=y?$g(h,y):new FormData(h),qu(i,{pending:!0,data:B,method:h.method,action:g},g,B))},currentTarget:h}]})}}for(var Nd=0;Nd<ru.length;Nd++){var Sd=ru[Nd],Aw=Sd.toLowerCase(),Ow=Sd[0].toUpperCase()+Sd.slice(1);Xn(Aw,"on"+Ow)}Xn(hm,"onAnimationEnd"),Xn(mm,"onAnimationIteration"),Xn(pm,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Yy,"onTransitionRun"),Xn(Ky,"onTransitionStart"),Xn(Jy,"onTransitionCancel"),Xn(gm,"onTransitionEnd"),Xs("onMouseEnter",["mouseout","mouseover"]),Xs("onMouseLeave",["mouseout","mouseover"]),Xs("onPointerEnter",["pointerout","pointerover"]),Xs("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fi));function zg(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var c=e[i],h=c.event;c=c.listeners;e:{var g=void 0;if(n)for(var y=c.length-1;0<=y;y--){var A=c[y],B=A.instance,ae=A.currentTarget;if(A=A.listener,B!==g&&h.isPropagationStopped())break e;g=A,h.currentTarget=ae;try{g(h)}catch(de){Ul(de)}h.currentTarget=null,g=B}else for(y=0;y<c.length;y++){if(A=c[y],B=A.instance,ae=A.currentTarget,A=A.listener,B!==g&&h.isPropagationStopped())break e;g=A,h.currentTarget=ae;try{g(h)}catch(de){Ul(de)}h.currentTarget=null,g=B}}}}function st(e,n){var i=n[zc];i===void 0&&(i=n[zc]=new Set);var c=e+"__bubble";i.has(c)||(Pg(n,e,2,!1),i.add(c))}function _d(e,n,i){var c=0;n&&(c|=4),Pg(i,e,c,n)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Cd(e){if(!e[Co]){e[Co]=!0,Oh.forEach(function(i){i!=="selectionchange"&&(Rw.has(i)||_d(i,!1,e),_d(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Co]||(n[Co]=!0,_d("selectionchange",!1,n))}}function Pg(e,n,i,c){switch(hx(n)){case 2:var h=ij;break;case 8:h=lj;break;default:h=Bd}i=h.bind(null,n,i,e),h=void 0,!Gc||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),c?h!==void 0?e.addEventListener(n,i,{capture:!0,passive:h}):e.addEventListener(n,i,!0):h!==void 0?e.addEventListener(n,i,{passive:h}):e.addEventListener(n,i,!1)}function Ed(e,n,i,c,h){var g=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var A=c.stateNode.containerInfo;if(A===h)break;if(y===4)for(y=c.return;y!==null;){var B=y.tag;if((B===3||B===4)&&y.stateNode.containerInfo===h)return;y=y.return}for(;A!==null;){if(y=Ks(A),y===null)return;if(B=y.tag,B===5||B===6||B===26||B===27){c=g=y;continue e}A=A.parentNode}}c=c.return}Hh(function(){var ae=g,de=Vc(i),ge=[];e:{var re=xm.get(e);if(re!==void 0){var oe=$l,Le=e;switch(e){case"keypress":if(Ml(i)===0)break e;case"keydown":case"keyup":oe=_y;break;case"focusin":Le="focus",oe=Wc;break;case"focusout":Le="blur",oe=Wc;break;case"beforeblur":case"afterblur":oe=Wc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Ty;break;case hm:case mm:case pm:oe=gy;break;case gm:oe=Ay;break;case"scroll":case"scrollend":oe=dy;break;case"wheel":oe=Ry;break;case"copy":case"cut":case"paste":oe=by;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Kh;break;case"toggle":case"beforetoggle":oe=My}var Ke=(n&4)!==0,St=!Ke&&(e==="scroll"||e==="scrollend"),X=Ke?re!==null?re+"Capture":null:re;Ke=[];for(var F=ae,ne;F!==null;){var pe=F;if(ne=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ne===null||X===null||(pe=hi(F,X),pe!=null&&Ke.push(Gi(F,pe,ne))),St)break;F=F.return}0<Ke.length&&(re=new oe(re,Le,null,i,de),ge.push({event:re,listeners:Ke}))}}if((n&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",re&&i!==Hc&&(Le=i.relatedTarget||i.fromElement)&&(Ks(Le)||Le[Ys]))break e;if((oe||re)&&(re=de.window===de?de:(re=de.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Le=i.relatedTarget||i.toElement,oe=ae,Le=Le?Ks(Le):null,Le!==null&&(St=u(Le),Ke=Le.tag,Le!==St||Ke!==5&&Ke!==27&&Ke!==6)&&(Le=null)):(oe=null,Le=ae),oe!==Le)){if(Ke=Gh,pe="onMouseLeave",X="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(Ke=Kh,pe="onPointerLeave",X="onPointerEnter",F="pointer"),St=oe==null?re:fi(oe),ne=Le==null?re:fi(Le),re=new Ke(pe,F+"leave",oe,i,de),re.target=St,re.relatedTarget=ne,pe=null,Ks(de)===ae&&(Ke=new Ke(X,F+"enter",Le,i,de),Ke.target=ne,Ke.relatedTarget=St,pe=Ke),St=pe,oe&&Le)t:{for(Ke=Dw,X=oe,F=Le,ne=0,pe=X;pe;pe=Ke(pe))ne++;pe=0;for(var qe=F;qe;qe=Ke(qe))pe++;for(;0<ne-pe;)X=Ke(X),ne--;for(;0<pe-ne;)F=Ke(F),pe--;for(;ne--;){if(X===F||F!==null&&X===F.alternate){Ke=X;break t}X=Ke(X),F=Ke(F)}Ke=null}else Ke=null;oe!==null&&Ug(ge,re,oe,Ke,!1),Le!==null&&St!==null&&Ug(ge,St,Le,Ke,!0)}}e:{if(re=ae?fi(ae):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var ft=nm;else if(em(re))if(am)ft=Vy;else{ft=qy;var ze=By}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ae&&qc(ae.elementType)&&(ft=nm):ft=Hy;if(ft&&(ft=ft(e,ae))){tm(ge,ft,i,de);break e}ze&&ze(e,re,ae),e==="focusout"&&ae&&re.type==="number"&&ae.memoizedProps.value!=null&&Bc(re,"number",re.value)}switch(ze=ae?fi(ae):window,e){case"focusin":(em(ze)||ze.contentEditable==="true")&&(ar=ze,nu=ae,wi=null);break;case"focusout":wi=nu=ar=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,dm(ge,i,de);break;case"selectionchange":if(Gy)break;case"keydown":case"keyup":dm(ge,i,de)}var nt;if(Qc)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else nr?Qh(e,i)&&(it="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(it="onCompositionStart");it&&(Jh&&i.locale!=="ko"&&(nr||it!=="onCompositionStart"?it==="onCompositionEnd"&&nr&&(nt=Vh()):(Va=de,Yc="value"in Va?Va.value:Va.textContent,nr=!0)),ze=Eo(ae,it),0<ze.length&&(it=new Yh(it,e,null,i,de),ge.push({event:it,listeners:ze}),nt?it.data=nt:(nt=Zh(i),nt!==null&&(it.data=nt)))),(nt=$y?zy(e,i):Py(e,i))&&(it=Eo(ae,"onBeforeInput"),0<it.length&&(ze=new Yh("onBeforeInput","beforeinput",null,i,de),ge.push({event:ze,listeners:it}),ze.data=nt)),kw(ge,e,ae,i,de)}zg(ge,n)})}function Gi(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Eo(e,n){for(var i=n+"Capture",c=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=hi(e,i),h!=null&&c.unshift(Gi(e,h,g)),h=hi(e,n),h!=null&&c.push(Gi(e,h,g))),e.tag===3)return c;e=e.return}return[]}function Dw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ug(e,n,i,c,h){for(var g=n._reactName,y=[];i!==null&&i!==c;){var A=i,B=A.alternate,ae=A.stateNode;if(A=A.tag,B!==null&&B===c)break;A!==5&&A!==26&&A!==27||ae===null||(B=ae,h?(ae=hi(i,g),ae!=null&&y.unshift(Gi(i,ae,B))):h||(ae=hi(i,g),ae!=null&&y.push(Gi(i,ae,B)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var Mw=/\r\n?/g,Lw=/\u0000|\uFFFD/g;function Ig(e){return(typeof e=="string"?e:""+e).replace(Mw,`
`).replace(Lw,"")}function Bg(e,n){return n=Ig(n),Ig(e)===n}function Nt(e,n,i,c,h,g){switch(i){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Zs(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Zs(e,""+c);break;case"className":Al(e,"class",c);break;case"tabIndex":Al(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,i,c);break;case"style":Bh(e,c,g);break;case"data":if(n!=="object"){Al(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Rl(""+c),e.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(n!=="input"&&Nt(e,n,"name",h.name,h,null),Nt(e,n,"formEncType",h.formEncType,h,null),Nt(e,n,"formMethod",h.formMethod,h,null),Nt(e,n,"formTarget",h.formTarget,h,null)):(Nt(e,n,"encType",h.encType,h,null),Nt(e,n,"method",h.method,h,null),Nt(e,n,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(i);break}c=Rl(""+c),e.setAttribute(i,c);break;case"onClick":c!=null&&(e.onclick=xa);break;case"onScroll":c!=null&&st("scroll",e);break;case"onScrollEnd":c!=null&&st("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(i=c.__html,i!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}i=Rl(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""+c):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":c===!0?e.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(i,c):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(i,c):e.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(i):e.setAttribute(i,c);break;case"popover":st("beforetoggle",e),st("toggle",e),kl(e,"popover",c);break;case"xlinkActuate":ga(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ga(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ga(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ga(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ga(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ga(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ga(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ga(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ga(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":kl(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=cy.get(i)||i,kl(e,i,c))}}function Td(e,n,i,c,h,g){switch(i){case"style":Bh(e,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(l(61));if(i=c.__html,i!=null){if(h.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"children":typeof c=="string"?Zs(e,c):(typeof c=="number"||typeof c=="bigint")&&Zs(e,""+c);break;case"onScroll":c!=null&&st("scroll",e);break;case"onScrollEnd":c!=null&&st("scrollend",e);break;case"onClick":c!=null&&(e.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(h=i.endsWith("Capture"),n=i.slice(2,h?i.length-7:void 0),g=e[hn]||null,g=g!=null?g[i]:null,typeof g=="function"&&e.removeEventListener(n,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,c,h);break e}i in e?e[i]=c:c===!0?e.setAttribute(i,""):kl(e,i,c)}}}function rn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",e),st("load",e);var c=!1,h=!1,g;for(g in i)if(i.hasOwnProperty(g)){var y=i[g];if(y!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Nt(e,n,g,y,i,null)}}h&&Nt(e,n,"srcSet",i.srcSet,i,null),c&&Nt(e,n,"src",i.src,i,null);return;case"input":st("invalid",e);var A=g=y=h=null,B=null,ae=null;for(c in i)if(i.hasOwnProperty(c)){var de=i[c];if(de!=null)switch(c){case"name":h=de;break;case"type":y=de;break;case"checked":B=de;break;case"defaultChecked":ae=de;break;case"value":g=de;break;case"defaultValue":A=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(l(137,n));break;default:Nt(e,n,c,de,i,null)}}zh(e,g,A,B,ae,y,h,!1);return;case"select":st("invalid",e),c=y=g=null;for(h in i)if(i.hasOwnProperty(h)&&(A=i[h],A!=null))switch(h){case"value":g=A;break;case"defaultValue":y=A;break;case"multiple":c=A;default:Nt(e,n,h,A,i,null)}n=g,i=y,e.multiple=!!c,n!=null?Qs(e,!!c,n,!1):i!=null&&Qs(e,!!c,i,!0);return;case"textarea":st("invalid",e),g=h=c=null;for(y in i)if(i.hasOwnProperty(y)&&(A=i[y],A!=null))switch(y){case"value":c=A;break;case"defaultValue":h=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(l(91));break;default:Nt(e,n,y,A,i,null)}Uh(e,c,h,g);return;case"option":for(B in i)if(i.hasOwnProperty(B)&&(c=i[B],c!=null))switch(B){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Nt(e,n,B,c,i,null)}return;case"dialog":st("beforetoggle",e),st("toggle",e),st("cancel",e),st("close",e);break;case"iframe":case"object":st("load",e);break;case"video":case"audio":for(c=0;c<Fi.length;c++)st(Fi[c],e);break;case"image":st("error",e),st("load",e);break;case"details":st("toggle",e);break;case"embed":case"source":case"link":st("error",e),st("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in i)if(i.hasOwnProperty(ae)&&(c=i[ae],c!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Nt(e,n,ae,c,i,null)}return;default:if(qc(n)){for(de in i)i.hasOwnProperty(de)&&(c=i[de],c!==void 0&&Td(e,n,de,c,i,void 0));return}}for(A in i)i.hasOwnProperty(A)&&(c=i[A],c!=null&&Nt(e,n,A,c,i,null))}function $w(e,n,i,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,y=null,A=null,B=null,ae=null,de=null;for(oe in i){var ge=i[oe];if(i.hasOwnProperty(oe)&&ge!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":B=ge;default:c.hasOwnProperty(oe)||Nt(e,n,oe,null,c,ge)}}for(var re in c){var oe=c[re];if(ge=i[re],c.hasOwnProperty(re)&&(oe!=null||ge!=null))switch(re){case"type":g=oe;break;case"name":h=oe;break;case"checked":ae=oe;break;case"defaultChecked":de=oe;break;case"value":y=oe;break;case"defaultValue":A=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(l(137,n));break;default:oe!==ge&&Nt(e,n,re,oe,c,ge)}}Ic(e,y,A,B,ae,de,g,h);return;case"select":oe=y=A=re=null;for(g in i)if(B=i[g],i.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":oe=B;default:c.hasOwnProperty(g)||Nt(e,n,g,null,c,B)}for(h in c)if(g=c[h],B=i[h],c.hasOwnProperty(h)&&(g!=null||B!=null))switch(h){case"value":re=g;break;case"defaultValue":A=g;break;case"multiple":y=g;default:g!==B&&Nt(e,n,h,g,c,B)}n=A,i=y,c=oe,re!=null?Qs(e,!!i,re,!1):!!c!=!!i&&(n!=null?Qs(e,!!i,n,!0):Qs(e,!!i,i?[]:"",!1));return;case"textarea":oe=re=null;for(A in i)if(h=i[A],i.hasOwnProperty(A)&&h!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Nt(e,n,A,null,c,h)}for(y in c)if(h=c[y],g=i[y],c.hasOwnProperty(y)&&(h!=null||g!=null))switch(y){case"value":re=h;break;case"defaultValue":oe=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(l(91));break;default:h!==g&&Nt(e,n,y,h,c,g)}Ph(e,re,oe);return;case"option":for(var Le in i)if(re=i[Le],i.hasOwnProperty(Le)&&re!=null&&!c.hasOwnProperty(Le))switch(Le){case"selected":e.selected=!1;break;default:Nt(e,n,Le,null,c,re)}for(B in c)if(re=c[B],oe=i[B],c.hasOwnProperty(B)&&re!==oe&&(re!=null||oe!=null))switch(B){case"selected":e.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Nt(e,n,B,re,c,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in i)re=i[Ke],i.hasOwnProperty(Ke)&&re!=null&&!c.hasOwnProperty(Ke)&&Nt(e,n,Ke,null,c,re);for(ae in c)if(re=c[ae],oe=i[ae],c.hasOwnProperty(ae)&&re!==oe&&(re!=null||oe!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(l(137,n));break;default:Nt(e,n,ae,re,c,oe)}return;default:if(qc(n)){for(var St in i)re=i[St],i.hasOwnProperty(St)&&re!==void 0&&!c.hasOwnProperty(St)&&Td(e,n,St,void 0,c,re);for(de in c)re=c[de],oe=i[de],!c.hasOwnProperty(de)||re===oe||re===void 0&&oe===void 0||Td(e,n,de,re,c,oe);return}}for(var X in i)re=i[X],i.hasOwnProperty(X)&&re!=null&&!c.hasOwnProperty(X)&&Nt(e,n,X,null,c,re);for(ge in c)re=c[ge],oe=i[ge],!c.hasOwnProperty(ge)||re===oe||re==null&&oe==null||Nt(e,n,ge,re,c,oe)}function qg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),c=0;c<i.length;c++){var h=i[c],g=h.transferSize,y=h.initiatorType,A=h.duration;if(g&&A&&qg(y)){for(y=0,A=h.responseEnd,c+=1;c<i.length;c++){var B=i[c],ae=B.startTime;if(ae>A)break;var de=B.transferSize,ge=B.initiatorType;de&&qg(ge)&&(B=B.responseEnd,y+=de*(B<A?1:(A-ae)/(B-ae)))}if(--c,n+=8*(g+y)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var kd=null,Ad=null;function To(e){return e.nodeType===9?e:e.ownerDocument}function Hg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vg(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Rd=null;function Pw(){var e=window.event;return e&&e.type==="popstate"?e===Rd?!1:(Rd=e,!0):(Rd=null,!1)}var Fg=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,Iw=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(e){return Gg.resolve(null).then(e).catch(Bw)}:Fg;function Bw(e){setTimeout(function(){throw e})}function ls(e){return e==="head"}function Yg(e,n){var i=n,c=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"||i==="/&"){if(c===0){e.removeChild(h),Ar(n);return}c--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")c++;else if(i==="html")Yi(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Yi(i);for(var g=i.firstChild;g;){var y=g.nextSibling,A=g.nodeName;g[di]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=y}}else i==="body"&&Yi(e.ownerDocument.body);i=h}while(i);Ar(n)}function Kg(e,n){var i=e;e=0;do{var c=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=c}while(i)}function Dd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Dd(i),Pc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function qw(e,n,i,c){for(;e.nodeType===1;){var h=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[di])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function Hw(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=qn(e.nextSibling),e===null))return null;return e}function Jg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qn(e.nextSibling),e===null))return null;return e}function Md(e){return e.data==="$?"||e.data==="$~"}function Ld(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vw(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var c=function(){n(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function qn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var $d=null;function Wg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return qn(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function Xg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function Qg(e,n,i){switch(n=To(i),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Yi(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Pc(e)}var Hn=new Map,Zg=new Set;function ko(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Da=R.d;R.d={f:Fw,r:Gw,D:Yw,C:Kw,L:Jw,m:Ww,X:Qw,S:Xw,M:Zw};function Fw(){var e=Da.f(),n=yo();return e||n}function Gw(e){var n=Js(e);n!==null&&n.tag===5&&n.type==="form"?gp(n):Da.r(e)}var Er=typeof document>"u"?null:document;function ex(e,n,i){var c=Er;if(c&&typeof n=="string"&&n){var h=Ln(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof i=="string"&&(h+='[crossorigin="'+i+'"]'),Zg.has(h)||(Zg.add(h),e={rel:e,crossOrigin:i,href:n},c.querySelector(h)===null&&(n=c.createElement("link"),rn(n,"link",e),Xt(n),c.head.appendChild(n)))}}function Yw(e){Da.D(e),ex("dns-prefetch",e,null)}function Kw(e,n){Da.C(e,n),ex("preconnect",e,n)}function Jw(e,n,i){Da.L(e,n,i);var c=Er;if(c&&e&&n){var h='link[rel="preload"][as="'+Ln(n)+'"]';n==="image"&&i&&i.imageSrcSet?(h+='[imagesrcset="'+Ln(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(h+='[imagesizes="'+Ln(i.imageSizes)+'"]')):h+='[href="'+Ln(e)+'"]';var g=h;switch(n){case"style":g=Tr(e);break;case"script":g=kr(e)}Hn.has(g)||(e=v({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Hn.set(g,e),c.querySelector(h)!==null||n==="style"&&c.querySelector(Ki(g))||n==="script"&&c.querySelector(Ji(g))||(n=c.createElement("link"),rn(n,"link",e),Xt(n),c.head.appendChild(n)))}}function Ww(e,n){Da.m(e,n);var i=Er;if(i&&e){var c=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Ln(c)+'"][href="'+Ln(e)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=kr(e)}if(!Hn.has(g)&&(e=v({rel:"modulepreload",href:e},n),Hn.set(g,e),i.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Ji(g)))return}c=i.createElement("link"),rn(c,"link",e),Xt(c),i.head.appendChild(c)}}}function Xw(e,n,i){Da.S(e,n,i);var c=Er;if(c&&e){var h=Ws(c).hoistableStyles,g=Tr(e);n=n||"default";var y=h.get(g);if(!y){var A={loading:0,preload:null};if(y=c.querySelector(Ki(g)))A.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Hn.get(g))&&zd(e,i);var B=y=c.createElement("link");Xt(B),rn(B,"link",e),B._p=new Promise(function(ae,de){B.onload=ae,B.onerror=de}),B.addEventListener("load",function(){A.loading|=1}),B.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ao(y,n,c)}y={type:"stylesheet",instance:y,count:1,state:A},h.set(g,y)}}}function Qw(e,n){Da.X(e,n);var i=Er;if(i&&e){var c=Ws(i).hoistableScripts,h=kr(e),g=c.get(h);g||(g=i.querySelector(Ji(h)),g||(e=v({src:e,async:!0},n),(n=Hn.get(h))&&Pd(e,n),g=i.createElement("script"),Xt(g),rn(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function Zw(e,n){Da.M(e,n);var i=Er;if(i&&e){var c=Ws(i).hoistableScripts,h=kr(e),g=c.get(h);g||(g=i.querySelector(Ji(h)),g||(e=v({src:e,async:!0,type:"module"},n),(n=Hn.get(h))&&Pd(e,n),g=i.createElement("script"),Xt(g),rn(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function tx(e,n,i,c){var h=(h=Te.current)?ko(h):null;if(!h)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=Tr(i.href),i=Ws(h).hoistableStyles,c=i.get(n),c||(c={type:"style",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Tr(i.href);var g=Ws(h).hoistableStyles,y=g.get(e);if(y||(h=h.ownerDocument||h,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,y),(g=h.querySelector(Ki(e)))&&!g._p&&(y.instance=g,y.state.loading=5),Hn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Hn.set(e,i),g||ej(h,e,i,y.state))),n&&c===null)throw Error(l(528,""));return y}if(n&&c!==null)throw Error(l(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=kr(i),i=Ws(h).hoistableScripts,c=i.get(n),c||(c={type:"script",instance:null,count:0,state:null},i.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Tr(e){return'href="'+Ln(e)+'"'}function Ki(e){return'link[rel="stylesheet"]['+e+"]"}function nx(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function ej(e,n,i,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),rn(n,"link",i),Xt(n),e.head.appendChild(n))}function kr(e){return'[src="'+Ln(e)+'"]'}function Ji(e){return"script[async]"+e}function ax(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+Ln(i.href)+'"]');if(c)return n.instance=c,Xt(c),c;var h=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Xt(c),rn(c,"style",h),Ao(c,i.precedence,e),n.instance=c;case"stylesheet":h=Tr(i.href);var g=e.querySelector(Ki(h));if(g)return n.state.loading|=4,n.instance=g,Xt(g),g;c=nx(i),(h=Hn.get(h))&&zd(c,h),g=(e.ownerDocument||e).createElement("link"),Xt(g);var y=g;return y._p=new Promise(function(A,B){y.onload=A,y.onerror=B}),rn(g,"link",c),n.state.loading|=4,Ao(g,i.precedence,e),n.instance=g;case"script":return g=kr(i.src),(h=e.querySelector(Ji(g)))?(n.instance=h,Xt(h),h):(c=i,(h=Hn.get(g))&&(c=v({},i),Pd(c,h)),e=e.ownerDocument||e,h=e.createElement("script"),Xt(h),rn(h,"link",c),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Ao(c,i.precedence,e));return n.instance}function Ao(e,n,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,y=0;y<c.length;y++){var A=c[y];if(A.dataset.precedence===n)g=A;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function zd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Pd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Oo=null;function sx(e,n,i){if(Oo===null){var c=new Map,h=Oo=new Map;h.set(i,c)}else h=Oo,c=h.get(i),c||(c=new Map,h.set(i,c));if(c.has(e))return c;for(c.set(e,null),i=i.getElementsByTagName(e),h=0;h<i.length;h++){var g=i[h];if(!(g[di]||g[tn]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var y=g.getAttribute(n)||"";y=e+y;var A=c.get(y);A?A.push(g):c.set(y,[g])}}return c}function rx(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function tj(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function ix(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function nj(e,n,i,c){if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Tr(c.href),g=n.querySelector(Ki(h));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Ro.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=g,Xt(g);return}g=n.ownerDocument||n,c=nx(c),(h=Hn.get(h))&&zd(c,h),g=g.createElement("link"),Xt(g);var y=g;y._p=new Promise(function(A,B){y.onload=A,y.onerror=B}),rn(g,"link",c),i.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Ro.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Ud=0;function aj(e,n){return e.stylesheets&&e.count===0&&Mo(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var c=setTimeout(function(){if(e.stylesheets&&Mo(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&Ud===0&&(Ud=62500*zw());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Mo(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Ud?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function Ro(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Do=null;function Mo(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Do=new Map,n.forEach(sj,e),Do=null,Ro.call(e))}function sj(e,n){if(!(n.state.loading&4)){var i=Do.get(e);if(i)var c=i.get(null);else{i=new Map,Do.set(e,i);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var y=h[g];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),c=y)}c&&i.set(null,c)}h=n.instance,y=h.getAttribute("data-precedence"),g=i.get(y)||c,g===c&&i.set(null,h),i.set(y,h),this.count++,c=Ro.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var Wi={$$typeof:O,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function rj(e,n,i,c,h,g,y,A,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.hiddenUpdates=Dn(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function lx(e,n,i,c,h,g,y,A,B,ae,de,ge){return e=new rj(e,n,i,y,B,ae,de,ge,A),n=1,g===!0&&(n|=24),g=Nn(3,null,null,n),e.current=g,g.stateNode=e,n=bu(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:c,isDehydrated:i,cache:n},ju(g),e}function ox(e){return e?(e=ir,e):ir}function cx(e,n,i,c,h,g){h=ox(h),c.context===null?c.context=h:c.pendingContext=h,c=Wa(n),c.payload={element:i},g=g===void 0?null:g,g!==null&&(c.callback=g),i=Xa(e,c,n),i!==null&&(vn(i,e,n),Ti(i,e,n))}function ux(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Id(e,n){ux(e,n),(e=e.alternate)&&ux(e,n)}function dx(e){if(e.tag===13||e.tag===31){var n=js(e,67108864);n!==null&&vn(n,e,67108864),Id(e,67108864)}}function fx(e){if(e.tag===13||e.tag===31){var n=Tn();n=qa(n);var i=js(e,n);i!==null&&vn(i,e,n),Id(e,n)}}var Lo=!0;function ij(e,n,i,c){var h=C.T;C.T=null;var g=R.p;try{R.p=2,Bd(e,n,i,c)}finally{R.p=g,C.T=h}}function lj(e,n,i,c){var h=C.T;C.T=null;var g=R.p;try{R.p=8,Bd(e,n,i,c)}finally{R.p=g,C.T=h}}function Bd(e,n,i,c){if(Lo){var h=qd(c);if(h===null)Ed(e,n,c,$o,i),mx(e,c);else if(cj(h,e,n,i,c))c.stopPropagation();else if(mx(e,c),n&4&&-1<oj.indexOf(e)){for(;h!==null;){var g=Js(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var y=je(g.pendingLanes);if(y!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;y;){var B=1<<31-_e(y);A.entanglements[1]|=B,y&=~B}ca(g),(mt&6)===0&&(bo=we()+500,Vi(0))}}break;case 31:case 13:A=js(g,2),A!==null&&vn(A,g,2),yo(),Id(g,2)}if(g=qd(c),g===null&&Ed(e,n,c,$o,i),g===h)break;h=g}h!==null&&c.stopPropagation()}else Ed(e,n,c,null,i)}}function qd(e){return e=Vc(e),Hd(e)}var $o=null;function Hd(e){if($o=null,e=Ks(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return $o=e,null}function hx(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oe()){case Pe:return 2;case ut:return 8;case Ve:case Be:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var Vd=!1,os=null,cs=null,us=null,Xi=new Map,Qi=new Map,ds=[],oj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mx(e,n){switch(e){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":cs=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Xi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(n.pointerId)}}function Zi(e,n,i,c,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:i,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},n!==null&&(n=Js(n),n!==null&&dx(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function cj(e,n,i,c,h){switch(n){case"focusin":return os=Zi(os,e,n,i,c,h),!0;case"dragenter":return cs=Zi(cs,e,n,i,c,h),!0;case"mouseover":return us=Zi(us,e,n,i,c,h),!0;case"pointerover":var g=h.pointerId;return Xi.set(g,Zi(Xi.get(g)||null,e,n,i,c,h)),!0;case"gotpointercapture":return g=h.pointerId,Qi.set(g,Zi(Qi.get(g)||null,e,n,i,c,h)),!0}return!1}function px(e){var n=Ks(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,kh(e.priority,function(){fx(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,kh(e.priority,function(){fx(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=qd(e.nativeEvent);if(i===null){i=e.nativeEvent;var c=new i.constructor(i.type,i);Hc=c,i.target.dispatchEvent(c),Hc=null}else return n=Js(i),n!==null&&dx(n),e.blockedOn=i,!1;n.shift()}return!0}function gx(e,n,i){zo(e)&&i.delete(n)}function uj(){Vd=!1,os!==null&&zo(os)&&(os=null),cs!==null&&zo(cs)&&(cs=null),us!==null&&zo(us)&&(us=null),Xi.forEach(gx),Qi.forEach(gx)}function Po(e,n){e.blockedOn===n&&(e.blockedOn=null,Vd||(Vd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,uj)))}var Uo=null;function xx(e){Uo!==e&&(Uo=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Uo===e&&(Uo=null);for(var n=0;n<e.length;n+=3){var i=e[n],c=e[n+1],h=e[n+2];if(typeof c!="function"){if(Hd(c||i)===null)continue;break}var g=Js(i);g!==null&&(e.splice(n,3),n-=3,qu(g,{pending:!0,data:h,method:i.method,action:c},c,h))}}))}function Ar(e){function n(B){return Po(B,e)}os!==null&&Po(os,e),cs!==null&&Po(cs,e),us!==null&&Po(us,e),Xi.forEach(n),Qi.forEach(n);for(var i=0;i<ds.length;i++){var c=ds[i];c.blockedOn===e&&(c.blockedOn=null)}for(;0<ds.length&&(i=ds[0],i.blockedOn===null);)px(i),i.blockedOn===null&&ds.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var h=i[c],g=i[c+1],y=h[hn]||null;if(typeof g=="function")y||xx(i);else if(y){var A=null;if(g&&g.hasAttribute("formAction")){if(h=g,y=g[hn]||null)A=y.formAction;else if(Hd(h)!==null)continue}else A=y.action;typeof A=="function"?i[c+1]=A:(i.splice(c,3),c-=3),xx(i)}}}function bx(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(y){return h=y})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),c||setTimeout(i,20)}function i(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Fd(e){this._internalRoot=e}Io.prototype.render=Fd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var i=n.current,c=Tn();cx(i,c,e,n,null,null)},Io.prototype.unmount=Fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;cx(e.current,2,null,e,null,null),yo(),n[Ys]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var n=Gs();e={blockedOn:null,target:e,priority:n};for(var i=0;i<ds.length&&n!==0&&n<ds[i].priority;i++);ds.splice(i,0,e),i===0&&px(e)}};var vx=t.version;if(vx!=="19.2.0")throw Error(l(527,vx,"19.2.0"));R.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=m(n),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var dj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{ee=Bo.inject(dj),me=Bo}catch{}}return tl.createRoot=function(e,n){if(!o(e))throw Error(l(299));var i=!1,c="",h=Cp,g=Ep,y=Tp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=lx(e,1,!1,null,null,i,c,null,h,g,y,bx),e[Ys]=n.current,Cd(e),new Fd(n)},tl.hydrateRoot=function(e,n,i){if(!o(e))throw Error(l(299));var c=!1,h="",g=Cp,y=Ep,A=Tp,B=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(A=i.onRecoverableError),i.formState!==void 0&&(B=i.formState)),n=lx(e,1,!0,n,i??null,c,h,B,g,y,A,bx),n.context=ox(null),i=n.current,c=Tn(),c=qa(c),h=Wa(c),h.callback=null,Xa(i,h,c),i=c,n.current.lanes=i,en(n,i),ca(n),e[Ys]=n.current,Cd(e),new Io(n)},tl.version="19.2.0",tl}var kx;function jj(){if(kx)return Yd.exports;kx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Yd.exports=wj(),Yd.exports}var Nj=jj();const Sj="modulepreload",_j=function(s){return"/"+s},Ax={},Pa=function(t,r,l){let o=Promise.resolve();if(r&&r.length>0){let f=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=f(r.map(m=>{if(m=_j(m),m in Ax)return;Ax[m]=!0;const x=m.endsWith(".css"),v=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":Sj,x||(w.as="script"),w.crossOrigin="",w.href=m,p&&w.setAttribute("nonce",p),document.head.appendChild(w),x)return new Promise((N,T)=>{w.addEventListener("load",N),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${m}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return t().catch(u)})};var b=ih();const xt=jl(b),Ox=hj({__proto__:null,default:xt},[b]);var Qd,Rx;function Cj(){if(Rx)return Qd;Rx=1;var s=typeof Element<"u",t=typeof Map=="function",r=typeof Set=="function",l=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function o(u,d){if(u===d)return!0;if(u&&d&&typeof u=="object"&&typeof d=="object"){if(u.constructor!==d.constructor)return!1;var p,f,m;if(Array.isArray(u)){if(p=u.length,p!=d.length)return!1;for(f=p;f--!==0;)if(!o(u[f],d[f]))return!1;return!0}var x;if(t&&u instanceof Map&&d instanceof Map){if(u.size!==d.size)return!1;for(x=u.entries();!(f=x.next()).done;)if(!d.has(f.value[0]))return!1;for(x=u.entries();!(f=x.next()).done;)if(!o(f.value[1],d.get(f.value[0])))return!1;return!0}if(r&&u instanceof Set&&d instanceof Set){if(u.size!==d.size)return!1;for(x=u.entries();!(f=x.next()).done;)if(!d.has(f.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(u)&&ArrayBuffer.isView(d)){if(p=u.length,p!=d.length)return!1;for(f=p;f--!==0;)if(u[f]!==d[f])return!1;return!0}if(u.constructor===RegExp)return u.source===d.source&&u.flags===d.flags;if(u.valueOf!==Object.prototype.valueOf&&typeof u.valueOf=="function"&&typeof d.valueOf=="function")return u.valueOf()===d.valueOf();if(u.toString!==Object.prototype.toString&&typeof u.toString=="function"&&typeof d.toString=="function")return u.toString()===d.toString();if(m=Object.keys(u),p=m.length,p!==Object.keys(d).length)return!1;for(f=p;f--!==0;)if(!Object.prototype.hasOwnProperty.call(d,m[f]))return!1;if(s&&u instanceof Element)return!1;for(f=p;f--!==0;)if(!((m[f]==="_owner"||m[f]==="__v"||m[f]==="__o")&&u.$$typeof)&&!o(u[m[f]],d[m[f]]))return!1;return!0}return u!==u&&d!==d}return Qd=function(d,p){try{return o(d,p)}catch(f){if((f.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw f}},Qd}var Ej=Cj();const Tj=jl(Ej);var Zd,Dx;function kj(){if(Dx)return Zd;Dx=1;var s=function(t,r,l,o,u,d,p,f){if(!t){var m;if(r===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var x=[l,o,u,d,p,f],v=0;m=new Error(r.replace(/%s/g,function(){return x[v++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return Zd=s,Zd}var Aj=kj();const Mx=jl(Aj);var ef,Lx;function Oj(){return Lx||(Lx=1,ef=function(t,r,l,o){var u=l?l.call(o,t,r):void 0;if(u!==void 0)return!!u;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var d=Object.keys(t),p=Object.keys(r);if(d.length!==p.length)return!1;for(var f=Object.prototype.hasOwnProperty.bind(r),m=0;m<d.length;m++){var x=d[m];if(!f(x))return!1;var v=t[x],w=r[x];if(u=l?l.call(o,v,w,x):void 0,u===!1||u===void 0&&v!==w)return!1}return!0}),ef}var Rj=Oj();const Dj=jl(Rj);var sv=(s=>(s.BASE="base",s.BODY="body",s.HEAD="head",s.HTML="html",s.LINK="link",s.META="meta",s.NOSCRIPT="noscript",s.SCRIPT="script",s.STYLE="style",s.TITLE="title",s.FRAGMENT="Symbol(react.fragment)",s))(sv||{}),tf={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},$x=Object.values(sv),lh={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Mj=Object.entries(lh).reduce((s,[t,r])=>(s[r]=t,s),{}),na="data-rh",Kr={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Jr=(s,t)=>{for(let r=s.length-1;r>=0;r-=1){const l=s[r];if(Object.prototype.hasOwnProperty.call(l,t))return l[t]}return null},Lj=s=>{let t=Jr(s,"title");const r=Jr(s,Kr.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const l=Jr(s,Kr.DEFAULT_TITLE);return t||l||void 0},$j=s=>Jr(s,Kr.ON_CHANGE_CLIENT_STATE)||(()=>{}),nf=(s,t)=>t.filter(r=>typeof r[s]<"u").map(r=>r[s]).reduce((r,l)=>({...r,...l}),{}),zj=(s,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,l)=>{if(!r.length){const o=Object.keys(l);for(let u=0;u<o.length;u+=1){const p=o[u].toLowerCase();if(s.indexOf(p)!==-1&&l[p])return r.concat(l)}}return r},[]),Pj=s=>console&&typeof console.warn=="function"&&console.warn(s),nl=(s,t,r)=>{const l={};return r.filter(o=>Array.isArray(o[s])?!0:(typeof o[s]<"u"&&Pj(`Helmet: ${s} should be of type "Array". Instead found type "${typeof o[s]}"`),!1)).map(o=>o[s]).reverse().reduce((o,u)=>{const d={};u.filter(f=>{let m;const x=Object.keys(f);for(let w=0;w<x.length;w+=1){const N=x[w],T=N.toLowerCase();t.indexOf(T)!==-1&&!(m==="rel"&&f[m].toLowerCase()==="canonical")&&!(T==="rel"&&f[T].toLowerCase()==="stylesheet")&&(m=T),t.indexOf(N)!==-1&&(N==="innerHTML"||N==="cssText"||N==="itemprop")&&(m=N)}if(!m||!f[m])return!1;const v=f[m].toLowerCase();return l[m]||(l[m]={}),d[m]||(d[m]={}),l[m][v]?!1:(d[m][v]=!0,!0)}).reverse().forEach(f=>o.push(f));const p=Object.keys(d);for(let f=0;f<p.length;f+=1){const m=p[f],x={...l[m],...d[m]};l[m]=x}return o},[]).reverse()},Uj=(s,t)=>{if(Array.isArray(s)&&s.length){for(let r=0;r<s.length;r+=1)if(s[r][t])return!0}return!1},Ij=s=>({baseTag:zj(["href"],s),bodyAttributes:nf("bodyAttributes",s),defer:Jr(s,Kr.DEFER),encode:Jr(s,Kr.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:nf("htmlAttributes",s),linkTags:nl("link",["rel","href"],s),metaTags:nl("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:nl("noscript",["innerHTML"],s),onChangeClientState:$j(s),scriptTags:nl("script",["src","innerHTML"],s),styleTags:nl("style",["cssText"],s),title:Lj(s),titleAttributes:nf("titleAttributes",s),prioritizeSeoTags:Uj(s,Kr.PRIORITIZE_SEO_TAGS)}),rv=s=>Array.isArray(s)?s.join(""):s,Bj=(s,t)=>{const r=Object.keys(s);for(let l=0;l<r.length;l+=1)if(t[r[l]]&&t[r[l]].includes(s[r[l]]))return!0;return!1},af=(s,t)=>Array.isArray(s)?s.reduce((r,l)=>(Bj(l,t)?r.priority.push(l):r.default.push(l),r),{priority:[],default:[]}):{default:s,priority:[]},zx=(s,t)=>({...s,[t]:void 0}),qj=["noscript","script","style"],Rf=(s,t=!0)=>t===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),iv=s=>Object.keys(s).reduce((t,r)=>{const l=typeof s[r]<"u"?`${r}="${s[r]}"`:`${r}`;return t?`${t} ${l}`:l},""),Hj=(s,t,r,l)=>{const o=iv(r),u=rv(t);return o?`<${s} ${na}="true" ${o}>${Rf(u,l)}</${s}>`:`<${s} ${na}="true">${Rf(u,l)}</${s}>`},Vj=(s,t,r=!0)=>t.reduce((l,o)=>{const u=o,d=Object.keys(u).filter(m=>!(m==="innerHTML"||m==="cssText")).reduce((m,x)=>{const v=typeof u[x]>"u"?x:`${x}="${Rf(u[x],r)}"`;return m?`${m} ${v}`:v},""),p=u.innerHTML||u.cssText||"",f=qj.indexOf(s)===-1;return`${l}<${s} ${na}="true" ${d}${f?"/>":`>${p}</${s}>`}`},""),lv=(s,t={})=>Object.keys(s).reduce((r,l)=>{const o=lh[l];return r[o||l]=s[l],r},t),Fj=(s,t,r)=>{const l={key:t,[na]:!0},o=lv(r,l);return[xt.createElement("title",o,t)]},tc=(s,t)=>t.map((r,l)=>{const o={key:l,[na]:!0};return Object.keys(r).forEach(u=>{const p=lh[u]||u;if(p==="innerHTML"||p==="cssText"){const f=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:f}}else o[p]=r[u]}),xt.createElement(s,o)}),Vn=(s,t,r=!0)=>{switch(s){case"title":return{toComponent:()=>Fj(s,t.title,t.titleAttributes),toString:()=>Hj(s,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>lv(t),toString:()=>iv(t)};default:return{toComponent:()=>tc(s,t),toString:()=>Vj(s,t,r)}}},Gj=({metaTags:s,linkTags:t,scriptTags:r,encode:l})=>{const o=af(s,tf.meta),u=af(t,tf.link),d=af(r,tf.script);return{priorityMethods:{toComponent:()=>[...tc("meta",o.priority),...tc("link",u.priority),...tc("script",d.priority)],toString:()=>`${Vn("meta",o.priority,l)} ${Vn("link",u.priority,l)} ${Vn("script",d.priority,l)}`},metaTags:o.default,linkTags:u.default,scriptTags:d.default}},Yj=s=>{const{baseTag:t,bodyAttributes:r,encode:l=!0,htmlAttributes:o,noscriptTags:u,styleTags:d,title:p="",titleAttributes:f,prioritizeSeoTags:m}=s;let{linkTags:x,metaTags:v,scriptTags:w}=s,N={toComponent:()=>{},toString:()=>""};return m&&({priorityMethods:N,linkTags:x,metaTags:v,scriptTags:w}=Gj(s)),{priority:N,base:Vn("base",t,l),bodyAttributes:Vn("bodyAttributes",r,l),htmlAttributes:Vn("htmlAttributes",o,l),link:Vn("link",x,l),meta:Vn("meta",v,l),noscript:Vn("noscript",u,l),script:Vn("script",w,l),style:Vn("style",d,l),title:Vn("title",{title:p,titleAttributes:f},l)}},Df=Yj,qo=[],ov=!!(typeof window<"u"&&window.document&&window.document.createElement),Mf=class{instances=[];canUseDOM=ov;context;value={setHelmet:s=>{this.context.helmet=s},helmetInstances:{get:()=>this.canUseDOM?qo:this.instances,add:s=>{(this.canUseDOM?qo:this.instances).push(s)},remove:s=>{const t=(this.canUseDOM?qo:this.instances).indexOf(s);(this.canUseDOM?qo:this.instances).splice(t,1)}}};constructor(s,t){this.context=s,this.canUseDOM=t||!1,t||(s.helmet=Df({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Kj={},cv=xt.createContext(Kj),uv=class dv extends b.Component{static canUseDOM=ov;helmetData;constructor(t){super(t),this.helmetData=new Mf(this.props.context||{},dv.canUseDOM)}render(){return xt.createElement(cv.Provider,{value:this.helmetData.value},this.props.children)}},Or=(s,t)=>{const r=document.head||document.querySelector("head"),l=r.querySelectorAll(`${s}[${na}]`),o=[].slice.call(l),u=[];let d;return t&&t.length&&t.forEach(p=>{const f=document.createElement(s);for(const m in p)if(Object.prototype.hasOwnProperty.call(p,m))if(m==="innerHTML")f.innerHTML=p.innerHTML;else if(m==="cssText")f.styleSheet?f.styleSheet.cssText=p.cssText:f.appendChild(document.createTextNode(p.cssText));else{const x=m,v=typeof p[x]>"u"?"":p[x];f.setAttribute(m,v)}f.setAttribute(na,"true"),o.some((m,x)=>(d=x,f.isEqualNode(m)))?o.splice(d,1):u.push(f)}),o.forEach(p=>p.parentNode?.removeChild(p)),u.forEach(p=>r.appendChild(p)),{oldTags:o,newTags:u}},Lf=(s,t)=>{const r=document.getElementsByTagName(s)[0];if(!r)return;const l=r.getAttribute(na),o=l?l.split(","):[],u=[...o],d=Object.keys(t);for(const p of d){const f=t[p]||"";r.getAttribute(p)!==f&&r.setAttribute(p,f),o.indexOf(p)===-1&&o.push(p);const m=u.indexOf(p);m!==-1&&u.splice(m,1)}for(let p=u.length-1;p>=0;p-=1)r.removeAttribute(u[p]);o.length===u.length?r.removeAttribute(na):r.getAttribute(na)!==d.join(",")&&r.setAttribute(na,d.join(","))},Jj=(s,t)=>{typeof s<"u"&&document.title!==s&&(document.title=rv(s)),Lf("title",t)},Px=(s,t)=>{const{baseTag:r,bodyAttributes:l,htmlAttributes:o,linkTags:u,metaTags:d,noscriptTags:p,onChangeClientState:f,scriptTags:m,styleTags:x,title:v,titleAttributes:w}=s;Lf("body",l),Lf("html",o),Jj(v,w);const N={baseTag:Or("base",r),linkTags:Or("link",u),metaTags:Or("meta",d),noscriptTags:Or("noscript",p),scriptTags:Or("script",m),styleTags:Or("style",x)},T={},S={};Object.keys(N).forEach(j=>{const{newTags:k,oldTags:_}=N[j];k.length&&(T[j]=k),_.length&&(S[j]=N[j].oldTags)}),t&&t(),f(s,T,S)},al=null,Wj=s=>{al&&cancelAnimationFrame(al),s.defer?al=requestAnimationFrame(()=>{Px(s,()=>{al=null})}):(Px(s),al=null)},Xj=Wj,Ux=class extends b.Component{rendered=!1;shouldComponentUpdate(s){return!Dj(s,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:s}=this.props.context;s.remove(this),this.emitChange()}emitChange(){const{helmetInstances:s,setHelmet:t}=this.props.context;let r=null;const l=Ij(s.get().map(o=>{const u={...o.props};return delete u.context,u}));uv.canUseDOM?Xj(l):Df&&(r=Df(l)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:s}=this.props.context;s.add(this),this.emitChange()}render(){return this.init(),null}},Qj=class extends b.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(s){return!Tj(zx(this.props,"helmetData"),zx(s,"helmetData"))}mapNestedChildrenToProps(s,t){if(!t)return null;switch(s.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${s.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(s,t,r,l){return{...t,[s.type]:[...t[s.type]||[],{...r,...this.mapNestedChildrenToProps(s,l)}]}}mapObjectTypeChildren(s,t,r,l){switch(s.type){case"title":return{...t,[s.type]:l,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[s.type]:{...r}}}}mapArrayTypeChildrenToProps(s,t){let r={...t};return Object.keys(s).forEach(l=>{r={...r,[l]:s[l]}}),r}warnOnInvalidChildren(s,t){return Mx($x.some(r=>s.type===r),typeof s.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${$x.join(", ")} are allowed. Helmet does not support rendering <${s.type}> elements. Refer to our API for more information.`),Mx(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${s.type}>. Did you forget to wrap your children in braces? ( <${s.type}>{\`\`}</${s.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(s,t){let r={};return xt.Children.forEach(s,l=>{if(!l||!l.props)return;const{children:o,...u}=l.props,d=Object.keys(u).reduce((f,m)=>(f[Mj[m]||m]=u[m],f),{});let{type:p}=l;switch(typeof p=="symbol"?p=p.toString():this.warnOnInvalidChildren(l,o),p){case"Symbol(react.fragment)":t=this.mapChildrenToProps(o,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(l,r,d,o);break;default:t=this.mapObjectTypeChildren(l,t,d,o);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:s,...t}=this.props;let r={...t},{helmetData:l}=t;if(s&&(r=this.mapChildrenToProps(s,r)),l&&!(l instanceof Mf)){const o=l;l=new Mf(o.context,!0),delete r.helmetData}return l?xt.createElement(Ux,{...r,context:l.value}):xt.createElement(cv.Consumer,null,o=>xt.createElement(Ux,{...r,context:o}))}};const Cc="https://lesfrimousses.com",fv="Les Frimousses";function sl(s){const t=Object.entries(s).filter(([,r])=>r!==void 0);return Object.fromEntries(t)}function Ix(s){if(s)try{return new URL(s).toString()}catch{const t=s.startsWith("/")?s:`/${s}`;return`${Cc}${t}`}}function Zj(s){const{title:t,description:r,url:l,image:o,type:u="website",author:d,publishedAt:p,modifiedAt:f,tags:m=[],breadcrumbs:x=[],ldJson:v}=s,w=l??Cc+"/",N=[];if(u==="article"){const S=d?Array.isArray(d)?d:[d]:[],j=S.length?S.map(k=>({"@type":"Person",name:k})):void 0;N.push(sl({"@context":"https://schema.org","@type":"Article",headline:t,description:r,author:j,datePublished:p,dateModified:f??p,mainEntityOfPage:{"@type":"WebPage","@id":w},image:o?[{"@type":"ImageObject",url:Ix(o),width:1200,height:630}]:void 0,keywords:m.length?m.join(", "):void 0}))}u==="event"&&N.push(sl({"@context":"https://schema.org","@type":"Event",name:t,description:r,startDate:p,endDate:f,url:w,location:{"@type":"Place",name:fv,address:"Marseille, France"},image:o?[{"@type":"ImageObject",url:Ix(o),width:1200,height:630}]:void 0})),x.length&&N.push(sl({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:x.map((S,j)=>({"@type":"ListItem",position:j+1,name:S.name,item:S.url}))}));const T=[];return v&&(Array.isArray(v)?T.push(...v.map(S=>sl(S))):T.push(sl(v))),[...N,...T]}function sf(s){if(s)try{return new URL(s).toString()}catch{const t=s.startsWith("/")?s:`/${s}`;return`${Cc}${t}`}}function Rn({title:s,description:t,url:r,image:l,locale:o="fr_FR",twitterHandle:u="@lesfrimousses",noindex:d=!1,type:p="website",author:f,publishedAt:m,modifiedAt:x,tags:v=[],languages:w=[],breadcrumbs:N=[],ldJson:T}){const j=sf(r)??(typeof window<"u"?window.location.href:Cc+"/"),k=sf(l),_=Zj({title:s,description:t,url:j,image:k??l,type:p,author:f,publishedAt:m,modifiedAt:x,tags:v,breadcrumbs:N,ldJson:T});return a.jsxs(Qj,{children:[s&&a.jsx("title",{children:s}),t&&a.jsx("meta",{name:"description",content:t}),a.jsx("meta",{name:"robots",content:d?"noindex,nofollow":"index,follow"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),f&&a.jsx("meta",{name:"author",content:Array.isArray(f)?f.join(", "):f}),a.jsx("meta",{name:"theme-color",content:"#0b5566"}),a.jsx("meta",{property:"og:locale",content:o}),a.jsx("meta",{property:"og:type",content:p}),s&&a.jsx("meta",{property:"og:title",content:s}),t&&a.jsx("meta",{property:"og:description",content:t}),j&&a.jsx("meta",{property:"og:url",content:j}),a.jsx("meta",{property:"og:site_name",content:fv}),k&&a.jsx("meta",{property:"og:image",content:k}),k&&a.jsx("meta",{property:"og:image:alt",content:t??s}),k&&a.jsx("meta",{property:"og:image:width",content:"1200"}),k&&a.jsx("meta",{property:"og:image:height",content:"630"}),a.jsx("meta",{name:"twitter:card",content:k?"summary_large_image":"summary"}),u&&a.jsx("meta",{name:"twitter:site",content:u}),u&&a.jsx("meta",{name:"twitter:creator",content:u}),k&&a.jsx("meta",{name:"twitter:image",content:k}),k&&a.jsx("meta",{name:"twitter:image:alt",content:t??s}),j&&a.jsx("link",{rel:"canonical",href:j}),w.map(O=>a.jsx("link",{rel:"alternate",hrefLang:O.lang,href:sf(O.url)??O.url},O.lang)),_.length>0&&a.jsx("script",{type:"application/ld+json",children:JSON.stringify(_)})]})}/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bx="popstate";function e2(s={}){function t(l,o){let{pathname:u,search:d,hash:p}=l.location;return $f("",{pathname:u,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(l,o){return typeof o=="string"?o:gl(o)}return n2(t,r,null,s)}function At(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function aa(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t2(){return Math.random().toString(36).substring(2,10)}function qx(s,t){return{usr:s.state,key:s.key,idx:t}}function $f(s,t,r=null,l){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?ii(t):t,state:r,key:t&&t.key||l||t2()}}function gl({pathname:s="/",search:t="",hash:r=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function ii(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substring(r),s=s.substring(0,r));let l=s.indexOf("?");l>=0&&(t.search=s.substring(l),s=s.substring(0,l)),s&&(t.pathname=s)}return t}function n2(s,t,r,l={}){let{window:o=document.defaultView,v5Compat:u=!1}=l,d=o.history,p="POP",f=null,m=x();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function x(){return(d.state||{idx:null}).idx}function v(){p="POP";let j=x(),k=j==null?null:j-m;m=j,f&&f({action:p,location:S.location,delta:k})}function w(j,k){p="PUSH";let _=$f(S.location,j,k);m=x()+1;let O=qx(_,m),q=S.createHref(_);try{d.pushState(O,"",q)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;o.location.assign(q)}u&&f&&f({action:p,location:S.location,delta:1})}function N(j,k){p="REPLACE";let _=$f(S.location,j,k);m=x();let O=qx(_,m),q=S.createHref(_);d.replaceState(O,"",q),u&&f&&f({action:p,location:S.location,delta:0})}function T(j){return a2(j)}let S={get action(){return p},get location(){return s(o,d)},listen(j){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(Bx,v),f=j,()=>{o.removeEventListener(Bx,v),f=null}},createHref(j){return t(o,j)},createURL:T,encodeLocation(j){let k=T(j);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:w,replace:N,go(j){return d.go(j)}};return S}function a2(s,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),At(r,"No window.location.(origin|href) available to create URL");let l=typeof s=="string"?s:gl(s);return l=l.replace(/ $/,"%20"),!t&&l.startsWith("//")&&(l=r+l),new URL(l,r)}function hv(s,t,r="/"){return s2(s,t,r,!1)}function s2(s,t,r,l){let o=typeof t=="string"?ii(t):t,u=Ua(o.pathname||"/",r);if(u==null)return null;let d=mv(s);r2(d);let p=null;for(let f=0;p==null&&f<d.length;++f){let m=g2(u);p=m2(d[f],m,l)}return p}function mv(s,t=[],r=[],l="",o=!1){let u=(d,p,f=o,m)=>{let x={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(l)&&f)return;At(x.relativePath.startsWith(l),`Absolute route path "${x.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(l.length)}let v=$a([l,x.relativePath]),w=r.concat(x);d.children&&d.children.length>0&&(At(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),mv(d.children,t,w,v,f)),!(d.path==null&&!d.index)&&t.push({path:v,score:f2(v,d.index),routesMeta:w})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let f of pv(d.path))u(d,p,!0,f)}),t}function pv(s){let t=s.split("/");if(t.length===0)return[];let[r,...l]=t,o=r.endsWith("?"),u=r.replace(/\?$/,"");if(l.length===0)return o?[u,""]:[u];let d=pv(l.join("/")),p=[];return p.push(...d.map(f=>f===""?u:[u,f].join("/"))),o&&p.push(...d),p.map(f=>s.startsWith("/")&&f===""?"/":f)}function r2(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:h2(t.routesMeta.map(l=>l.childrenIndex),r.routesMeta.map(l=>l.childrenIndex)))}var i2=/^:[\w-]+$/,l2=3,o2=2,c2=1,u2=10,d2=-2,Hx=s=>s==="*";function f2(s,t){let r=s.split("/"),l=r.length;return r.some(Hx)&&(l+=d2),t&&(l+=o2),r.filter(o=>!Hx(o)).reduce((o,u)=>o+(i2.test(u)?l2:u===""?c2:u2),l)}function h2(s,t){return s.length===t.length&&s.slice(0,-1).every((l,o)=>l===t[o])?s[s.length-1]-t[t.length-1]:0}function m2(s,t,r=!1){let{routesMeta:l}=s,o={},u="/",d=[];for(let p=0;p<l.length;++p){let f=l[p],m=p===l.length-1,x=u==="/"?t:t.slice(u.length)||"/",v=oc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},x),w=f.route;if(!v&&m&&r&&!l[l.length-1].route.index&&(v=oc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},x)),!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:$a([u,v.pathname]),pathnameBase:y2($a([u,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(u=$a([u,v.pathnameBase]))}return d}function oc(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,l]=p2(s.path,s.caseSensitive,s.end),o=t.match(r);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:l.reduce((m,{paramName:x,isOptional:v},w)=>{if(x==="*"){let T=p[w]||"";d=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const N=p[w];return v&&!N?m[x]=void 0:m[x]=(N||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:d,pattern:s}}function p2(s,t=!1,r=!0){aa(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let l=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,f)=>(l.push({paramName:p,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(l.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),l]}function g2(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return aa(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Ua(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,l=s.charAt(r);return l&&l!=="/"?null:s.slice(r)||"/"}function x2(s,t="/"){let{pathname:r,search:l="",hash:o=""}=typeof s=="string"?ii(s):s;return{pathname:r?r.startsWith("/")?r:b2(r,t):t,search:w2(l),hash:j2(o)}}function b2(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function rf(s,t,r,l){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function v2(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function gv(s){let t=v2(s);return t.map((r,l)=>l===t.length-1?r.pathname:r.pathnameBase)}function xv(s,t,r,l=!1){let o;typeof s=="string"?o=ii(s):(o={...s},At(!o.pathname||!o.pathname.includes("?"),rf("?","pathname","search",o)),At(!o.pathname||!o.pathname.includes("#"),rf("#","pathname","hash",o)),At(!o.search||!o.search.includes("#"),rf("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=r;else{let v=t.length-1;if(!l&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),v-=1;o.pathname=w.join("/")}p=v>=0?t[v]:"/"}let f=x2(o,p),m=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(m||x)&&(f.pathname+="/"),f}var $a=s=>s.join("/").replace(/\/\/+/g,"/"),y2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),w2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,j2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function N2(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var bv=["POST","PUT","PATCH","DELETE"];new Set(bv);var S2=["GET",...bv];new Set(S2);var li=b.createContext(null);li.displayName="DataRouter";var Ec=b.createContext(null);Ec.displayName="DataRouterState";b.createContext(!1);var vv=b.createContext({isTransitioning:!1});vv.displayName="ViewTransition";var _2=b.createContext(new Map);_2.displayName="Fetchers";var C2=b.createContext(null);C2.displayName="Await";var ma=b.createContext(null);ma.displayName="Navigation";var Nl=b.createContext(null);Nl.displayName="Location";var ra=b.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var oh=b.createContext(null);oh.displayName="RouteError";function E2(s,{relative:t}={}){At(Sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:l}=b.useContext(ma),{hash:o,pathname:u,search:d}=_l(s,{relative:t}),p=u;return r!=="/"&&(p=u==="/"?r:$a([r,u])),l.createHref({pathname:p,search:d,hash:o})}function Sl(){return b.useContext(Nl)!=null}function pa(){return At(Sl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Nl).location}var yv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wv(s){b.useContext(ma).static||b.useLayoutEffect(s)}function Ot(){let{isDataRoute:s}=b.useContext(ra);return s?q2():T2()}function T2(){At(Sl(),"useNavigate() may be used only in the context of a <Router> component.");let s=b.useContext(li),{basename:t,navigator:r}=b.useContext(ma),{matches:l}=b.useContext(ra),{pathname:o}=pa(),u=JSON.stringify(gv(l)),d=b.useRef(!1);return wv(()=>{d.current=!0}),b.useCallback((f,m={})=>{if(aa(d.current,yv),!d.current)return;if(typeof f=="number"){r.go(f);return}let x=xv(f,JSON.parse(u),o,m.relative==="path");s==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:$a([t,x.pathname])),(m.replace?r.replace:r.push)(x,m.state,m)},[t,r,u,o,s])}var k2=b.createContext(null);function A2(s){let t=b.useContext(ra).outlet;return b.useMemo(()=>t&&b.createElement(k2.Provider,{value:s},t),[t,s])}function jv(){let{matches:s}=b.useContext(ra),t=s[s.length-1];return t?t.params:{}}function _l(s,{relative:t}={}){let{matches:r}=b.useContext(ra),{pathname:l}=pa(),o=JSON.stringify(gv(r));return b.useMemo(()=>xv(s,JSON.parse(o),l,t==="path"),[s,o,l,t])}function O2(s,t){return Nv(s,t)}function Nv(s,t,r,l,o){At(Sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=b.useContext(ma),{matches:d}=b.useContext(ra),p=d[d.length-1],f=p?p.params:{},m=p?p.pathname:"/",x=p?p.pathnameBase:"/",v=p&&p.route;{let _=v&&v.path||"";Sv(m,!v||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let w=pa(),N;if(t){let _=typeof t=="string"?ii(t):t;At(x==="/"||_.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${_.pathname}" was given in the \`location\` prop.`),N=_}else N=w;let T=N.pathname||"/",S=T;if(x!=="/"){let _=x.replace(/^\//,"").split("/");S="/"+T.replace(/^\//,"").split("/").slice(_.length).join("/")}let j=hv(s,{pathname:S});aa(v||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),aa(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=$2(j&&j.map(_=>Object.assign({},_,{params:Object.assign({},f,_.params),pathname:$a([x,u.encodeLocation?u.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?x:$a([x,u.encodeLocation?u.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),d,r,l,o);return t&&k?b.createElement(Nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},k):k}function R2(){let s=B2(),t=N2(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,l="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:l},u={padding:"2px 4px",backgroundColor:l},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:u},"ErrorBoundary")," or"," ",b.createElement("code",{style:u},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:o},r):null,d)}var D2=b.createElement(R2,null),M2=class extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?b.createElement(ra.Provider,{value:this.props.routeContext},b.createElement(oh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function L2({routeContext:s,match:t,children:r}){let l=b.useContext(li);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(ra.Provider,{value:s},r)}function $2(s,t=[],r=null,l=null,o=null){if(s==null){if(!r)return null;if(r.errors)s=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let u=s,d=r?.errors;if(d!=null){let m=u.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);At(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,m+1))}let p=!1,f=-1;if(r)for(let m=0;m<u.length;m++){let x=u[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=m),x.route.id){let{loaderData:v,errors:w}=r,N=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!w||w[x.route.id]===void 0);if(x.route.lazy||N){p=!0,f>=0?u=u.slice(0,f+1):u=[u[0]];break}}}return u.reduceRight((m,x,v)=>{let w,N=!1,T=null,S=null;r&&(w=d&&x.route.id?d[x.route.id]:void 0,T=x.route.errorElement||D2,p&&(f<0&&v===0?(Sv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,S=null):f===v&&(N=!0,S=x.route.hydrateFallbackElement||null)));let j=t.concat(u.slice(0,v+1)),k=()=>{let _;return w?_=T:N?_=S:x.route.Component?_=b.createElement(x.route.Component,null):x.route.element?_=x.route.element:_=m,b.createElement(L2,{match:x,routeContext:{outlet:m,matches:j,isDataRoute:r!=null},children:_})};return r&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?b.createElement(M2,{location:r.location,revalidation:r.revalidation,component:T,error:w,children:k(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:l}):k()},null)}function ch(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z2(s){let t=b.useContext(li);return At(t,ch(s)),t}function P2(s){let t=b.useContext(Ec);return At(t,ch(s)),t}function U2(s){let t=b.useContext(ra);return At(t,ch(s)),t}function uh(s){let t=U2(s),r=t.matches[t.matches.length-1];return At(r.route.id,`${s} can only be used on routes that contain a unique "id"`),r.route.id}function I2(){return uh("useRouteId")}function B2(){let s=b.useContext(oh),t=P2("useRouteError"),r=uh("useRouteError");return s!==void 0?s:t.errors?.[r]}function q2(){let{router:s}=z2("useNavigate"),t=uh("useNavigate"),r=b.useRef(!1);return wv(()=>{r.current=!0}),b.useCallback(async(o,u={})=>{aa(r.current,yv),r.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:t,...u}))},[s,t])}var Vx={};function Sv(s,t,r){!t&&!Vx[s]&&(Vx[s]=!0,aa(!1,r))}b.memo(H2);function H2({routes:s,future:t,state:r,unstable_onError:l}){return Nv(s,void 0,r,l,t)}function ot(s){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function V2({basename:s="/",children:t=null,location:r,navigationType:l="POP",navigator:o,static:u=!1}){At(!Sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),p=b.useMemo(()=>({basename:d,navigator:o,static:u,future:{}}),[d,o,u]);typeof r=="string"&&(r=ii(r));let{pathname:f="/",search:m="",hash:x="",state:v=null,key:w="default"}=r,N=b.useMemo(()=>{let T=Ua(f,d);return T==null?null:{location:{pathname:T,search:m,hash:x,state:v,key:w},navigationType:l}},[d,f,m,x,v,w,l]);return aa(N!=null,`<Router basename="${d}"> is not able to match the URL "${f}${m}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:b.createElement(ma.Provider,{value:p},b.createElement(Nl.Provider,{children:t,value:N}))}function F2({children:s,location:t}){return O2(zf(s),t)}function zf(s,t=[]){let r=[];return b.Children.forEach(s,(l,o)=>{if(!b.isValidElement(l))return;let u=[...t,o];if(l.type===b.Fragment){r.push.apply(r,zf(l.props.children,u));return}At(l.type===ot,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!l.props.index||!l.props.children,"An index route cannot have child routes.");let d={id:l.props.id||u.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(d.children=zf(l.props.children,u)),r.push(d)}),r}var nc="get",ac="application/x-www-form-urlencoded";function Tc(s){return s!=null&&typeof s.tagName=="string"}function G2(s){return Tc(s)&&s.tagName.toLowerCase()==="button"}function Y2(s){return Tc(s)&&s.tagName.toLowerCase()==="form"}function K2(s){return Tc(s)&&s.tagName.toLowerCase()==="input"}function J2(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function W2(s,t){return s.button===0&&(!t||t==="_self")&&!J2(s)}function Pf(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,r)=>{let l=s[r];return t.concat(Array.isArray(l)?l.map(o=>[r,o]):[[r,l]])},[]))}function X2(s,t){let r=Pf(s);return t&&t.forEach((l,o)=>{r.has(o)||t.getAll(o).forEach(u=>{r.append(o,u)})}),r}var Ho=null;function Q2(){if(Ho===null)try{new FormData(document.createElement("form"),0),Ho=!1}catch{Ho=!0}return Ho}var Z2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lf(s){return s!=null&&!Z2.has(s)?(aa(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ac}"`),null):s}function e1(s,t){let r,l,o,u,d;if(Y2(s)){let p=s.getAttribute("action");l=p?Ua(p,t):null,r=s.getAttribute("method")||nc,o=lf(s.getAttribute("enctype"))||ac,u=new FormData(s)}else if(G2(s)||K2(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=s.getAttribute("formaction")||p.getAttribute("action");if(l=f?Ua(f,t):null,r=s.getAttribute("formmethod")||p.getAttribute("method")||nc,o=lf(s.getAttribute("formenctype"))||lf(p.getAttribute("enctype"))||ac,u=new FormData(p,s),!Q2()){let{name:m,type:x,value:v}=s;if(x==="image"){let w=m?`${m}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else m&&u.append(m,v)}}else{if(Tc(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=nc,l=null,o=ac,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:l,method:r.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dh(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function t1(s,t,r){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return l.pathname==="/"?l.pathname=`_root.${r}`:t&&Ua(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function n1(s,t){if(s.id in t)return t[s.id];try{let r=await import(s.module);return t[s.id]=r,r}catch(r){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function s1(s,t,r){let l=await Promise.all(s.map(async o=>{let u=t.routes[o.route.id];if(u){let d=await n1(u,r);return d.links?d.links():[]}return[]}));return o1(l.flat(1).filter(a1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Fx(s,t,r,l,o,u){let d=(f,m)=>r[m]?f.route.id!==r[m].route.id:!0,p=(f,m)=>r[m].pathname!==f.pathname||r[m].route.path?.endsWith("*")&&r[m].params["*"]!==f.params["*"];return u==="assets"?t.filter((f,m)=>d(f,m)||p(f,m)):u==="data"?t.filter((f,m)=>{let x=l.routes[f.route.id];if(!x||!x.hasLoader)return!1;if(d(f,m)||p(f,m))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function r1(s,t,{includeHydrateFallback:r}={}){return i1(s.map(l=>{let o=t.routes[l.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function i1(s){return[...new Set(s)]}function l1(s){let t={},r=Object.keys(s).sort();for(let l of r)t[l]=s[l];return t}function o1(s,t){let r=new Set;return new Set(t),s.reduce((l,o)=>{let u=JSON.stringify(l1(o));return r.has(u)||(r.add(u),l.push({key:u,link:o})),l},[])}function _v(){let s=b.useContext(li);return dh(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function c1(){let s=b.useContext(Ec);return dh(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var fh=b.createContext(void 0);fh.displayName="FrameworkContext";function Cv(){let s=b.useContext(fh);return dh(s,"You must render this element inside a <HydratedRouter> element"),s}function u1(s,t){let r=b.useContext(fh),[l,o]=b.useState(!1),[u,d]=b.useState(!1),{onFocus:p,onBlur:f,onMouseEnter:m,onMouseLeave:x,onTouchStart:v}=t,w=b.useRef(null);b.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let S=k=>{k.forEach(_=>{d(_.isIntersecting)})},j=new IntersectionObserver(S,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[s]),b.useEffect(()=>{if(l){let S=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(S)}}},[l]);let N=()=>{o(!0)},T=()=>{o(!1),d(!1)};return r?s!=="intent"?[u,w,{}]:[u,w,{onFocus:rl(p,N),onBlur:rl(f,T),onMouseEnter:rl(m,N),onMouseLeave:rl(x,T),onTouchStart:rl(v,N)}]:[!1,w,{}]}function rl(s,t){return r=>{s&&s(r),r.defaultPrevented||t(r)}}function d1({page:s,...t}){let{router:r}=_v(),l=b.useMemo(()=>hv(r.routes,s,r.basename),[r.routes,s,r.basename]);return l?b.createElement(h1,{page:s,matches:l,...t}):null}function f1(s){let{manifest:t,routeModules:r}=Cv(),[l,o]=b.useState([]);return b.useEffect(()=>{let u=!1;return s1(s,t,r).then(d=>{u||o(d)}),()=>{u=!0}},[s,t,r]),l}function h1({page:s,matches:t,...r}){let l=pa(),{manifest:o,routeModules:u}=Cv(),{basename:d}=_v(),{loaderData:p,matches:f}=c1(),m=b.useMemo(()=>Fx(s,t,f,o,l,"data"),[s,t,f,o,l]),x=b.useMemo(()=>Fx(s,t,f,o,l,"assets"),[s,t,f,o,l]),v=b.useMemo(()=>{if(s===l.pathname+l.search+l.hash)return[];let T=new Set,S=!1;if(t.forEach(k=>{let _=o.routes[k.route.id];!_||!_.hasLoader||(!m.some(O=>O.route.id===k.route.id)&&k.route.id in p&&u[k.route.id]?.shouldRevalidate||_.hasClientLoader?S=!0:T.add(k.route.id))}),T.size===0)return[];let j=t1(s,d,"data");return S&&T.size>0&&j.searchParams.set("_routes",t.filter(k=>T.has(k.route.id)).map(k=>k.route.id).join(",")),[j.pathname+j.search]},[d,p,l,o,m,t,s,u]),w=b.useMemo(()=>r1(x,o),[x,o]),N=f1(x);return b.createElement(b.Fragment,null,v.map(T=>b.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...r})),w.map(T=>b.createElement("link",{key:T,rel:"modulepreload",href:T,...r})),N.map(({key:T,link:S})=>b.createElement("link",{key:T,nonce:r.nonce,...S})))}function m1(...s){return t=>{s.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ev&&(window.__reactRouterVersion="7.9.4")}catch{}function p1({basename:s,children:t,window:r}){let l=b.useRef();l.current==null&&(l.current=e2({window:r,v5Compat:!0}));let o=l.current,[u,d]=b.useState({action:o.action,location:o.location}),p=b.useCallback(f=>{b.startTransition(()=>d(f))},[d]);return b.useLayoutEffect(()=>o.listen(p),[o,p]),b.createElement(V2,{basename:s,children:t,location:u.location,navigationType:u.action,navigator:o})}var Tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kc=b.forwardRef(function({onClick:t,discover:r="render",prefetch:l="none",relative:o,reloadDocument:u,replace:d,state:p,target:f,to:m,preventScrollReset:x,viewTransition:v,...w},N){let{basename:T}=b.useContext(ma),S=typeof m=="string"&&Tv.test(m),j,k=!1;if(typeof m=="string"&&S&&(j=m,Ev))try{let Z=new URL(window.location.href),I=m.startsWith("//")?new URL(Z.protocol+m):new URL(m),P=Ua(I.pathname,T);I.origin===Z.origin&&P!=null?m=P+I.search+I.hash:k=!0}catch{aa(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=E2(m,{relative:o}),[O,q,M]=u1(l,w),L=v1(m,{replace:d,state:p,target:f,preventScrollReset:x,relative:o,viewTransition:v});function U(Z){t&&t(Z),Z.defaultPrevented||L(Z)}let W=b.createElement("a",{...w,...M,href:j||_,onClick:k||u?t:U,ref:m1(N,q),target:f,"data-discover":!S&&r==="render"?"true":void 0});return O&&!S?b.createElement(b.Fragment,null,W,b.createElement(d1,{page:_})):W});kc.displayName="Link";var g1=b.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:l="",end:o=!1,style:u,to:d,viewTransition:p,children:f,...m},x){let v=_l(d,{relative:m.relative}),w=pa(),N=b.useContext(Ec),{navigator:T,basename:S}=b.useContext(ma),j=N!=null&&_1(v)&&p===!0,k=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,_=w.pathname,O=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;r||(_=_.toLowerCase(),O=O?O.toLowerCase():null,k=k.toLowerCase()),O&&S&&(O=Ua(O,S)||O);const q=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let M=_===k||!o&&_.startsWith(k)&&_.charAt(q)==="/",L=O!=null&&(O===k||!o&&O.startsWith(k)&&O.charAt(k.length)==="/"),U={isActive:M,isPending:L,isTransitioning:j},W=M?t:void 0,Z;typeof l=="function"?Z=l(U):Z=[l,M?"active":null,L?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let I=typeof u=="function"?u(U):u;return b.createElement(kc,{...m,"aria-current":W,className:Z,ref:x,style:I,to:d,viewTransition:p},typeof f=="function"?f(U):f)});g1.displayName="NavLink";var x1=b.forwardRef(({discover:s="render",fetcherKey:t,navigate:r,reloadDocument:l,replace:o,state:u,method:d=nc,action:p,onSubmit:f,relative:m,preventScrollReset:x,viewTransition:v,...w},N)=>{let T=N1(),S=S1(p,{relative:m}),j=d.toLowerCase()==="get"?"get":"post",k=typeof p=="string"&&Tv.test(p),_=O=>{if(f&&f(O),O.defaultPrevented)return;O.preventDefault();let q=O.nativeEvent.submitter,M=q?.getAttribute("formmethod")||d;T(q||O.currentTarget,{fetcherKey:t,method:M,navigate:r,replace:o,state:u,relative:m,preventScrollReset:x,viewTransition:v})};return b.createElement("form",{ref:N,method:j,action:S,onSubmit:l?f:_,...w,"data-discover":!k&&s==="render"?"true":void 0})});x1.displayName="Form";function b1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kv(s){let t=b.useContext(li);return At(t,b1(s)),t}function v1(s,{target:t,replace:r,state:l,preventScrollReset:o,relative:u,viewTransition:d}={}){let p=Ot(),f=pa(),m=_l(s,{relative:u});return b.useCallback(x=>{if(W2(x,t)){x.preventDefault();let v=r!==void 0?r:gl(f)===gl(m);p(s,{replace:v,state:l,preventScrollReset:o,relative:u,viewTransition:d})}},[f,p,m,r,l,t,s,o,u,d])}function y1(s){aa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=b.useRef(Pf(s)),r=b.useRef(!1),l=pa(),o=b.useMemo(()=>X2(l.search,r.current?null:t.current),[l.search]),u=Ot(),d=b.useCallback((p,f)=>{const m=Pf(typeof p=="function"?p(new URLSearchParams(o)):p);r.current=!0,u("?"+m,f)},[u,o]);return[o,d]}var w1=0,j1=()=>`__${String(++w1)}__`;function N1(){let{router:s}=kv("useSubmit"),{basename:t}=b.useContext(ma),r=I2();return b.useCallback(async(l,o={})=>{let{action:u,method:d,encType:p,formData:f,body:m}=e1(l,t);if(o.navigate===!1){let x=o.fetcherKey||j1();await s.fetch(x,r,o.action||u,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||d,formEncType:o.encType||p,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:f,body:m,formMethod:o.method||d,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,t,r])}function S1(s,{relative:t}={}){let{basename:r}=b.useContext(ma),l=b.useContext(ra);At(l,"useFormAction must be used inside a RouteContext");let[o]=l.matches.slice(-1),u={..._l(s||".",{relative:t})},d=pa();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),f=p.getAll("index");if(f.some(x=>x==="")){p.delete("index"),f.filter(v=>v).forEach(v=>p.append("index",v));let x=p.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(u.pathname=u.pathname==="/"?r:$a([r,u.pathname])),gl(u)}function _1(s,{relative:t}={}){let r=b.useContext(vv);At(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=kv("useViewTransitionState"),o=_l(s,{relative:t});if(!r.isTransitioning)return!1;let u=Ua(r.currentLocation.pathname,l)||r.currentLocation.pathname,d=Ua(r.nextLocation.pathname,l)||r.nextLocation.pathname;return oc(o.pathname,d)!=null||oc(o.pathname,u)!=null}var Av=av();function C1(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Guide de démarrage rapide | Frimousse",description:"Premiers pas sur Frimousse : connexion, navigation, ajout d'enfants, gestion du planning, accès aux rapports.",url:"https://lesfrimousses.com/guide-demarrage"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Guide de démarrage rapide"}),a.jsxs("ol",{className:"list-decimal list-inside text-[#08323a] space-y-3 mb-6",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Connexion :"}),` Rendez-vous sur la page d'accueil, cliquez sur "Se connecter" et saisissez vos identifiants fournis par l'association.`]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Navigation :"})," Utilisez le menu pour accéder aux rubriques : Enfants, Planning, Rapports, etc."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ajouter une nounou :"}),' Depuis la rubrique "Nounou", cliquez sur "Ajouter" et remplissez le formulaire (nom, âge, expérience, etc.).']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ajouter un parent :"}),' Depuis la rubrique "Parents", cliquez sur "Ajouter" et remplissez le formulaire (nom, âge, contacts,  etc.).']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Ajouter un enfant :"}),' Depuis la rubrique "Enfants", cliquez sur "Ajouter" et remplissez le formulaire (nom, âge, contacts, allergies, etc.).']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Gérer le planning :"}),' Accédez à "Accueil" pour visualiser et modifier les plannings de garde.']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Consulter un rapport :"}),` Dans "Rapports", filtrez et consultez les rapports d'activité.`]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Besoin d’aide ?"})," Consultez la page Support ou contactez l’équipe Frimousse."]})]}),a.jsx("div",{className:"mt-8 text-[#08323a] text-sm",children:"Pour plus de détails, consultez les guides spécifiques dans la rubrique Support."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour au support (bas de page)",children:"← Retour au support"})})]})]})}function E1(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Ajouter un enfant | Guide Frimousse",description:"Tutoriel pour ajouter un enfant dans Frimousse : formulaire, champs obligatoires, gestion des groupes et informations parentales.",url:"https://lesfrimousses.com/guide-ajouter-enfant"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Ajouter un enfant"}),a.jsxs("ol",{className:"list-decimal list-inside text-[#08323a] space-y-3 mb-6",children:[a.jsx("li",{children:'Accédez à la rubrique "Enfants" via le menu principal.'}),a.jsx("li",{children:'Cliquez sur le bouton "Ajouter" ou "+" en haut de la liste.'}),a.jsx("li",{children:"Remplissez le formulaire : nom, prénom, âge, sexe, contacts parentaux, allergies, groupe, etc."}),a.jsx("li",{children:"Vérifiez les informations puis validez. L’enfant apparaît alors dans la liste."}),a.jsx("li",{children:"Pour modifier ou supprimer un enfant, utilisez les boutons d’action à droite de chaque ligne."})]}),a.jsx("div",{className:"mt-8 text-[#08323a] text-sm",children:"Astuce : Utilisez les groupes pour organiser les enfants par tranche d'âge."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour au support (bas de page)",children:"← Retour au support"})})]})]})}function T1(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Gérer un planning | Guide Frimousse",description:"Tutoriel pour gérer le planning dans Frimousse : visualisation, modification, gestion des absences et présences.",url:"https://lesfrimousses.com/guide-planning"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Gérer un planning"}),a.jsxs("ol",{className:"list-decimal list-inside text-[#08323a] space-y-3 mb-6",children:[a.jsx("li",{children:'Accédez à la rubrique "Mon planning" via le menu.'}),a.jsx("li",{children:"Visualisez le planning de garde sous forme de calendrier."}),a.jsx("li",{children:"Pour modifier une garde, cliquez sur le créneau souhaité et suivez les instructions."}),a.jsx("li",{children:"Les absences et présences sont gérées directement dans le calendrier."}),a.jsx("li",{children:"Les modifications sont enregistrées automatiquement et visibles par les intervenants concernés."})]}),a.jsx("div",{className:"mt-8 text-[#08323a] text-sm",children:"Seuls les utilisateurs autorisés peuvent modifier le planning."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour au support (bas de page)",children:"← Retour au support"})})]})]})}function k1(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Rapport | Guide Frimousse",description:"Tutoriel pour exporter un rapport dans Frimousse : consultation, filtrage, export PDF ou Excel des rapports d'activité.",url:"https://lesfrimousses.com/guide-export-rapport"}),a.jsx("header",{className:"w-full py-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-4 px-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-left",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Rapport"}),a.jsxs("ol",{className:"list-decimal list-inside text-[#08323a] space-y-3 mb-6",children:[a.jsx("li",{children:'Accédez à la rubrique "Rapports" via le menu.'}),a.jsx("li",{children:"Filtrez les rapports selon la période, le groupe ou l’intervenant."}),a.jsx("li",{children:"Cliquez sur le rapport souhaité pour le consulter en détail."})]})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour au support (bas de page)",children:"← Retour au support"})})]})]})}function A1(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Sécurité & RGPD | Guide Frimousse",description:"Bonnes pratiques de sécurité et conformité RGPD sur Frimousse : gestion des accès, confidentialité, droits des utilisateurs.",url:"https://lesfrimousses.com/guide-securite"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Sécurité & RGPD"}),a.jsxs("ol",{className:"list-decimal list-inside text-[#08323a] space-y-3 mb-6",children:[a.jsx("li",{children:"Chaque utilisateur dispose d’un accès personnalisé et sécurisé (mot de passe, rôle)."}),a.jsx("li",{children:"Les données sont stockées sur des serveurs sécurisés et régulièrement sauvegardées."}),a.jsx("li",{children:"Respect du RGPD : consentement parental, droit à l’oubli, transparence sur l’utilisation des données."}),a.jsx("li",{children:"En cas de problème, contactez le support ou consultez la politique de confidentialité."})]}),a.jsx("div",{className:"mt-8 text-[#08323a] text-sm",children:"La sécurité et la confidentialité sont une priorité pour Frimousse."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/support"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour au support (bas de page)",children:"← Retour au support"})})]})]})}function Ov({open:s,title:t,body:r,confirmLabel:l="Confirm",cancelLabel:o="Cancel",onConfirm:u,onCancel:d,loading:p=!1,variant:f="default"}){if(!s)return null;const m=f==="success"?a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-600",children:a.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:a.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):f==="danger"?a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 text-red-600",children:a.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[a.jsx("path",{d:"M12 9v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 17h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}):a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 text-blue-600",children:a.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:a.jsx("path",{d:"M12 5v7l3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/45 backdrop-blur-sm",onClick:d}),a.jsxs("div",{className:"relative bg-white w-full max-w-md mx-4 rounded-lg shadow-2xl p-6 transform transition-all duration-200 ease-out scale-100",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[m,a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&a.jsx("div",{className:"text-sm text-gray-600 mt-2",children:r})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[o?a.jsx("button",{onClick:d,disabled:p,className:"px-4 py-2 bg-gray-50 text-gray-700 rounded-md border border-gray-200 hover:bg-gray-100",children:o}):null,a.jsx("button",{onClick:async()=>{await u()},disabled:p,className:`px-4 py-2 rounded-md shadow text-white font-medium ${f==="danger"?"bg-red-600 hover:bg-red-700":f==="success"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:p?"...":l})]})]})]})}const il="https://api.monsite.fr";function O1(){const[s,t]=b.useState(null),[r,l]=b.useState(null),[o,u]=b.useState([]),[d,p]=b.useState(0),[f,m]=b.useState(!1),[x,v]=b.useState(""),[w,N]=b.useState(5),[T,S]=b.useState(""),[j,k]=b.useState(!1),[_,O]=b.useState(null),[q,M]=b.useState(!1),[L,U]=b.useState(void 0),[W,Z]=b.useState(void 0),I=o.length>0?o[d%o.length]:null;return b.useEffect(()=>{const P=async()=>{try{const E=await(await fetch(`${il}/children/count`)).json();t(typeof E.count=="number"?E.count:0)}catch{t(0)}try{const E=await(await fetch(`${il}/user/all`,{credentials:"include"})).json();if(Array.isArray(E))l(E.filter(C=>C.role==="admin").length);else if(Array.isArray(E&&E.users)){const G=E.users;l(G.filter(C=>C.role==="admin").length)}else l(0)}catch{l(0)}try{const E=await(await fetch(`${il}/reviews?limit=6`)).json();u(Array.isArray(E.reviews)?E.reviews:[])}catch{u([])}};let Q=null;return typeof window.requestIdleCallback=="function"?Q=window.requestIdleCallback(()=>{P()}):Q=window.setTimeout(()=>{P()},250),()=>{try{typeof Q=="number"&&(typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(Q):window.clearTimeout(Q))}catch{}}},[]),a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0 relative pb-16 sm:pb-0",children:[a.jsx(Rn,{title:"Frimousse — Logiciel de gestion pour crèches et MAM",description:"Frimousse aide les crèches, micro-crèches et MAM à gérer inscriptions, plannings, fiches enfants et communication parent-crèche. Essai gratuit et conformité RGPD.",url:"https://lesfrimousses.com/",image:"https://lesfrimousses.com/frimousse-cover.png"}),a.jsxs("section",{className:"w-full bg-gradient-to-br from-[#a9ddf2] to-[#f7f4d7] pt-6 sm:pt-12 pb-20 px-4 flex flex-col items-center justify-center text-center",children:[a.jsx("header",{className:"w-full sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto relative flex items-start justify-between py-2 md:py-3 px-4",children:[a.jsxs("div",{className:"flex items-center gap-3 w-full justify-start md:justify-start",children:[a.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{loading:"lazy",src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center md:text-left",children:a.jsx("span",{className:"hidden sm:inline-block font-extrabold text-xl text-[#0b5566]",children:"Les Frimousses"})})]}),a.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 sm:hidden pointer-events-none",children:a.jsx("span",{className:"font-extrabold text-xl text-[#0b5566]",children:"Les Frimousses"})}),a.jsxs("div",{className:"hidden md:flex gap-2",children:[a.jsx("a",{href:"/register",className:"bg-[#f7f4d7] border border-[#fcdcdf] text-[#0b5566] rounded px-3 py-1 font-semibold hover:bg-[#fcdcdf] transition text-sm",children:"Inscription"}),a.jsx("a",{href:"/login",className:"bg-[#0b5566] !text-white rounded px-3 py-1 text-sm hover:opacity-95 transition",children:"Connexion"})]})]})}),a.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold text-[#0b5566] mb-4 leading-tight drop-shadow-sm",children:["Simplifiez la gestion de votre association",a.jsx("br",{className:"hidden md:block"})," de garde d’enfants"]}),a.jsx("p",{className:"text-lg md:text-2xl text-[#08323a] mb-6 max-w-2xl mx-auto font-medium",children:"Plateforme tout-en-un pour crèches associatives, micro-crèches, MAM, garderies et centres de loisirs."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8 justify-center items-center w-full",children:[a.jsx("a",{href:"/register",className:"bg-[#0b5566] !text-white rounded-full px-8 py-4 font-bold text-lg shadow hover:opacity-95 transition w-full sm:w-auto",children:"Essayer gratuitement"}),a.jsx("a",{href:"/tarifs",className:"bg-[#f7f4d7] border border-[#fcdcdf] text-[#0b5566] rounded-full px-8 py-4 font-bold text-lg shadow hover:bg-[#fcdcdf] transition w-full sm:w-auto",children:"Voir les tarifs"}),a.jsx("a",{href:"/login",className:"sm:hidden bg-[#0b5566] !text-white rounded-full px-8 py-4 font-bold text-lg shadow hover:scale-105 transition w-full text-center","aria-label":"Connexion",title:"Connexion",children:"Connexion"})]})]}),a.jsx("section",{className:"w-full py-16 px-4 bg-gradient-to-r from-[#a9ddf2] to-[#f7f4d7]",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-[#0b5566] mb-10",children:"Pourquoi choisir Frimousse ?"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Planning intelligent"}),a.jsx("p",{className:"text-[#08323a]",children:"Interface calendrier intuitive pour gérer les présences, suivre les plannings et organiser les activités facilement."})]}),a.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Fiches enfants"}),a.jsx("p",{className:"text-[#08323a]",children:"Profils complets avec infos médicales, contacts d’urgence, autorisations parentales, allergies et notes personnalisées pour chaque enfant."})]}),a.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Gestion des intervenants"}),a.jsx("p",{className:"text-[#08323a]",children:"Suivi des plannings, qualifications et affectations des professionnels pour une prise en charge optimale."})]}),a.jsxs("div",{className:"flex flex-col items-center text-center bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Communication facilitée"}),a.jsx("p",{className:"text-[#08323a]",children:"Notifications, documents, actualités et échanges avec les familles pour une relation de confiance."})]}),a.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Sécurité & RGPD"}),a.jsx("p",{className:"text-[#08323a]",children:"Données protégées, accès sécurisés, conformité RGPD et confidentialité garantie pour tous les utilisateurs."})]}),a.jsxs("div",{className:"flex flex-col items-center text-center p-6 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:[a.jsx("span",{className:"text-3xl mb-2","aria-hidden":!0}),a.jsx("h3",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Support humain"}),a.jsx("p",{className:"text-[#08323a]",children:"Une équipe réactive pour vous accompagner, former et répondre à toutes vos questions."})]})]}),a.jsxs("div",{className:"mt-12 bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8 mx-auto text-center max-w-3xl",children:[a.jsx("h3",{className:"text-lg font-bold text-[#0b5566] mb-3",children:"Les frimousses votre application de gestion d'enfant"}),a.jsx("p",{className:"text-[#08323a] mb-2",children:"Frimousse est une application de gestion d'enfant pensée pour les associations, crèches, micro-crèches, MAM et garderies. Notre logiciel de gestion pour crèche permet d'automatiser les inscriptions, gérer les plannings, suivre les présences, tenir à jour les fiches enfants (dossier médical, autorisations, contacts), et faciliter la communication entre parents et structures."}),a.jsx("p",{className:"text-[#08323a] mb-2",children:"Que vous cherchiez une solution pour une crèche associative, une micro-crèche, une Maison d'Assistantes Maternelles (MAM) ou un réseau de garderies, Frimousse offre des fonctionnalités complètes : application pour crèche, application pour MAM, gestion des réservations, facturation et export des données."}),a.jsx("p",{className:"text-[#08323a]",children:"Frimousse facilite aussi la mise en relation entre parents et crèches/MAM, la diffusion d'annonces et l'organisation d'ateliers. Nos outils aident à professionnaliser la gestion des structures d'accueil et à renforcer la confiance entre les familles et le personnel."}),a.jsxs("ul",{className:"mt-4 text-[#08323a] list-disc list-inside mx-auto text-center max-w-lg",children:[a.jsx("li",{className:"mx-auto",children:"Application de gestion d'enfant pour crèche et MAM"}),a.jsx("li",{className:"mx-auto",children:"Gestion des inscriptions et des présences"}),a.jsx("li",{className:"mx-auto",children:"Planning et affectation des intervenants"}),a.jsx("li",{className:"mx-auto",children:"Mise en relation parent — crèche / parent — MAM"}),a.jsx("li",{className:"mx-auto",children:"Fiches enfants, santé et autorisations"}),a.jsx("li",{className:"mx-auto",children:"Conformité RGPD et sécurité des données"})]})]}),a.jsx("div",{className:"flex flex-wrap justify-center gap-12 text-center mt-8",children:a.jsxs("div",{className:"w-full flex flex-wrap justify-center gap-8 mt-8",children:[a.jsxs("div",{className:"bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8 flex flex-col items-center min-w-[140px] border border-[#fcdcdf] hover:scale-105 transition-transform",children:[a.jsx("span",{className:"inline-block bg-[white] rounded-full shadow px-4 py-2 mb-2 text-[#0b5566] font-bold text-lg",children:s!==null?s:"..."}),a.jsxs("span",{className:"text-[#0b5566] font-semibold text-base",children:["Familles",a.jsx("br",{}),"inscrites"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8 flex flex-col items-center min-w-[140px] border border-[#fcdcdf] hover:scale-105 transition-transform",children:[a.jsx("span",{className:"inline-block bg-white rounded-full shadow px-4 py-2 mb-2 text-[#0b5566] font-bold text-lg",children:r!==null?r:"..."}),a.jsxs("span",{className:"text-[#0b5566] font-semibold text-base",children:["Associations ",a.jsx("br",{}),"suivi"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8 flex flex-col items-center min-w-[140px] border border-[#fcdcdf] hover:scale-105 transition-transform",children:[a.jsx("span",{className:"inline-block bg-white rounded-full shadow px-4 py-2 mb-2 text-[#0b5566] font-bold text-lg",children:"99%"}),a.jsxs("span",{className:"text-[#0b5566] font-semibold text-base",children:["Utilisateur ",a.jsx("br",{})," satisfait"]})]})]})})]})}),a.jsxs("section",{className:"w-full bg-gradient-to-r from-[#a9ddf2] to-[#f7f4d7] py-12 px-6",children:[a.jsx("div",{className:"max-w-5xl mx-auto flex flex-col items-center",children:a.jsx("div",{className:"w-full bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8 flex flex-col gap-8 items-center",children:a.jsxs("div",{className:"flex flex-col gap-6 items-center justify-center w-full",children:[a.jsxs("div",{className:"text-[#08323a] text-lg leading-relaxed max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-extrabold text-[#0b5566] mb-3",children:"Chez Frimousse"}),a.jsx("p",{className:"m-0",children:"nous croyons que chaque enfant mérite un accueil de qualité, dans un environnement sécurisé, stimulant et bienveillant. Notre mission est d’accompagner les associations, crèches et structures d’accueil dans leur engagement quotidien auprès des familles."})]}),a.jsx("div",{className:"text-[#08323a] text-lg leading-relaxed max-w-3xl mx-auto text-center",children:a.jsx("p",{className:"m-0",children:"Nous facilitons la gestion administrative et humaine pour que les équipes puissent se concentrer sur l’essentiel : l’épanouissement et la sécurité des enfants. Notre plateforme permet de gagner du temps, de renforcer la confiance avec les familles et de garantir la conformité réglementaire (RGPD, sécurité des données)."})}),a.jsxs("div",{className:"text-[#08323a] text-lg leading-relaxed max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"text-xl md:text-2xl font-extrabold text-[#0b5566] mb-2",children:"Impact social"}),a.jsx("p",{className:"m-0",children:"Inclusion, diversité et accès à un accueil de qualité pour tous. Nous accompagnons les structures dans leur développement, leur professionnalisation et leur transformation digitale, tout en restant proches de leurs valeurs humaines."})]}),a.jsxs("div",{className:"text-[#08323a] text-lg leading-relaxed max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"text-xl md:text-2xl font-extrabold text-[#0b5566] mb-2",children:"Innovation"}),a.jsx("p",{className:"m-0",children:"Des outils simples, intuitifs et adaptés aux besoins réels du terrain. Notre équipe est à l’écoute de vos retours pour faire évoluer la plateforme."})]}),a.jsxs("div",{className:"text-[#08323a] text-lg leading-relaxed max-w-3xl mx-auto text-center",children:[a.jsx("div",{className:"text-xl md:text-2xl font-extrabold text-[#0b5566] mb-2",children:"Accompagnement"}),a.jsx("p",{className:"m-0",children:"Plus qu’un logiciel, Frimousse c’est aussi un accompagnement humain, une équipe disponible et des ressources pour vous aider à chaque étape."})]})]})})}),a.jsx("br",{}),a.jsx("section",{className:"w-full py-16 px-6 bg-gradient-to-r from-[#a9ddf2] to-[#f7f4d7]",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"flex items-center justify-center gap-2 mb-3","aria-hidden":!0,children:[1,2,3,4,5].map(P=>a.jsx("svg",{className:"w-6 h-6 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.957a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.448a1 1 0 00-.364 1.118l1.286 3.957c.3.921-.755 1.688-1.54 1.118L10 15.347l-3.487 2.678c-.785.57-1.84-.197-1.54-1.118l1.286-3.957a1 1 0 00-.364-1.118L2.525 9.384c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.05 2.927z"})},P))}),a.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-[#0b5566]",children:"Les avis de nos utilisateurs"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:s?`Plus de ${s} familles nous font confiance pour le bien-être de leurs enfants`:"Des dizaines de familles nous font confiance pour le bien-être de leurs enfants"}),a.jsx("div",{className:"mt-6 flex items-center justify-center gap-10",children:(()=>{const P=o.filter(Y=>Y.approved),Q=P.map(Y=>typeof Y.rating=="number"?Y.rating:0),$=Q.length?Q.reduce((Y,te)=>Y+te,0)/Q.length:0,E=Math.round($*10)/10,G=Q.length?Number.isInteger(E)?String(Math.round(E)):E.toFixed(1):"—",C=P.length,R=Q.length?Math.round(Q.filter(Y=>Y>=4).length/Q.length*100):0;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-extrabold text-[#0b5566]",children:[G,"/5"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"Note moyenne"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-extrabold text-[#0b5566]",children:C}),a.jsx("div",{className:"text-xs text-gray-400",children:"Avis vérifiés"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-extrabold text-[#0b5566]",children:[R,"%"]}),a.jsx("div",{className:"text-xs text-gray-400",children:"Recommandent"})]})]})})()})]}),a.jsxs("div",{className:"relative mt-8 px-4 md:px-12",children:[a.jsx("div",{className:"absolute left-0 top-2/5 -translate-y-1/2 z-20 -translate-x-8 md:-translate-x-12 flex items-center h-full",children:a.jsx("button",{"aria-label":"Précédent",onClick:()=>p(P=>o.length===0?0:(P-1+o.length)%o.length),className:"w-12 h-12 rounded-full bg-gradient-to-br from-white/90 to-white/70 backdrop-blur-sm border border-gray-200 shadow-lg flex items-center justify-center text-2xl text-[#0b5566] hover:scale-105 transition-transform",children:"‹"})}),a.jsx("div",{className:"absolute right-0 top-2/5 -translate-y-1/2 z-20 translate-x-8 md:translate-x-12 flex items-center h-full",children:a.jsx("button",{"aria-label":"Suivant",onClick:()=>p(P=>o.length===0?0:(P+1)%o.length),className:"w-12 h-12 rounded-full bg-gradient-to-br from-white/90 to-white/70 backdrop-blur-sm border border-gray-200 shadow-lg flex items-center justify-center text-2xl text-[#0b5566] hover:scale-105 transition-transform",children:"›"})}),a.jsx("div",{className:"mx-auto w-full max-w-3xl",children:I?a.jsx("div",{className:"relative",children:a.jsx("div",{className:"transform transition duration-500 ease-in-out",children:a.jsxs("div",{className:"bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-4 md:p-8 relative",children:[a.jsxs("div",{className:"absolute top-8 right-4 flex flex-col items-end gap-1 md:hidden",children:[a.jsx("div",{className:"text-sm font-semibold text-[#08323a]",children:I.authorName||"Anonyme"}),a.jsx("div",{className:"text-xs text-gray-400",children:new Date(I.createdAt).toLocaleDateString()})]}),a.jsx("div",{className:"absolute bottom-6 right-4 flex gap-1 md:top-2 md:right-2",children:[1,2,3,4,5].map(P=>a.jsx("svg",{className:`w-5 h-5 ${I.rating&&I.rating>=P?"text-yellow-400":"text-gray-200"}`,viewBox:"0 0 20 20",fill:I.rating&&I.rating>=P?"currentColor":"none",stroke:I.rating&&I.rating>=P?"none":"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.957a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.448a1 1 0 00-.364 1.118l1.286 3.957c.3.921-.755 1.688-1.54 1.118L10 15.347l-3.487 2.678c-.785.57-1.84-.197-1.54-1.118l1.286-3.957a1 1 0 00-.364-1.118L2.525 9.384c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.05 2.927z"})},P))}),a.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-4 md:gap-5",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-[#0b5566] to-[#0b83a3] text-white flex items-center justify-center font-bold text-lg md:text-xl shadow-lg",children:(I.authorName||"U").split(" ").map(P=>P[0]).slice(0,2).join("")})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"hidden md:flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-semibold text-[#08323a]",children:I.authorName||"Anonyme"}),a.jsx("div",{className:"text-sm text-gray-400",children:new Date(I.createdAt).toLocaleDateString()})]})}),a.jsxs("div",{className:"mt-3 text-[#08323a] text-base md:text-lg leading-relaxed",children:[a.jsx("svg",{className:"w-8 h-8 text-[#0b5566] opacity-20 inline-block mr-2 -translate-y-1",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M7.17 6A5 5 0 0 1 12 3v6H6a1 1 0 0 0-1 1v4h2v-4a3 3 0 0 1 0-6H7.17zM17.17 6A5 5 0 0 1 22 3v6h-6a1 1 0 0 0-1 1v4h2v-4a3 3 0 0 1 0-6h.17z"})}),a.jsx("span",{className:"italic",children:I.content})]}),a.jsx("div",{className:"mt-3 flex items-center justify-start",children:a.jsx("span",{className:"inline-flex items-center gap-2 text-sm text-green-600 font-medium bg-green-50 px-2 py-1 rounded",children:"✓ Avis vérifié"})})]})]})]})},I.id)}):a.jsx("div",{className:"text-gray-500 text-center py-12",children:"Aucun avis pour le moment."})}),a.jsx("div",{className:"mt-6 flex items-center justify-center gap-3",children:o.slice(0,5).map((P,Q)=>a.jsx("button",{onClick:()=>p(Q),className:`w-3 h-3 rounded-full ${d%Math.max(1,o.length)===Q?"bg-[#0b5566] scale-110":"bg-gray-200"} transition-transform`,"aria-label":`Aller à avis ${Q+1}`},Q))}),a.jsx("div",{className:"mt-6 flex items-center justify-center",children:a.jsxs("button",{className:"mt-4 bg-gradient-to-r from-[#0b5566] to-[#0b83a3] text-white px-5 py-2 rounded-full font-semibold shadow-lg hover:opacity-95 transition inline-flex items-center gap-3",onClick:()=>m(P=>!P),"aria-expanded":f,children:[f?"Annuler":"Laisser un avis",a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4"}),a.jsx("path",{d:"M17 3l4 4-4 4"})]})]})}),f&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block",children:a.jsx("form",{onSubmit:async P=>{P.preventDefault(),k(!0),O(null);try{const Q={authorName:x||null,content:T,rating:w,centerId:null},$=await fetch(`${il}/reviews`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),E=await $.json();if(!$.ok)throw new Error(E?.message||"Erreur lors de l'envoi");const G=E?.review;G?(G.approved?(u(C=>[G,...C]),U("Merci "),Z("Votre avis a bien été publié. Merci pour votre retour !")):(U("Merci "),Z("Votre avis a bien été envoyé. Il sera publié dans les prochains jours.")),M(!0)):O("Réponse inattendue du serveur."),m(!1),v(""),N(5),S("")}catch(Q){const $=Q,E=$&&typeof $.message=="string"?$.message:String(Q??"");O(E||"Erreur serveur")}finally{k(!1)}},className:"mt-6 mx-auto w-full max-w-3xl bg-gradient-to-br from-white/70 to-white/60 backdrop-blur-md rounded-3xl shadow-2xl border border-white/30 p-6 md:p-8",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("input",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#c6f0ff]",value:x,onChange:P=>v(P.target.value),placeholder:"Votre prénom","aria-label":"Nom"})]}),a.jsxs("div",{className:"mt-3 md:mt-0 md:w-48",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Note"}),a.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(P=>a.jsx("button",{type:"button",onClick:()=>N(P),"aria-label":`Donner ${P} étoiles`,className:`inline-flex items-center justify-center w-9 h-9 rounded-lg transition ${w&&w>=P?"bg-yellow-50 text-yellow-400 shadow-inner":"bg-white text-gray-300 hover:text-yellow-300 hover:bg-yellow-50"}`,children:a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.957a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.448a1 1 0 00-.364 1.118l1.286 3.957c.3.921-.755 1.688-1.54 1.118L10 15.347l-3.487 2.678c-.785.57-1.84-.197-1.54-1.118l1.286-3.957a1 1 0 00-.364-1.118L2.525 9.384c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.05 2.927z"})})},P))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Commentaire"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-3 text-sm min-h-[110px] focus:outline-none focus:ring-2 focus:ring-[#c6f0ff]",value:T,onChange:P=>S(P.target.value),placeholder:"Racontez votre expérience",rows:4,"aria-label":"Commentaire"})]}),a.jsx("div",{children:_&&a.jsx("div",{className:"text-sm text-red-600 mb-2",children:_})}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded-lg text-sm text-gray-700 hover:bg-gray-50",children:"Annuler"}),a.jsx("button",{disabled:j,type:"submit",className:`px-4 py-2 ${j?"opacity-60 cursor-wait":""} bg-gradient-to-r from-[#0b5566] to-[#0b83a3] text-white rounded-lg text-sm shadow`,children:j?"Envoi...":"Envoyer"})]})]})})}),a.jsx("div",{className:"md:hidden",children:a.jsx("div",{className:"fixed inset-0 z-50 flex items-end bg-black/40",children:a.jsxs("div",{className:"w-full max-h-[90vh] bg-white rounded-t-2xl p-4 overflow-auto shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold text-[#0b5566]",children:"Laisser un avis"}),a.jsx("button",{type:"button","aria-label":"Fermer",className:"text-gray-500",onClick:()=>m(!1),children:"✕"})]}),a.jsx("form",{onSubmit:async P=>{P.preventDefault(),k(!0),O(null);try{const Q={authorName:x||null,content:T,rating:w,centerId:null},$=await fetch(`${il}/reviews`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)}),E=await $.json();if(!$.ok)throw new Error(E?.message||"Erreur lors de l'envoi");const G=E?.review;G?(G.approved?(u(C=>[G,...C]),U("Merci "),Z("Votre avis a bien été publié. Merci pour votre retour !")):(U("Merci "),Z("Votre avis a bien été envoyé. Il sera publié dans les prochains jours.")),M(!0)):O("Réponse inattendue du serveur."),m(!1),v(""),N(5),S("")}catch(Q){const $=Q,E=$&&typeof $.message=="string"?$.message:String(Q??"");O(E||"Erreur serveur")}finally{k(!1)}},className:"mx-auto w-full bg-white rounded-lg p-2",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("input",{className:"w-full rounded-lg border border-gray-200 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[#c6f0ff]",value:x,onChange:P=>v(P.target.value),placeholder:"Votre prénom","aria-label":"Nom"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Note"}),a.jsx("div",{className:"flex items-center gap-2",children:[1,2,3,4,5].map(P=>a.jsx("button",{type:"button",onClick:()=>N(P),"aria-label":`Donner ${P} étoiles`,className:`inline-flex items-center justify-center w-9 h-9 rounded-lg transition ${w&&w>=P?"bg-yellow-50 text-yellow-400 shadow-inner":"bg-white text-gray-300 hover:text-yellow-300 hover:bg-yellow-50"}`,children:a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.957a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.448a1 1 0 00-.364 1.118l1.286 3.957c.3.921-.755 1.688-1.54 1.118L10 15.347l-3.487 2.678c-.785.57-1.84-.197-1.54-1.118l1.286-3.957a1 1 0 00-.364-1.118L2.525 9.384c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69L9.05 2.927z"})})},P))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Commentaire"}),a.jsx("textarea",{className:"w-full rounded-lg border border-gray-200 px-3 py-3 text-sm min-h-[110px] focus:outline-none focus:ring-2 focus:ring-[#c6f0ff]",value:T,onChange:P=>S(P.target.value),placeholder:"Racontez votre expérience",rows:4,"aria-label":"Commentaire"})]}),_&&a.jsx("div",{className:"text-sm text-red-600",children:_}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border rounded-lg text-sm text-gray-700 hover:bg-gray-50",children:"Annuler"}),a.jsx("button",{disabled:j,type:"submit",className:`px-4 py-2 ${j?"opacity-60 cursor-wait":""} bg-gradient-to-r from-[#0b5566] to-[#0b83a3] text-white rounded-lg text-sm shadow`,children:j?"Envoi...":"Envoyer"})]})]})})]})})})]}),a.jsx(Ov,{open:q,title:L,body:W,confirmLabel:"OK",cancelLabel:"",variant:"success",onCancel:()=>M(!1),onConfirm:async()=>{M(!1)}})]})]})}),a.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-[#0b5566] mb-6",children:"Essayez Frimousse gratuitement dès aujourd’hui"}),a.jsx("p",{className:"text-[#08323a] mb-8 text-lg",children:"Rejoignez des dizaines d’associations et de familles déjà convaincues. Inscription rapide, sans engagement, accompagnement personnalisé."}),a.jsx("a",{href:"/register",className:"bg-[#0b5566] !text-white rounded-full px-10 py-4 font-bold text-lg shadow hover:opacity-95 transition inline-block",children:"Créer mon compte gratuit"})]})]}),a.jsx("footer",{className:"w-full text-[#08323a] py-10 px-6 mt-auto",children:a.jsx("div",{className:"max-w-5xl mx-auto border-t border-gray-100 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 justify-items-center items-start gap-6",children:[a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("h3",{className:"font-semibold text-[#08323a] mb-2",children:"Liens utiles"}),a.jsxs("ul",{className:"text-sm text-[#08323a] space-y-1",children:[a.jsx("li",{children:a.jsx("a",{href:"/about",className:"hover:text-[#0b5566]",children:"À propos"})}),a.jsx("li",{children:a.jsx("a",{href:"/fonctionnalites",className:"hover:text-[#0b5566]",children:"Fonctionnalités"})}),a.jsx("li",{children:a.jsx("a",{href:"/tarifs",className:"hover:text-[#0b5566]",children:"Tarifs"})}),a.jsx("li",{children:a.jsx("a",{href:"/support",className:"hover:text-[#0b5566]",children:"Support"})})]})]}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("h3",{className:"font-bold text-lg text-[#08323a] mb-2",children:"Les Frimousses"}),a.jsx("p",{className:"text-[#08323a] text-sm mt-2 max-w-md mx-auto",children:"Gestion professionnelle et moderne pour les associations. Pensé avec bienveillance pour les enfants et les familles."}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500 hidden sm:block",children:["© Les Frimousses ",new Date().getFullYear()]})]}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("h3",{className:"font-semibold text-[#08323a] mb-2",children:"Contact"}),a.jsx("div",{className:"text-[#08323a] text-sm",children:"bricchi.florian@outlook.com"}),a.jsx("div",{className:"text-[#08323a] text-sm",children:"+33 6 47 48 67 34"})]})]})})}),a.jsxs("div",{className:"sm:hidden absolute left-0 right-0 bottom-0 text-center text-xs text-gray-500 pb-4 bg-transparent",children:["© Les Frimousses ",new Date().getFullYear()]})]})}const Gx="https://api.monsite.fr";function R1(){const[s,t]=b.useState(""),[r,l]=b.useState(""),[o,u]=b.useState(""),[d,p]=b.useState(!1),[f,m]=b.useState(!1),[x,v]=b.useState(""),[w,N]=b.useState(""),[T,S]=b.useState(!1),[j,k]=b.useState(""),[_,O]=b.useState(null),q=async M=>{M.preventDefault(),u("");try{const L=await fetch(`${Gx}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:s,password:r})});if(!L.ok){const U=await L.json().catch(()=>({}));if(L.status===402&&U&&U.error){u(U.error),S(!0),k(s),O(U.subscribeToken||null);return}throw new Error(U?.message||U?.error||"Identifiants invalides")}window.location.href="/dashboard"}catch(L){L instanceof Error?u(L.message||"Erreur de connexion"):u("Erreur de connexion")}};return a.jsxs("div",{className:"min-h-screen w-screen max-w-full overflow-x-hidden flex items-center justify-center  bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2]",children:[a.jsxs("form",{onSubmit:q,className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md flex flex-col items-center",children:[a.jsx("div",{className:"w-20 h-20 mb-4",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("h2",{className:"text-2xl font-bold mb-2 text-[#0b5566] text-center",children:"Connexion"}),a.jsx("p",{className:"mb-6 text-[#08323a] text-center",children:"Connectez-vous à votre espace Frimousse"}),o&&a.jsx("div",{className:"mb-4 text-red-600 w-full text-center",children:o}),T&&a.jsx("div",{className:"mb-4 w-full text-center",children:a.jsx("button",{type:"button",onClick:()=>{const M=new URLSearchParams;j&&M.set("prefillEmail",j),_&&M.set("subscribeToken",_),window.location.href=`/tarifs?${M.toString()}`},className:"bg-[#0b5566] text-white px-4 py-2 rounded",children:"S'abonner"})}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-[#08323a]",children:["Email",a.jsx("input",{type:"email",value:s,onChange:M=>t(M.target.value),required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsxs("label",{className:"block mb-6 w-full text-left font-medium text-gray-700",children:["Mot de passe",a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",value:r,onChange:M=>l(M.target.value),required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-200 pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,"aria-label":d?"Masquer le mot de passe":"Afficher le mot de passe",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#0b5566] text-lg focus:outline-none",onClick:()=>p(M=>!M),children:d?"🙈":"👁️"})]})]}),a.jsx("div",{className:"w-full text-center text-sm mt-6 mb-6",children:a.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[#0b5566] hover:underline",children:"Mot de passe oublié ?"})}),a.jsx("button",{type:"submit",className:"w-full bg-[#0b5566] text-white py-2 rounded-full font-semibold hover:opacity-95 transition",children:"Se connecter"}),a.jsxs("div",{className:"mt-4 text-sm text-[#08323a]",children:["Pas encore de compte ? ",a.jsx("a",{href:"/register",className:"text-[#0b5566] hover:underline",children:"Créer un compte"})]})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Réinitialiser le mot de passe"}),w?a.jsx("div",{className:"mb-2 text-green-600",children:w}):null,a.jsxs("label",{className:"block mb-3",children:["Email",a.jsx("input",{type:"email",value:x,onChange:M=>v(M.target.value),className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2"})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1",children:"Annuler"}),a.jsx("button",{type:"button",onClick:async()=>{N("");try{const M=await fetch(`${Gx}/auth/forgot`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x})});if(M.ok)N("Si un compte existe, un email de réinitialisation a été envoyé.");else{const L=await M.json().catch(()=>({}));N(L?.error||"Erreur")}}catch(M){console.error("forgot request error",M),N("Erreur réseau")}},className:"bg-[#0b5566] text-white px-3 py-1 rounded",children:"Envoyer"})]})]})})]})}const of="https://api.monsite.fr";function D1(){const s=V=>{if(!V||typeof V!="object")return null;try{const ce=V,le=ce.country_code||ce.country_code;return le?String(le).toUpperCase():null}catch(ce){return console.error("getRawCountryCode error",ce),null}},[t,r]=b.useState({email:"",password:"",name:"",role:"admin",centerName:"",address:"",city:"",postalCode:"",region:"",country:""}),[l,o]=b.useState(""),[u,d]=b.useState(!1),[p,f]=b.useState(!1),[m,x]=b.useState(""),[v,w]=b.useState(!1),[N,T]=b.useState([]),[S,j]=b.useState([]),[k,_]=b.useState(null),[O,q]=b.useState([]),[M,L]=b.useState([]),[U,W]=b.useState([]),[Z,I]=b.useState(!1),[P,Q]=b.useState(!1),[$,E]=b.useState(!1),[G,C]=b.useState(!1),R=b.useRef(null),Y=b.useRef(null),te=V=>r(ce=>({...ce,...V})),Ne=(V,ce)=>{te({[V]:ce}),setTimeout(()=>{try{const le=document.querySelector(`input[name="${V}"]`);if(le){le.focus();const ve=le.value?le.value.length:0;le.setSelectionRange(ve,ve)}}catch(le){console.error("applyAndFocus error:",le)}},0)},z=V=>{if(V.target.name==="role")return;const ce=V.target.name,le=V.target.value;te({[ce]:le}),console.debug("[geodata] handleChange",ce,le),ce==="country"&&(I(!0),console.debug("[geodata] openCountry")),ce==="region"&&(Q(!0),console.debug("[geodata] openRegion")),ce==="city"&&(E(!0),console.debug("[geodata] openCity")),ce==="address"&&(C(!0),console.debug("[geodata] openAddress"))};b.useEffect(()=>{(async()=>{try{const V=await fetch("/api/geodata/countries");if(!V.ok)return;const ce=await V.json();T(ce||[])}catch(V){console.error("Failed to load countries",V)}})()},[]),b.useEffect(()=>{if(!t.country){j([]),_(null);return}const V=t.country.toLowerCase(),ce=N.filter(ve=>ve.name&&ve.name.toLowerCase().includes(V)).slice(0,8).map(ve=>({name:ve.name}));j(ce);const le=N.find(ve=>ve.name===t.country)||N.find(ve=>ve.name&&ve.name.toLowerCase()===V);if(le&&le.cca2)_(String(le.cca2).toUpperCase());else{const ve=N.filter(Ee=>Ee.name&&Ee.name.toLowerCase().includes(V));if(ve.length===1&&ve[0].cca2)_(String(ve[0].cca2).toUpperCase());else{const Ee=N.find(Ie=>Ie.name&&Ie.name.toLowerCase().startsWith(V));_(Ee&&Ee.cca2?String(Ee.cca2).toUpperCase():null)}}},[t.country,N]);const J=b.useCallback(async V=>{if(console.debug("[geodata] fetchGeodata query=",V),!V||V.length<2){L([]),W([]);return}try{const ce=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(V)}&limit=12`);if(console.debug("[geodata] backend status",ce.status),!ce.ok){L([]),W([]);return}const le=await ce.json();console.debug("[geodata] backend returned",Array.isArray(le)?le.length:typeof le);const ve=le||[],Ee=ve.filter(K=>{const xe=!!(K.city||K.name&&!K.street&&!K.house_number),we=!!(K.house_number||K.street);return xe&&!we}),Ie=ve.filter(K=>!!(K.house_number||K.street));W(Ee),L(Ie)}catch(ce){console.error("geodata fetch error",ce),L([]),W([])}},[]);b.useEffect(()=>{const V=(t.address||t.city||"").trim();return R.current&&window.clearTimeout(R.current),R.current=window.setTimeout(()=>{const ce=t.city?` ${t.city}`:"";J(`${V}${ce}`.trim())},1e3),()=>{R.current&&window.clearTimeout(R.current)}},[t.address,t.city,J]),b.useEffect(()=>{const V=(t.region||"").trim();return R.current&&window.clearTimeout(R.current),R.current=window.setTimeout(async()=>{if(console.debug("[geodata] region lookup q=",V),!V||V.length<2)return q([]);try{const ce=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(V)}&limit=40`);if(!ce.ok)return q([]);const le=await ce.json(),ve=new Set,Ee=[],Ie=k?k.toUpperCase():null;for(const K of le||[]){const xe=K.state||null,we=s(K.raw);if(!xe||Ie&&we&&we!==Ie)continue;const Oe=String(xe);if(!ve.has(Oe)&&(ve.add(Oe),Ee.push(Oe),Ee.length>=8))break}q(Ee)}catch(ce){console.error("region geodata error",ce),q([])}},1e3),()=>{R.current&&window.clearTimeout(R.current)}},[t.region,k]),b.useEffect(()=>{const V=ce=>{Y.current&&(Y.current.contains(ce.target)||(I(!1),Q(!1),E(!1),C(!1)))};return document.addEventListener("click",V),()=>document.removeEventListener("click",V)},[]);const[se,ue]=b.useState("decouverte"),[ye,Te]=b.useState(!1),[De]=b.useState(!1),[Ce,$e]=b.useState(!1),[Ye,Xe]=b.useState(""),Se=async V=>{if(V.preventDefault(),x(""),w(!1),t.password!==l){x("Les mots de passe ne correspondent pas.");return}try{if(se==="decouverte"){Te(!0);const xe=await fetch(`${of}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,plan:se})}),we=await xe.json().catch(()=>({}));if(!xe.ok)throw new Error(we?.message||we?.error||"Erreur lors de l'inscription");const Oe=await fetch(`${of}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t.email,password:t.password})});if(Oe.status===402){const ut=await Oe.json().catch(()=>({}));Xe(ut?.error||"Votre compte nécessite un abonnement pour continuer."),$e(!0),Te(!1);return}const Pe=await Oe.json().catch(()=>({}));if(!Oe.ok)throw new Error(Pe?.message||Pe?.error||"Erreur lors de la connexion");window.location.href="/";return}Te(!0);const ce=await fetch(`${of}/auth/register-subscribe/init`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...t,plan:se})}),le=await ce.json();if(!ce.ok)throw new Error(le?.message||le?.error||"Erreur lors de l’inscription");const ve="/api/subscriptions/create-checkout-with-token",Ee={plan:se,mode:"direct",subscribeToken:le.subscribeToken},Ie=await fetch(ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ee)}),K=await Ie.json().catch(()=>({}));if(!Ie.ok||!K.url)throw new Error(K.error||"Impossible de créer la session de paiement");window.location.href=K.url}catch(ce){ce instanceof Error?x(ce.message||"Erreur lors de l’inscription"):x("Erreur lors de l’inscription"),Te(!1)}finally{Te(!1)}},Me=V=>{te({country:V});const ce=N.find(le=>le.name===V||le.name&&le.name.toLowerCase()===V.toLowerCase());_(ce&&ce.cca2?String(ce.cca2).toUpperCase():null),j([]),I(!1),Ne("region","")},ke=V=>{te({region:V}),q([]),Q(!1),Ne("city","")},Je=V=>{const ce=V.house_number?String(V.house_number).trim():"",le=V.street?String(V.street).trim():"",Ee=(ce?`${ce} ${le}`.trim():le||"")||V.name||"",Ie=String(t.address||"").trim();let K=Ee;if(!ce){const xe=Ie.match(/^(\d+)\s+(.+)$/);if(xe&&xe[1]){const we=xe[1];Ee.startsWith(we+" ")||(K=`${we} ${Ee}`.trim())}}te({address:K,city:V.city||"",postalCode:V.postcode||"",region:V.state||"",country:V.country||""}),(async()=>{try{if(!V.postcode||!V.city||!V.house_number){const xe=encodeURIComponent(V.name||Ee||"");if(!xe)return;const we=await fetch(`/api/geodata/positionstack?q=${xe}&limit=1`);if(!we.ok)return;const Oe=await we.json();if(!Oe||Oe.length===0)return;const Pe=Oe[0],ut=Pe.city||"",Ve=Pe.postcode||"",Be=Pe.state||"",Qe=Pe.country||"",ie=Pe.house_number||"",he=Pe.street||"",ee={};if(!V.city&&ut&&(ee.city=ut),!V.postcode&&Ve&&(ee.postalCode=Ve),!V.state&&Be&&(ee.region=Be),!V.country&&Qe&&(ee.country=Qe),!ce&&ie){const me=le||he||Pe.name||"";ee.address=`${ie} ${me}`.trim()}Object.keys(ee).length>0&&te(ee)}}catch(xe){console.error("selectPlace followup lookup error",xe)}})(),L([]),C(!1),setTimeout(()=>{try{const xe=document.querySelector('input[name="postalCode"]');if(xe){xe.focus();const we=xe.value?xe.value.length:0;xe.setSelectionRange(we,we)}}catch(xe){console.error("focus postalCode error",xe)}},0)};return a.jsxs("div",{ref:Y,className:"h-screen flex items-center justify-center bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] overflow-hidden",children:[a.jsxs("form",{onSubmit:Se,className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-xl md:max-w-2xl flex flex-col items-center max-h-[95vh] overflow-auto",children:[a.jsx("div",{className:"w-20 h-20 mb-4",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo",className:"w-full h-full object-contain"})}),a.jsx("h2",{className:"text-2xl font-bold mb-2 text-[#0b5566] text-center",children:"Inscription"}),a.jsx("p",{className:"mb-6 text-[#08323a] text-center",children:"Créez votre compte Frimousse"}),m&&a.jsx("div",{className:"mb-4 text-red-600 w-full text-center",children:m}),v&&a.jsx("div",{className:"mb-4 text-[#0b5566] w-full text-center",children:"Inscription réussie. Redirection…"}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-[#08323a]",children:["Nom",a.jsx("input",{name:"name",value:t.name,onChange:z,placeholder:"Nom et prénom",required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-[#08323a]",children:["Email",a.jsx("input",{name:"email",type:"email",value:t.email,onChange:z,placeholder:"Email",required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-[#08323a]",children:["Société / Crèche",a.jsx("input",{name:"centerName",value:t.centerName,onChange:z,placeholder:"Nom de la crèche ou société",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 w-full mb-3",children:[a.jsxs("label",{className:"block text-left font-medium text-[#08323a]",children:["Adresse",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"address",value:t.address,onChange:z,placeholder:"Adresse ",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),G&&M.length>0&&a.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-56 overflow-auto rounded shadow",children:M.map((V,ce)=>{const le=[V.house_number&&`${V.house_number} ${V.street}`,V.street||V.name,V.postcode,V.state,V.country].filter(Boolean).join(", "),ve=V.name||(V.house_number?`${V.house_number} ${V.street}`:V.street||"");return a.jsxs("li",{role:"button",tabIndex:0,onClick:()=>{Je(V)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[a.jsx("div",{className:"text-sm font-medium",children:ve}),a.jsx("div",{className:"text-xs text-gray-500",children:le})]},ce)})})]})]}),a.jsxs("label",{className:"block text-left font-medium text-[#08323a]",children:["Pays",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"country",value:t.country,onChange:z,placeholder:"Pays",autoComplete:"off",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),Z&&S.length>0&&a.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-44 overflow-auto rounded shadow",children:S.map((V,ce)=>a.jsx("li",{role:"button",tabIndex:0,onClick:()=>Me(V.name),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:V.name},ce))})]})]}),a.jsxs("label",{className:"block text-left font-medium text-[#08323a]",children:["Région",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"region",value:t.region,onChange:z,placeholder:"Région / Département",autoComplete:"off",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),P&&O.length>0&&a.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-44 overflow-auto rounded shadow",children:O.map((V,ce)=>a.jsx("li",{role:"button",tabIndex:0,onClick:()=>ke(V),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:V},ce))})]})]}),a.jsxs("label",{className:"block text-left font-medium text-[#08323a]",children:["Ville",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"city",value:t.city,onChange:z,placeholder:"Ville",autoComplete:"off",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),$&&U.length>0&&a.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-56 overflow-auto rounded shadow",children:U.map((V,ce)=>{const le=V.city||V.name||"",ve=[V.postcode,V.state,V.country].filter(Boolean).join(", ");return a.jsxs("li",{role:"button",tabIndex:0,onClick:()=>{const Ee={city:le};V.postcode&&(Ee.postalCode=String(V.postcode)),V.state&&(Ee.region=String(V.state)),V.country&&(Ee.country=String(V.country)),te(Ee),W([]),E(!1),Ne("address","")},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[a.jsx("div",{className:"text-sm font-medium",children:le}),a.jsx("div",{className:"text-xs text-gray-500",children:ve})]},ce)})})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 w-full mb-3",children:a.jsxs("label",{className:"block text-left font-medium text-[#08323a]",children:["Code postal",a.jsx("input",{name:"postalCode",value:t.postalCode,onChange:z,placeholder:"Code postal",className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]})}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-gray-700",children:["Mot de passe",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"password",type:u?"text":"password",value:t.password,onChange:z,placeholder:"Mot de passe",required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,"aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#0b5566] text-lg focus:outline-none",onClick:()=>d(V=>!V),children:u?"🙈":"👁️"})]})]}),a.jsxs("label",{className:"block mb-3 w-full text-left font-medium text-gray-700",children:["Confirmer le mot de passe",a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"confirmPassword",type:p?"text":"password",value:l,onChange:V=>o(V.target.value),placeholder:"Confirmer le mot de passe",required:!0,className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,"aria-label":p?"Masquer le mot de passe":"Afficher le mot de passe",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#0b5566] text-lg focus:outline-none",onClick:()=>f(V=>!V),children:p?"🙈":"👁️"})]})]}),a.jsxs("div",{className:"w-full mb-4 mt-6",children:[a.jsx("label",{className:"block mb-2 font-medium text-[#08323a]",children:"Offres"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>ue("decouverte"),className:`p-3 rounded-lg border text-sm focus:outline-none flex flex-col items-center text-center min-h-[140px] ${se==="decouverte"?"border-[#0b5566] bg-[#f7f4d7]":"border-gray-200 bg-white hover:shadow-sm"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-[#0b5566]",children:"Découverte"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Essai 15 jours"})]}),a.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Tester Frimousse sans engagement"}),a.jsx("div",{className:"mt-auto text-base font-bold text-[#0b5566]",children:"0€"})]}),a.jsxs("button",{type:"button",onClick:()=>ue("essentiel"),className:`p-3 rounded-lg border text-sm focus:outline-none flex flex-col items-center text-center min-h-[140px] ${se==="essentiel"?"border-[#0b5566] bg-white shadow":"border-gray-200 bg-white hover:shadow-sm"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-[#0b5566]",children:"Essentiel"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Pour petites structures"})]}),a.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Jusqu’à 10 enfants, exports et notifications"}),a.jsxs("div",{className:"mt-auto text-base font-bold text-[#0b5566]",children:["29,99€ ",a.jsx("span",{className:"text-xs text-gray-500",children:"/ mois"})]})]}),a.jsxs("button",{type:"button",onClick:()=>ue("pro"),className:`p-3 rounded-lg border text-sm focus:outline-none flex flex-col items-center text-center min-h-[140px] ${se==="pro"?"border-[#0b5566] bg-white shadow":"border-gray-200 bg-white hover:shadow-sm"}`,children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-[#0b5566]",children:"Pro"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Pour structures avancées"})]}),a.jsx("div",{className:"mt-3 text-xs text-gray-600",children:"Enfants illimités, Assistant IA "}),a.jsxs("div",{className:"mt-auto text-base font-bold text-[#0b5566]",children:["59,99€ ",a.jsx("span",{className:"text-xs text-gray-500",children:"/ mois"})]})]})]})]}),(se==="essentiel"||se==="pro")&&a.jsx("div",{className:"w-full max-w-xl md:max-w-2xl mt-2 px-6",children:a.jsx("div",{className:"rounded-md bg-yellow-100 border-l-4 border-yellow-400 p-3 text-sm text-yellow-800",children:"Les abonnements payant ne sont pas encore disponibles veuillez essayer la version gratuite sans engagement — Contactez-nous pour plus de renseignements."})}),a.jsx("button",{type:"submit",disabled:ye||De||se!=="decouverte",title:se!=="decouverte"?"Les abonnements payants ne sont pas encore disponibles. Contactez-nous pour plus d’informations.":void 0,"aria-disabled":se!=="decouverte"?"true":"false",className:`w-full py-2 rounded-full font-semibold transition focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] ${ye||De||se!=="decouverte"?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-[#0b5566] text-white hover:opacity-95"}`,children:ye||De?"Patientez…":se==="decouverte"?"S’inscrire":"S’inscrire et payer"}),a.jsxs("div",{className:"mt-4 text-sm text-[#08323a]",children:["Déjà un compte ? ",a.jsx("a",{href:"/login",className:"text-[#0b5566] hover:underline",children:"Se connecter"})]})]}),Ce&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-4",children:a.jsxs("div",{role:"dialog","aria-modal":"true",className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-[#0b5566] mb-2",children:"Abonnement requis"}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:Ye||"Cette action nécessite un abonnement. Passez à un plan supérieur pour continuer."}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{window.location.href="/pricing"},className:"px-4 py-2 bg-[#0b5566] text-white rounded-md",children:"Aller aux offres"}),a.jsx("button",{onClick:()=>$e(!1),className:"px-4 py-2 border rounded-md",children:"Fermer"})]})]})})]})}async function fe(s,t){const r={...t,credentials:"include"};let l=await fetch(s,r);if(l.status===402){try{const o=await l.clone().json().catch(()=>({})),u=o?.error||o?.message||"Abonnement requis";window.dispatchEvent(new CustomEvent("subscription:required",{detail:{message:u}}))}catch{window.dispatchEvent(new CustomEvent("subscription:required",{detail:{message:"Abonnement requis"}}))}return l}if(l.status!==401)return l;try{let o=!1;if(r.headers&&typeof r.headers=="object"){const d=r.headers;o=!!(d["x-skip-refresh"]||d["X-Skip-Refresh"])}return o=o||typeof s=="string"&&s.includes("/api/auth/refresh"),o||!(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).ok||(l=await fetch(s,r)),l}catch{return l}}const M1=()=>{const[s]=y1(),t=s.get("token")||"",[r,l]=b.useState(""),[o,u]=b.useState(""),[d,p]=b.useState(!1),[f,m]=b.useState(null),[x,v]=b.useState(null),w=Ot();function N(){return import.meta?.env?.VITE_API_URL??"https://www.lesfrimousses.com/api"}const T=N(),S=async j=>{if(j.preventDefault(),m(null),!t)return m("Lien d'invitation manquant");if(!r)return m("Mot de passe requis");if(r!==o)return m("Les mots de passe ne correspondent pas");try{p(!0);const k=await fe(`${T}/parent/accept-invite`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:r})}),_=await k.json();if(!k.ok)throw new Error(_?.message||_?.error||"Erreur");v("Mot de passe défini, vous pouvez maintenant vous connecter."),setTimeout(()=>w("/login"),1500)}catch(k){k instanceof Error?m(k.message):m("Erreur")}finally{p(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white p-6 rounded shadow",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Invitation - définir votre mot de passe"}),f&&a.jsx("div",{className:"text-red-600 mb-2",children:f}),x?a.jsx("div",{className:"text-green-600",children:x}):a.jsxs("form",{onSubmit:S,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Mot de passe"}),a.jsx("input",{type:"password",value:r,onChange:j=>l(j.target.value),className:"w-full border rounded px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:"Confirmer"}),a.jsx("input",{type:"password",value:o,onChange:j=>u(j.target.value),className:"w-full border rounded px-3 py-2"})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("button",{type:"submit",disabled:d,className:"bg-green-500 text-white px-4 py-2 rounded",children:d?"Envoi...":"Valider"})})]})]})})},L1="https://api.monsite.fr";function $1(){const[s,t]=b.useState(""),[r,l]=b.useState(""),[o,u]=b.useState(""),[d,p]=b.useState(!1),[f,m]=b.useState("");b.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("token")||"";t(w)},[]);const x=async v=>{if(v.preventDefault(),m(""),!s)return m("Token manquant");if(!r)return m("Entrez un mot de passe");if(r!==o)return m("Les mots de passe ne correspondent pas");try{const w=await fetch(`${L1}/auth/reset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,password:r})}),N=await w.json().catch(()=>({}));if(!w.ok){m(N?.error||"Erreur");return}m("Mot de passe mis à jour. Vous pouvez vous connecter."),setTimeout(()=>{window.location.href="/login"},1500)}catch(w){console.error("reset error",w),m("Erreur réseau")}};return a.jsx("div",{className:"min-h-screen w-screen max-w-full overflow-x-hidden flex items-center justify-center  bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2]",children:a.jsxs("form",{onSubmit:x,className:"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md flex flex-col items-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Réinitialiser le mot de passe"}),f&&a.jsx("div",{className:"mb-4 text-center text-sm",children:f}),a.jsxs("label",{className:"block w-full mb-3",children:["Nouveau mot de passe",a.jsxs("div",{className:"relative mt-1",children:[a.jsx("input",{type:d?"text":"password",value:r,onChange:v=>l(v.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),a.jsx("button",{type:"button",onClick:()=>p(v=>!v),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 hover:text-gray-700","aria-label":d?"Masquer le mot de passe":"Afficher le mot de passe",children:d?"🙈":"👁️"})]})]}),a.jsxs("label",{className:"block w-full mb-3",children:["Confirmer mot de passe",a.jsx("input",{type:d?"text":"password",value:o,onChange:v=>u(v.target.value),className:"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2"})]}),a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded",children:"Valider"})]})})}const Rv=b.createContext({user:null});function fn(){return b.useContext(Rv)}const Dv=b.createContext(void 0);function Rt(){const s=b.useContext(Dv);if(!s)throw new Error("useI18n must be used inside I18nProvider");return s}const Yx="https://api.monsite.fr";function z1({open:s,onClose:t,onSave:r,initial:l}){const[o,u]=b.useState([]),[d,p]=b.useState([]),[f,m]=b.useState(l||{date:"",childId:"",nannyId:""});b.useEffect(()=>{s&&(fe(`${Yx}/children`,{credentials:"include"}).then(T=>T.json()).then(u),fe(`${Yx}/nannies`,{credentials:"include"}).then(T=>T.json()).then(p),m(l||{date:"",childId:"",nannyId:""}))},[s,l]);const x=o.find(T=>T.id===f.childId),v=x&&Array.isArray(x.nannyIds)&&x.nannyIds.length>0?new Set(x.nannyIds):null,w=v?d.filter(T=>v.has(T.id)):d;b.useEffect(()=>{if(!f.nannyId)return;const T=o.find(j=>j.id===f.childId);(T&&Array.isArray(T.nannyIds)?T.nannyIds.includes(f.nannyId):!0)||m(j=>({...j,nannyId:""}))},[f.childId,f.nannyId,o]);const{t:N}=Rt();return s?a.jsx("div",{className:"fixed inset-0 z-50 bg-white/40 backdrop-blur-[2px] flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-md relative",children:[a.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-500 hover:text-[#08323a]",children:"✕"}),a.jsx("h2",{className:"text-xl font-bold mb-4 text-[#08323a]",children:N(l?"assignment.modal.title.add":"assignment.modal.title.edit")}),a.jsxs("form",{onSubmit:T=>{T.preventDefault(),r(f)},className:"grid gap-3",children:[a.jsxs("label",{className:"text-[#08323a] font-medium",children:[N("assignment.modal.date"),a.jsx("input",{type:"date",value:f.date,onChange:T=>m(S=>({...S,date:T.target.value})),required:!0,className:"border border-gray-200 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsxs("label",{className:"text-[#08323a] font-medium",children:[N("assignment.modal.child"),a.jsxs("select",{value:f.childId,onChange:T=>m(S=>({...S,childId:T.target.value})),required:!0,className:"border border-gray-200 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",children:[a.jsx("option",{value:"",children:N("assignment.modal.select")}),o.map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))]})]}),a.jsxs("label",{className:"text-[#08323a] font-medium",children:[N("assignment.modal.nanny"),a.jsxs("select",{value:f.nannyId,onChange:T=>m(S=>({...S,nannyId:T.target.value})),required:!0,className:"border border-gray-200 rounded px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",children:[a.jsx("option",{value:"",children:N("assignment.modal.select")}),w.map(T=>a.jsx("option",{value:T.id,children:T.name},T.id))]})]}),a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white py-2 rounded hover:bg-[#08323a] transition font-semibold",children:l?N("global.add"):N("global.edit")||N("global.save")})]})]})}):null}const hs="https://api.monsite.fr";function P1(s){const t=s.getFullYear(),r=s.getMonth(),l=new Date(t,r,1),o=new Date(t,r+1,0),u=new Date(l);u.setDate(l.getDate()-(l.getDay()+6)%7);const d=new Date(o);d.setDate(o.getDate()+(7-d.getDay()===7?0:7-d.getDay()));const p=[];for(let m=new Date(u);m<=d;m.setDate(m.getDate()+1))p.push(new Date(m));const f=[];for(let m=0;m<p.length;m+=7)f.push(p.slice(m,m+7));return f}function U1(){const{user:s}=fn(),t=Ot(),{t:r,locale:l}=Rt(),[o,u]=b.useState(!1);b.useEffect(()=>{s&&s.nannyId&&t("/mon-planning",{replace:!0})},[s,t]),b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const Se=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),Me=()=>u(!!Se.matches);return Me(),typeof Se.addEventListener=="function"?Se.addEventListener("change",Me):Se.addListener(Me),window.addEventListener("resize",Me),window.addEventListener("orientationchange",Me),()=>{try{typeof Se.removeEventListener=="function"?Se.removeEventListener("change",Me):Se.removeListener(Me)}catch{}window.removeEventListener("resize",Me),window.removeEventListener("orientationchange",Me)}},[]);const[d,p]=b.useState([]),[f,m]=b.useState(0),[x,v]=b.useState(0),[w,N]=b.useState(null),[T,S]=b.useState(null),[j,k]=b.useState(!1),[_,O]=b.useState(null),[q,M]=b.useState(null),[L,U]=b.useState(new Date),[W,Z]=b.useState(!1),[I,P]=b.useState([]),[Q,$]=b.useState(""),E=xt.useCallback((Se,Me)=>{let ke=`${hs}/assignments`;const Je=[];Se&&Me&&(Je.push(`start=${Se.toISOString()}`),Je.push(`end=${Me.toISOString()}`)),s&&s.role==="nanny"&&s.nannyId&&Je.push(`nannyId=${s.nannyId}`),Je.length>0&&(ke+="?"+Je.join("&")),fe(ke,{credentials:"include"}).then(V=>V.json()).then(V=>{p(V)})},[s]);b.useEffect(()=>{const Se=L.getFullYear(),Me=L.getMonth(),ke=new Date(Se,Me,1),Je=new Date(Se,Me+1,0);fe(`${hs}/assignments?start=${ke.toISOString()}&end=${Je.toISOString()}`,{credentials:"include"}).then(V=>V.json()).then(V=>{p(V);const ce=new Set((V||[]).map(Ve=>Ve.child.id)).size,le=new Date(Se,Me-1,1),ve=new Date(Se,Me,0);fe(`${hs}/assignments?start=${le.toISOString()}&end=${ve.toISOString()}`,{credentials:"include"}).then(Ve=>Ve.json()).then(Ve=>{const Be=new Set((Ve||[]).map(Qe=>Qe.child.id)).size;if(Be===0)N(null);else{const Qe=Math.round((ce-Be)/Be*100);N(Qe)}}).catch(()=>N(null));const Ee=new Date,Ie=[];for(let Ve=6;Ve>=0;Ve--){const Be=new Date(Ee);Be.setDate(Ee.getDate()-Ve);const Qe=Be.getDay();Qe>=1&&Qe<=5&&Ie.push(Be.toISOString().split("T")[0])}const K=Array.isArray(V)?Array.from(new Set(V.map(Ve=>Ve.child.id))).length:0,xe=Ie.map(Ve=>{const Be=new Set((V||[]).filter(Qe=>Qe.date.split("T")[0]===Ve).map(Qe=>Qe.child.id)).size;return K>0?Be/K*100:0}),we=xe.length>0?Math.round(xe.reduce((Ve,Be)=>Ve+Be,0)/xe.length):0,Oe=Ie.map(Ve=>{const Be=new Date(Ve);return Be.setDate(Be.getDate()-7),Be.toISOString().split("T")[0]}),Pe=new Date(Oe[0]),ut=new Date(Oe[Oe.length-1]);fe(`${hs}/assignments?start=${new Date(Pe).toISOString()}&end=${new Date(ut).toISOString()}`,{credentials:"include"}).then(Ve=>Ve.json()).then(Ve=>{const Be=Oe.map(ie=>{const he=new Set((Ve||[]).filter(ee=>ee.date.split("T")[0]===ie).map(ee=>ee.child.id)).size;return K>0?he/K*100:0}),Qe=Be.length>0?Math.round(Be.reduce((ie,he)=>ie+he,0)/Be.length):0;if(Qe===0)S(null);else{const ie=Math.round((we-Qe)/Qe*100);S(ie)}}).catch(()=>S(null))}).catch(()=>p([])),fe(`${hs}/children`,{credentials:"include"}).then(V=>V.json()).then(V=>m(Array.isArray(V)?V.length:0)).catch(()=>m(0)),fetch(`${hs}/nannies`,{credentials:"include"}).then(V=>V.json()).then(V=>{Array.isArray(V)?v(V.filter(ce=>ce.availability==="Disponible").length):v(0)}).catch(()=>v(0))},[L,E]);const G=f,C=new Date,R=C.toISOString().split("T")[0],Y=Array.from(new Set(d.filter(Se=>Se.date.split("T")[0]===R).map(Se=>Se.child.id))).length;let te=0;if(G>0){const Se=[];for(let ke=6;ke>=0;ke--){const Je=new Date(C);Je.setDate(C.getDate()-ke);const V=Je.getDay();V>=1&&V<=5&&Se.push(Je.toISOString().split("T")[0])}const Me=Se.map(ke=>new Set(d.filter(V=>V.date.split("T")[0]===ke).map(V=>V.child.id)).size/G+100);te=Me.length>0?Math.round(Me.reduce((ke,Je)=>ke+Je,0)/Me.length):0}const Ne=P1(L),z=G>0?Math.round(Y/G*100):0,J=()=>{const Se=new Date(L);Se.setMonth(Se.getMonth()-1),U(Se)},se=()=>{const Se=new Date(L);Se.setMonth(Se.getMonth()+1),U(Se)},ue=Se=>{if(s&&s.role==="parent")return;const Me=new Date(Se.getTime()-Se.getTimezoneOffset()*6e4).toISOString().split("T")[0];O({date:Me,childId:"",nannyId:s&&s.nannyId?s.nannyId:""}),k(!0)},[ye,Te]=b.useState(null),De=async Se=>{Te(null);const Me=new Date(Se.date+"T00:00:00Z").toISOString().split("T")[0],ke={...Se,date:Me};if(d.some(V=>V.child.id===Se.childId&&V.date.split("T")[0]===Me&&(!q||V.id!==q))){Te("Cet enfant est déjà affecté ce jour-là.");return}if(q){await fe(`${hs}/assignments/${q}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ke)}),k(!1),M(null),O(null);const V=L.getFullYear(),ce=L.getMonth(),le=new Date(V,ce,1),ve=new Date(V,ce+1,0);E(le,ve)}else if((await fe(`${hs}/assignments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ke)})).ok){k(!1),M(null),O(null);const ce=L.getFullYear(),le=L.getMonth(),ve=new Date(ce,le,1),Ee=new Date(ce,le+1,0);E(ve,Ee)}else Te("Erreur lors de l'ajout. Veuillez réessayer.")},Ce=new Intl.DateTimeFormat(l,{month:"long",year:"numeric"}).format(L),$e=new Date(L);$e.setDate(L.getDate()-(L.getDay()+6)%7);const Ye=Array.from({length:7}).map((Se,Me)=>{const ke=new Date($e);return ke.setDate($e.getDate()+Me),new Intl.DateTimeFormat(l,{weekday:"short"}).format(ke)}),Xe=q?d.find(Se=>Se.id===q):void 0;return a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${o?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4 w-full",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:r("page.dashboard")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:r("dashboard.welcome")})]}),a.jsxs("div",{className:"flex items-center gap-2 self-start md:self-end",children:[a.jsx("input",{type:"date",value:L.toISOString().split("T")[0],onChange:Se=>U(new Date(Se.target.value)),className:"border border-gray-200 rounded-lg px-3 py-2 text-gray-700 bg-white shadow-sm text-base w-[120px] sm:w-auto"}),!(s&&s.role==="parent")&&a.jsxs("button",{onClick:()=>ue(new Date),className:"bg-[#0b5566] text-white font-semibold rounded-lg px-4 py-2 text-base shadow hover:opacity-95 transition whitespace-nowrap",children:["+ ",r("global.add")]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4 mb-8 w-full",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 md:p-6 flex flex-col items-start gap-2 border border-[#f3f3fa] max-w-xs w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:G}),a.jsx("span",{className:"rounded-full p-2",style:{background:"#a9ddf2",color:"#08323a"},children:a.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[a.jsx("circle",{cx:"12",cy:"7",r:"4"}),a.jsx("path",{d:"M5.5 21a7.5 7.5 0 0 1 13 0"})]})})]}),a.jsx("div",{className:"text-gray-500 font-medium text-sm sm:text-base",children:r("dashboard.children_registered")}),a.jsxs("div",{className:`${w!==null&&w<0?"text-red-500":"text-[#0b5566]"} text-xs sm:text-sm font-semibold flex items-center gap-1`,children:[w===null?"—":`${w>0?"+":""}${w}%`," ",r("dashboard.since_last_month")]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 md:p-6 flex flex-col items-start gap-2 border border-[#f3f3fa] max-w-xs w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:Y}),a.jsx("span",{className:"bg-[#a9ddf2] text-[#0b5566] rounded-full p-2",children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),a.jsx("div",{className:"text-gray-500 font-medium text-sm sm:text-base",children:r("dashboard.present_today")}),a.jsxs("div",{className:"text-[#0b5566] text-xs sm:text-sm font-semibold flex items-center gap-1",children:[r("dashboard.presence_rate")," ",z,"%"]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 md:p-6 flex flex-col items-start gap-2 border border-[#f3f3fa] max-w-xs w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("span",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:x}),a.jsx("span",{className:"rounded-full p-2",style:{background:"#f7f4d7",color:"#08323a"},children:a.jsx("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 21C7 21 2 17 2 12V7a5 5 0 0 1 10 0v5c0 5-5 9-10 9z"})})})]}),a.jsx("div",{className:"text-gray-500 font-medium text-sm sm:text-base",children:r("dashboard.active_caregivers")}),a.jsx("div",{className:"text-gray-400 text-xs sm:text-sm font-medium flex items-center gap-1",children:r("dashboard.no_change")})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-3 md:p-6 flex flex-col items-start gap-2 border border-[#f3f3fa] max-w-xs w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsxs("span",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:[te,"%"]}),a.jsx("span",{className:"rounded-full p-2",style:{background:"#fcdcdf",color:"#08323a"},children:a.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"4"}),a.jsx("path",{d:"M8 17l4-4 4 4"})]})})]}),a.jsx("div",{className:"text-gray-500 font-medium text-sm sm:text-base",children:r("dashboard.weekly_average")}),a.jsxs("div",{className:`${T!==null&&T<0?"text-red-500":"text-[#0b5566]"} text-xs sm:text-sm font-semibold flex items-center gap-1`,children:[T===null?"—":`${T>0?"+":""}${T}%`," ",r("dashboard.since_last_week")]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 md:p-6 border border-[#f3f3fa] w-full mx-auto",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 sm:mb-6 gap-2",children:[a.jsx("div",{className:"text-lg md:text-2xl font-bold text-gray-900",children:Ce.charAt(0).toUpperCase()+Ce.slice(1)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:J,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:se,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9 5l7 7-7 7"})})})]})]}),a.jsx("div",{className:"block sm:hidden w-full overflow-x-auto",children:a.jsxs("div",{className:"grid grid-cols-7 gap-1 w-full",children:[Ye.map((Se,Me)=>a.jsx("div",{className:"text-center text-gray-500 font-semibold text-xs py-1",children:Se},Me)),Ne.flat().map((Se,Me)=>{const ke=d.filter(ce=>{const le=new Date(ce.date);return le.getFullYear()===Se.getFullYear()&&le.getMonth()===Se.getMonth()&&le.getDate()===Se.getDate()}),Je=Se.toDateString()===new Date().toDateString(),V=Se.getMonth()===L.getMonth();return a.jsxs("div",{className:"align-top p-1 h-full flex flex-col "+(Je?"border-2 border-[#0b5566] rounded-xl ":"border border-gray-100 ")+(V?"bg-[#f8f8fc]":"bg-gray-50 opacity-60")+" relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-bold cursor-pointer "+(V?"text-gray-700":"text-gray-400"),onClick:()=>{P(ke),$(new Intl.DateTimeFormat(l).format(Se)),Z(!0)},title:"Voir la liste des enfants gardés ce jour",children:Se.getDate()}),!(s&&s.role==="parent")&&a.jsx("button",{onClick:()=>ue(Se),className:"text-[#0b5566] hover:text-[#08323a] text-lg font-bold",children:"+"})]}),ke.length===0?a.jsx("div",{className:"text-gray-300 text-xs",children:"—"}):ke.slice(0,2).map((ce,le)=>a.jsxs("div",{className:"flex items-center gap-1 mb-1 px-1 py-1 rounded-lg "+(le===0?"bg-[#a9ddf2]":"bg-[#fff7e6]")+" shadow-sm group",children:[a.jsx("span",{className:"w-2 h-2 rounded-full "+(le===0?"bg-[#08323a]":"bg-[#856400]")}),a.jsx("span",{className:"font-semibold text-gray-800 text-[11px] group-hover:underline cursor-pointer hover:text-red-600 truncate max-w-[70px]",title:ce.child.name,onClick:()=>{s&&s.role==="parent"||M(ce.id)},children:ce.child.name})]},ce.id)),ke.length>2&&a.jsxs("button",{onClick:()=>{P(ke),$(new Intl.DateTimeFormat(l).format(Se)),Z(!0)},className:"text-xs text-gray-500 px-2 py-0.5 rounded-full bg-gray-100 hover:bg-gray-200",title:r("common.view_more",{n:String(ke.length-2)}),children:["+",ke.length-2]})]},Me)})]})}),a.jsx("div",{className:"hidden sm:block w-full",children:a.jsxs("table",{className:"w-full table-fixed bg-white rounded-lg",children:[a.jsx("thead",{children:a.jsx("tr",{children:Ye.map((Se,Me)=>a.jsx("th",{className:"p-2 text-center text-gray-500 font-semibold text-base",children:Se},Me))})}),a.jsx("tbody",{children:Ne.map((Se,Me)=>a.jsx("tr",{children:Se.map((ke,Je)=>{const V=d.filter(ve=>{const Ee=new Date(ve.date);return Ee.getFullYear()===ke.getFullYear()&&Ee.getMonth()===ke.getMonth()&&Ee.getDate()===ke.getDate()}),ce=ke.toDateString()===new Date().toDateString(),le=ke.getMonth()===L.getMonth();return a.jsxs("td",{className:"align-top p-2 h-28 "+(ce?"border-2 border-[#0b5566] rounded-xl ":"border border-gray-100 ")+(le?"bg-[#f8f8fc]":"bg-gray-50 opacity-60")+" relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-bold cursor-pointer "+(le?"text-gray-700":"text-gray-400"),onClick:()=>{P(V),$(new Intl.DateTimeFormat(l).format(ke)),Z(!0)},title:"Voir la liste des enfants gardés ce jour",children:ke.getDate()}),!(s&&s.role==="parent")&&a.jsx("button",{onClick:()=>ue(ke),className:"text-[#0b5566] hover:text-[#08323a] text-lg font-bold",children:"+"})]}),V.length===0?a.jsx("div",{className:"text-gray-300 text-sm",children:"—"}):a.jsxs(a.Fragment,{children:[V.slice(0,2).map((ve,Ee)=>a.jsxs("div",{className:"flex items-center gap-2 mb-2 px-2 py-1 rounded-lg "+(Ee===0?"bg-[#a9ddf2]":"bg-[#f7f4d7]")+" shadow-sm group",children:[a.jsx("span",{className:"w-2 h-2 rounded-full "+(Ee===0?"bg-[#08323a]":"bg-[#856400]")}),a.jsx("span",{className:"font-semibold text-gray-800 text-sm group-hover:underline cursor-pointer hover:text-red-600 truncate max-w-[120px]",title:ve.child.name,onClick:()=>{s&&s.role==="parent"||M(ve.id)},children:ve.child.name})]},ve.id)),V.length>2&&a.jsxs("button",{onClick:()=>{P(V),$(new Intl.DateTimeFormat(l).format(ke)),Z(!0)},className:"text-xs text-gray-500 px-2 py-0.5 rounded-full bg-gray-100 hover:bg-gray-200",title:`Voir ${V.length-2} autres enfants`,children:["+",V.length-2]})]})]},Je)})},Me))})]})})]}),ye&&a.jsx("div",{className:"text-red-600 font-semibold mb-2",children:ye}),j&&a.jsx("div",{className:"fixed inset-0 z-40 bg-white/40 backdrop-blur-sm transition-all"}),a.jsx(z1,{open:j,onClose:()=>{k(!1),M(null),O(null),Te(null)},onSave:De,initial:_||void 0}),q&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-sm relative flex flex-col items-center",children:[a.jsx("button",{onClick:()=>M(null),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl","aria-label":"Fermer",children:"×"}),a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"bg-red-100 rounded-full p-4 mb-2",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:r("modal.delete.title")}),Xe&&a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-700 font-semibold",children:`Voulez-vous supprimer ${Xe.child.name}`}),a.jsx("p",{className:"text-gray-700 font-semibold mt-1",children:(()=>{const Se=_?.date||Xe.date;let Me=Se;try{Me=new Intl.DateTimeFormat(l,{year:"numeric",month:"long",day:"numeric"}).format(new Date(Se))}catch{}return`le ${Me} ?`})()})]}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:()=>M(null),className:"flex-1 px-4 py-2 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:r("modal.cancel")}),a.jsx("button",{onClick:async()=>{await fe(`api/assignments/${q}`,{method:"DELETE",credentials:"include"}),M(null),O(null);const Se=L.getFullYear(),Me=L.getMonth(),ke=new Date(Se,Me,1),Je=new Date(Se,Me+1,0);E(ke,Je)},className:"flex-1 px-4 py-2 rounded-xl bg-gradient-to-r from-red-500 via-red-600 to-red-700 text-white font-bold shadow-lg hover:from-red-600 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 transition-all duration-150","aria-label":"Supprimer l’affectation",children:r("modal.delete.confirm")})]})]})]})}),W&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md relative",children:[a.jsx("button",{onClick:()=>Z(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-xl font-bold mb-1 text-center",children:r("page.children")}),a.jsx("div",{className:"text-sm text-gray-500 mb-4 text-center",children:Q}),I.length===0?a.jsx("div",{className:"text-gray-500 text-center",children:r("children.none_on_date",{date:Q})}):a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:Object.entries(I.reduce((Se,Me)=>(Se[Me.nanny.name]||(Se[Me.nanny.name]=[]),Se[Me.nanny.name].push(Me),Se),{})).map(([Se,Me])=>a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-blue-700 mb-2 text-center",children:Se}),a.jsx("ul",{className:"space-y-2",children:Me.map(ke=>a.jsxs("li",{className:"bg-blue-50 rounded px-3 py-2 text-gray-800 font-semibold text-center border border-blue-100 cursor-pointer hover:bg-blue-100 flex items-center justify-between",title:r("dashboard.click_to_delete_assignment"),onClick:()=>{M(ke.id),Z(!1),O({date:ke.date.split("T")[0],childId:ke.child.id,nannyId:ke.nanny.id})},children:[a.jsx("span",{children:ke.child.name}),a.jsx("span",{className:"text-xs text-red-600 ml-2",children:r("modal.delete.confirm")})]},ke.id))})]},Se))})]})})]})})}const ai=6e4,Uf=new Map;function Mv(){return Date.now()}function Lv(s){try{const t=globalThis;return typeof t.structuredClone=="function"?t.structuredClone(s):JSON.parse(JSON.stringify(s))}catch{return s}}function Kn(s){const t=Uf.get(s);if(t){if(t.expiresAt&&t.expiresAt<Mv()){Uf.delete(s);return}return Lv(t.value)}}function sa(s,t,r=ai){const l=r>0?Mv()+r:Number.POSITIVE_INFINITY;Uf.set(s,{value:Lv(t),expiresAt:l})}const dn="https://api.monsite.fr";function I1(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function B1(s){if(!s||typeof s!="object")return;const t=s,r=t.prescriptionUrl??t.prescription_url;return typeof r=="string"?r:void 0}function q1({childId:s}){const{user:t}=fn(),r="https://api.monsite.fr",[l,o]=b.useState(null),[u,d]=b.useState(!1);b.useEffect(()=>{let f=!0;async function m(){try{const x=await fetch(`${r}/children/${s}/photo-consent`,{credentials:"include"});if(!f)return;if(!x.ok)return o(!1);const v=await x.json();o(!!v.consent)}catch(x){console.error("Failed to load photo consent",x instanceof Error?x.message:String(x))}}return t&&t.role==="parent"&&m(),()=>{f=!1}},[s,t,r]);const p=async()=>{d(!0);try{const f=await fetch(`${r}/children/${s}/photo-consent`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({consent:!l})});if(!f.ok){const x=await f.json().catch(()=>({}));alert(x.message||"Erreur lors de la mise à jour du consentement");return}const m=await f.json();o(!!m.consent)}catch(f){console.error("Failed to toggle consent",f instanceof Error?f.message:String(f))}finally{d(!1)}};return!t||t.role!=="parent"?null:l===null?a.jsx("div",{className:"text-sm text-gray-500",children:"Chargement du consentement..."}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l,onChange:p,disabled:u}),a.jsx("span",{className:"text-sm",children:"Autoriser les photos"})]}),a.jsx("span",{className:"text-xs text-gray-400",children:l?"Autorisé":"Non autorisé"})]})}const ll={name:"",age:0,sexe:"masculin",parentName:"",parentContact:"",parentMail:"",parentId:void 0,allergies:"",group:"",present:!0,newThisMonth:!1,birthDate:void 0,nannyIds:[]},cf=[{key:"G1",label:"Groupe 1 (0-1 ans)",min:0,max:1},{key:"G2",label:"Groupe 2 (1-2 ans)",min:1,max:2},{key:"G3",label:"Groupe 3 (2-3 ans)",min:2,max:3},{key:"G4",label:"Groupe 4 (3-4 ans)",min:3,max:4},{key:"G5",label:"Groupe 5 (4-5 ans)",min:4,max:5},{key:"G6",label:"Groupe 6 (5-6 ans)",min:5,max:6}],H1={masculin:"👦",feminin:"👧"};function V1(){const[s,t]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const K=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),xe=()=>t(!!K.matches);return xe(),typeof K.addEventListener=="function"?K.addEventListener("change",xe):K.addListener(xe),window.addEventListener("resize",xe),window.addEventListener("orientationchange",xe),()=>{try{typeof K.removeEventListener=="function"?K.removeEventListener("change",xe):K.removeListener(xe)}catch{}window.removeEventListener("resize",xe),window.removeEventListener("orientationchange",xe)}},[]);const{t:r}=Rt(),[l,o]=b.useState({}),[u,d]=b.useState([]),[p,f]=b.useState(!0),[m,x]=b.useState(ll),[v,w]=b.useState([]),[N,T]=b.useState([]),[S,j]=b.useState(!1),[k,_]=b.useState(null),[O,q]=b.useState(""),[M,L]=b.useState(""),[U,W]=b.useState(""),[Z,I]=b.useState("name"),[P,Q]=b.useState(!1),[$,E]=b.useState(""),[G,C]=b.useState(null),[R,Y]=b.useState({}),[te,Ne]=b.useState({}),[z,J]=b.useState({open:!1,url:null,childName:null}),[se,ue]=b.useState({open:!1,childName:null}),{user:ye}=fn(),Te=!!(ye&&typeof ye.role=="string"&&(ye.role.toLowerCase()==="admin"||ye.role.toLowerCase().includes("super")||ye.role.toLowerCase()==="administrator")),De=ye,Ce=!!(De&&(typeof De.role=="string"&&De.role.toLowerCase()==="nanny"||De.nannyId));function $e(K){x({...ll,...K,group:K.group||""}),_(K.id),q(""),Q(!0),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),100)}const Ye=async()=>{f(!0);try{const K=new Date().toISOString().split("T")[0],xe=`${dn}/children`;let Oe=Kn(xe)??null;const Pe=fe(`${dn}/assignments?start=${K}&end=${K}`,{credentials:"include"});Oe||(Oe=await(await fe(`${dn}/children`,{credentials:"include"})).json(),sa(xe,Oe));const Ve=await(await Pe).json(),Be=new Set(Ve.map(he=>he.child.id)),Qe=Array.isArray(Oe)?Oe.map(he=>{const ee={...he},me=Array.isArray(ee.parents)?ee.parents:void 0;if(me&&me.length>0&&me[0]&&me[0].parent){const _e=me[0].parent,Ue=`${String(_e.firstName??"")} ${String(_e.lastName??"")}`.trim();ee.parentName=Ue||String(ee.parentName??""),ee.parentContact=_e.phone??String(ee.parentContact??""),ee.parentMail=_e.email??String(ee.parentMail??""),ee.parentId=String(_e.id??ee.parentId??"")}return{id:String(ee.id??""),name:String(ee.name??""),age:Number(ee.age??0),sexe:ee.sexe==="feminin"?"feminin":"masculin",parentName:String(ee.parentName??""),parentContact:String(ee.parentContact??""),parentMail:String(ee.parentMail??""),parentId:ee.parentId?String(ee.parentId):void 0,allergies:ee.allergies?String(ee.allergies):void 0,group:ee.group?String(ee.group):void 0,present:Be.has(String(ee.id??"")),newThisMonth:!!(ee.newThisMonth??!1),cotisationPaidUntil:ee.cotisationPaidUntil?String(ee.cotisationPaidUntil):void 0,birthDate:ee.birthDate?String(ee.birthDate):void 0,nannyIds:Array.isArray(ee.childNannies)?ee.childNannies.map(_e=>{if(!_e||typeof _e!="object")return"";const Ue=_e.nanny;return Ue&&Ue.id?String(Ue.id):_e.nannyId?String(_e.nannyId):""}).filter(Boolean):[]}}):[];d(Qe);const ie={};Qe.forEach(he=>{ie[he.id]=15}),Y(ie);try{const he=await Promise.all(Qe.map(async me=>{try{const be=await fe(`${dn}/children/${me.id}/photo-consent-summary`,{credentials:"include"});if(!be.ok)return{id:me.id,allowed:!1};const _e=await be.json();return{id:me.id,allowed:!!_e.allowed}}catch{return{id:me.id,allowed:!1}}})),ee={};he.forEach(me=>{ee[me.id]=!!me.allowed}),Ne(ee)}catch{Ne({})}}catch{d([])}finally{f(!1)}};b.useEffect(()=>{Ye(),(async()=>{try{const Oe=ye,Pe=Oe&&typeof Oe.role=="string"&&(Oe.role.toLowerCase()==="admin"||Oe.role.toLowerCase().includes("super")),ut=!!(Oe&&Oe.nannyId);if(!Pe&&!ut){w([]);return}const Ve=await fe(`${dn}/parent/admin`,{credentials:"include"});if(!Ve.ok)return w([]);const Be=await Ve.json(),Qe=Array.isArray(Be?.parents)?Be.parents.map(ie=>{const he=String(ie.id??""),ee=ie.name??`${ie.firstName??""} ${ie.lastName??""}`,me=String(ee).trim()||he,be=typeof ie.email=="string"?ie.email:void 0,_e=typeof ie.phone=="string"?ie.phone:void 0;return{id:he,name:me,email:be,phone:_e}}):[];w(Qe)}catch{w([])}})(),(async()=>{try{const Oe=`${dn}/nannies`,Pe=Kn(Oe);if(Pe)T(Pe);else{const ut=await fe(`${dn}/nannies`,{credentials:"include"});if(!ut.ok)return T([]);const Ve=await ut.json(),Be=Array.isArray(Ve)?Ve.map(Qe=>{const ie=Qe;return{id:String(ie.id??""),name:String(ie.name??"")}}):[];T(Be),sa(Oe,Be)}}catch{T([])}})(),(async()=>{try{const Oe=I1(),Pe=`${dn}/children`,ut=Kn(Pe),Ve=ut||await fe(`${dn}/children`,{credentials:"include"}).then(Qe=>Qe.json()),Be={};await Promise.all(Ve.map(async Qe=>{const ie=await fe(`${dn}/children/${Qe.id}/billing?month=${Oe}`,{credentials:"include"});if(ie.ok){const he=await ie.json();Be[Qe.id]={days:he.days,amount:he.amount}}})),o(Be)}catch{o({})}})()},[ye]);const Xe=K=>{x({...m,[K.target.name]:K.target.value})},Se=async K=>{K.preventDefault(),q("");try{const xe={name:m.name,age:m.age,sexe:m.sexe,parentName:m.parentName||void 0,parentContact:m.parentContact||void 0,parentMail:m.parentMail||void 0,allergies:m.allergies||void 0,group:m.group||void 0,present:m.present,birthDate:m.birthDate||void 0,nannyIds:Array.isArray(m.nannyIds)?m.nannyIds:void 0};if(m.parentId&&(xe.parentId=m.parentId),!(await fe(k?`${dn}/children/${k}`:`${dn}/children`,{method:k?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(xe)})).ok)throw new Error("Erreur lors de la sauvegarde");x(ll),_(null),Q(!1),E("L'enfant a bien été ajouté !"),Ye(),setTimeout(()=>E(""),2500)}catch(xe){xe instanceof Error?q(xe.message):q("Erreur")}},[Me,ke]=b.useState(null),[Je,V]=b.useState(!1),ce=async()=>{if(Me){V(!0);try{const K=await fe(`${dn}/children/${Me}`,{method:"DELETE",credentials:"include"});if(!K.ok){let xe="Erreur lors de la suppression";try{const we=await K.json();we&&(xe=we.error||we.message||JSON.stringify(we))}catch{}throw new Error(xe)}ke(null),Ye()}catch(K){K instanceof Error?q(K.message):q("Erreur")}finally{V(!1)}}},le=u.length,ve=u.filter(K=>K.present).length;let Ee=u.filter(K=>{const xe=!M||K.name.toLowerCase().includes(M.toLowerCase())||K.parentName.toLowerCase().includes(M.toLowerCase());let we=!0;if(U){const Oe=cf.find(Pe=>Pe.key===U);Oe&&(we=K.group===Oe.key||!K.group&&K.age>=Oe.min&&K.age<Oe.max)}return xe&&we});Z==="name"&&(Ee=Ee.sort((K,xe)=>K.name.localeCompare(xe.name))),Z==="age"&&(Ee=Ee.sort((K,xe)=>K.age-xe.age));const Ie=["bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-pink-50","bg-orange-50"];return a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${s?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full children-responsive-row",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 w-full children-responsive-header",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:r("page.children.title")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:r("page.children.description")})]}),a.jsx("div",{className:"flex gap-2 items-center",children:Te&&a.jsx("button",{type:"button",onClick:()=>{Q(!0),x(ll),_(null),q("")},className:`bg-[#0b5566] text-white font-semibold rounded-lg px-5 py-2 text-base shadow hover:bg-[#08323a] transition min-h-[44px] md:h-[60px] flex items-center ${s?"-translate-x-3":""}`,style:{transform:s?"translateX(-12px)":void 0},children:r("children.add")})})]}),a.jsxs("div",{className:"flex flex-col md:items-start gap-3 mb-6 w-full",children:[a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"flex gap-2 items-center flex-wrap w-full",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:r("children.total")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:le})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:r("children.present")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:ve})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:r("children.new_badge")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.filter(K=>K.newThisMonth).length})]})]})}),a.jsx("div",{className:"w-full md:w-auto",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[a.jsx("input",{type:"text",value:M,onChange:K=>L(K.target.value),placeholder:r("children.search_placeholder"),className:"border border-gray-200 rounded-lg px-3 py-2 text-gray-700 bg-white shadow-sm text-sm md:text-base w-full md:w-64 min-h-[44px]"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:U,onChange:K=>W(K.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 bg-white text-gray-700 shadow-sm text-sm",children:[a.jsx("option",{value:"",children:r("children.group.all")}),cf.map(K=>a.jsx("option",{value:K.key,children:K.label},K.key))]}),a.jsxs("select",{value:Z,onChange:K=>I(K.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 bg-white text-gray-700 shadow-sm text-sm",children:[a.jsx("option",{value:"name",children:r("children.sort.name")}),a.jsx("option",{value:"age",children:r("children.sort.age")})]})]})]})})]}),(P||k)&&a.jsxs("form",{onSubmit:Se,className:"mb-6 bg-white rounded-2xl shadow p-6 grid gap-2 md:grid-cols-2 lg:grid-cols-3",children:[a.jsx("input",{name:"name",value:m.name,onChange:Xe,placeholder:r("children.form.name"),required:!0,className:"border rounded px-3 py-2"}),a.jsx("input",{name:"age",type:"number",value:m.age,onChange:Xe,placeholder:r("children.form.age"),required:!0,className:"border rounded px-3 py-2"}),a.jsx("input",{name:"birthDate",type:"date",value:m.birthDate||"",onChange:Xe,placeholder:r("children.form.birthDate"),className:"border rounded px-3 py-2"}),a.jsxs("select",{name:"sexe",value:m.sexe,onChange:Xe,required:!0,className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"masculin",children:r("children.form.sexe.m")}),a.jsx("option",{value:"feminin",children:r("children.form.sexe.f")})]}),a.jsxs("select",{name:"group",value:m.group,onChange:Xe,required:!0,className:"border rounded px-3 py-2",children:[a.jsx("option",{value:"",children:r("children.form.group_placeholder")}),cf.map(K=>a.jsx("option",{value:K.key,children:K.label},K.key))]}),a.jsxs("div",{className:"relative w-full",children:[a.jsx("input",{name:"parentName",value:m.parentName,onChange:K=>{const xe=K.target.value;x(Pe=>({...Pe,parentName:xe}));const we=xe.toLowerCase(),Oe=v.find(Pe=>Pe.name.toLowerCase()===we);x(Oe?Pe=>({...Pe,parentMail:Oe.email||"",parentContact:Oe.phone||"",parentId:Oe.id}):Pe=>({...Pe,parentId:void 0})),j(!0)},onFocus:()=>j(!0),onBlur:()=>{setTimeout(()=>j(!1),150)},placeholder:r("children.form.parent_placeholder"),className:"border rounded px-3 py-2 w-full"}),S&&(()=>{const K=m.parentName.trim().toLowerCase(),xe=K?v.filter(we=>we.name.toLowerCase().includes(K)):v;return xe.length===0?null:a.jsx("ul",{className:"absolute left-0 right-0 bg-white border rounded shadow max-h-56 overflow-auto z-50 mt-1",children:xe.slice(0,12).map(we=>a.jsx("li",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onMouseDown:Oe=>{Oe.preventDefault(),x(Pe=>({...Pe,parentName:we.name,parentMail:we.email||"",parentContact:we.phone||"",parentId:we.id})),j(!1)},children:we.name},we.id))})})()]}),a.jsx("input",{name:"parentContact",value:m.parentContact,onChange:Xe,placeholder:r("children.form.parentPhone_placeholder"),className:"border rounded px-3 py-2"}),a.jsx("input",{name:"parentMail",type:"email",value:m.parentMail,onChange:Xe,placeholder:r("children.form.parentEmail_placeholder"),className:"border rounded px-3 py-2"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("children.nannies.label")}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-auto border rounded p-2 bg-gray-50",children:N.length===0?a.jsx("div",{className:"text-sm text-gray-500",children:r("children.nannies.none")}):N.map(K=>{const xe=Array.isArray(m.nannyIds)&&m.nannyIds.includes(K.id);return a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",value:K.id,checked:xe,onChange:we=>{const Oe=we.target.value;x(Pe=>{const ut=Array.isArray(Pe.nannyIds)?[...Pe.nannyIds]:[];if(we.target.checked)ut.includes(Oe)||ut.push(Oe);else{const Ve=ut.indexOf(Oe);Ve>=0&&ut.splice(Ve,1)}return{...Pe,nannyIds:ut}})}}),a.jsx("span",{children:K.name})]},K.id)})})]}),a.jsx("input",{name:"allergies",value:m.allergies,onChange:Xe,placeholder:r("children.form.allergies_placeholder"),className:"border rounded px-3 py-2 md:col-span-2"}),a.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded hover:bg-[#08323a] transition",children:r(k?"children.form.edit":"children.add")}),a.jsx("button",{type:"button",onClick:()=>{x(ll),_(null),Q(!1),q("")},className:"bg-gray-300 px-4 py-2 rounded",children:r("global.cancel")})]}),O&&a.jsx("div",{className:"text-red-600 md:col-span-2",children:O})]}),$&&a.jsx("div",{className:"mb-4 text-[#0b5566] font-semibold text-center bg-[#a9ddf2] border border-[#fcdcdf] rounded-lg py-2",children:r("children.form.added_success")}),p?a.jsx("div",{children:r("children.loading")}):a.jsx("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 w-full children-responsive-grid",children:Ee.map((K,xe)=>{const we=l[K.id],Oe=Ie[xe%Ie.length],Pe=H1[K.sexe]||"👦",ut=Me===K.id,Ve=new Date,Be=K.cotisationPaidUntil?new Date(K.cotisationPaidUntil):null,Qe=Be?Math.max(0,Math.floor((Be.getTime()-Ve.getTime())/(1e3*60*60*24))):0,ie=Qe>0;let he="";if(Be){const me=Be.getTime()-Ve.getTime();if(me>0){const be=Math.floor(me/864e5);he=be>365?"Cotisation à jour":`${be} jours restants`}else he="Cotisation à renouveler"}const ee=async()=>{C(K.id);const me=R[K.id]??15;try{const be=await fe(`${dn}/children/${K.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:K.name,age:K.age,sexe:K.sexe,parentName:K.parentName,parentContact:K.parentContact,allergies:K.allergies||"",payCotisation:!0,amount:me})});be.ok?await Ye():console.error("Failed to update cotisation",String(be.status))}catch(be){console.error("Error while updating cotisation",be instanceof Error?be.message:String(be))}finally{C(null)}};return a.jsx("div",{className:`rounded-2xl shadow ${Oe} relative flex flex-col min-h-[520px] md:min-h-[540px] h-full transition-transform duration-500 perspective-1000 overflow-hidden`,style:{height:"100%",perspective:"1000px"},children:a.jsxs("div",{className:`w-full h-full transition-transform duration-500 ${ut?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",position:"relative",width:"100%",height:"100%"},children:[a.jsxs("div",{className:`absolute inset-0 w-full h-full p-5 pb-20 md:pb-28 flex flex-col ${ut?"opacity-0 pointer-events-none":"opacity-100"} bg-transparent`,style:{backfaceVisibility:"hidden"},children:[a.jsx("div",{className:"flex items-center gap-3 mb-2 min-w-0",children:a.jsxs("div",{className:"w-full min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-2xl shadow border border-gray-100",children:Pe}),a.jsx("span",{className:"font-semibold text-lg text-gray-900 truncate",title:K.name,children:K.name})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[a.jsxs("span",{className:"text-xs font-bold bg-white text-[#08323a] px-3 py-1 rounded-full shadow border border-[#a9ddf2] whitespace-nowrap",children:[K.age," ans"]}),a.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-blue-100 text-blue-700 whitespace-nowrap",title:"Sexe",children:K.sexe==="masculin"?r("children.form.sexe.m"):r("children.form.sexe.f")}),K.birthDate?a.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700 whitespace-nowrap",title:r("label.birthDate"),children:["🎂 ",new Date(K.birthDate).toLocaleDateString("fr-FR")]}):a.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 text-gray-600 whitespace-nowrap",title:r("label.birthDate"),children:["🎂 ",r("children.birthDate.undefined")]})]})]})}),a.jsxs("span",{className:"block text-xs text-yellow-700 flex items-center gap-1 mb-2",children:[a.jsxs("span",{children:["⚠️ ",r("children.allergies.label")]}),a.jsx("span",{className:"font-medium",children:K.allergies?K.allergies:a.jsx("span",{className:"text-gray-400",children:r("children.allergies.none")})})]}),a.jsxs("div",{className:"flex flex-col gap-3 text-sm text-gray-700 mb-4",children:[a.jsxs("span",{className:"block",children:["👤 ",r("children.parent.label")," ",K.parentName]}),a.jsxs("span",{className:"block",children:["📞 ",a.jsx("a",{href:`tel:${K.parentContact}`,className:"text-blue-600 underline hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",title:r("children.call_parent_title"),children:K.parentContact})]}),a.jsxs("span",{className:"block",children:["✉️ ",a.jsx("a",{href:`mailto:${K.parentMail}`,className:"text-blue-600 underline hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-400 transition",title:r("children.email_parent_title"),children:K.parentMail})]}),a.jsxs("div",{className:"flex flex-col gap-2 mt-2 mb-0",style:{marginBottom:0},children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[r("children.cotisation.label")," :"]}),Qe>0?a.jsxs("span",{className:"text-base font-bold text-[#08323a]",children:[R[K.id]??15,"€"]}):ye&&(ye.role==="admin"||ye.role==="super-admin")?a.jsx("input",{type:"number",min:0,className:"w-24 px-2 py-1 border rounded text-sm",value:R[K.id]??"",placeholder:"€",onChange:me=>Y(be=>({...be,[K.id]:me.target.value===""?void 0:Number(me.target.value)}))}):a.jsxs("span",{className:"text-base font-bold text-green-700",children:[R[K.id]??15,"€"]}),ie?a.jsx("span",{className:"text-[#0b5566] text-xl",children:"✔️"}):G===K.id?a.jsx("span",{className:"text-gray-400 text-xs ml-2 animate-pulse",children:r("children.loading")}):Ce?a.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"—"}):a.jsx("button",{onClick:ee,className:"text-[#0b5566] text-xs font-semibold px-2 py-1 rounded bg-[#a9ddf2] hover:bg-[#f7f4d7] transition",title:r("children.cotisation.pay"),children:r("children.cotisation.pay")}),a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:he})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[r("children.cotisation.this_month")," :"]}),a.jsx("span",{className:"text-base font-bold text-[#08323a]",children:we?`${we.amount}€`:"..."}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",we?`${we.days} jour${we.days>1?"s":""}`:"calcul...",")"]})]})]}),ye&&ye.role==="parent"&&K.parentId===(ye.parentId||void 0)&&a.jsx("div",{className:"mt-3",children:a.jsx(q1,{childId:K.id})}),a.jsx("div",{className:"mt-2",children:typeof te[K.id]=="boolean"?te[K.id]?a.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:r("children.photo_consent.yes")}):a.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full",children:r("children.photo_consent.no")}):a.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:r("children.photo_consent.unknown")})})]}),a.jsxs("div",{className:"flex items-center gap-2 justify-between mt-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[K.present?a.jsxs("span",{className:"text-[#08323a] text-xs font-semibold flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-[#a9ddf2] inline-block"}),r("children.presence.present_today")]}):a.jsxs("span",{className:"text-red-500 text-xs font-semibold flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-400 inline-block"}),r("children.presence.absent_today")]}),K.newThisMonth&&a.jsx("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",children:r("children.new_badge")}),Array.isArray(K.nannyIds)&&K.nannyIds.length>0?a.jsxs("span",{className:"ml-2 text-xs px-2 py-1 rounded-full flex items-center gap-2 bg-indigo-100 text-indigo-700 flex-shrink-0",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"inline-block",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{className:"font-medium truncate max-w-[160px]",children:r("children.assigned",{names:K.nannyIds.map(me=>N.find(be=>be.id===me)?.name||"").filter(Boolean).join(", ")})})]}):a.jsx("span",{className:"ml-2 text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:r("children.not_assigned")})]}),a.jsx("div",{})]})]}),a.jsx("div",{className:"absolute left-0 right-0 bottom-4 flex justify-center z-10",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{let be=B1(K)||null;if(!be)try{const _e=await fe(`${dn}/children/${K.id}/prescription`,{credentials:"include"});if(!_e.ok){ue({open:!0,childName:K.name});return}if(be=(await _e.json()).url||null,!be){ue({open:!0,childName:K.name});return}}catch(_e){console.error("Failed to fetch prescription",_e),ue({open:!0,childName:K.name});return}be&&J({open:!0,url:be,childName:K.name})},className:"bg-white border border-gray-200 text-gray-500 hover:text-green-700 rounded-full p-2 shadow-sm",title:r("children.prescription.view_button"),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("path",{d:"M7 10l5 5 5-5"})]})}),ye&&(ye.role==="admin"||ye.role==="super-admin"||ye.nannyId)?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>$e(K),className:"bg-white border border-gray-200 text-gray-500 hover:text-[#08323a] rounded-full p-2 shadow-sm",title:r("children.action.edit"),children:a.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z"})})}),a.jsx("button",{onClick:()=>ke(K.id),className:"bg-white border border-gray-200 text-gray-500 hover:text-red-500 rounded-full p-2 shadow-sm",title:r("children.action.delete"),children:a.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})})})]}):null]})}),a.jsxs("div",{className:`absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-white rounded-2xl shadow-xl p-8 ${ut?"opacity-100":"opacity-0 pointer-events-none"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[a.jsx("div",{className:"text-red-500 text-4xl mb-2",children:"🗑️"}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-900 text-center",children:r("children.delete.confirm_title")}),a.jsx("div",{className:"text-gray-500 mb-6 text-center",children:r("children.delete.confirm_body")}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:()=>ke(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition",disabled:Je,children:r("modal.cancel")}),a.jsx("button",{onClick:ce,className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition shadow",disabled:Je,children:r(Je?"children.deleting":"children.action.delete")})]})]})]})},K.id)})}),z.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 w-full max-w-3xl relative mx-4",children:[a.jsx("button",{onClick:()=>J({open:!1,url:null}),className:"absolute top-3 right-3 text-gray-500",children:"×"}),a.jsxs("div",{className:"text-lg font-bold mb-2",children:["Ordonnance de ",z.childName||"cet enfant"]}),a.jsx("div",{className:"w-full h-[50vh] sm:h-[70vh] flex items-center justify-center overflow-auto",children:z.url&&z.url.endsWith(".pdf")?a.jsx("iframe",{src:z.url,className:"w-full h-full",title:"Ordonnance PDF"}):a.jsx("img",{src:z.url||"",alt:"Ordonnance",className:"h-full w-auto object-contain"})})]})}),se.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md relative",children:[a.jsx("button",{onClick:()=>ue({open:!1,childName:null}),className:"absolute top-3 right-3 text-gray-500",children:"×"}),a.jsx("div",{className:"text-lg font-bold mb-2",children:r("children.prescription.noneTitle")}),a.jsx("div",{className:"text-gray-600 mb-4",children:r("children.prescription.noneMessage",{name:se.childName||r("children.thisChild")})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>ue({open:!1,childName:null}),className:"px-4 py-2 bg-[#0b5566] text-white rounded-lg",children:r("common.ok")})})]})})]})})}const Vo="https://api.monsite.fr";function F1(s){const t=s.getFullYear(),r=s.getMonth(),l=new Date(t,r,1),o=new Date(t,r+1,0),u=new Date(l);u.setDate(l.getDate()-(l.getDay()+6)%7);const d=new Date(o);d.setDate(o.getDate()+(7-d.getDay()===7?0:7-d.getDay()));const p=[];for(let m=new Date(u);m<=d;m.setDate(m.getDate()+1))p.push(new Date(m));const f=[];for(let m=0;m<p.length;m+=7)f.push(p.slice(m,m+7));return f}function G1(s){const t=new Date(s);return t.setDate(s.getDate()-(s.getDay()+6)%7),Array.from({length:7},(r,l)=>{const o=new Date(t);return o.setDate(t.getDate()+l),o})}function $v({nannyId:s}){const{locale:t,t:r}=Rt(),[l,o]=b.useState([]),[u,d]=b.useState(null),[p,f]=b.useState(""),[m,x]=b.useState(""),[v,w]=b.useState("");b.useEffect(()=>{fe(`${Vo}/children`,{credentials:"include"}).then(L=>L.json()).then(o)},[]);const[N,T]=b.useState(new Date),[S,j]=b.useState([]);b.useEffect(()=>{const L=N.getFullYear(),U=N.getMonth(),W=new Date(L,U,1),Z=new Date(L,U+1,0);fe(`${Vo}/assignments?nannyId=${s}&start=${W.toISOString()}&end=${Z.toISOString()}`,{credentials:"include"}).then(I=>I.json()).then(j)},[s,N]);const k=F1(N),_=new Intl.DateTimeFormat(t,{month:"long",year:"numeric"}).format(N),O=Array.from({length:7}).map((L,U)=>{const W=G1(new Date)[U];return new Intl.DateTimeFormat(t,{weekday:"short"}).format(W)}),q=()=>{const L=new Date(N);L.setMonth(L.getMonth()-1),T(L)},M=()=>{const L=new Date(N);L.setMonth(L.getMonth()+1),T(L)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 sm:mb-6 gap-2",children:[a.jsx("div",{className:"text-lg md:text-2xl font-bold text-gray-900",children:_.charAt(0).toUpperCase()+_.slice(1)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:q,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:M,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:a.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M9 5l7 7-7 7"})})})]})]}),a.jsx("div",{className:"block w-full",children:a.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[O.map((L,U)=>a.jsx("div",{className:"text-center text-gray-500 font-semibold text-xs py-1",children:L},U)),k.flat().map((L,U)=>{const W=L.toDateString()===new Date().toDateString(),Z=L.getMonth()===N.getMonth(),I=$=>$.toString().padStart(2,"0"),P=`${L.getFullYear()}-${I(L.getMonth()+1)}-${I(L.getDate())}`,Q=S.filter($=>$.nanny.id===s&&$.date.split("T")[0]===P);return a.jsxs("div",{className:"align-top p-1 h-full flex flex-col "+(W?"border-2 border-green-400 rounded-xl ":"border border-gray-100 ")+(Z?"bg-[#f8f8fc]":"bg-gray-50 opacity-60")+" relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-bold cursor-pointer "+(Z?"text-gray-700":"text-gray-400"),children:L.getDate()}),a.jsx("button",{className:"text-[#0b5566] hover:text-[#08323a] text-lg font-bold",title:r("children.add"),onClick:()=>{d({date:P}),f(""),x("")},children:"+"})]}),Q.length===0?a.jsx("div",{className:"text-gray-300 text-xs",children:"—"}):Q.slice(0,2).map(($,E)=>a.jsxs("div",{className:"flex items-center gap-1 mb-1 px-1 py-1 rounded-lg "+(E===0?"bg-[#a9ddf2]":"bg-[#fff7e6]")+" shadow-sm group",children:[a.jsx("span",{className:"w-2 h-2 rounded-full "+(E===0?"bg-[#08323a]":"bg-[#856400]")}),a.jsx("span",{className:"font-semibold text-gray-800 text-[11px] group-hover:underline cursor-pointer hover:text-red-600 truncate max-w-[70px]",title:$.child.name,children:$.child.name})]},$.id)),Q.length>2&&a.jsxs("div",{className:"text-xs text-gray-500 truncate max-w-[64px] sm:max-w-none",children:["+",Q.length-2," autres"]})]},U)})]})}),u&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("form",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-xs flex flex-col items-center relative",onSubmit:async L=>{if(L.preventDefault(),x(""),w(""),!p){x("Sélectionnez un enfant");return}if(S.filter(R=>R.date.split("T")[0]===u.date&&R.nanny.id===s).some(R=>R.child.id===p)){x("Cet enfant est déjà assigné ce jour-là");return}const[W,Z,I]=u.date.split("-"),P=new Date(Date.UTC(Number(W),Number(Z)-1,Number(I))).toISOString();if(!(await fetch(`${Vo}/assignments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({date:P,childId:p,nannyId:s})})).ok){x("Erreur lors de l'ajout");return}w("Enfant ajouté au planning !"),setTimeout(()=>{d(null),f(""),w("")},1200);const $=N.getFullYear(),E=N.getMonth(),G=new Date($,E,1),C=new Date($,E+1,0);fetch(`${Vo}/assignments?nannyId=${s}&start=${G.toISOString()}&end=${C.toISOString()}`,{credentials:"include"}).then(R=>R.json()).then(j)},children:[a.jsx("button",{type:"button",onClick:()=>d(null),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Ajouter une affectation"}),a.jsxs("select",{value:p,onChange:L=>f(L.target.value),className:"border rounded px-2 py-1 mb-2 w-full",required:!0,children:[a.jsx("option",{value:"",children:"Sélectionner un enfant"}),l.map(L=>a.jsx("option",{value:L.id,children:L.name},L.id))]}),a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsx("button",{type:"submit",className:"bg-green-500 text-white px-3 py-1 rounded w-full",children:"Ajouter"}),a.jsx("button",{type:"button",className:"bg-gray-300 px-3 py-1 rounded w-full",onClick:()=>d(null),children:"Annuler"})]}),m&&a.jsx("div",{className:"text-red-600 text-xs mt-2 text-center w-full",children:m}),v&&a.jsx("div",{className:"text-green-600 text-xs mt-2 text-center w-full",children:v})]})})]})}const Ma="https://api.monsite.fr";function Y1({nanny:s,onClose:t}){const{t:r}=Rt();return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl relative",children:[a.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:r("nanny.planning.of",{name:s.name})}),a.jsx($v,{nannyId:s.id})]})})}const Fo={name:"",availability:"Disponible",experience:"",specializations:[],status:"Disponible",contact:"",email:"",password:"",birthDate:void 0,address:"",postalCode:"",city:"",region:"",country:""};function K1(){const{t:s}=Rt(),{user:t}=fn(),[r,l]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const H=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),je=()=>l(!!H.matches);return je(),typeof H.addEventListener=="function"?H.addEventListener("change",je):H.addListener(je),window.addEventListener("resize",je),window.addEventListener("orientationchange",je),()=>{try{typeof H.removeEventListener=="function"?H.removeEventListener("change",je):H.removeListener(je)}catch{}window.removeEventListener("resize",je),window.removeEventListener("orientationchange",je)}},[]);const[o,u]=b.useState([]),[d,p]=b.useState({}),[f,m]=b.useState({}),[x,v]=b.useState({}),[w,N]=b.useState([]),[T,S]=b.useState(!0),[j,k]=b.useState(Fo),[_,O]=b.useState([]),[q,M]=b.useState(!1),[L,U]=b.useState(null),W=xt.useRef(null),Z=xt.useCallback(async H=>{if(!(L&&Date.now()<L)){if(!H||H.length<3){O([]);return}try{const je=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(H)}&limit=12`);if(je.status===422){O([]);return}if(je.status===429){U(Date.now()+6e4),O([]);return}if(!je.ok){O([]);return}const ct=(await je.json()||[]).filter(Kt=>!!(Kt.house_number||Kt.street));O(ct)}catch(je){console.error("geodata fetch error",je),O([])}}},[L]);xt.useEffect(()=>{const H=(j.address||j.city||"").trim();return W.current&&window.clearTimeout(W.current),W.current=window.setTimeout(()=>{const je=j.city?` ${j.city}`:"";Z(`${H}${je}`.trim())},600),()=>{W.current&&window.clearTimeout(W.current)}},[j.address,j.city,Z]),xt.useEffect(()=>{const H=je=>{const Ae=je.target;if(!Ae)return;const Re=document.querySelector("#nanny-form-address");Re&&Re.contains(Ae)||M(!1)};return document.addEventListener("click",H),()=>document.removeEventListener("click",H)},[]);const I=H=>{const je=H.house_number?String(H.house_number).trim():"",Ae=H.street?String(H.street).trim():"",ct=(je?`${je} ${Ae}`.trim():Ae||"")||H.name||"",Kt=String(j.address||"").trim();let Dn=ct;if(!je){const en=Kt.match(/^(\d+)\s+(.+)$/);if(en&&en[1]){const Jn=en[1];ct.startsWith(Jn+" ")||(Dn=`${Jn} ${ct}`.trim())}}k({...j,address:Dn,city:H.city||"",postalCode:H.postcode||"",region:H.state||"",country:H.country||""}),O([]),M(!1)},[P,Q]=b.useState(!1),[$,E]=b.useState("text"),[G,C]=b.useState(""),[R,Y]=b.useState(null),[te,Ne]=b.useState(!1),z=b.useRef(null),[J,se]=b.useState(""),[ue,ye]=b.useState(null),[Te,De]=b.useState(""),[Ce,$e]=b.useState(""),[Ye,Xe]=b.useState(""),Se=async H=>{p(je=>({...je,[H]:{...je[H],loading:!0}}));try{const Ae=await(await fe(`${Ma}/nannies/${H}/cotisation`,{credentials:"include"})).json();p(Re=>({...Re,[H]:{paidUntil:Ae.cotisationPaidUntil,loading:!1}})),Ae.lastCotisationAmount&&m(Re=>({...Re,[H]:Number(Ae.lastCotisationAmount)}))}catch{p(je=>({...je,[H]:{paidUntil:null,loading:!1}}))}},Me=async H=>{try{const je=await fe(`${Ma}/nannies/${H}/cotisation-total`,{credentials:"include"});if(!je.ok)return;const Ae=await je.json();Ae&&typeof Ae.totalMonthly=="number"&&v(Re=>({...Re,[H]:Number(Ae.totalMonthly)}))}catch{}},[ke,Je]=b.useState({}),[V,ce]=b.useState(null),[le,ve]=b.useState(null),[Ee,Ie]=b.useState(null),K=async(H,je)=>{p(Ae=>({...Ae,[H]:{...Ae[H],loading:!0}}));try{const Ae=je?JSON.stringify({amount:je}):void 0,ct=await(await fe(`${Ma}/nannies/${H}/cotisation`,{method:"PUT",credentials:"include",headers:Ae?{"Content-Type":"application/json"}:void 0,body:Ae})).json();p(Kt=>({...Kt,[H]:{paidUntil:ct.cotisationPaidUntil,loading:!1}})),Je(Kt=>({...Kt,[H]:{text:s("nanny.payment.success"),type:"success"}})),ct.lastCotisationAmount&&m(Kt=>({...Kt,[H]:Number(ct.lastCotisationAmount)})),setTimeout(()=>Je(Kt=>({...Kt,[H]:null})),3e3),await Se(H)}catch{p(Ae=>({...Ae,[H]:{paidUntil:null,loading:!1}})),Je(Ae=>({...Ae,[H]:{text:s("nanny.payment.error"),type:"error"}})),setTimeout(()=>Je(Ae=>({...Ae,[H]:null})),4e3)}},xe=H=>{const je=f[H]||10;ce({nannyId:H,amount:je})},we=async()=>{if(!V)return;const{nannyId:H,amount:je}=V;ce(null),await K(H,je)},Oe=xt.useCallback(()=>{S(!0);const H=`${Ma}/nannies`,je=Kn(H);if(je){u(je);const Ae={};je.forEach(Re=>{Ae[Re.id]=10,Se(Re.id),Me(Re.id)}),m(Ae),S(!1);return}fe(`${Ma}/nannies`,{credentials:"include"}).then(Ae=>Ae.json()).then(Ae=>{u(Ae);const Re={};Ae.forEach(ct=>{Re[ct.id]=10,Se(ct.id),Me(ct.id)}),m(Re),sa(H,Ae)}).finally(()=>S(!1))},[]);b.useEffect(()=>{Oe(),fe(`${Ma}/assignments`,{credentials:"include"}).then(H=>H.json()).then(N)},[Oe]);const Pe=H=>{k({...j,[H.target.name]:H.target.value})},ut=async H=>{if(H.preventDefault(),se(""),j.password&&j.password!==G){se("Les mots de passe ne correspondent pas");return}try{const je={...j,experience:Number(j.experience)};(je.birthDate===null||je.birthDate==="")&&delete je.birthDate,je.email||delete je.email;const Ae=t&&typeof t.role=="string"&&(t.role.toLowerCase()==="admin"||t.role.toLowerCase().includes("super"));je.password||delete je.password;const Re=R&&t&&String(t.nannyId)===String(R);if(R&&(Ae||Re)&&j.password){if(je.newPassword=j.password,delete je.password,Ae&&!Re){Ie({payload:je,editingId:R}),ve({open:!0,nannyId:R,password:j.password});return}}else!Ae&&!Re&&delete je.newPassword;await Ve(je,R)}catch(je){je instanceof Error?se(je.message):se("Erreur")}},Ve=async(H,je)=>{try{const Ae=await fe(je?`${Ma}/nannies/${je}`:`${Ma}/nannies`,{method:je?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(H)});if(Ae.status===402){try{const Re=await Ae.json().catch(()=>({}));se(Re&&Re.error?String(Re.error):"Limite atteinte pour votre plan.")}catch{se("Limite atteinte pour votre plan.")}return}if(Ae.status===409){try{const Re=await Ae.json().catch(()=>({})),ct=Re&&(Re.message||Re.error)?String(Re.message||Re.error):"Un utilisateur avec cet email existe déjà.";se(ct)}catch{se("Un utilisateur avec cet email existe déjà.")}return}if(!Ae.ok){try{const Re=await Ae.json().catch(()=>({})),ct=Re&&(Re.message||Re.error)?String(Re.message||Re.error):"Erreur lors de la sauvegarde";se(ct)}catch{se("Erreur lors de la sauvegarde")}return}k(Fo),C(""),Y(null),Oe(),je&&(Je(Re=>({...Re,[je]:{text:"Mise à jour effectuée",type:"success"}})),setTimeout(()=>Je(Re=>({...Re,[je]:null})),3e3))}catch(Ae){Ae instanceof Error?se(Ae.message):se("Erreur")}},Be=async()=>{Ee&&(await Ve(Ee.payload,Ee.editingId),Ie(null),ve(null))},Qe=()=>{Ie(null),ve(null)},ie=H=>{k({name:H.name,availability:H.availability,experience:H.experience,specializations:H.specializations||[],status:H.status||"Disponible",contact:H.contact,email:H.email,birthDate:H.birthDate,address:H.address||"",postalCode:H.postalCode||"",city:H.city||"",region:H.region||"",country:H.country||"",password:""}),Y(H.id),Ne(!1),C(""),Q(!1),setTimeout(()=>{z.current&&(z.current.scrollIntoView({behavior:"smooth",block:"start"}),window.scrollBy({top:-12,left:0,behavior:"smooth"}),z.current.querySelector('input[name="name"]')?.focus())},80)},[he,ee]=b.useState(null),me=async()=>{if(he)try{if(!(await fe(`${Ma}/nannies/${he}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Erreur lors de la suppression");ee(null),Oe()}catch(H){H instanceof Error?se(H.message):se("Erreur")}},be=t&&typeof t.role=="string"&&t.role.toLowerCase()==="nanny",_e=t&&typeof t.role=="string"&&(t.role.toLowerCase().includes("admin")||t.role.toLowerCase().includes("super")),Ue=xt.useMemo(()=>{if(!be)return o;const H=t&&(t.nannyId||t.id);if(!H)return[];const je=new Set(w.filter(Re=>Re.nanny&&String(Re.nanny.id)===String(H)).map(Re=>Re.child.id)),Ae=new Set(w.filter(Re=>je.has(Re.child.id)).map(Re=>Re.nanny.id));return Ae.add(H),o.filter(Re=>Ae.has(Re.id))},[o,w,t,be]),dt=Ue.length,Dt=Ue.filter(H=>H.availability==="Disponible").length,vt=Ue.filter(H=>H.availability==="En_congé"||H.availability==="En congé").length,Yt=o.filter(H=>(!Te||H.name.toLowerCase().includes(Te.toLowerCase()))&&(!Ce||Ce==="Disponible"&&H.availability==="Disponible"||Ce==="En congé"&&(H.availability==="En_congé"||H.availability==="En congé")||Ce==="")&&(!Ye||(Ye==="junior"?H.experience<3:H.experience>=3)));return a.jsxs("div",{className:`min-h-screen bg-[#fcfcff] p-2 sm:p-4 ${r?"":"md:pl-64"} w-full`,children:[a.jsxs("div",{className:"max-w-7xl mx-auto w-full px-0 sm:px-2 md:px-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-6 w-full",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:s("page.nannies")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:s("page.nannies.description")})]}),a.jsx("div",{className:"flex gap-2 items-center self-start md:ml-auto",children:t&&typeof t.role=="string"&&(t.role.toLowerCase().includes("admin")||t.role.toLowerCase().includes("super"))&&a.jsx("button",{type:"button",onClick:()=>{k(Fo),Y(null),Ne(!0)},className:`bg-[#0b5566] text-white font-semibold rounded-lg px-5 py-2 text-base shadow hover:bg-[#08323a] transition min-h-[44px] md:h-[60px] ${r?"-translate-x-3":""}`,style:{transform:r?"translateX(-12px)":void 0},children:s("nanny.add")})})]}),a.jsx("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-6 w-full lg:flex-row lg:items-center lg:gap-4 lg:mb-6 lg:w-full md:max-w-md md:w-full",children:a.jsxs("div",{className:"flex gap-2 flex-wrap justify-start w-full",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[a.jsx("div",{className:"text-xs text-gray-400",children:s("stats.total")}),a.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:dt})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[a.jsx("div",{className:"text-xs text-gray-400",children:s("nanny.available_label")}),a.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:Dt})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 md:px-4 py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-auto",children:[a.jsx("div",{className:"text-xs text-gray-400",children:s("nanny.on_leave_label")}),a.jsx("div",{className:"text-base md:text-lg font-bold text-[#0b5566]",children:vt})]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2 md:gap-3 mb-6 w-full filter-responsive",children:[a.jsx("input",{type:"text",value:Te,onChange:H=>De(H.target.value),placeholder:s("nanny.search_placeholder"),className:"border border-gray-200 rounded-lg px-3 py-2 text-gray-700 bg-white shadow-sm text-base w-full md:w-64"}),a.jsxs("select",{value:Ce,onChange:H=>$e(H.target.value),className:"border rounded px-3 py-2 text-xs md:text-base bg-white text-gray-700 shadow-sm w-full md:w-auto",children:[a.jsx("option",{value:"",children:s("nanny.filter.any")}),a.jsx("option",{value:"Disponible",children:s("nanny.filter.disponible")}),a.jsx("option",{value:"En congé",children:s("nanny.filter.en_conge")})]}),a.jsxs("select",{value:Ye,onChange:H=>Xe(H.target.value),className:"border border-gray-200 rounded-lg px-3 py-2 bg-white text-gray-700 shadow-sm text-xs md:text-base w-full md:w-auto",children:[a.jsx("option",{value:"",children:s("nanny.filter.experience_any")}),a.jsx("option",{value:"junior",children:s("nanny.filter.experience_junior")}),a.jsx("option",{value:"senior",children:s("nanny.filter.experience_senior")})]}),a.jsx("div",{className:"flex-1"})]}),(te||R)&&a.jsxs("form",{ref:z,onSubmit:ut,className:"mb-6 bg-white rounded-2xl shadow p-4 md:p-6 grid gap-4 md:grid-cols-3 lg:grid-cols-3",children:[a.jsx("input",{name:"name",value:j.name,onChange:Pe,placeholder:s("nanny.form.name"),required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsxs("select",{name:"availability",value:j.availability,onChange:Pe,required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",children:[a.jsx("option",{value:"Disponible",children:s("nanny.availability.available")}),a.jsx("option",{value:"En_congé",children:s("nanny.availability.on_leave")}),a.jsx("option",{value:"Maladie",children:s("nanny.availability.sick")})]}),a.jsx("div",{id:"nanny-form-address",className:"md:col-span-2",children:a.jsx("label",{className:"block text-left font-medium text-[#08323a]",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"address",value:j.address||"",onChange:H=>k({...j,address:H.target.value}),placeholder:s("parent.form.address"),className:"mt-1 h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",onFocus:()=>M(!0)}),q&&_.length>0&&a.jsx("ul",{className:"absolute z-20 left-0 right-0 bg-white border mt-1 max-h-56 overflow-auto rounded shadow",children:_.map((H,je)=>{const Ae=[H.house_number&&`${H.house_number} ${H.street}`,H.street||H.name,H.postcode,H.state,H.country].filter(Boolean).join(", "),Re=H.name||(H.house_number?`${H.house_number} ${H.street}`:H.street||"");return a.jsxs("li",{role:"button",tabIndex:0,onClick:()=>{I(H)},className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",children:[a.jsx("div",{className:"text-sm font-medium",children:Re}),a.jsx("div",{className:"text-xs text-gray-500",children:Ae})]},je)})})]})})}),a.jsxs("label",{className:"block text-left font-medium",children:[a.jsx("span",{className:"sr-only",children:s("parent.form.postalCode")}),a.jsx("input",{name:"postalCode",value:j.postalCode||"",onChange:H=>k({...j,postalCode:H.target.value}),placeholder:s("parent.form.postalCode"),className:"mt-1 h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"})]}),a.jsx("input",{name:"city",value:j.city||"",onChange:H=>k({...j,city:H.target.value}),placeholder:s("parent.form.city"),className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"region",value:j.region||"",onChange:H=>k({...j,region:H.target.value}),placeholder:s("parent.form.region")||"Région",className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"country",value:j.country||"",onChange:H=>k({...j,country:H.target.value}),placeholder:s("parent.form.country")||"Pays",className:"h-11 w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"experience",type:"number",value:j.experience||"",onChange:Pe,placeholder:s("nanny.form.experience")||"Expérience",required:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"birthDate",type:$,value:$==="date"?j.birthDate||"":j.birthDate?(()=>{try{const H=new Date(String(j.birthDate));if(!isNaN(H.getTime())){const je=String(H.getDate()).padStart(2,"0"),Ae=String(H.getMonth()+1).padStart(2,"0"),Re=String(H.getFullYear());return`${je}/${Ae}/${Re}`}}catch{}return String(j.birthDate)})():"",onChange:Pe,placeholder:s("nanny.form.birthDate")||"Date de naissance",className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]",onFocus:()=>E("date"),onBlur:()=>E("text"),readOnly:$==="text"}),a.jsx("input",{name:"specializations",value:j.specializations?.join(", "),onChange:H=>k({...j,specializations:H.target.value.split(",").map(je=>je.trim())}),placeholder:s("nanny.form.specializations"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base md:col-span-2 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"contact",type:"tel",value:j.contact||"",onChange:Pe,placeholder:s("nanny.form.contact"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("input",{name:"email",type:"email",value:j.email||"",onChange:Pe,placeholder:s("nanny.form.email"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsxs("div",{className:"relative md:col-span-1",children:[a.jsx("input",{name:"password",autoComplete:"new-password",type:P?"text":"password",value:j.password||"",onChange:Pe,placeholder:s("nanny.form.password"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base pr-10 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>Q(H=>!H),children:P?"🙈":"👁️"})]}),a.jsxs("div",{className:"relative md:col-span-1",children:[a.jsx("input",{name:"confirmPassword",autoComplete:"new-password",type:P?"text":"password",value:G,onChange:H=>C(H.target.value),placeholder:s("nanny.form.confirmPassword"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-base pr-10 focus:outline-none focus:ring-2 focus:ring-[#a9ddf2]"}),a.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>Q(H=>!H),children:P?"🙈":"👁️"})]}),a.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded hover:bg-[#08323a] transition",children:s(R?"global.save":"global.add")}),a.jsx("button",{type:"button",onClick:()=>{k(Fo),C(""),Y(null),Ne(!1)},className:"bg-gray-300 px-4 py-2 rounded",children:s("global.cancel")})]}),J&&a.jsx("div",{className:"text-red-600 md:col-span-2",children:J})]}),T?a.jsx("div",{children:"Chargement..."}):a.jsx("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 w-full children-responsive-grid",children:Yt.filter(H=>Ue.some(je=>String(je.id)===String(H.id))).map((H,je)=>{const Ae=d[H.id],Re=Ae&&Ae.paidUntil?Math.max(0,Math.ceil((new Date(Ae.paidUntil).getTime()-Date.now())/(1e3*60*60*24))):0,ct=["bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-pink-50","bg-orange-50"],Kt=ct[je%ct.length],Dn=he===H.id,en=new Date().toISOString().split("T")[0],Jn=w.filter(Wn=>Wn.nanny&&Wn.nanny.id===H.id&&Wn.date.split("T")[0]===en).length,ui=V?.nannyId===H.id,Fs=String(H.availability||"").toLowerCase(),Tl=H.availability==="En_congé"||H.availability==="En congé"?s("nanny.availability.on_leave"):H.availability==="Disponible"?s("nanny.availability.available"):s("nanny.availability.sick");let qa="px-2 py-1 rounded-full text-xs font-medium ";return Fs.includes("dispon")?qa+="bg-green-100 text-green-800 border border-green-200":Fs.includes("malad")||Fs.includes("cong")?qa+="bg-red-100 text-red-700 border border-red-200":qa+="bg-white border border-gray-200 text-gray-600",a.jsx("div",{className:`rounded-2xl shadow ${Kt} relative flex flex-col min-h-[440px] h-full transition-transform duration-500 perspective-1000 overflow-hidden`,style:{height:"100%",perspective:"1000px"},children:a.jsxs("div",{className:`w-full h-full transition-transform duration-500 ${Dn?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",position:"relative",width:"100%",height:"100%"},children:[a.jsxs("div",{className:`absolute inset-0 w-full h-full p-3 sm:p-4 md:p-6 flex flex-col items-center ${Dn?"opacity-0 pointer-events-none":"opacity-100"} bg-transparent`,style:{backfaceVisibility:"hidden"},children:[a.jsxs("div",{className:"w-full pt-2 sm:pt-3 text-center",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("h3",{className:"font-semibold text-lg sm:text-xl text-[#08323a] truncate max-w-[220px] -mt-1 -translate-y-0.5",title:H.name,style:{transform:"translateY(-2px)"},children:H.name})}),a.jsxs("div",{className:"mt-2 flex items-center justify-center gap-4 text-sm text-gray-600",children:[a.jsx("span",{className:qa,children:Tl}),a.jsx("span",{className:"px-2 py-1 rounded-full bg-white border border-gray-200 text-xs font-medium",children:`${H.experience} ${H.experience===1?"an":"ans"} exp`}),H.birthDate?a.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-green-100 text-green-700 whitespace-nowrap",title:s("label.birthDate"),children:["🎂 ",new Date(H.birthDate).toLocaleDateString("fr-FR")]}):a.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-gray-100 text-gray-600 whitespace-nowrap",title:s("label.birthDate"),children:["🎂 ",s("children.birthDate.undefined")]})]})]}),a.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:gap-3 text-xs sm:text-sm text-gray-700 mb-3 sm:mb-4",children:[a.jsxs("span",{className:"flex items-start gap-2 w-full justify-start",children:[a.jsx("span",{"aria-hidden":!0,className:`inline-block ${H.address?"":"text-gray-300"}`,children:"📍"}),a.jsxs("div",{className:"leading-snug",children:[H.address?a.jsx("div",{className:"truncate",children:H.address}):a.jsx("div",{className:"text-gray-300",children:"—"}),H.postalCode||H.city?a.jsx("div",{className:"truncate",children:[H.postalCode,H.city].filter(Boolean).join(" ")}):a.jsx("div",{className:"text-gray-300",children:"—"})]})]}),a.jsxs("span",{className:"flex items-center gap-2 w-full justify-start",children:[a.jsx("span",{className:"w-5 text-center text-sm sm:text-base",role:"img","aria-label":"Email",children:"✉️"}),H.email?a.jsx("a",{href:`mailto:${H.email}`,className:"text-blue-700 underline text-xs sm:text-sm break-words max-w-full sm:max-w-none","aria-label":`Envoyer un mail à ${H.name}`,children:H.email}):a.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"—"})]}),a.jsxs("span",{className:"flex items-center gap-2 w-full justify-start",children:[a.jsx("span",{"aria-hidden":!0,className:`inline-block ${H.contact?"":"text-gray-300"}`,children:"📞"}),H.contact?a.jsx("a",{href:`tel:${H.contact}`,className:"text-blue-700 underline text-xs sm:text-sm break-words max-w-full sm:max-w-none","aria-label":`Appeler ${H.name}`,children:H.contact}):a.jsx("span",{className:"text-gray-400 text-xs sm:text-sm",children:"—"})]})]}),H.specializations&&H.specializations.length>0&&a.jsx("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 mb-2 w-full px-2 sm:px-4",children:H.specializations.map((Wn,Gs)=>a.jsx("span",{className:"bg-purple-100 text-purple-700 px-1 sm:px-2 py-1 rounded-full text-xs font-semibold border border-purple-200 truncate max-w-[80px] sm:max-w-none",children:Wn},Gs))}),a.jsx("div",{className:"text-xs sm:text-sm text-gray-700 mb-2 w-full flex flex-col items-center",children:a.jsxs("span",{className:"block font-medium mb-1 text-center",children:[s("nanny.assignments_today"),a.jsx("span",{className:"inline-block bg-white text-gray-700 px-2 py-0.5 rounded-full text-xs font-semibold border border-gray-200 ml-1",children:Jn})]})}),a.jsxs("div",{className:"flex flex-col gap-2 mt-auto mb-4 w-full min-w-0 items-center",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xs font-semibold text-gray-700",children:s("nanny.cotisation.label")}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[Ae?.loading?a.jsx("span",{className:"text-sm text-gray-500",children:s("loading")}):Re>0?a.jsxs("span",{className:"text-base font-bold text-[#08323a]",children:[f[H.id]??10,"€"]}):_e?a.jsx("input",{type:"number",className:"w-20 px-2 py-1 border rounded text-sm",value:f[H.id]??10,onChange:Wn=>m(Gs=>({...Gs,[H.id]:Number(Wn.target.value)}))}):a.jsx("span",{className:"text-base font-bold text-[#08323a]",children:"10€"}),Ae?.loading?a.jsx("span",{className:"text-gray-400 text-xl",children:"…"}):Re>0?a.jsx("span",{className:"text-[#0b5566] text-xl",children:"✔️"}):a.jsx("span",{className:"text-red-500 text-xl",children:"❌"})]}),Re<=0&&_e&&a.jsx("button",{className:"ml-2 text-[#0b5566] text-xs font-semibold px-3 py-1 rounded bg-[#a9ddf2] hover:bg-[#f7f4d7] transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:Ae?.loading||ui,onClick:()=>xe(H.id),children:Ae?.loading?s("nanny.payment.loading"):s(ui?"nanny.payment.confirming":"nanny.payment.pay")})]}),a.jsx("span",{className:"text-xs text-gray-500 text-center mt-1",children:Ae?Ae.loading?s("loading"):Ae.paidUntil&&Re>0?s("nanny.cotisation.days_remaining",{n:String(Re)}):s("nanny.cotisation.renew"):"—"}),a.jsxs("div",{className:"text-xs text-gray-600 text-center mt-2",children:[a.jsxs("span",{className:"block font-medium",children:[s("nanny.cotisation.total_parents")||"Cotisation totale mensuelle des parents"," "]}),a.jsxs("span",{className:"text-base font-bold text-[#08323a]",children:[x[H.id]??0,"€"]})]}),Re<=0&&ke[H.id]&&a.jsx("div",{className:`mt-1 text-xs ${ke[H.id]?.type==="success"?"text-[#0b5566]":"text-red-600"}`,children:ke[H.id]?.text})]}),a.jsx("div",{className:"flex items-center gap-2 mt-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>ye(H),className:"bg-white border border-gray-200 text-gray-500 hover:text-[#08323a] rounded-full p-2 shadow-sm",title:s("nanny.planning.button"),"aria-label":s("nanny.planning.button"),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-current",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),a.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),a.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),a.jsx("button",{onClick:()=>ie(H),className:"bg-white border border-gray-200 text-gray-500 hover:text-[#08323a] rounded-full p-2 shadow-sm",title:s("children.action.edit"),children:a.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z"})})}),a.jsx("button",{onClick:()=>ee(H.id),className:"bg-white border border-gray-200 text-gray-500 hover:text-red-500 rounded-full p-2 shadow-sm",title:s("children.action.delete"),children:a.jsx("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})})})]})})]})]}),a.jsxs("div",{className:`absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-white rounded-2xl shadow-xl p-8 ${Dn?"opacity-100":"opacity-0 pointer-events-none"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[a.jsx("div",{className:"text-red-500 text-4xl mb-2",children:"🗑️"}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-900 text-center",children:s("modal.delete.title")}),a.jsx("div",{className:"text-gray-500 mb-6 text-center",children:s("nanny.delete.confirm_body")}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:()=>ee(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition",children:s("modal.cancel")}),a.jsx("button",{onClick:me,className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition shadow",children:s("children.action.delete")})]})]})]})},H.id)})})]}),V&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:s("nanny.payment.confirm_title")}),a.jsx("p",{className:"mb-4",children:s("nanny.payment.confirm_body",{amount:String(V.amount)})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>ce(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:s("modal.cancel")}),a.jsx("button",{onClick:we,className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2",children:s("common.confirm")})]})]})}),ue&&a.jsx(Y1,{nanny:ue,onClose:()=>ye(null)}),le&&le.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:s("parent.reset.confirm_title")}),a.jsx("p",{className:"mb-4",children:s("parent.reset.confirm_body")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Qe,className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:s("modal.cancel")}),a.jsx("button",{onClick:Be,className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2",children:s("parent.reset.confirm")})]})]})})]})}var zv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kx=xt.createContext&&xt.createContext(zv),J1=["attr","size","title"];function W1(s,t){if(s==null)return{};var r=X1(s,t),l,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(o=0;o<u.length;o++)l=u[o],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(s,l)&&(r[l]=s[l])}return r}function X1(s,t){if(s==null)return{};var r={};for(var l in s)if(Object.prototype.hasOwnProperty.call(s,l)){if(t.indexOf(l)>=0)continue;r[l]=s[l]}return r}function cc(){return cc=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},cc.apply(this,arguments)}function Jx(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),r.push.apply(r,l)}return r}function uc(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jx(Object(r),!0).forEach(function(l){Q1(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Jx(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}function Q1(s,t,r){return t=Z1(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Z1(s){var t=eN(s,"string");return typeof t=="symbol"?t:t+""}function eN(s,t){if(typeof s!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Pv(s){return s&&s.map((t,r)=>xt.createElement(t.tag,uc({key:r},t.attr),Pv(t.child)))}function Gt(s){return t=>xt.createElement(tN,cc({attr:uc({},s.attr)},t),Pv(s.child))}function tN(s){var t=r=>{var{attr:l,size:o,title:u}=s,d=W1(s,J1),p=o||r.size||"1em",f;return r.className&&(f=r.className),s.className&&(f=(f?f+" ":"")+s.className),xt.createElement("svg",cc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,l,d,{className:f,style:uc(uc({color:s.color||r.color},r.style),s.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),u&&xt.createElement("title",null,u),s.children)};return Kx!==void 0?xt.createElement(Kx.Consumer,null,r=>t(r)):t(zv)}function Wr(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"},child:[]}]})(s)}function Xr(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},child:[]}]})(s)}function Uv(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},child:[]}]})(s)}function k6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"},child:[]}]})(s)}function A6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(s)}function Qr(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},child:[]}]})(s)}function Zr(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(s)}function Gn(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},child:[]}]})(s)}function O6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},child:[]}]})(s)}function R6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},child:[]}]})(s)}function uf(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},child:[]}]})(s)}function df(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},child:[]}]})(s)}function dc(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},child:[]}]})(s)}function nN(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"},child:[]}]})(s)}function D6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},child:[]}]})(s)}function M6(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},child:[]}]})(s)}function Yn(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},child:[]}]})(s)}function ei(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},child:[]}]})(s)}function aN(s){return Gt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"},child:[]}]})(s)}function fc(s){return Gt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(s)}function sN(s,t){return s&&s.role==="parent"?[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children_my"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]:s&&s.nannyId?[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/nannies",label:t("nav.nannies"),icon:a.jsx(dc,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/assistant",label:t("nav.assistant"),icon:a.jsx(fc,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]:[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/nannies",label:t("nav.nannies"),icon:a.jsx(dc,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/assistant",label:t("nav.assistant"),icon:a.jsx(fc,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},...s&&typeof s.role=="string"&&s.role.toLowerCase().includes("super")?[{to:"/admin/reviews",label:t("nav.reviews"),icon:a.jsx(Uv,{className:"w-5 h-5 mr-3"})}]:[],{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]}function rN({showOnMd:s=!1,onOpen:t}){const[r,l]=b.useState(!1),{t:o}=Rt();return b.useEffect(()=>{try{if(typeof window>"u"){l(!0);return}const u=window.matchMedia("(max-width: 767px)"),d=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),p=()=>{try{const m=typeof window<"u"&&window.matchMedia&&window.matchMedia("(orientation: landscape)").matches,x=typeof window<"u"?window.innerHeight:1/0;return m&&x<=700}catch{return d.matches}},f=()=>l(u.matches||s&&p());return f(),typeof u.addEventListener=="function"?u.addEventListener("change",f):u.addListener(f),typeof d.addEventListener=="function"?d.addEventListener("change",f):d.addListener(f),window.addEventListener("resize",f),window.addEventListener("orientationchange",f),()=>{try{typeof u.removeEventListener=="function"?u.removeEventListener("change",f):u.removeListener(f)}catch{}try{typeof d.removeEventListener=="function"?d.removeEventListener("change",f):d.removeListener(f)}catch{}try{window.removeEventListener("resize",f)}catch{}try{window.removeEventListener("orientationchange",f)}catch{}}}catch{l(!0)}},[s]),r?a.jsx("button",{className:"fixed top-4 right-4 z-60 bg-white rounded-full p-2 shadow-lg border border-gray-200",onClick:t,"aria-label":o("menu.open"),children:a.jsx(nN,{className:"w-7 h-7 text-gray-700"})}):null}function iN(){const[s,t]=b.useState(!1),r=pa(),{user:l}=fn(),{t:o}=Rt(),[u,d]=b.useState(null),[p,f]=b.useState(0),m=b.useRef(0);b.useEffect(()=>{let v=!0;try{if(typeof window<"u"&&window.matchMedia&&window.matchMedia("(min-width: 768px)").matches)return}catch{}async function w(){try{if(!l)return f(0);const S=await fe("/api/notifications/unread-count",{credentials:"include"});if(!v)return;if(!S.ok)return f(0);const j=await S.json();f(Number(j.unread)||0)}catch{v&&f(0)}}w();const N=setInterval(w,3e4);function T(){w()}return typeof window<"u"&&typeof window.addEventListener=="function"&&window.addEventListener("notifications:changed",T),()=>{v=!1,clearInterval(N),typeof window<"u"&&typeof window.removeEventListener=="function"&&window.removeEventListener("notifications:changed",T)}},[l]),b.useEffect(()=>{try{s?document.body.style.overflow="hidden":document.body.style.overflow=""}catch{}return()=>{try{document.body.style.overflow=""}catch{}}},[s]),b.useEffect(()=>{let v=!0;async function w(){try{const N=l?.centerId;if(N){const T=Date.now();if(m.current>T)return;const S=`/api/centers/${N}`,j=Kn(S);if(j){d(j.name||null);return}const k=await fetch(`/centers/${N}`,{credentials:"include"});if(!v)return;if(k.status===429){const _=k.headers.get("Retry-After"),O=_?parseInt(_,10):NaN,q=Number.isNaN(O)?1e4:O*1e3;m.current=Date.now()+q;return}if(k.ok){const _=await k.json();d(_.name||null),sa(S,{name:_.name||null},ai);return}}}catch{}v&&d(null)}return w(),()=>{v=!1}},[l]);function x(v){if(!v)return"Frimousse";const w=v.trim();return w.length===0?"Frimousse":w.charAt(0).toUpperCase()+w.slice(1)}return a.jsxs(a.Fragment,{children:[!s&&a.jsx(rN,{showOnMd:!0,onOpen:()=>t(!0)}),s&&a.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"flex items-center gap-3 px-6 pt-8 pb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-white flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("span",{className:"font-extrabold text-xl text-gray-900",children:x(u)}),a.jsx("button",{className:"ml-auto bg-gray-100 rounded-full p-2 border border-gray-200",onClick:()=>t(!1),"aria-label":o("menu.close"),children:a.jsx(aN,{className:"w-6 h-6 text-gray-700"})})]}),a.jsx("nav",{className:"flex-1 px-2 overflow-y-auto",style:{maxHeight:"calc(100vh - 160px)",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:a.jsx("ul",{className:"space-y-1",style:{paddingBottom:"96px"},children:sN(l,o).map(v=>a.jsx("li",{children:a.jsxs(kc,{to:v.to,className:`flex items-center px-4 py-3 rounded-lg font-medium transition text-lg ${r.pathname===v.to?"bg-blue-50 text-blue-700 border border-blue-100":"text-gray-500 hover:bg-gray-50"}`,onClick:()=>t(!1),children:[v.icon,a.jsx("span",{className:"flex-1",children:v.label}),v.to==="/notifications"&&p>0?a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-600 text-white",children:p}):null]})},v.to))})}),a.jsxs("div",{className:"mt-auto flex items-center gap-3 px-6 py-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-base font-bold text-blue-700 border border-blue-100",children:l?(l.name||"U").split(" ").map(v=>v[0]).join("").toUpperCase().slice(0,2):"U"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 leading-tight",children:l?.name||"Utilisateur"}),a.jsx("div",{className:"text-xs text-gray-400 capitalize",children:l?.role?l.role.replace("_"," "):"Utilisateur"})]})]})]})]})}const Iv=b.createContext(null);function lN(){const s=b.useContext(Iv);if(!s)throw new Error("useNotificationsContext must be used within NotificationsProvider");return s}const oN="frimousse-rate-limit",Bv="__frimousse_rate_limit__";let qs=null;try{typeof window<"u"&&"BroadcastChannel"in window&&(qs=new BroadcastChannel(oN))}catch{qs=null}function cN(s){const t=JSON.stringify(s);if(qs)try{qs.postMessage(s)}catch{}else if(typeof window<"u"&&window.localStorage)try{window.localStorage.setItem(Bv,t)}catch{}}function uN(s){if(qs){const t=r=>s(r.data);return qs.addEventListener("message",t),()=>{qs?.removeEventListener("message",t)}}if(typeof window<"u"){const t=r=>{if(!(!r.key||r.key!==Bv))try{const l=JSON.parse(String(r.newValue||"null"));l&&l.key&&s(l)}catch{}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}return()=>{}}function hh(s,t){cN({key:s,until:t})}function qv(s){return uN(s)}function dN(s){const[t,r]=b.useState(null),l=b.useRef(0),o=b.useRef(0);b.useEffect(()=>{const d=qv(p=>{!p||!p.key||s&&p.key===`/api/centers/${s}`&&typeof p.until=="number"&&(l.current=Math.max(l.current,p.until||0))});return()=>d()},[s]);const u=b.useCallback(async()=>{if(!s){r(null);return}try{if(l.current>Date.now())return;const d=`/api/centers/${s}`,p=Kn(d);if(p){r({name:p.name||null});return}const f=await fetch(`/centers/${s}`,{credentials:"include"});if(f.status===429){o.current=Math.min(3,o.current+1);const x=Math.min(1e4*Math.pow(2,o.current-1),4e4),v=Date.now()+x;l.current=Math.max(l.current,v),hh(`/api/centers/${s}`,l.current);return}if(!f.ok){r(null);return}o.current=0;const m=await f.json();r({name:m.name||null}),sa(d,{name:m.name||null},6e4)}catch{r(null)}},[s]);return b.useEffect(()=>{u()},[u]),{center:t,refresh:u}}function fN(s,t){return s&&s.role==="parent"?[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children_my"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]:s&&s.nannyId?[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/nannies",label:t("nav.nannies"),icon:a.jsx(dc,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/assistant",label:t("nav.assistant"),icon:a.jsx(fc,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]:[{to:"/dashboard",label:t("nav.dashboard"),icon:a.jsx(ei,{className:"w-5 h-5 mr-3"})},{to:"/feed",label:t("nav.feed"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/notifications",label:t("nav.notifications"),icon:a.jsx(Wr,{className:"w-5 h-5 mr-3"})},{to:"/children",label:t("nav.children"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/parent",label:t("nav.parents"),icon:a.jsx(Yn,{className:"w-5 h-5 mr-3"})},{to:"/nannies",label:t("nav.nannies"),icon:a.jsx(dc,{className:"w-5 h-5 mr-3"})},{to:"/activites",label:t("nav.activities"),icon:a.jsx(Xr,{className:"w-5 h-5 mr-3"})},{to:"/reports",label:t("nav.reports"),icon:a.jsx(Gn,{className:"w-5 h-5 mr-3"})},{to:"/assistant",label:t("nav.assistant"),icon:a.jsx(fc,{className:"w-5 h-5 mr-3"})},{to:"/payment-history",label:t("nav.payments"),icon:a.jsx(Zr,{className:"w-5 h-5 mr-3"})},...s&&typeof s.role=="string"&&s.role.toLowerCase().includes("super")?[{to:"/admin/reviews",label:"Avis",icon:a.jsx(Uv,{className:"w-5 h-5 mr-3"})}]:[],{to:"/settings",label:t("nav.settings"),icon:a.jsx(Qr,{className:"w-5 h-5 mr-3"})}]}function Ac(){const s=pa(),{user:t}=fn(),{t:r}=Rt(),[l,o]=b.useState(!1),{unreadCount:u,unreadReviews:d}=lN(),p=t&&t.centerId,{center:f}=dN(p??null),[m,x]=b.useState(null);b.useEffect(()=>{x(f?.name??null)},[f]),b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const S=window.matchMedia("(min-width: 768px) and (max-height: 600px)"),j=()=>o(!!S.matches);j(),typeof S.addEventListener=="function"?S.addEventListener("change",j):typeof S.addListener=="function"&&S.addListener(j);const k=()=>j();return window.addEventListener("resize",k),window.addEventListener("orientationchange",k),()=>{typeof S.removeEventListener=="function"?S.removeEventListener("change",j):typeof S.removeListener=="function"&&S.removeListener(j),window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k)}},[]);function v(S){if(!S)return"Frimousse";const j=S.trim();return j.length===0?"Frimousse":j.charAt(0).toUpperCase()+j.slice(1)}let w="Utilisateur",N="Utilisateur",T="UT";return t&&t.name&&(w=t.name,T=t.name.split(" ").filter(Boolean).map(S=>S[0]).join("").toUpperCase().slice(0,2)),t&&t.role&&(N=t.role),a.jsxs(a.Fragment,{children:[a.jsx(iN,{}),!l&&a.jsxs("aside",{className:"hidden md:flex fixed top-0 left-0 h-screen w-64 bg-white shadow-lg flex-col p-0 border-r border-gray-100 z-30",children:[a.jsxs("div",{className:"flex items-center gap-3 px-6 pt-8 pb-6",children:[a.jsx("div",{className:"w-20 h-16 rounded-full overflow-hidden bg-white flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("span",{className:"font-extrabold text-xl text-gray-900",children:v(m)})]}),a.jsx("nav",{className:"flex-1 px-2",children:a.jsx("ul",{className:"space-y-1",children:fN(t,r).map(S=>a.jsx("li",{children:a.jsxs(kc,{to:S.to,className:`flex items-center px-4 py-2 rounded-lg font-medium transition text-base ${s.pathname===S.to?"bg-blue-50 text-blue-700 border border-blue-100":"text-gray-500 hover:bg-gray-50"}`,children:[S.icon,a.jsx("span",{className:"flex-1",children:S.label}),S.to==="/notifications"&&u>0?a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-semibold bg-red-600 text-white",children:u}):null,S.to==="/admin/reviews"&&typeof d=="number"&&d>0?a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-semibold bg-blue-600 text-white",children:d}):null]})},S.to))})}),a.jsxs("div",{className:"mt-auto flex items-center gap-3 px-6 py-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-base font-bold text-blue-700 border border-blue-100",children:T}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 leading-tight",children:w}),a.jsx("div",{className:"text-xs text-gray-400",children:N})]})]})]})]})}const Wx="https://api.monsite.fr",ff=new Map;function hN(s){const[t,r]=b.useState([]),[l,o]=b.useState(!1);return b.useEffect(()=>{if(!s)return;let u=!1;return(async()=>{o(!0);try{let d=ff.get(s);if(!d){const f=Wx?`${Wx}/centers/${s}/birthdays/today`:`/api/centers/${s}/birthdays/today`;d=(async()=>{const m=await fetch(f,{credentials:"include"});if(!m.ok)return{birthdays:[]};const x=await m.json();return{birthdays:Array.isArray(x.birthdays)?x.birthdays:[]}})(),ff.set(s,d)}const p=await d;u||r(p.birthdays??[])}catch{u||r([])}finally{u||o(!1),ff.delete(s)}})(),()=>{u=!0}},[s]),{birthdays:t,loading:l}}function mN({items:s,open:t,onClose:r,centerId:l}){const o=b.useRef(null),u=f=>{if(!f)return null;try{const m=new Date(f);if(Number.isNaN(m.getTime()))return null;const x=new Date;let v=x.getFullYear()-m.getFullYear();const w=x.getMonth()-m.getMonth();return(w<0||w===0&&x.getDate()<m.getDate())&&v--,v}catch{return null}},d=b.useRef(!1),p=b.useRef(null);return b.useEffect(()=>{if(t){if(d.current=!0,(async()=>{try{let f=null;try{f=await Pa(()=>import("./confetti.module-DE9NzQ6R.js"),[])}catch{try{f=await Pa(()=>import("./confetti.browser-DHLUlKfE.js").then(w=>w.c),[])}catch{f=null}}if(!f||!d.current)return;const m=f&&typeof f=="function"?f:f&&f.default||f;let x=null;try{x=m(void 0,{resize:!0,useWorker:!1})}catch(w){console.error("[BirthdayModal] confetti.create failed:",w)}if(!x||typeof x!="function")return;try{x({particleCount:140,spread:160,origin:{y:.6}})}catch(w){console.error("[BirthdayModal] confetti first-fire failed:",w)}const v=()=>{if(d.current){try{x({particleCount:40,spread:120,origin:{x:Math.random(),y:.6}}),console.debug("[BirthdayModal] confetti tick")}catch(w){console.error("[BirthdayModal] confetti tick error:",w)}d.current&&(p.current=window.setTimeout(v,1200))}};p.current=window.setTimeout(v,1200)}catch(f){console.error("[BirthdayModal] failed to load canvas-confetti:",f)}})(),l){const f=`birthday_seen:${l}:${new Date().toISOString().slice(0,10)}`;try{localStorage.setItem(f,"1")}catch{}}return()=>{d.current=!1,p.current!==null&&(clearTimeout(p.current),p.current=null)}}},[t,l]),b.useEffect(()=>{if(!t)return;document.getElementById("birthday-close-btn")?.focus()},[t]),t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6",children:[a.jsx("canvas",{ref:o,className:"pointer-events-none fixed inset-0"}),a.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":"Célébration anniversaire",className:"w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"h-64 bg-gradient-to-br from-[#f6a21a] to-[#ffd98a] flex flex-col items-center justify-center text-white",children:[a.jsx("div",{className:"text-5xl",children:"🎉"}),a.jsx("h1",{className:"mt-3 text-4xl font-extrabold tracking-tight uppercase text-center",children:"Joyeux Anniversaire"})]}),a.jsxs("div",{className:"bg-white p-6",children:[s&&s.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:s.map(f=>{const m=(f.name||"U").split(" ").map(v=>v[0]).slice(0,2).join(""),x=u(f.dob);return a.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border border-gray-100 shadow-sm bg-white",children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg,#ff6aa1,#ff9b4a)"},children:a.jsx("span",{className:"text-white font-bold text-lg",children:m})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-lg font-extrabold text-[#08323a] truncate",children:f.name}),a.jsxs("div",{className:"text-sm text-gray-500 truncate",children:["fête ",x!==null?`ses ${x} ans`:"son anniversaire"," aujourd'hui !"]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"px-3 py-2 rounded-full bg-gradient-to-br from-[#e68d17] to-[#f7b65d] text-white font-semibold shadow",children:x??"-"})})]},f.id)})}):a.jsx("div",{className:"text-center text-gray-500",children:"Aucun enfant trouvé pour aujourd'hui."}),a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"rounded-xl border border-[#f3cda6] bg-gradient-to-br from-[#fff4ed] to-[#fff9f6] p-5 shadow-sm",children:[a.jsx("div",{className:"text-center text-[#b45309] font-semibold mb-2",children:"♡ Message spécial ♡"}),a.jsxs("div",{className:"text-sm text-[#6b4b3a]",children:["Nous souhaitons à ",s&&s.length===1?s[0].name:"tous les enfants"," une merveilleuse journée remplie de joie, de rires et de beaux souvenirs ! Que cette nouvelle année vous apporte plein de découvertes et de bonheurs."]})]})}),a.jsx("div",{className:"mt-6 pb-6 flex justify-center",children:a.jsx("button",{id:"birthday-close-btn",type:"button",onClick:r,className:"px-6 py-2 bg-[#08323a] text-white rounded-lg font-semibold shadow hover:bg-[#0b3b41] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#f6a21a]",children:"Fermer"})})]})]})]}):null}function pN(){const[s,t]=b.useState(!0),[r,l]=b.useState(!1),o=Ot(),u=A2(),[d,p]=b.useState(()=>{try{return localStorage.getItem("currentCenterId")??void 0}catch{return}}),{birthdays:f}=hN(r?d:void 0),[m,x]=b.useState(!1);return b.useEffect(()=>{if(!f||f.length===0||!d)return;const v=`birthday_seen:${d}:${new Date().toISOString().slice(0,10)}`;let w=!1;try{w=!!localStorage.getItem(v)}catch{w=!1}w||x(!0)},[f,d,x]),b.useEffect(()=>{let v=!0;return(async()=>{try{const w=await fe("/api/user/me",{credentials:"include"});if(!v)return;if(!w.ok){l(!1);return}const N=await w.json();l(!0);try{if(N&&N.centerId){try{localStorage.setItem("currentCenterId",String(N.centerId))}catch{}p(String(N.centerId))}}catch{}}catch{l(!1)}finally{v&&t(!1)}})(),()=>{v=!1}},[]),b.useEffect(()=>{if(!s&&!r&&o("/login",{replace:!0}),!s&&r)try{localStorage.setItem("welcomeShown","1")}catch{}},[s,r,o]),s?a.jsx("div",{className:"flex items-center justify-center h-screen",children:"Chargement..."}):r?a.jsxs("div",{className:"flex min-h-screen",children:[a.jsx(Ac,{}),a.jsx("main",{className:"flex-1 bg-gray-50 p-6 max-w-full overflow-x-hidden box-border",children:u}),a.jsx(mN,{items:f,open:m,onClose:()=>x(!1),centerId:d})]}):null}function gN(){const[s,t]=b.useState(null),[r,l]=b.useState(!0),[o,u]=b.useState(!1),[d,p]=b.useState([]);return b.useEffect(()=>{fe("api/me").then(f=>f.json()).then(async f=>{if(f.role==="nanny"&&f.nannyId){t(f.nannyId);return}if(f.role==="admin"||f.role==="super-admin"){u(!0);try{const m=await fe("api/nannies");if(m.ok){const x=await m.json(),v=Array.isArray(x)?x.map(w=>({id:String(w.id??""),name:String(w.name??"")})):[];p(v),v.length>0&&t(v[0].id)}}catch(m){console.error("Failed to load nannies for admin",m)}}}).finally(()=>l(!1))},[]),r?a.jsx("div",{className:"p-8 text-center text-[#0b5566]",children:"Chargement..."}):s?a.jsx("div",{className:"min-h-screen bg-[#f7f4d7] flex flex-col md:flex-row",children:a.jsx("main",{className:"flex-1 flex flex-col items-center py-4 px-2 md:py-8 md:px-2 md:ml-64",children:a.jsx("div",{className:"w-full max-w-5xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 md:p-10 min-h-[600px] md:min-h-[700px] flex flex-col",style:{border:"1px solid #fcdcdf"},children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6 text-center text-[#0b5566]",children:"Mon planning"}),o&&d.length>0&&a.jsxs("div",{className:"mb-4 flex justify-center",children:[a.jsx("label",{className:"mr-2 self-center",children:"Voir le planning de :"}),a.jsx("select",{value:s||"",onChange:f=>t(f.target.value),className:"border rounded px-2 py-1",children:d.map(f=>a.jsx("option",{value:f.id,children:f.name},f.id))})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:a.jsx("div",{className:"flex-1 p-4 rounded-lg",style:{background:"#a9ddf2"},children:a.jsx($v,{nannyId:s})})})]})})})}):o?a.jsx("div",{className:"p-8 text-center text-red-500",children:"Aucune nounou trouvée pour votre structure."}):a.jsx("div",{className:"p-8 text-center text-red-500",children:"Accès réservé aux nounous."})}function Hs(s){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(s)}function xN(s,t){if(Hs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,t);if(Hs(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function Hv(s){var t=xN(s,"string");return Hs(t)=="symbol"?t:t+""}function dl(s,t,r){return(t=Hv(t))in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function Xx(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),r.push.apply(r,l)}return r}function Ge(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xx(Object(r),!0).forEach(function(l){dl(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Xx(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}function bN(s){if(Array.isArray(s))return s}function vN(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var l,o,u,d,p=[],f=!0,m=!1;try{if(u=(r=r.call(s)).next,t===0){if(Object(r)!==r)return;f=!1}else for(;!(f=(l=u.call(r)).done)&&(p.push(l.value),p.length!==t);f=!0);}catch(x){m=!0,o=x}finally{try{if(!f&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(m)throw o}}return p}}function If(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,l=Array(t);r<t;r++)l[r]=s[r];return l}function Vv(s,t){if(s){if(typeof s=="string")return If(s,t);var r={}.toString.call(s).slice(8,-1);return r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set"?Array.from(s):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?If(s,t):void 0}}function yN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function za(s,t){return bN(s)||vN(s,t)||Vv(s,t)||yN()}function wN(s,t){if(s==null)return{};var r={};for(var l in s)if({}.hasOwnProperty.call(s,l)){if(t.indexOf(l)!==-1)continue;r[l]=s[l]}return r}function Ba(s,t){if(s==null)return{};var r,l,o=wN(s,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(l=0;l<u.length;l++)r=u[l],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(s,r)&&(o[r]=s[r])}return o}var jN=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function NN(s){var t=s.defaultInputValue,r=t===void 0?"":t,l=s.defaultMenuIsOpen,o=l===void 0?!1:l,u=s.defaultValue,d=u===void 0?null:u,p=s.inputValue,f=s.menuIsOpen,m=s.onChange,x=s.onInputChange,v=s.onMenuClose,w=s.onMenuOpen,N=s.value,T=Ba(s,jN),S=b.useState(p!==void 0?p:r),j=za(S,2),k=j[0],_=j[1],O=b.useState(f!==void 0?f:o),q=za(O,2),M=q[0],L=q[1],U=b.useState(N!==void 0?N:d),W=za(U,2),Z=W[0],I=W[1],P=b.useCallback(function(Y,te){typeof m=="function"&&m(Y,te),I(Y)},[m]),Q=b.useCallback(function(Y,te){var Ne;typeof x=="function"&&(Ne=x(Y,te)),_(Ne!==void 0?Ne:Y)},[x]),$=b.useCallback(function(){typeof w=="function"&&w(),L(!0)},[w]),E=b.useCallback(function(){typeof v=="function"&&v(),L(!1)},[v]),G=p!==void 0?p:k,C=f!==void 0?f:M,R=N!==void 0?N:Z;return Ge(Ge({},T),{},{inputValue:G,menuIsOpen:C,onChange:P,onInputChange:Q,onMenuClose:E,onMenuOpen:$,value:R})}function We(){return We=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},We.apply(null,arguments)}function SN(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function Qx(s,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,Hv(l.key),l)}}function _N(s,t,r){return t&&Qx(s.prototype,t),r&&Qx(s,r),Object.defineProperty(s,"prototype",{writable:!1}),s}function Bf(s,t){return Bf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,l){return r.__proto__=l,r},Bf(s,t)}function CN(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&Bf(s,t)}function hc(s){return hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hc(s)}function Fv(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fv=function(){return!!s})()}function EN(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function TN(s,t){if(t&&(Hs(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EN(s)}function kN(s){var t=Fv();return function(){var r,l=hc(s);if(t){var o=hc(this).constructor;r=Reflect.construct(l,arguments,o)}else r=l.apply(this,arguments);return TN(this,r)}}function AN(s){if(Array.isArray(s))return If(s)}function ON(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function RN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mh(s){return AN(s)||ON(s)||Vv(s)||RN()}function DN(s){if(s.sheet)return s.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===s)return document.styleSheets[t]}function MN(s){var t=document.createElement("style");return t.setAttribute("data-emotion",s.key),s.nonce!==void 0&&t.setAttribute("nonce",s.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var LN=(function(){function s(r){var l=this;this._insertTag=function(o){var u;l.tags.length===0?l.insertionPoint?u=l.insertionPoint.nextSibling:l.prepend?u=l.container.firstChild:u=l.before:u=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(o,u),l.tags.push(o)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=s.prototype;return t.hydrate=function(l){l.forEach(this._insertTag)},t.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(MN(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var u=DN(o);try{u.insertRule(l,u.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(l));this.ctr++},t.flush=function(){this.tags.forEach(function(l){var o;return(o=l.parentNode)==null?void 0:o.removeChild(l)}),this.tags=[],this.ctr=0},s})(),cn="-ms-",mc="-moz-",pt="-webkit-",Gv="comm",ph="rule",gh="decl",$N="@import",Yv="@keyframes",zN="@layer",PN=Math.abs,Oc=String.fromCharCode,UN=Object.assign;function IN(s,t){return ln(s,0)^45?(((t<<2^ln(s,0))<<2^ln(s,1))<<2^ln(s,2))<<2^ln(s,3):0}function Kv(s){return s.trim()}function BN(s,t){return(s=t.exec(s))?s[0]:s}function gt(s,t,r){return s.replace(t,r)}function qf(s,t){return s.indexOf(t)}function ln(s,t){return s.charCodeAt(t)|0}function xl(s,t,r){return s.slice(t,r)}function da(s){return s.length}function xh(s){return s.length}function Go(s,t){return t.push(s),s}function qN(s,t){return s.map(t).join("")}var Rc=1,si=1,Jv=0,wn=0,Ft=0,oi="";function Dc(s,t,r,l,o,u,d){return{value:s,root:t,parent:r,type:l,props:o,children:u,line:Rc,column:si,length:d,return:""}}function ol(s,t){return UN(Dc("",null,null,"",null,null,0),s,{length:-s.length},t)}function HN(){return Ft}function VN(){return Ft=wn>0?ln(oi,--wn):0,si--,Ft===10&&(si=1,Rc--),Ft}function On(){return Ft=wn<Jv?ln(oi,wn++):0,si++,Ft===10&&(si=1,Rc++),Ft}function ha(){return ln(oi,wn)}function sc(){return wn}function Cl(s,t){return xl(oi,s,t)}function bl(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wv(s){return Rc=si=1,Jv=da(oi=s),wn=0,[]}function Xv(s){return oi="",s}function rc(s){return Kv(Cl(wn-1,Hf(s===91?s+2:s===40?s+1:s)))}function FN(s){for(;(Ft=ha())&&Ft<33;)On();return bl(s)>2||bl(Ft)>3?"":" "}function GN(s,t){for(;--t&&On()&&!(Ft<48||Ft>102||Ft>57&&Ft<65||Ft>70&&Ft<97););return Cl(s,sc()+(t<6&&ha()==32&&On()==32))}function Hf(s){for(;On();)switch(Ft){case s:return wn;case 34:case 39:s!==34&&s!==39&&Hf(Ft);break;case 40:s===41&&Hf(s);break;case 92:On();break}return wn}function YN(s,t){for(;On()&&s+Ft!==57;)if(s+Ft===84&&ha()===47)break;return"/*"+Cl(t,wn-1)+"*"+Oc(s===47?s:On())}function KN(s){for(;!bl(ha());)On();return Cl(s,wn)}function JN(s){return Xv(ic("",null,null,null,[""],s=Wv(s),0,[0],s))}function ic(s,t,r,l,o,u,d,p,f){for(var m=0,x=0,v=d,w=0,N=0,T=0,S=1,j=1,k=1,_=0,O="",q=o,M=u,L=l,U=O;j;)switch(T=_,_=On()){case 40:if(T!=108&&ln(U,v-1)==58){qf(U+=gt(rc(_),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:U+=rc(_);break;case 9:case 10:case 13:case 32:U+=FN(T);break;case 92:U+=GN(sc()-1,7);continue;case 47:switch(ha()){case 42:case 47:Go(WN(YN(On(),sc()),t,r),f);break;default:U+="/"}break;case 123*S:p[m++]=da(U)*k;case 125*S:case 59:case 0:switch(_){case 0:case 125:j=0;case 59+x:k==-1&&(U=gt(U,/\f/g,"")),N>0&&da(U)-v&&Go(N>32?eb(U+";",l,r,v-1):eb(gt(U," ","")+";",l,r,v-2),f);break;case 59:U+=";";default:if(Go(L=Zx(U,t,r,m,x,o,p,O,q=[],M=[],v),u),_===123)if(x===0)ic(U,t,L,L,q,u,v,p,M);else switch(w===99&&ln(U,3)===110?100:w){case 100:case 108:case 109:case 115:ic(s,L,L,l&&Go(Zx(s,L,L,0,0,o,p,O,o,q=[],v),M),o,M,v,p,l?q:M);break;default:ic(U,L,L,L,[""],M,0,p,M)}}m=x=N=0,S=k=1,O=U="",v=d;break;case 58:v=1+da(U),N=T;default:if(S<1){if(_==123)--S;else if(_==125&&S++==0&&VN()==125)continue}switch(U+=Oc(_),_*S){case 38:k=x>0?1:(U+="\f",-1);break;case 44:p[m++]=(da(U)-1)*k,k=1;break;case 64:ha()===45&&(U+=rc(On())),w=ha(),x=v=da(O=U+=KN(sc())),_++;break;case 45:T===45&&da(U)==2&&(S=0)}}return u}function Zx(s,t,r,l,o,u,d,p,f,m,x){for(var v=o-1,w=o===0?u:[""],N=xh(w),T=0,S=0,j=0;T<l;++T)for(var k=0,_=xl(s,v+1,v=PN(S=d[T])),O=s;k<N;++k)(O=Kv(S>0?w[k]+" "+_:gt(_,/&\f/g,w[k])))&&(f[j++]=O);return Dc(s,t,r,o===0?ph:p,f,m,x)}function WN(s,t,r){return Dc(s,t,r,Gv,Oc(HN()),xl(s,2,-2),0)}function eb(s,t,r,l){return Dc(s,t,r,gh,xl(s,0,l),xl(s,l+1,-1),l)}function ti(s,t){for(var r="",l=xh(s),o=0;o<l;o++)r+=t(s[o],o,s,t)||"";return r}function XN(s,t,r,l){switch(s.type){case zN:if(s.children.length)break;case $N:case gh:return s.return=s.return||s.value;case Gv:return"";case Yv:return s.return=s.value+"{"+ti(s.children,l)+"}";case ph:s.value=s.props.join(",")}return da(r=ti(s.children,l))?s.return=s.value+"{"+r+"}":""}function QN(s){var t=xh(s);return function(r,l,o,u){for(var d="",p=0;p<t;p++)d+=s[p](r,l,o,u)||"";return d}}function ZN(s){return function(t){t.root||(t=t.return)&&s(t)}}function eS(s){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=s(r)),t[r]}}var tS=function(t,r,l){for(var o=0,u=0;o=u,u=ha(),o===38&&u===12&&(r[l]=1),!bl(u);)On();return Cl(t,wn)},nS=function(t,r){var l=-1,o=44;do switch(bl(o)){case 0:o===38&&ha()===12&&(r[l]=1),t[l]+=tS(wn-1,r,l);break;case 2:t[l]+=rc(o);break;case 4:if(o===44){t[++l]=ha()===58?"&\f":"",r[l]=t[l].length;break}default:t[l]+=Oc(o)}while(o=On());return t},aS=function(t,r){return Xv(nS(Wv(t),r))},tb=new WeakMap,sS=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,l=t.parent,o=t.column===l.column&&t.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!tb.get(l))&&!o){tb.set(t,!0);for(var u=[],d=aS(r,u),p=l.props,f=0,m=0;f<d.length;f++)for(var x=0;x<p.length;x++,m++)t.props[m]=u[f]?d[f].replace(/&\f/g,p[x]):p[x]+" "+d[f]}}},rS=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Qv(s,t){switch(IN(s,t)){case 5103:return pt+"print-"+s+s;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pt+s+s;case 5349:case 4246:case 4810:case 6968:case 2756:return pt+s+mc+s+cn+s+s;case 6828:case 4268:return pt+s+cn+s+s;case 6165:return pt+s+cn+"flex-"+s+s;case 5187:return pt+s+gt(s,/(\w+).+(:[^]+)/,pt+"box-$1$2"+cn+"flex-$1$2")+s;case 5443:return pt+s+cn+"flex-item-"+gt(s,/flex-|-self/,"")+s;case 4675:return pt+s+cn+"flex-line-pack"+gt(s,/align-content|flex-|-self/,"")+s;case 5548:return pt+s+cn+gt(s,"shrink","negative")+s;case 5292:return pt+s+cn+gt(s,"basis","preferred-size")+s;case 6060:return pt+"box-"+gt(s,"-grow","")+pt+s+cn+gt(s,"grow","positive")+s;case 4554:return pt+gt(s,/([^-])(transform)/g,"$1"+pt+"$2")+s;case 6187:return gt(gt(gt(s,/(zoom-|grab)/,pt+"$1"),/(image-set)/,pt+"$1"),s,"")+s;case 5495:case 3959:return gt(s,/(image-set\([^]*)/,pt+"$1$`$1");case 4968:return gt(gt(s,/(.+:)(flex-)?(.*)/,pt+"box-pack:$3"+cn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pt+s+s;case 4095:case 3583:case 4068:case 2532:return gt(s,/(.+)-inline(.+)/,pt+"$1$2")+s;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(da(s)-1-t>6)switch(ln(s,t+1)){case 109:if(ln(s,t+4)!==45)break;case 102:return gt(s,/(.+:)(.+)-([^]+)/,"$1"+pt+"$2-$3$1"+mc+(ln(s,t+3)==108?"$3":"$2-$3"))+s;case 115:return~qf(s,"stretch")?Qv(gt(s,"stretch","fill-available"),t)+s:s}break;case 4949:if(ln(s,t+1)!==115)break;case 6444:switch(ln(s,da(s)-3-(~qf(s,"!important")&&10))){case 107:return gt(s,":",":"+pt)+s;case 101:return gt(s,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pt+(ln(s,14)===45?"inline-":"")+"box$3$1"+pt+"$2$3$1"+cn+"$2box$3")+s}break;case 5936:switch(ln(s,t+11)){case 114:return pt+s+cn+gt(s,/[svh]\w+-[tblr]{2}/,"tb")+s;case 108:return pt+s+cn+gt(s,/[svh]\w+-[tblr]{2}/,"tb-rl")+s;case 45:return pt+s+cn+gt(s,/[svh]\w+-[tblr]{2}/,"lr")+s}return pt+s+cn+s+s}return s}var iS=function(t,r,l,o){if(t.length>-1&&!t.return)switch(t.type){case gh:t.return=Qv(t.value,t.length);break;case Yv:return ti([ol(t,{value:gt(t.value,"@","@"+pt)})],o);case ph:if(t.length)return qN(t.props,function(u){switch(BN(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ti([ol(t,{props:[gt(u,/:(read-\w+)/,":"+mc+"$1")]})],o);case"::placeholder":return ti([ol(t,{props:[gt(u,/:(plac\w+)/,":"+pt+"input-$1")]}),ol(t,{props:[gt(u,/:(plac\w+)/,":"+mc+"$1")]}),ol(t,{props:[gt(u,/:(plac\w+)/,cn+"input-$1")]})],o)}return""})}},lS=[iS],oS=function(t){var r=t.key;if(r==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(S){var j=S.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(S),S.setAttribute("data-s",""))})}var o=t.stylisPlugins||lS,u={},d,p=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(S){for(var j=S.getAttribute("data-emotion").split(" "),k=1;k<j.length;k++)u[j[k]]=!0;p.push(S)});var f,m=[sS,rS];{var x,v=[XN,ZN(function(S){x.insert(S)})],w=QN(m.concat(o,v)),N=function(j){return ti(JN(j),w)};f=function(j,k,_,O){x=_,N(j?j+"{"+k.styles+"}":k.styles),O&&(T.inserted[k.name]=!0)}}var T={key:r,sheet:new LN({key:r,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:f};return T.sheet.hydrate(p),T},hf={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function cS(){if(nb)return bt;nb=1;var s=typeof Symbol=="function"&&Symbol.for,t=s?Symbol.for("react.element"):60103,r=s?Symbol.for("react.portal"):60106,l=s?Symbol.for("react.fragment"):60107,o=s?Symbol.for("react.strict_mode"):60108,u=s?Symbol.for("react.profiler"):60114,d=s?Symbol.for("react.provider"):60109,p=s?Symbol.for("react.context"):60110,f=s?Symbol.for("react.async_mode"):60111,m=s?Symbol.for("react.concurrent_mode"):60111,x=s?Symbol.for("react.forward_ref"):60112,v=s?Symbol.for("react.suspense"):60113,w=s?Symbol.for("react.suspense_list"):60120,N=s?Symbol.for("react.memo"):60115,T=s?Symbol.for("react.lazy"):60116,S=s?Symbol.for("react.block"):60121,j=s?Symbol.for("react.fundamental"):60117,k=s?Symbol.for("react.responder"):60118,_=s?Symbol.for("react.scope"):60119;function O(M){if(typeof M=="object"&&M!==null){var L=M.$$typeof;switch(L){case t:switch(M=M.type,M){case f:case m:case l:case u:case o:case v:return M;default:switch(M=M&&M.$$typeof,M){case p:case x:case T:case N:case d:return M;default:return L}}case r:return L}}}function q(M){return O(M)===m}return bt.AsyncMode=f,bt.ConcurrentMode=m,bt.ContextConsumer=p,bt.ContextProvider=d,bt.Element=t,bt.ForwardRef=x,bt.Fragment=l,bt.Lazy=T,bt.Memo=N,bt.Portal=r,bt.Profiler=u,bt.StrictMode=o,bt.Suspense=v,bt.isAsyncMode=function(M){return q(M)||O(M)===f},bt.isConcurrentMode=q,bt.isContextConsumer=function(M){return O(M)===p},bt.isContextProvider=function(M){return O(M)===d},bt.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===t},bt.isForwardRef=function(M){return O(M)===x},bt.isFragment=function(M){return O(M)===l},bt.isLazy=function(M){return O(M)===T},bt.isMemo=function(M){return O(M)===N},bt.isPortal=function(M){return O(M)===r},bt.isProfiler=function(M){return O(M)===u},bt.isStrictMode=function(M){return O(M)===o},bt.isSuspense=function(M){return O(M)===v},bt.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===l||M===m||M===u||M===o||M===v||M===w||typeof M=="object"&&M!==null&&(M.$$typeof===T||M.$$typeof===N||M.$$typeof===d||M.$$typeof===p||M.$$typeof===x||M.$$typeof===j||M.$$typeof===k||M.$$typeof===_||M.$$typeof===S)},bt.typeOf=O,bt}var ab;function uS(){return ab||(ab=1,hf.exports=cS()),hf.exports}var mf,sb;function dS(){if(sb)return mf;sb=1;var s=uS(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[s.ForwardRef]=l,u[s.Memo]=o;function d(T){return s.isMemo(T)?o:u[T.$$typeof]||t}var p=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,x=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function N(T,S,j){if(typeof S!="string"){if(w){var k=v(S);k&&k!==w&&N(T,k,j)}var _=f(S);m&&(_=_.concat(m(S)));for(var O=d(T),q=d(S),M=0;M<_.length;++M){var L=_[M];if(!r[L]&&!(j&&j[L])&&!(q&&q[L])&&!(O&&O[L])){var U=x(S,L);try{p(T,L,U)}catch{}}}}return T}return mf=N,mf}dS();var fS=!0;function hS(s,t,r){var l="";return r.split(" ").forEach(function(o){s[o]!==void 0?t.push(s[o]+";"):o&&(l+=o+" ")}),l}var Zv=function(t,r,l){var o=t.key+"-"+r.name;(l===!1||fS===!1)&&t.registered[o]===void 0&&(t.registered[o]=r.styles)},mS=function(t,r,l){Zv(t,r,l);var o=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var u=r;do t.insert(r===u?"."+o:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function pS(s){for(var t=0,r,l=0,o=s.length;o>=4;++l,o-=4)r=s.charCodeAt(l)&255|(s.charCodeAt(++l)&255)<<8|(s.charCodeAt(++l)&255)<<16|(s.charCodeAt(++l)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(s.charCodeAt(l+2)&255)<<16;case 2:t^=(s.charCodeAt(l+1)&255)<<8;case 1:t^=s.charCodeAt(l)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var gS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xS=/[A-Z]|^ms/g,bS=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e0=function(t){return t.charCodeAt(1)===45},rb=function(t){return t!=null&&typeof t!="boolean"},pf=eS(function(s){return e0(s)?s:s.replace(xS,"-$&").toLowerCase()}),ib=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(bS,function(l,o,u){return fa={name:o,styles:u,next:fa},o})}return gS[t]!==1&&!e0(t)&&typeof r=="number"&&r!==0?r+"px":r};function vl(s,t,r){if(r==null)return"";var l=r;if(l.__emotion_styles!==void 0)return l;switch(typeof r){case"boolean":return"";case"object":{var o=r;if(o.anim===1)return fa={name:o.name,styles:o.styles,next:fa},o.name;var u=r;if(u.styles!==void 0){var d=u.next;if(d!==void 0)for(;d!==void 0;)fa={name:d.name,styles:d.styles,next:fa},d=d.next;var p=u.styles+";";return p}return vS(s,t,r)}case"function":{if(s!==void 0){var f=fa,m=r(s);return fa=f,vl(s,t,m)}break}}var x=r;return x}function vS(s,t,r){var l="";if(Array.isArray(r))for(var o=0;o<r.length;o++)l+=vl(s,t,r[o])+";";else for(var u in r){var d=r[u];if(typeof d!="object"){var p=d;rb(p)&&(l+=pf(u)+":"+ib(u,p)+";")}else if(Array.isArray(d)&&typeof d[0]=="string"&&t==null)for(var f=0;f<d.length;f++)rb(d[f])&&(l+=pf(u)+":"+ib(u,d[f])+";");else{var m=vl(s,t,d);switch(u){case"animation":case"animationName":{l+=pf(u)+":"+m+";";break}default:l+=u+"{"+m+"}"}}}return l}var lb=/label:\s*([^\s;{]+)\s*(;|$)/g,fa;function t0(s,t,r){if(s.length===1&&typeof s[0]=="object"&&s[0]!==null&&s[0].styles!==void 0)return s[0];var l=!0,o="";fa=void 0;var u=s[0];if(u==null||u.raw===void 0)l=!1,o+=vl(r,t,u);else{var d=u;o+=d[0]}for(var p=1;p<s.length;p++)if(o+=vl(r,t,s[p]),l){var f=u;o+=f[p]}lb.lastIndex=0;for(var m="",x;(x=lb.exec(o))!==null;)m+="-"+x[1];var v=pS(o)+m;return{name:v,styles:o,next:fa}}var yS=function(t){return t()},wS=Ox.useInsertionEffect?Ox.useInsertionEffect:!1,jS=wS||yS,n0=b.createContext(typeof HTMLElement<"u"?oS({key:"css"}):null);n0.Provider;var NS=function(t){return b.forwardRef(function(r,l){var o=b.useContext(n0);return t(r,o,l)})},SS=b.createContext({}),bh={}.hasOwnProperty,Vf="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",_S=function(t,r){var l={};for(var o in r)bh.call(r,o)&&(l[o]=r[o]);return l[Vf]=t,l},CS=function(t){var r=t.cache,l=t.serialized,o=t.isStringTag;return Zv(r,l,o),jS(function(){return mS(r,l,o)}),null},ES=NS(function(s,t,r){var l=s.css;typeof l=="string"&&t.registered[l]!==void 0&&(l=t.registered[l]);var o=s[Vf],u=[l],d="";typeof s.className=="string"?d=hS(t.registered,u,s.className):s.className!=null&&(d=s.className+" ");var p=t0(u,void 0,b.useContext(SS));d+=t.key+"-"+p.name;var f={};for(var m in s)bh.call(s,m)&&m!=="css"&&m!==Vf&&(f[m]=s[m]);return f.className=d,r&&(f.ref=r),b.createElement(b.Fragment,null,b.createElement(CS,{cache:t,serialized:p,isStringTag:typeof o=="string"}),b.createElement(o,f))}),TS=ES,He=function(t,r){var l=arguments;if(r==null||!bh.call(r,"css"))return b.createElement.apply(void 0,l);var o=l.length,u=new Array(o);u[0]=TS,u[1]=_S(t,r);for(var d=2;d<o;d++)u[d]=l[d];return b.createElement.apply(null,u)};(function(s){var t;t||(t=s.JSX||(s.JSX={}))})(He||(He={}));function vh(){for(var s=arguments.length,t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];return t0(t)}function kS(){var s=vh.apply(void 0,arguments),t="animation-"+s.name;return{name:t,styles:"@keyframes "+t+"{"+s.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function AS(s,t){return t||(t=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(t)}}))}const OS=Math.min,RS=Math.max,pc=Math.round,Yo=Math.floor,gc=s=>({x:s,y:s});function DS(s){const{x:t,y:r,width:l,height:o}=s;return{width:l,height:o,top:r,left:t,right:t+l,bottom:r+o,x:t,y:r}}function Mc(){return typeof window<"u"}function a0(s){return r0(s)?(s.nodeName||"").toLowerCase():"#document"}function Ia(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function s0(s){var t;return(t=(r0(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function r0(s){return Mc()?s instanceof Node||s instanceof Ia(s).Node:!1}function MS(s){return Mc()?s instanceof Element||s instanceof Ia(s).Element:!1}function yh(s){return Mc()?s instanceof HTMLElement||s instanceof Ia(s).HTMLElement:!1}function ob(s){return!Mc()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Ia(s).ShadowRoot}const LS=new Set(["inline","contents"]);function i0(s){const{overflow:t,overflowX:r,overflowY:l,display:o}=wh(s);return/auto|scroll|overlay|hidden|clip/.test(t+l+r)&&!LS.has(o)}function $S(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zS=new Set(["html","body","#document"]);function PS(s){return zS.has(a0(s))}function wh(s){return Ia(s).getComputedStyle(s)}function US(s){if(a0(s)==="html")return s;const t=s.assignedSlot||s.parentNode||ob(s)&&s.host||s0(s);return ob(t)?t.host:t}function l0(s){const t=US(s);return PS(t)?s.ownerDocument?s.ownerDocument.body:s.body:yh(t)&&i0(t)?t:l0(t)}function xc(s,t,r){var l;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=l0(s),u=o===((l=s.ownerDocument)==null?void 0:l.body),d=Ia(o);if(u){const p=Ff(d);return t.concat(d,d.visualViewport||[],i0(o)?o:[],p&&r?xc(p):[])}return t.concat(o,xc(o,[],r))}function Ff(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function IS(s){const t=wh(s);let r=parseFloat(t.width)||0,l=parseFloat(t.height)||0;const o=yh(s),u=o?s.offsetWidth:r,d=o?s.offsetHeight:l,p=pc(r)!==u||pc(l)!==d;return p&&(r=u,l=d),{width:r,height:l,$:p}}function jh(s){return MS(s)?s:s.contextElement}function cb(s){const t=jh(s);if(!yh(t))return gc(1);const r=t.getBoundingClientRect(),{width:l,height:o,$:u}=IS(t);let d=(u?pc(r.width):r.width)/l,p=(u?pc(r.height):r.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!p||!Number.isFinite(p))&&(p=1),{x:d,y:p}}const BS=gc(0);function qS(s){const t=Ia(s);return!$S()||!t.visualViewport?BS:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function HS(s,t,r){return!1}function ub(s,t,r,l){t===void 0&&(t=!1);const o=s.getBoundingClientRect(),u=jh(s);let d=gc(1);t&&(d=cb(s));const p=HS()?qS(u):gc(0);let f=(o.left+p.x)/d.x,m=(o.top+p.y)/d.y,x=o.width/d.x,v=o.height/d.y;if(u){const w=Ia(u),N=l;let T=w,S=Ff(T);for(;S&&l&&N!==T;){const j=cb(S),k=S.getBoundingClientRect(),_=wh(S),O=k.left+(S.clientLeft+parseFloat(_.paddingLeft))*j.x,q=k.top+(S.clientTop+parseFloat(_.paddingTop))*j.y;f*=j.x,m*=j.y,x*=j.x,v*=j.y,f+=O,m+=q,T=Ia(S),S=Ff(T)}}return DS({width:x,height:v,x:f,y:m})}function o0(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function VS(s,t){let r=null,l;const o=s0(s);function u(){var p;clearTimeout(l),(p=r)==null||p.disconnect(),r=null}function d(p,f){p===void 0&&(p=!1),f===void 0&&(f=1),u();const m=s.getBoundingClientRect(),{left:x,top:v,width:w,height:N}=m;if(p||t(),!w||!N)return;const T=Yo(v),S=Yo(o.clientWidth-(x+w)),j=Yo(o.clientHeight-(v+N)),k=Yo(x),O={rootMargin:-T+"px "+-S+"px "+-j+"px "+-k+"px",threshold:RS(0,OS(1,f))||1};let q=!0;function M(L){const U=L[0].intersectionRatio;if(U!==f){if(!q)return d();U?d(!1,U):l=setTimeout(()=>{d(!1,1e-7)},1e3)}U===1&&!o0(m,s.getBoundingClientRect())&&d(),q=!1}try{r=new IntersectionObserver(M,{...O,root:o.ownerDocument})}catch{r=new IntersectionObserver(M,O)}r.observe(s)}return d(!0),u}function FS(s,t,r,l){l===void 0&&(l={});const{ancestorScroll:o=!0,ancestorResize:u=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:f=!1}=l,m=jh(s),x=o||u?[...m?xc(m):[],...xc(t)]:[];x.forEach(k=>{o&&k.addEventListener("scroll",r,{passive:!0}),u&&k.addEventListener("resize",r)});const v=m&&p?VS(m,r):null;let w=-1,N=null;d&&(N=new ResizeObserver(k=>{let[_]=k;_&&_.target===m&&N&&(N.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var O;(O=N)==null||O.observe(t)})),r()}),m&&!f&&N.observe(m),N.observe(t));let T,S=f?ub(s):null;f&&j();function j(){const k=ub(s);S&&!o0(S,k)&&r(),S=k,T=requestAnimationFrame(j)}return r(),()=>{var k;x.forEach(_=>{o&&_.removeEventListener("scroll",r),u&&_.removeEventListener("resize",r)}),v?.(),(k=N)==null||k.disconnect(),N=null,f&&cancelAnimationFrame(T)}}var Gf=b.useLayoutEffect,GS=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],bc=function(){};function YS(s,t){return t?t[0]==="-"?s+t:s+"__"+t:s}function KS(s,t){for(var r=arguments.length,l=new Array(r>2?r-2:0),o=2;o<r;o++)l[o-2]=arguments[o];var u=[].concat(l);if(t&&s)for(var d in t)t.hasOwnProperty(d)&&t[d]&&u.push("".concat(YS(s,d)));return u.filter(function(p){return p}).map(function(p){return String(p).trim()}).join(" ")}var db=function(t){return a_(t)?t.filter(Boolean):Hs(t)==="object"&&t!==null?[t]:[]},c0=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=Ba(t,GS);return Ge({},r)},$t=function(t,r,l){var o=t.cx,u=t.getStyles,d=t.getClassNames,p=t.className;return{css:u(r,t),className:o(l??{},d(r,t),p)}};function Lc(s){return[document.documentElement,document.body,window].indexOf(s)>-1}function JS(s){return Lc(s)?window.innerHeight:s.clientHeight}function u0(s){return Lc(s)?window.pageYOffset:s.scrollTop}function vc(s,t){if(Lc(s)){window.scrollTo(0,t);return}s.scrollTop=t}function WS(s){var t=getComputedStyle(s),r=t.position==="absolute",l=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var o=s;o=o.parentElement;)if(t=getComputedStyle(o),!(r&&t.position==="static")&&l.test(t.overflow+t.overflowY+t.overflowX))return o;return document.documentElement}function XS(s,t,r,l){return r*((s=s/l-1)*s*s+1)+t}function Ko(s,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:bc,o=u0(s),u=t-o,d=10,p=0;function f(){p+=d;var m=XS(p,o,u,r);vc(s,m),p<r?window.requestAnimationFrame(f):l(s)}f()}function fb(s,t){var r=s.getBoundingClientRect(),l=t.getBoundingClientRect(),o=t.offsetHeight/3;l.bottom+o>r.bottom?vc(s,Math.min(t.offsetTop+t.clientHeight-s.offsetHeight+o,s.scrollHeight)):l.top-o<r.top&&vc(s,Math.max(t.offsetTop-o,0))}function QS(s){var t=s.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function hb(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function ZS(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var d0=!1,e_={get passive(){return d0=!0}},Jo=typeof window<"u"?window:{};Jo.addEventListener&&Jo.removeEventListener&&(Jo.addEventListener("p",bc,e_),Jo.removeEventListener("p",bc,!1));var t_=d0;function n_(s){return s!=null}function a_(s){return Array.isArray(s)}function Wo(s,t,r){return s?t:r}var s_=function(t){for(var r=arguments.length,l=new Array(r>1?r-1:0),o=1;o<r;o++)l[o-1]=arguments[o];var u=Object.entries(t).filter(function(d){var p=za(d,1),f=p[0];return!l.includes(f)});return u.reduce(function(d,p){var f=za(p,2),m=f[0],x=f[1];return d[m]=x,d},{})},r_=["children","innerProps"],i_=["children","innerProps"];function l_(s){var t=s.maxHeight,r=s.menuEl,l=s.minHeight,o=s.placement,u=s.shouldScroll,d=s.isFixedPosition,p=s.controlHeight,f=WS(r),m={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return m;var x=f.getBoundingClientRect(),v=x.height,w=r.getBoundingClientRect(),N=w.bottom,T=w.height,S=w.top,j=r.offsetParent.getBoundingClientRect(),k=j.top,_=d?window.innerHeight:JS(f),O=u0(f),q=parseInt(getComputedStyle(r).marginBottom,10),M=parseInt(getComputedStyle(r).marginTop,10),L=k-M,U=_-S,W=L+O,Z=v-O-S,I=N-_+O+q,P=O+S-M,Q=160;switch(o){case"auto":case"bottom":if(U>=T)return{placement:"bottom",maxHeight:t};if(Z>=T&&!d)return u&&Ko(f,I,Q),{placement:"bottom",maxHeight:t};if(!d&&Z>=l||d&&U>=l){u&&Ko(f,I,Q);var $=d?U-q:Z-q;return{placement:"bottom",maxHeight:$}}if(o==="auto"||d){var E=t,G=d?L:W;return G>=l&&(E=Math.min(G-q-p,t)),{placement:"top",maxHeight:E}}if(o==="bottom")return u&&vc(f,I),{placement:"bottom",maxHeight:t};break;case"top":if(L>=T)return{placement:"top",maxHeight:t};if(W>=T&&!d)return u&&Ko(f,P,Q),{placement:"top",maxHeight:t};if(!d&&W>=l||d&&L>=l){var C=t;return(!d&&W>=l||d&&L>=l)&&(C=d?L-M:W-M),u&&Ko(f,P,Q),{placement:"top",maxHeight:C}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return m}function o_(s){var t={bottom:"top",top:"bottom"};return s?t[s]:"bottom"}var f0=function(t){return t==="auto"?"bottom":t},c_=function(t,r){var l,o=t.placement,u=t.theme,d=u.borderRadius,p=u.spacing,f=u.colors;return Ge((l={label:"menu"},dl(l,o_(o),"100%"),dl(l,"position","absolute"),dl(l,"width","100%"),dl(l,"zIndex",1),l),r?{}:{backgroundColor:f.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:p.menuGutter,marginTop:p.menuGutter})},h0=b.createContext(null),u_=function(t){var r=t.children,l=t.minMenuHeight,o=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,p=t.menuShouldScrollIntoView,f=t.theme,m=b.useContext(h0)||{},x=m.setPortalPlacement,v=b.useRef(null),w=b.useState(o),N=za(w,2),T=N[0],S=N[1],j=b.useState(null),k=za(j,2),_=k[0],O=k[1],q=f.spacing.controlHeight;return Gf(function(){var M=v.current;if(M){var L=d==="fixed",U=p&&!L,W=l_({maxHeight:o,menuEl:M,minHeight:l,placement:u,shouldScroll:U,isFixedPosition:L,controlHeight:q});S(W.maxHeight),O(W.placement),x?.(W.placement)}},[o,u,d,p,l,x,q]),r({ref:v,placerProps:Ge(Ge({},t),{},{placement:_||f0(u),maxHeight:T})})},d_=function(t){var r=t.children,l=t.innerRef,o=t.innerProps;return He("div",We({},$t(t,"menu",{menu:!0}),{ref:l},o),r)},f_=d_,h_=function(t,r){var l=t.maxHeight,o=t.theme.spacing.baseUnit;return Ge({maxHeight:l,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:o,paddingTop:o})},m_=function(t){var r=t.children,l=t.innerProps,o=t.innerRef,u=t.isMulti;return He("div",We({},$t(t,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:o},l),r)},m0=function(t,r){var l=t.theme,o=l.spacing.baseUnit,u=l.colors;return Ge({textAlign:"center"},r?{}:{color:u.neutral40,padding:"".concat(o*2,"px ").concat(o*3,"px")})},p_=m0,g_=m0,x_=function(t){var r=t.children,l=r===void 0?"No options":r,o=t.innerProps,u=Ba(t,r_);return He("div",We({},$t(Ge(Ge({},u),{},{children:l,innerProps:o}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),o),l)},b_=function(t){var r=t.children,l=r===void 0?"Loading...":r,o=t.innerProps,u=Ba(t,i_);return He("div",We({},$t(Ge(Ge({},u),{},{children:l,innerProps:o}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),o),l)},v_=function(t){var r=t.rect,l=t.offset,o=t.position;return{left:r.left,position:o,top:l,width:r.width,zIndex:1}},y_=function(t){var r=t.appendTo,l=t.children,o=t.controlElement,u=t.innerProps,d=t.menuPlacement,p=t.menuPosition,f=b.useRef(null),m=b.useRef(null),x=b.useState(f0(d)),v=za(x,2),w=v[0],N=v[1],T=b.useMemo(function(){return{setPortalPlacement:N}},[]),S=b.useState(null),j=za(S,2),k=j[0],_=j[1],O=b.useCallback(function(){if(o){var U=QS(o),W=p==="fixed"?0:window.pageYOffset,Z=U[w]+W;(Z!==k?.offset||U.left!==k?.rect.left||U.width!==k?.rect.width)&&_({offset:Z,rect:U})}},[o,p,w,k?.offset,k?.rect.left,k?.rect.width]);Gf(function(){O()},[O]);var q=b.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),o&&f.current&&(m.current=FS(o,f.current,O,{elementResize:"ResizeObserver"in window}))},[o,O]);Gf(function(){q()},[q]);var M=b.useCallback(function(U){f.current=U,q()},[q]);if(!r&&p!=="fixed"||!k)return null;var L=He("div",We({ref:M},$t(Ge(Ge({},t),{},{offset:k.offset,position:p,rect:k.rect}),"menuPortal",{"menu-portal":!0}),u),l);return He(h0.Provider,{value:T},r?Av.createPortal(L,r):L)},w_=function(t){var r=t.isDisabled,l=t.isRtl;return{label:"container",direction:l?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},j_=function(t){var r=t.children,l=t.innerProps,o=t.isDisabled,u=t.isRtl;return He("div",We({},$t(t,"container",{"--is-disabled":o,"--is-rtl":u}),l),r)},N_=function(t,r){var l=t.theme.spacing,o=t.isMulti,u=t.hasValue,d=t.selectProps.controlShouldRenderValue;return Ge({alignItems:"center",display:o&&u&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(l.baseUnit/2,"px ").concat(l.baseUnit*2,"px")})},S_=function(t){var r=t.children,l=t.innerProps,o=t.isMulti,u=t.hasValue;return He("div",We({},$t(t,"valueContainer",{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":u}),l),r)},__=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},C_=function(t){var r=t.children,l=t.innerProps;return He("div",We({},$t(t,"indicatorsContainer",{indicators:!0}),l),r)},mb,E_=["size"],T_=["innerProps","isRtl","size"],k_={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},p0=function(t){var r=t.size,l=Ba(t,E_);return He("svg",We({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:k_},l))},Nh=function(t){return He(p0,We({size:20},t),He("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},g0=function(t){return He(p0,We({size:20},t),He("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},x0=function(t,r){var l=t.isFocused,o=t.theme,u=o.spacing.baseUnit,d=o.colors;return Ge({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:l?d.neutral60:d.neutral20,padding:u*2,":hover":{color:l?d.neutral80:d.neutral40}})},A_=x0,O_=function(t){var r=t.children,l=t.innerProps;return He("div",We({},$t(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),l),r||He(g0,null))},R_=x0,D_=function(t){var r=t.children,l=t.innerProps;return He("div",We({},$t(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),l),r||He(Nh,null))},M_=function(t,r){var l=t.isDisabled,o=t.theme,u=o.spacing.baseUnit,d=o.colors;return Ge({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:l?d.neutral10:d.neutral20,marginBottom:u*2,marginTop:u*2})},L_=function(t){var r=t.innerProps;return He("span",We({},r,$t(t,"indicatorSeparator",{"indicator-separator":!0})))},$_=kS(mb||(mb=AS([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),z_=function(t,r){var l=t.isFocused,o=t.size,u=t.theme,d=u.colors,p=u.spacing.baseUnit;return Ge({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:o,lineHeight:1,marginRight:o,textAlign:"center",verticalAlign:"middle"},r?{}:{color:l?d.neutral60:d.neutral20,padding:p*2})},gf=function(t){var r=t.delay,l=t.offset;return He("span",{css:vh({animation:"".concat($_," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:l?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},P_=function(t){var r=t.innerProps,l=t.isRtl,o=t.size,u=o===void 0?4:o,d=Ba(t,T_);return He("div",We({},$t(Ge(Ge({},d),{},{innerProps:r,isRtl:l,size:u}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),He(gf,{delay:0,offset:l}),He(gf,{delay:160,offset:!0}),He(gf,{delay:320,offset:!l}))},U_=function(t,r){var l=t.isDisabled,o=t.isFocused,u=t.theme,d=u.colors,p=u.borderRadius,f=u.spacing;return Ge({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:f.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:l?d.neutral5:d.neutral0,borderColor:l?d.neutral10:o?d.primary:d.neutral20,borderRadius:p,borderStyle:"solid",borderWidth:1,boxShadow:o?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:o?d.primary:d.neutral30}})},I_=function(t){var r=t.children,l=t.isDisabled,o=t.isFocused,u=t.innerRef,d=t.innerProps,p=t.menuIsOpen;return He("div",We({ref:u},$t(t,"control",{control:!0,"control--is-disabled":l,"control--is-focused":o,"control--menu-is-open":p}),d,{"aria-disabled":l||void 0}),r)},B_=I_,q_=["data"],H_=function(t,r){var l=t.theme.spacing;return r?{}:{paddingBottom:l.baseUnit*2,paddingTop:l.baseUnit*2}},V_=function(t){var r=t.children,l=t.cx,o=t.getStyles,u=t.getClassNames,d=t.Heading,p=t.headingProps,f=t.innerProps,m=t.label,x=t.theme,v=t.selectProps;return He("div",We({},$t(t,"group",{group:!0}),f),He(d,We({},p,{selectProps:v,theme:x,getStyles:o,getClassNames:u,cx:l}),m),He("div",null,r))},F_=function(t,r){var l=t.theme,o=l.colors,u=l.spacing;return Ge({label:"group",cursor:"default",display:"block"},r?{}:{color:o.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},G_=function(t){var r=c0(t);r.data;var l=Ba(r,q_);return He("div",We({},$t(t,"groupHeading",{"group-heading":!0}),l))},Y_=V_,K_=["innerRef","isDisabled","isHidden","inputClassName"],J_=function(t,r){var l=t.isDisabled,o=t.value,u=t.theme,d=u.spacing,p=u.colors;return Ge(Ge({visibility:l?"hidden":"visible",transform:o?"translateZ(0)":""},W_),r?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:p.neutral80})},b0={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},W_={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ge({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},b0)},X_=function(t){return Ge({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},b0)},Q_=function(t){var r=t.cx,l=t.value,o=c0(t),u=o.innerRef,d=o.isDisabled,p=o.isHidden,f=o.inputClassName,m=Ba(o,K_);return He("div",We({},$t(t,"input",{"input-container":!0}),{"data-value":l||""}),He("input",We({className:r({input:!0},f),ref:u,style:X_(p),disabled:d},m)))},Z_=Q_,eC=function(t,r){var l=t.theme,o=l.spacing,u=l.borderRadius,d=l.colors;return Ge({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:d.neutral10,borderRadius:u/2,margin:o.baseUnit/2})},tC=function(t,r){var l=t.theme,o=l.borderRadius,u=l.colors,d=t.cropWithEllipsis;return Ge({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:o/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},nC=function(t,r){var l=t.theme,o=l.spacing,u=l.borderRadius,d=l.colors,p=t.isFocused;return Ge({alignItems:"center",display:"flex"},r?{}:{borderRadius:u/2,backgroundColor:p?d.dangerLight:void 0,paddingLeft:o.baseUnit,paddingRight:o.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},v0=function(t){var r=t.children,l=t.innerProps;return He("div",l,r)},aC=v0,sC=v0;function rC(s){var t=s.children,r=s.innerProps;return He("div",We({role:"button"},r),t||He(Nh,{size:14}))}var iC=function(t){var r=t.children,l=t.components,o=t.data,u=t.innerProps,d=t.isDisabled,p=t.removeProps,f=t.selectProps,m=l.Container,x=l.Label,v=l.Remove;return He(m,{data:o,innerProps:Ge(Ge({},$t(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),u),selectProps:f},He(x,{data:o,innerProps:Ge({},$t(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:f},r),He(v,{data:o,innerProps:Ge(Ge({},$t(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},p),selectProps:f}))},lC=iC,oC=function(t,r){var l=t.isDisabled,o=t.isFocused,u=t.isSelected,d=t.theme,p=d.spacing,f=d.colors;return Ge({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:u?f.primary:o?f.primary25:"transparent",color:l?f.neutral20:u?f.neutral0:"inherit",padding:"".concat(p.baseUnit*2,"px ").concat(p.baseUnit*3,"px"),":active":{backgroundColor:l?void 0:u?f.primary:f.primary50}})},cC=function(t){var r=t.children,l=t.isDisabled,o=t.isFocused,u=t.isSelected,d=t.innerRef,p=t.innerProps;return He("div",We({},$t(t,"option",{option:!0,"option--is-disabled":l,"option--is-focused":o,"option--is-selected":u}),{ref:d,"aria-disabled":l},p),r)},uC=cC,dC=function(t,r){var l=t.theme,o=l.spacing,u=l.colors;return Ge({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:u.neutral50,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},fC=function(t){var r=t.children,l=t.innerProps;return He("div",We({},$t(t,"placeholder",{placeholder:!0}),l),r)},hC=fC,mC=function(t,r){var l=t.isDisabled,o=t.theme,u=o.spacing,d=o.colors;return Ge({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:l?d.neutral40:d.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},pC=function(t){var r=t.children,l=t.isDisabled,o=t.innerProps;return He("div",We({},$t(t,"singleValue",{"single-value":!0,"single-value--is-disabled":l}),o),r)},gC=pC,xC={ClearIndicator:D_,Control:B_,DropdownIndicator:O_,DownChevron:g0,CrossIcon:Nh,Group:Y_,GroupHeading:G_,IndicatorsContainer:C_,IndicatorSeparator:L_,Input:Z_,LoadingIndicator:P_,Menu:f_,MenuList:m_,MenuPortal:y_,LoadingMessage:b_,NoOptionsMessage:x_,MultiValue:lC,MultiValueContainer:aC,MultiValueLabel:sC,MultiValueRemove:rC,Option:uC,Placeholder:hC,SelectContainer:j_,SingleValue:gC,ValueContainer:S_},bC=function(t){return Ge(Ge({},xC),t.components)},pb=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function vC(s,t){return!!(s===t||pb(s)&&pb(t))}function yC(s,t){if(s.length!==t.length)return!1;for(var r=0;r<s.length;r++)if(!vC(s[r],t[r]))return!1;return!0}function wC(s,t){t===void 0&&(t=yC);var r=null;function l(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(r&&r.lastThis===this&&t(o,r.lastArgs))return r.lastResult;var d=s.apply(this,o);return r={lastResult:d,lastArgs:o,lastThis:this},d}return l.clear=function(){r=null},l}var jC={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},NC=function(t){return He("span",We({css:jC},t))},gb=NC,SC={guidance:function(t){var r=t.isSearchable,l=t.isMulti,o=t.tabSelectsValue,u=t.context,d=t.isInitialFocus;switch(u){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(o?", press Tab to select the option and exit the menu":"",".");case"input":return d?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(l?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,l=t.label,o=l===void 0?"":l,u=t.labels,d=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(o,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(o," is disabled. Select another option."):"option ".concat(o,", selected.");default:return""}},onFocus:function(t){var r=t.context,l=t.focused,o=t.options,u=t.label,d=u===void 0?"":u,p=t.selectValue,f=t.isDisabled,m=t.isSelected,x=t.isAppleDevice,v=function(S,j){return S&&S.length?"".concat(S.indexOf(j)+1," of ").concat(S.length):""};if(r==="value"&&p)return"value ".concat(d," focused, ").concat(v(p,l),".");if(r==="menu"&&x){var w=f?" disabled":"",N="".concat(m?" selected":"").concat(w);return"".concat(d).concat(N,", ").concat(v(o,l),".")}return""},onFilter:function(t){var r=t.inputValue,l=t.resultsMessage;return"".concat(l).concat(r?" for search term "+r:"",".")}},_C=function(t){var r=t.ariaSelection,l=t.focusedOption,o=t.focusedValue,u=t.focusableOptions,d=t.isFocused,p=t.selectValue,f=t.selectProps,m=t.id,x=t.isAppleDevice,v=f.ariaLiveMessages,w=f.getOptionLabel,N=f.inputValue,T=f.isMulti,S=f.isOptionDisabled,j=f.isSearchable,k=f.menuIsOpen,_=f.options,O=f.screenReaderStatus,q=f.tabSelectsValue,M=f.isLoading,L=f["aria-label"],U=f["aria-live"],W=b.useMemo(function(){return Ge(Ge({},SC),v||{})},[v]),Z=b.useMemo(function(){var G="";if(r&&W.onChange){var C=r.option,R=r.options,Y=r.removedValue,te=r.removedValues,Ne=r.value,z=function(Ce){return Array.isArray(Ce)?null:Ce},J=Y||C||z(Ne),se=J?w(J):"",ue=R||te||void 0,ye=ue?ue.map(w):[],Te=Ge({isDisabled:J&&S(J,p),label:se,labels:ye},r);G=W.onChange(Te)}return G},[r,W,S,p,w]),I=b.useMemo(function(){var G="",C=l||o,R=!!(l&&p&&p.includes(l));if(C&&W.onFocus){var Y={focused:C,label:w(C),isDisabled:S(C,p),isSelected:R,options:u,context:C===l?"menu":"value",selectValue:p,isAppleDevice:x};G=W.onFocus(Y)}return G},[l,o,w,S,W,u,p,x]),P=b.useMemo(function(){var G="";if(k&&_.length&&!M&&W.onFilter){var C=O({count:u.length});G=W.onFilter({inputValue:N,resultsMessage:C})}return G},[u,N,k,W,_,O,M]),Q=r?.action==="initial-input-focus",$=b.useMemo(function(){var G="";if(W.guidance){var C=o?"value":k?"menu":"input";G=W.guidance({"aria-label":L,context:C,isDisabled:l&&S(l,p),isMulti:T,isSearchable:j,tabSelectsValue:q,isInitialFocus:Q})}return G},[L,l,o,T,S,j,k,W,p,q,Q]),E=He(b.Fragment,null,He("span",{id:"aria-selection"},Z),He("span",{id:"aria-focused"},I),He("span",{id:"aria-results"},P),He("span",{id:"aria-guidance"},$));return He(b.Fragment,null,He(gb,{id:m},Q&&E),He(gb,{"aria-live":U,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},d&&!Q&&E))},CC=_C,Yf=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],EC=new RegExp("["+Yf.map(function(s){return s.letters}).join("")+"]","g"),y0={};for(var xf=0;xf<Yf.length;xf++)for(var bf=Yf[xf],vf=0;vf<bf.letters.length;vf++)y0[bf.letters[vf]]=bf.base;var w0=function(t){return t.replace(EC,function(r){return y0[r]})},TC=wC(w0),xb=function(t){return t.replace(/^\s+|\s+$/g,"")},kC=function(t){return"".concat(t.label," ").concat(t.value)},AC=function(t){return function(r,l){if(r.data.__isNew__)return!0;var o=Ge({ignoreCase:!0,ignoreAccents:!0,stringify:kC,trim:!0,matchFrom:"any"},t),u=o.ignoreCase,d=o.ignoreAccents,p=o.stringify,f=o.trim,m=o.matchFrom,x=f?xb(l):l,v=f?xb(p(r)):p(r);return u&&(x=x.toLowerCase(),v=v.toLowerCase()),d&&(x=TC(x),v=w0(v)),m==="start"?v.substr(0,x.length)===x:v.indexOf(x)>-1}},OC=["innerRef"];function RC(s){var t=s.innerRef,r=Ba(s,OC),l=s_(r,"onExited","in","enter","exit","appear");return He("input",We({ref:t},l,{css:vh({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var DC=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function MC(s){var t=s.isEnabled,r=s.onBottomArrive,l=s.onBottomLeave,o=s.onTopArrive,u=s.onTopLeave,d=b.useRef(!1),p=b.useRef(!1),f=b.useRef(0),m=b.useRef(null),x=b.useCallback(function(j,k){if(m.current!==null){var _=m.current,O=_.scrollTop,q=_.scrollHeight,M=_.clientHeight,L=m.current,U=k>0,W=q-M-O,Z=!1;W>k&&d.current&&(l&&l(j),d.current=!1),U&&p.current&&(u&&u(j),p.current=!1),U&&k>W?(r&&!d.current&&r(j),L.scrollTop=q,Z=!0,d.current=!0):!U&&-k>O&&(o&&!p.current&&o(j),L.scrollTop=0,Z=!0,p.current=!0),Z&&DC(j)}},[r,l,o,u]),v=b.useCallback(function(j){x(j,j.deltaY)},[x]),w=b.useCallback(function(j){f.current=j.changedTouches[0].clientY},[]),N=b.useCallback(function(j){var k=f.current-j.changedTouches[0].clientY;x(j,k)},[x]),T=b.useCallback(function(j){if(j){var k=t_?{passive:!1}:!1;j.addEventListener("wheel",v,k),j.addEventListener("touchstart",w,k),j.addEventListener("touchmove",N,k)}},[N,w,v]),S=b.useCallback(function(j){j&&(j.removeEventListener("wheel",v,!1),j.removeEventListener("touchstart",w,!1),j.removeEventListener("touchmove",N,!1))},[N,w,v]);return b.useEffect(function(){if(t){var j=m.current;return T(j),function(){S(j)}}},[t,T,S]),function(j){m.current=j}}var bb=["boxSizing","height","overflow","paddingRight","position"],vb={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function yb(s){s.cancelable&&s.preventDefault()}function wb(s){s.stopPropagation()}function jb(){var s=this.scrollTop,t=this.scrollHeight,r=s+this.offsetHeight;s===0?this.scrollTop=1:r===t&&(this.scrollTop=s-1)}function Nb(){return"ontouchstart"in window||navigator.maxTouchPoints}var Sb=!!(typeof window<"u"&&window.document&&window.document.createElement),cl=0,Rr={capture:!1,passive:!1};function LC(s){var t=s.isEnabled,r=s.accountForScrollbars,l=r===void 0?!0:r,o=b.useRef({}),u=b.useRef(null),d=b.useCallback(function(f){if(Sb){var m=document.body,x=m&&m.style;if(l&&bb.forEach(function(T){var S=x&&x[T];o.current[T]=S}),l&&cl<1){var v=parseInt(o.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,N=window.innerWidth-w+v||0;Object.keys(vb).forEach(function(T){var S=vb[T];x&&(x[T]=S)}),x&&(x.paddingRight="".concat(N,"px"))}m&&Nb()&&(m.addEventListener("touchmove",yb,Rr),f&&(f.addEventListener("touchstart",jb,Rr),f.addEventListener("touchmove",wb,Rr))),cl+=1}},[l]),p=b.useCallback(function(f){if(Sb){var m=document.body,x=m&&m.style;cl=Math.max(cl-1,0),l&&cl<1&&bb.forEach(function(v){var w=o.current[v];x&&(x[v]=w)}),m&&Nb()&&(m.removeEventListener("touchmove",yb,Rr),f&&(f.removeEventListener("touchstart",jb,Rr),f.removeEventListener("touchmove",wb,Rr)))}},[l]);return b.useEffect(function(){if(t){var f=u.current;return d(f),function(){p(f)}}},[t,d,p]),function(f){u.current=f}}var $C=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},zC={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function PC(s){var t=s.children,r=s.lockEnabled,l=s.captureEnabled,o=l===void 0?!0:l,u=s.onBottomArrive,d=s.onBottomLeave,p=s.onTopArrive,f=s.onTopLeave,m=MC({isEnabled:o,onBottomArrive:u,onBottomLeave:d,onTopArrive:p,onTopLeave:f}),x=LC({isEnabled:r}),v=function(N){m(N),x(N)};return He(b.Fragment,null,r&&He("div",{onClick:$C,css:zC}),t(v))}var UC={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},IC=function(t){var r=t.name,l=t.onFocus;return He("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:l,css:UC,value:"",onChange:function(){}})},BC=IC;function Sh(s){var t;return typeof window<"u"&&window.navigator!=null?s.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function qC(){return Sh(/^iPhone/i)}function j0(){return Sh(/^Mac/i)}function HC(){return Sh(/^iPad/i)||j0()&&navigator.maxTouchPoints>1}function VC(){return qC()||HC()}function FC(){return j0()||VC()}var GC=function(t){return t.label},YC=function(t){return t.label},KC=function(t){return t.value},JC=function(t){return!!t.isDisabled},WC={clearIndicator:R_,container:w_,control:U_,dropdownIndicator:A_,group:H_,groupHeading:F_,indicatorsContainer:__,indicatorSeparator:M_,input:J_,loadingIndicator:z_,loadingMessage:g_,menu:c_,menuList:h_,menuPortal:v_,multiValue:eC,multiValueLabel:tC,multiValueRemove:nC,noOptionsMessage:p_,option:oC,placeholder:dC,singleValue:mC,valueContainer:N_},XC={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},QC=4,N0=4,ZC=38,eE=N0*2,tE={baseUnit:N0,controlHeight:ZC,menuGutter:eE},yf={borderRadius:QC,colors:XC,spacing:tE},nE={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:hb(),captureMenuScroll:!hb(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:AC(),formatGroupLabel:GC,getOptionLabel:YC,getOptionValue:KC,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:JC,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!ZS(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function _b(s,t,r,l){var o=C0(s,t,r),u=E0(s,t,r),d=_0(s,t),p=yc(s,t);return{type:"option",data:t,isDisabled:o,isSelected:u,label:d,value:p,index:l}}function lc(s,t){return s.options.map(function(r,l){if("options"in r){var o=r.options.map(function(d,p){return _b(s,d,t,p)}).filter(function(d){return Eb(s,d)});return o.length>0?{type:"group",data:r,options:o,index:l}:void 0}var u=_b(s,r,t,l);return Eb(s,u)?u:void 0}).filter(n_)}function S0(s){return s.reduce(function(t,r){return r.type==="group"?t.push.apply(t,mh(r.options.map(function(l){return l.data}))):t.push(r.data),t},[])}function Cb(s,t){return s.reduce(function(r,l){return l.type==="group"?r.push.apply(r,mh(l.options.map(function(o){return{data:o.data,id:"".concat(t,"-").concat(l.index,"-").concat(o.index)}}))):r.push({data:l.data,id:"".concat(t,"-").concat(l.index)}),r},[])}function aE(s,t){return S0(lc(s,t))}function Eb(s,t){var r=s.inputValue,l=r===void 0?"":r,o=t.data,u=t.isSelected,d=t.label,p=t.value;return(!k0(s)||!u)&&T0(s,{label:d,value:p,data:o},l)}function sE(s,t){var r=s.focusedValue,l=s.selectValue,o=l.indexOf(r);if(o>-1){var u=t.indexOf(r);if(u>-1)return r;if(o<t.length)return t[o]}return null}function rE(s,t){var r=s.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var wf=function(t,r){var l,o=(l=t.find(function(u){return u.data===r}))===null||l===void 0?void 0:l.id;return o||null},_0=function(t,r){return t.getOptionLabel(r)},yc=function(t,r){return t.getOptionValue(r)};function C0(s,t,r){return typeof s.isOptionDisabled=="function"?s.isOptionDisabled(t,r):!1}function E0(s,t,r){if(r.indexOf(t)>-1)return!0;if(typeof s.isOptionSelected=="function")return s.isOptionSelected(t,r);var l=yc(s,t);return r.some(function(o){return yc(s,o)===l})}function T0(s,t,r){return s.filterOption?s.filterOption(t,r):!0}var k0=function(t){var r=t.hideSelectedOptions,l=t.isMulti;return r===void 0?l:r},iE=1,A0=(function(s){CN(r,s);var t=kN(r);function r(l){var o;if(SN(this,r),o=t.call(this,l),o.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,m){var x=o.props,v=x.onChange,w=x.name;m.name=w,o.ariaOnChange(f,m),v(f,m)},o.setValue=function(f,m,x){var v=o.props,w=v.closeMenuOnSelect,N=v.isMulti,T=v.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:T}),w&&(o.setState({inputIsHiddenAfterUpdate:!N}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:m,option:x})},o.selectOption=function(f){var m=o.props,x=m.blurInputOnSelect,v=m.isMulti,w=m.name,N=o.state.selectValue,T=v&&o.isOptionSelected(f,N),S=o.isOptionDisabled(f,N);if(T){var j=o.getOptionValue(f);o.setValue(N.filter(function(k){return o.getOptionValue(k)!==j}),"deselect-option",f)}else if(!S)v?o.setValue([].concat(mh(N),[f]),"select-option",f):o.setValue(f,"select-option");else{o.ariaOnChange(f,{action:"select-option",option:f,name:w});return}x&&o.blurInput()},o.removeValue=function(f){var m=o.props.isMulti,x=o.state.selectValue,v=o.getOptionValue(f),w=x.filter(function(T){return o.getOptionValue(T)!==v}),N=Wo(m,w,w[0]||null);o.onChange(N,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(Wo(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,m=o.state.selectValue,x=m[m.length-1],v=m.slice(0,m.length-1),w=Wo(f,v,v[0]||null);x&&o.onChange(w,{action:"pop-value",removedValue:x})},o.getFocusedOptionId=function(f){return wf(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return Cb(lc(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,m=new Array(f),x=0;x<f;x++)m[x]=arguments[x];return KS.apply(void 0,[o.props.classNamePrefix].concat(m))},o.getOptionLabel=function(f){return _0(o.props,f)},o.getOptionValue=function(f){return yc(o.props,f)},o.getStyles=function(f,m){var x=o.props.unstyled,v=WC[f](m,x);v.boxSizing="border-box";var w=o.props.styles[f];return w?w(v,m):v},o.getClassNames=function(f,m){var x,v;return(x=(v=o.props.classNames)[f])===null||x===void 0?void 0:x.call(v,m)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return bC(o.props)},o.buildCategorizedOptions=function(){return lc(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return S0(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,m){o.setState({ariaSelection:Ge({value:f},m)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var m=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():m&&o.openMenu("first"):(m&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0)&&!o.props.isDisabled){var m=o.props,x=m.isMulti,v=m.menuIsOpen;o.focusInput(),v?(o.setState({inputIsHiddenAfterUpdate:!x}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Lc(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var m=f.touches,x=m&&m.item(0);x&&(o.initialTouchX=x.clientX,o.initialTouchY=x.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var m=f.touches,x=m&&m.item(0);if(x){var v=Math.abs(x.clientX-o.initialTouchX),w=Math.abs(x.clientY-o.initialTouchY),N=5;o.userIsDragging=v>N||w>N}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var m=o.props.inputValue,x=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(x,{action:"input-change",prevInputValue:m}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var m=o.props.inputValue;if(o.menuListRef&&o.menuListRef.contains(document.activeElement)){o.inputRef.focus();return}o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:m}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1})},o.onOptionHover=function(f){if(!(o.blockOptionHover||o.state.focusedOption===f)){var m=o.getFocusableOptions(),x=m.indexOf(f);o.setState({focusedOption:f,focusedOptionId:x>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return k0(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var m=o.props,x=m.isMulti,v=m.backspaceRemovesValue,w=m.escapeClearsValue,N=m.inputValue,T=m.isClearable,S=m.isDisabled,j=m.menuIsOpen,k=m.onKeyDown,_=m.tabSelectsValue,O=m.openMenuOnFocus,q=o.state,M=q.focusedOption,L=q.focusedValue,U=q.selectValue;if(!S&&!(typeof k=="function"&&(k(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!x||N)return;o.focusValue("previous");break;case"ArrowRight":if(!x||N)return;o.focusValue("next");break;case"Delete":case"Backspace":if(N)return;if(L)o.removeValue(L);else{if(!v)return;x?o.popValue():T&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!j||!_||!M||O&&o.isOptionSelected(M,U))return;o.selectOption(M);break;case"Enter":if(f.keyCode===229)break;if(j){if(!M||o.isComposing)return;o.selectOption(M);break}return;case"Escape":j?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:N}),o.onMenuClose()):T&&w&&o.clearValue();break;case" ":if(N)return;if(!j){o.openMenu("first");break}if(!M)return;o.selectOption(M);break;case"ArrowUp":j?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":j?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!j)return;o.focusOption("pageup");break;case"PageDown":if(!j)return;o.focusOption("pagedown");break;case"Home":if(!j)return;o.focusOption("first");break;case"End":if(!j)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++iE),o.state.selectValue=db(l.value),l.menuIsOpen&&o.state.selectValue.length){var u=o.getFocusableOptionsWithIds(),d=o.buildFocusableOptions(),p=d.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=u,o.state.focusedOption=d[p],o.state.focusedOptionId=wf(u,d[p])}return o}return _N(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&fb(this.menuListRef,this.focusedOptionRef),FC()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(o){var u=this.props,d=u.isDisabled,p=u.menuIsOpen,f=this.state.isFocused;(f&&!d&&o.isDisabled||f&&p&&!o.menuIsOpen)&&this.focusInput(),f&&d&&!o.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!f&&!d&&o.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(fb(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(o,u){this.props.onInputChange(o,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(o){var u=this,d=this.state,p=d.selectValue,f=d.isFocused,m=this.buildFocusableOptions(),x=o==="first"?0:m.length-1;if(!this.props.isMulti){var v=m.indexOf(p[0]);v>-1&&(x=v)}this.scrollToFocusedOptionOnUpdate=!(f&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[x],focusedOptionId:this.getFocusedOptionId(m[x])},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(o){var u=this.state,d=u.selectValue,p=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var f=d.indexOf(p);p||(f=-1);var m=d.length-1,x=-1;if(d.length){switch(o){case"previous":f===0?x=0:f===-1?x=m:x=f-1;break;case"next":f>-1&&f<m&&(x=f+1);break}this.setState({inputIsHidden:x!==-1,focusedValue:d[x]})}}}},{key:"focusOption",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,p=this.getFocusableOptions();if(p.length){var f=0,m=p.indexOf(d);d||(m=-1),o==="up"?f=m>0?m-1:p.length-1:o==="down"?f=(m+1)%p.length:o==="pageup"?(f=m-u,f<0&&(f=0)):o==="pagedown"?(f=m+u,f>p.length-1&&(f=p.length-1)):o==="last"&&(f=p.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:p[f],focusedValue:null,focusedOptionId:this.getFocusedOptionId(p[f])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(yf):Ge(Ge({},yf),this.props.theme):yf})},{key:"getCommonProps",value:function(){var o=this.clearValue,u=this.cx,d=this.getStyles,p=this.getClassNames,f=this.getValue,m=this.selectOption,x=this.setValue,v=this.props,w=v.isMulti,N=v.isRtl,T=v.options,S=this.hasValue();return{clearValue:o,cx:u,getStyles:d,getClassNames:p,getValue:f,hasValue:S,isMulti:w,isRtl:N,options:T,selectOption:m,selectProps:v,setValue:x,theme:this.getTheme()}}},{key:"hasValue",value:function(){var o=this.state.selectValue;return o.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var o=this.props,u=o.isClearable,d=o.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(o,u){return C0(this.props,o,u)}},{key:"isOptionSelected",value:function(o,u){return E0(this.props,o,u)}},{key:"filterOption",value:function(o,u){return T0(this.props,o,u)}},{key:"formatOptionLabel",value:function(o,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,p=this.state.selectValue;return this.props.formatOptionLabel(o,{context:u,inputValue:d,selectValue:p})}else return this.getOptionLabel(o)}},{key:"formatGroupLabel",value:function(o){return this.props.formatGroupLabel(o)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var o=this.props,u=o.isDisabled,d=o.isSearchable,p=o.inputId,f=o.inputValue,m=o.tabIndex,x=o.form,v=o.menuIsOpen,w=o.required,N=this.getComponents(),T=N.Input,S=this.state,j=S.inputIsHidden,k=S.ariaSelection,_=this.commonProps,O=p||this.getElementId("input"),q=Ge(Ge(Ge({"aria-autocomplete":"list","aria-expanded":v,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":w,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},v&&{"aria-controls":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?k?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?b.createElement(T,We({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:O,innerRef:this.getInputRef,isDisabled:u,isHidden:j,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:x,type:"text",value:f},q)):b.createElement(RC,We({id:O,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:bc,onFocus:this.onInputFocus,disabled:u,tabIndex:m,inputMode:"none",form:x,value:""},q))})},{key:"renderPlaceholderOrValue",value:function(){var o=this,u=this.getComponents(),d=u.MultiValue,p=u.MultiValueContainer,f=u.MultiValueLabel,m=u.MultiValueRemove,x=u.SingleValue,v=u.Placeholder,w=this.commonProps,N=this.props,T=N.controlShouldRenderValue,S=N.isDisabled,j=N.isMulti,k=N.inputValue,_=N.placeholder,O=this.state,q=O.selectValue,M=O.focusedValue,L=O.isFocused;if(!this.hasValue()||!T)return k?null:b.createElement(v,We({},w,{key:"placeholder",isDisabled:S,isFocused:L,innerProps:{id:this.getElementId("placeholder")}}),_);if(j)return q.map(function(W,Z){var I=W===M,P="".concat(o.getOptionLabel(W),"-").concat(o.getOptionValue(W));return b.createElement(d,We({},w,{components:{Container:p,Label:f,Remove:m},isFocused:I,isDisabled:S,key:P,index:Z,removeProps:{onClick:function(){return o.removeValue(W)},onTouchEnd:function(){return o.removeValue(W)},onMouseDown:function($){$.preventDefault()}},data:W}),o.formatOptionLabel(W,"value"))});if(k)return null;var U=q[0];return b.createElement(x,We({},w,{data:U,isDisabled:S}),this.formatOptionLabel(U,"value"))}},{key:"renderClearIndicator",value:function(){var o=this.getComponents(),u=o.ClearIndicator,d=this.commonProps,p=this.props,f=p.isDisabled,m=p.isLoading,x=this.state.isFocused;if(!this.isClearable()||!u||f||!this.hasValue()||m)return null;var v={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,We({},d,{innerProps:v,isFocused:x}))}},{key:"renderLoadingIndicator",value:function(){var o=this.getComponents(),u=o.LoadingIndicator,d=this.commonProps,p=this.props,f=p.isDisabled,m=p.isLoading,x=this.state.isFocused;if(!u||!m)return null;var v={"aria-hidden":"true"};return b.createElement(u,We({},d,{innerProps:v,isDisabled:f,isFocused:x}))}},{key:"renderIndicatorSeparator",value:function(){var o=this.getComponents(),u=o.DropdownIndicator,d=o.IndicatorSeparator;if(!u||!d)return null;var p=this.commonProps,f=this.props.isDisabled,m=this.state.isFocused;return b.createElement(d,We({},p,{isDisabled:f,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var o=this.getComponents(),u=o.DropdownIndicator;if(!u)return null;var d=this.commonProps,p=this.props.isDisabled,f=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return b.createElement(u,We({},d,{innerProps:m,isDisabled:p,isFocused:f}))}},{key:"renderMenu",value:function(){var o=this,u=this.getComponents(),d=u.Group,p=u.GroupHeading,f=u.Menu,m=u.MenuList,x=u.MenuPortal,v=u.LoadingMessage,w=u.NoOptionsMessage,N=u.Option,T=this.commonProps,S=this.state.focusedOption,j=this.props,k=j.captureMenuScroll,_=j.inputValue,O=j.isLoading,q=j.loadingMessage,M=j.minMenuHeight,L=j.maxMenuHeight,U=j.menuIsOpen,W=j.menuPlacement,Z=j.menuPosition,I=j.menuPortalTarget,P=j.menuShouldBlockScroll,Q=j.menuShouldScrollIntoView,$=j.noOptionsMessage,E=j.onMenuScrollToTop,G=j.onMenuScrollToBottom;if(!U)return null;var C=function(se,ue){var ye=se.type,Te=se.data,De=se.isDisabled,Ce=se.isSelected,$e=se.label,Ye=se.value,Xe=S===Te,Se=De?void 0:function(){return o.onOptionHover(Te)},Me=De?void 0:function(){return o.selectOption(Te)},ke="".concat(o.getElementId("option"),"-").concat(ue),Je={id:ke,onClick:Me,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":o.state.isAppleDevice?void 0:Ce};return b.createElement(N,We({},T,{innerProps:Je,data:Te,isDisabled:De,isSelected:Ce,key:ke,label:$e,type:ye,value:Ye,isFocused:Xe,innerRef:Xe?o.getFocusedOptionRef:void 0}),o.formatOptionLabel(se.data,"menu"))},R;if(this.hasOptions())R=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var se=J.data,ue=J.options,ye=J.index,Te="".concat(o.getElementId("group"),"-").concat(ye),De="".concat(Te,"-heading");return b.createElement(d,We({},T,{key:Te,data:se,options:ue,Heading:p,headingProps:{id:De,data:J.data},label:o.formatGroupLabel(J.data)}),J.options.map(function(Ce){return C(Ce,"".concat(ye,"-").concat(Ce.index))}))}else if(J.type==="option")return C(J,"".concat(J.index))});else if(O){var Y=q({inputValue:_});if(Y===null)return null;R=b.createElement(v,T,Y)}else{var te=$({inputValue:_});if(te===null)return null;R=b.createElement(w,T,te)}var Ne={minMenuHeight:M,maxMenuHeight:L,menuPlacement:W,menuPosition:Z,menuShouldScrollIntoView:Q},z=b.createElement(u_,We({},T,Ne),function(J){var se=J.ref,ue=J.placerProps,ye=ue.placement,Te=ue.maxHeight;return b.createElement(f,We({},T,Ne,{innerRef:se,innerProps:{onMouseDown:o.onMenuMouseDown,onMouseMove:o.onMenuMouseMove},isLoading:O,placement:ye}),b.createElement(PC,{captureEnabled:k,onTopArrive:E,onBottomArrive:G,lockEnabled:P},function(De){return b.createElement(m,We({},T,{innerRef:function($e){o.getMenuListRef($e),De($e)},innerProps:{role:"listbox","aria-multiselectable":T.isMulti,id:o.getElementId("listbox")},isLoading:O,maxHeight:Te,focusedOption:S}),R)}))});return I||Z==="fixed"?b.createElement(x,We({},T,{appendTo:I,controlElement:this.controlRef,menuPlacement:W,menuPosition:Z}),z):z}},{key:"renderFormField",value:function(){var o=this,u=this.props,d=u.delimiter,p=u.isDisabled,f=u.isMulti,m=u.name,x=u.required,v=this.state.selectValue;if(x&&!this.hasValue()&&!p)return b.createElement(BC,{name:m,onFocus:this.onValueInputFocus});if(!(!m||p))if(f)if(d){var w=v.map(function(S){return o.getOptionValue(S)}).join(d);return b.createElement("input",{name:m,type:"hidden",value:w})}else{var N=v.length>0?v.map(function(S,j){return b.createElement("input",{key:"i-".concat(j),name:m,type:"hidden",value:o.getOptionValue(S)})}):b.createElement("input",{name:m,type:"hidden",value:""});return b.createElement("div",null,N)}else{var T=v[0]?this.getOptionValue(v[0]):"";return b.createElement("input",{name:m,type:"hidden",value:T})}}},{key:"renderLiveRegion",value:function(){var o=this.commonProps,u=this.state,d=u.ariaSelection,p=u.focusedOption,f=u.focusedValue,m=u.isFocused,x=u.selectValue,v=this.getFocusableOptions();return b.createElement(CC,We({},o,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:p,focusedValue:f,isFocused:m,selectValue:x,focusableOptions:v,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var o=this.getComponents(),u=o.Control,d=o.IndicatorsContainer,p=o.SelectContainer,f=o.ValueContainer,m=this.props,x=m.className,v=m.id,w=m.isDisabled,N=m.menuIsOpen,T=this.state.isFocused,S=this.commonProps=this.getCommonProps();return b.createElement(p,We({},S,{className:x,innerProps:{id:v,onKeyDown:this.onKeyDown},isDisabled:w,isFocused:T}),this.renderLiveRegion(),b.createElement(u,We({},S,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:w,isFocused:T,menuIsOpen:N}),b.createElement(f,We({},S,{isDisabled:w}),this.renderPlaceholderOrValue(),this.renderInput()),b.createElement(d,We({},S,{isDisabled:w}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(o,u){var d=u.prevProps,p=u.clearFocusValueOnUpdate,f=u.inputIsHiddenAfterUpdate,m=u.ariaSelection,x=u.isFocused,v=u.prevWasFocused,w=u.instancePrefix,N=o.options,T=o.value,S=o.menuIsOpen,j=o.inputValue,k=o.isMulti,_=db(T),O={};if(d&&(T!==d.value||N!==d.options||S!==d.menuIsOpen||j!==d.inputValue)){var q=S?aE(o,_):[],M=S?Cb(lc(o,_),"".concat(w,"-option")):[],L=p?sE(u,_):null,U=rE(u,q),W=wf(M,U);O={selectValue:_,focusedOption:U,focusedOptionId:W,focusableOptionsWithIds:M,focusedValue:L,clearFocusValueOnUpdate:!1}}var Z=f!=null&&o!==d?{inputIsHidden:f,inputIsHiddenAfterUpdate:void 0}:{},I=m,P=x&&v;return x&&!P&&(I={value:Wo(k,_,_[0]||null),options:_,action:"initial-input-focus"},P=!v),m?.action==="initial-input-focus"&&(I=null),Ge(Ge(Ge({},O),Z),{},{prevProps:o,ariaSelection:I,prevWasFocused:P})}}]),r})(b.Component);A0.defaultProps=nE;var lE=b.forwardRef(function(s,t){var r=NN(s);return b.createElement(A0,We({ref:t},r))}),oE=lE;const Ls="https://api.monsite.fr";function cE(s){const t=new Date(s);return t.setDate(s.getDate()-(s.getDay()+6)%7),Array.from({length:7},(r,l)=>{const o=new Date(t);return o.setDate(t.getDate()+l),o})}function uE(){const s=[{bg:"bg-blue-50",border:"border-blue-100",text:"text-blue-700"},{bg:"bg-yellow-50",border:"border-yellow-100",text:"text-yellow-700"},{bg:"bg-purple-50",border:"border-purple-100",text:"text-purple-700"},{bg:"bg-green-50",border:"border-green-100",text:"text-green-700"},{bg:"bg-pink-50",border:"border-pink-100",text:"text-pink-700"},{bg:"bg-orange-50",border:"border-orange-100",text:"text-orange-700"}];function t(P,Q){let $="✨";/art|dessin|peinture|atelier/i.test(P)?$="🎨":/parc|jardin|potager|plante/i.test(P)?$="🌱":/zoo|animal|ferme/i.test(P)?$="🦁":/repas|déjeuner|dîner|goûter|restauration/i.test(P)?$="🍽️":/lecture|histoire|conte|livre/i.test(P)?$="📖":/musique|danse|chant|eveil|chanson/i.test(P)?$="🎵":/extérieur|jeux|sport|parc|cour/i.test(P)?$="🏃":/libre|autonome/i.test(P)&&($="🎮");const E=s[Q%s.length];return{emoji:$,...E}}const[r,l]=b.useState(new Date),[o,u]=b.useState([]),[d,p]=b.useState(!1),[f,m]=b.useState({date:new Date().toISOString().split("T")[0],startTime:"07:00",endTime:"08:00",name:"",comment:"",nannyIds:[],showNannyDropdown:!1}),[x,v]=b.useState([]),[w,N]=b.useState(null),[T,S]=b.useState(!1);b.useEffect(()=>{fe(`${Ls}/nannies`,{credentials:"include"}).then(P=>P.json()).then(P=>v(P))},[]),b.useEffect(()=>{fe(`${Ls}/schedules`,{credentials:"include"}).then(P=>P.json()).then(P=>u(P))},[r]);const j=async()=>{if(!f.name||!f.startTime||!f.endTime||f.nannyIds.length===0||!f.date)return;let P;if(w?P=await fe(`${Ls}/schedules/${w.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({date:f.date,startTime:f.startTime,endTime:f.endTime,name:f.name,nannyIds:f.nannyIds,comment:f.comment})}):P=await fe(`${Ls}/schedules`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({date:f.date,startTime:f.startTime,endTime:f.endTime,name:f.name,nannyIds:f.nannyIds,comment:f.comment})}),!P.ok){const Q=await P.text();console.error("Erreur API:",P.status,String(Q)),alert("Erreur lors de la sauvegarde de l'activité: "+Q);return}await fe(`${Ls}/schedules`,{credentials:"include"}).then(Q=>Q.json()).then(Q=>u(Q)),m({date:new Date().toISOString().split("T")[0],startTime:"07:00",endTime:"08:00",name:"",comment:"",nannyIds:[],showNannyDropdown:!1}),p(!1),N(null)};function k(P){N(P),S(!0)}async function _(P){S(!1),N(null),await fe(`${Ls}/schedules/${P}`,{method:"DELETE",credentials:"include"}),await fe(`${Ls}/schedules`,{credentials:"include"}).then(Q=>Q.json()).then(Q=>u(Q))}function O(P){S(!1),p(!0),m({date:P.date?P.date.split("T")[0]:new Date().toISOString().split("T")[0],startTime:P.startTime,endTime:P.endTime,name:P.name,comment:P.comment||"",nannyIds:P.nannies&&P.nannies.length>0?P.nannies.map(Q=>Q.id):P.nannyIds||[],showNannyDropdown:!1})}const q=cE(r),{locale:M,t:L}=Rt(),U=q.map(P=>({label:new Intl.DateTimeFormat(M,{weekday:"long"}).format(P),short:new Intl.DateTimeFormat(M,{weekday:"short"}).format(P)})),W=`${new Intl.DateTimeFormat(M,{month:"short",day:"numeric"}).format(q[0])} - ${new Intl.DateTimeFormat(M,{month:"short",day:"numeric"}).format(q[6])}`,{user:Z}=fn(),I=!!Z&&String(Z.role||"").toLowerCase()==="parent";return a.jsx("div",{className:"min-h-screen bg-[#f7f8fa] flex flex-col items-center py-8 px-2",children:a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:L("activities.title")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:W})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 md:mt-0",children:[a.jsx("button",{onClick:()=>l(new Date(r.setDate(r.getDate()-7))),className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-100 text-gray-500 text-xl transition",children:"<"}),a.jsx("button",{onClick:()=>l(new Date(r.setDate(r.getDate()+7))),className:"w-9 h-9 flex items-center justify-center rounded-lg border border-gray-200 bg-white hover:bg-gray-100 text-gray-500 text-xl transition",children:">"}),!I&&a.jsx("button",{onClick:()=>p(!0),className:"bg-[#0b5566] text-white px-5 py-2 rounded-lg font-bold shadow hover:bg-[#08323a] transition text-base ml-2",children:L("activities.add")})]})]}),a.jsx("div",{className:"hidden lg:block max-w-5xl mx-auto",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[600px] w-full border-separate border-spacing-0 bg-gradient-to-br from-blue-50 via-pink-50 to-yellow-50 rounded-2xl shadow-xl border border-blue-100",style:{tableLayout:"fixed"},children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"font-bold text-xs md:text-base p-2 md:p-3 border-b w-16 md:w-20",style:{background:"#f7f4d7",color:"#08323a",borderColor:"#cfeef9"},children:L("activities.table.hour")}),q.map((P,Q)=>a.jsxs("th",{className:"font-bold p-2 md:p-3 text-center border-b",style:{width:"12.5%",background:"#f7f4d7",color:"#08323a",borderColor:"#cfeef9"},children:[a.jsx("div",{className:"text-xs md:text-base",children:U[Q].label}),a.jsx("div",{className:"text-[10px] md:text-xs text-gray-400",children:new Intl.DateTimeFormat(M).format(P)})]},Q))]})}),a.jsx("tbody",{children:(()=>{const P=Array.from({length:13},()=>Array(7).fill(!1));return[...Array(13)].map((Q,$)=>{const E=7+$,G=`${E}h`;return a.jsxs("tr",{children:[a.jsx("td",{className:"p-2 w-16 md:w-20 text-xs md:text-base font-bold border-t border-b border-gray-100 bg-gray-50 text-gray-500",children:G}),q.map((C,R)=>{if(P[$][R])return null;const Y=C.toISOString().split("T")[0],te=o.filter(Ne=>{const z=Ne.date.split("T")[0],[J]=Ne.startTime.split(":").map(Number);return z===Y&&J===E});if(te.length>0){const Ne=o.filter(z=>z.date.split("T")[0]===Y);return te.map(z=>{const J=Ne.findIndex(Ye=>Ye.id===z.id),[se]=z.startTime.split(":").map(Number),[ue,ye]=z.endTime.split(":").map(Number),Te=se-7;let De=ue-7;(ye>0||ye===0)&&(De+=1);const Ce=Math.max(1,De-Te);for(let Ye=Te+1;Ye<Te+Ce;Ye++)Ye<13&&(P[Ye][R]=!0);const $e=t(z.name,J);return a.jsx("td",{rowSpan:Ce,className:`align-top p-0 h-full bg-gradient-to-br from-white via-${$e.bg.replace("bg-","")} to-${$e.bg.replace("bg-","")} border-l-4 ${$e.border} rounded-2xl shadow-lg cursor-pointer transition-transform hover:-translate-y-1 hover:shadow-2xl duration-200 overflow-hidden`,style:{verticalAlign:"top",fontFamily:"Inter, Arial, sans-serif"},onClick:()=>k(z),tabIndex:0,children:a.jsx("div",{className:"flex flex-col gap-2 h-full rounded-2xl px-4 py-3",style:{minHeight:"90px",position:"relative"},children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-2xl drop-shadow-sm",children:$e.emoji}),a.jsx("span",{className:`font-semibold text-lg ${$e.text} tracking-tight truncate`,children:z.name})]})})},z.id)})}else return a.jsx("td",{className:"p-2 border-t border-b border-gray-100"},R)})]},G)})})()})]})})}),a.jsx("div",{className:"block lg:hidden",children:a.jsx("div",{className:"flex flex-col gap-6",children:q.map((P,Q)=>{const $=P.toISOString().split("T")[0],E=o.filter(C=>C.date.split("T")[0]===$),G=[{label:L("activities.slot.morning"),color:"bg-yellow-50 border-yellow-200 text-yellow-800",emoji:"🌞",start:7,end:12},{label:L("activities.slot.afternoon"),color:"bg-blue-50 border-blue-200 text-blue-800",emoji:"🌤️",start:12,end:19}];return a.jsxs("div",{className:"bg-white rounded-2xl shadow border border-gray-100 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-bold text-base text-gray-700",children:U[Q].label}),a.jsx("span",{className:"text-xs text-gray-400",children:new Intl.DateTimeFormat(M).format(P)})]}),E.length===0?a.jsx("div",{className:"text-xs text-gray-400 italic",children:L("activities.none")}):a.jsx("div",{className:"flex flex-col gap-4",children:G.map(C=>{const R=E.filter(Y=>{const te=parseInt(Y.startTime);return te>=C.start&&te<C.end}).sort((Y,te)=>parseInt(Y.startTime)-parseInt(te.startTime));return R.length===0?null:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-lg",children:C.emoji}),a.jsx("span",{className:`font-semibold text-xs px-2 py-1 rounded bg-white/60 border border-gray-200 ${C.color}`,children:C.label})]}),a.jsx("div",{className:"flex flex-col gap-2",children:R.map((Y,te)=>{const Ne=t(Y.name,te);return a.jsxs("div",{className:`rounded-xl shadow border flex flex-col gap-1 ${Ne.bg} ${Ne.border} px-2 py-2 cursor-pointer transition-transform hover:scale-105 active:scale-95 overflow-hidden`,onClick:()=>k(Y),children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:`font-bold text-base mb-1 ${Ne.text} truncate`,children:Y.name}),a.jsxs("span",{className:"text-xs text-gray-600",children:[Y.startTime," - ",Y.endTime]})]}),Y.comment&&a.jsx("span",{className:"block text-sm text-gray-700 bg-gray-50 rounded px-2 py-1 mb-1 w-full whitespace-pre-line",children:Y.comment})]},Y.id)})})]},C.label)})})]},Q)})})}),T&&w&&a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-2xl relative border-4 border-pink-100 flex flex-col items-center gap-6 animate-fade-in",children:[a.jsx("button",{onClick:()=>S(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[a.jsx("span",{className:"text-3xl",children:t(w.name,0).emoji}),a.jsx("span",{className:"font-extrabold text-xl text-pink-700 mb-2",children:w.name})]}),a.jsxs("div",{className:"w-full flex flex-col gap-2 mb-2",children:[a.jsxs("div",{className:"flex gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("assignment.modal.date"),":"]})," ",a.jsx("span",{children:w.date?w.date.split("T")[0]:""})]}),a.jsxs("div",{className:"flex gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("label.start"),":"]})," ",a.jsx("span",{children:w.startTime})]}),a.jsxs("div",{className:"flex gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("label.end"),":"]})," ",a.jsx("span",{children:w.endTime})]}),w.comment&&a.jsxs("div",{className:"flex gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("label.comment"),":"]})," ",a.jsx("span",{children:w.comment})]}),w.nannies&&w.nannies.length>0?a.jsxs("div",{className:"flex flex-col gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("activities.modal.nannies_label"),":"]}),a.jsx("div",{className:"flex flex-wrap gap-2 min-h-[40px]",children:w.nannies.map(P=>a.jsx("span",{className:"px-3 py-1 rounded-full font-semibold text-sm shadow flex items-center justify-center text-center min-w-[80px]",style:{background:"#a9ddf2",color:"#08323a",border:"1px solid #cfeef9"},children:P.name},P.id))})]}):w.nannyIds&&w.nannyIds.length>0?a.jsxs("div",{className:"flex flex-col gap-2 text-gray-700 text-base",children:[a.jsxs("span",{className:"font-semibold",children:[L("activities.modal.nannies_label"),":"]}),x.length===0&&a.jsx("span",{className:"text-red-500",children:L("activities.modal.no_nannies_loaded")}),a.jsx("div",{className:"flex flex-wrap gap-2 min-h-[40px]",children:w.nannyIds.map(P=>{const Q=x.find($=>String($.id)===String(P));return a.jsx("span",{className:"px-3 py-1 rounded-full font-semibold text-sm shadow flex items-center justify-center text-center min-w-[80px]",style:{background:"#a9ddf2",color:"#08323a",border:"1px solid #cfeef9"},children:Q?Q.name:`ID: ${P}`},P)})})]}):null]}),a.jsxs("div",{className:"flex flex-col gap-4 w-full mt-2",children:[a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl font-bold text-lg shadow transition-transform hover:scale-105 active:scale-95",onClick:()=>O(w),style:{background:"#a9ddf2",color:"#08323a",border:"1px solid #cfeef9"},children:[a.jsx("span",{className:"text-2xl",children:"✏️"})," Modifier"]}),a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl font-bold text-lg shadow transition-transform hover:scale-105 active:scale-95",onClick:()=>_(w.id),style:{background:"#fcdcdf",color:"#7a2a2a",border:"1px solid #fbd5d8"},children:[a.jsx("span",{className:"text-2xl",children:"🗑️"})," Supprimer"]})]})]})}),d&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"rounded-2xl shadow-2xl p-8 w-full max-w-md relative bg-white border border-gray-100",children:[a.jsx("button",{onClick:()=>p(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-2xl font-extrabold mb-4 text-center",style:{color:"#0b5566"},children:L(w?"activities.modal.edit":"activities.modal.add")}),a.jsxs("form",{className:"space-y-4 mb-2",onSubmit:P=>{P.preventDefault(),j()},children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",value:f.date,onChange:P=>m(Q=>({...Q,date:P.target.value})),className:"border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-[#a9ddf2]",style:{borderColor:"#cfeef9"},required:!0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:L("label.start")}),a.jsx("input",{type:"time",min:"07:00",max:"19:00",value:f.startTime,onChange:P=>m(Q=>({...Q,startTime:P.target.value})),className:"border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-[#a9ddf2]",style:{borderColor:"#cfeef9"},required:!0})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:L("label.end")}),a.jsx("input",{type:"time",min:"07:00",max:"19:00",value:f.endTime,onChange:P=>m(Q=>({...Q,endTime:P.target.value})),className:"border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-[#a9ddf2]",style:{borderColor:"#cfeef9"},required:!0})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:L("label.activityName")||"Nom de l'activité"}),a.jsx("input",{type:"text",placeholder:L("label.activityName")||"Nom de l'activité",value:f.name,onChange:P=>m(Q=>({...Q,name:P.target.value})),className:"border rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-[#a9ddf2]",style:{borderColor:"#cfeef9"},required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:L("label.comment.optional")||"Commentaire (optionnel)"}),a.jsx("input",{type:"text",placeholder:L("label.comment")||"Commentaire",value:f.comment,onChange:P=>m(Q=>({...Q,comment:P.target.value})),className:"border border-blue-200 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-blue-400"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nannies assignées"}),a.jsx(oE,{isMulti:!0,options:x.map(P=>({value:P.id,label:P.name})),value:x.filter(P=>f.nannyIds.includes(P.id)).map(P=>({value:P.id,label:P.name})),onChange:P=>{m(Q=>({...Q,nannyIds:P?P.map($=>$.value):[]}))},placeholder:L("children.nannies.label"),className:"react-select-container",classNamePrefix:"react-select",styles:{control:P=>({...P,borderColor:"#bfdbfe",minHeight:"3rem",boxShadow:"none"}),multiValue:P=>({...P,backgroundColor:"#dbeafe",color:"#1d4ed8"}),option:(P,Q)=>({...P,backgroundColor:Q.isSelected?"#dbeafe":"#fff",color:"#1d4ed8"})}})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-[#0b5566] text-white px-4 py-2 rounded-lg font-bold shadow hover:bg-[#08323a] transition",children:w?L("activities.modal.edit")??"Modifier":L("activities.modal.add")??"Ajouter"}),a.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 bg-gray-300 px-4 py-2 rounded-lg font-bold",children:L("global.cancel")??"Annuler"})]})]})]})})]})})}function dE(){const[s,t]=b.useState(!1);return b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const r=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),l=()=>t(!!r.matches);return l(),typeof r.addEventListener=="function"?r.addEventListener("change",l):r.addListener(l),window.addEventListener("resize",l),window.addEventListener("orientationchange",l),()=>{try{typeof r.removeEventListener=="function"?r.removeEventListener("change",l):r.removeListener(l)}catch{}window.removeEventListener("resize",l),window.removeEventListener("orientationchange",l)}},[]),a.jsx("div",{className:`min-h-screen bg-[#f7f8fa] w-full flex flex-col items-center ${s?"":"md:pl-64"} px-2 md:px-8 py-8`,children:a.jsx("div",{className:"w-full max-w-6xl mx-auto",children:a.jsx(uE,{})})})}const kn="https://api.monsite.fr",fE=[{key:"G1",label:"children.group.G1"},{key:"G2",label:"children.group.G2"},{key:"G3",label:"children.group.G3"},{key:"G4",label:"children.group.G4"},{key:"G5",label:"children.group.G5"},{key:"G6",label:"children.group.G6"}],hE=[{key:"Nounou_Senior",label:"nanny.role.senior"},{key:"Responsable",label:"nanny.role.manager"},{key:"Stagiaire",label:"nanny.role.trainee"},{key:"Remplacante",label:"nanny.role.substitute"},{key:"Autre",label:"nanny.role.other"}],mE={haute:"bg-[#ffeaea] border-[#ffdddd]",moyenne:"bg-[#fff7e6] border-[#fff1d6]",basse:"bg-[#a9ddf2] border-[#cfeef9]"},pE={haute:"reports.priority.haute",moyenne:"reports.priority.moyenne",basse:"reports.priority.basse"},gE={incident:"reports.type.incident",comportement:"reports.type.comportement",soin:"reports.type.soin"};function xE(){const{user:s}=fn(),{t,locale:r}=Rt();b.useEffect(()=>{let $=!0;const E=`${kn}/children`,G=`${kn}/nannies`;async function C(){try{const R=Kn(E),Y=Kn(G);R&&M(R),Y&&U(Y);const te=[];R?te.push(Promise.resolve(new Response(JSON.stringify(R)))):te.push(fe(`${kn}/children`)),Y?te.push(Promise.resolve(new Response(JSON.stringify(Y)))):te.push(fe(`${kn}/nannies`));const[Ne,z]=await Promise.all(te);if(!$)return;try{const J=await Ne.json();M(Array.isArray(J)?J:[]),sa(E,Array.isArray(J)?J:[],ai)}catch{M([])}try{const J=await z.json();U(Array.isArray(J)?J:[]),sa(G,Array.isArray(J)?J:[],ai)}catch{U([])}}catch{$&&(M([]),U([]))}}return C(),()=>{$=!1}},[]);const[l,o]=b.useState([]);b.useEffect(()=>{fe(`${kn}/reports`).then($=>$.json()).then($=>o(Array.isArray($)?$:[])).catch(()=>o([]))},[]);const u=l.length,d=l.filter($=>{if(!$.date)return!1;const E=new Date($.date),G=new Date,C=new Date(G);C.setHours(0,0,0,0),C.setDate(G.getDate()-(G.getDay()+6)%7);const R=new Date(C);return R.setDate(C.getDate()+6),E>=C&&E<=R}).length,[p,f]=b.useState(!1),[m,x]=b.useState(""),[v,w]=b.useState(""),N=l.filter($=>{let E=!0;if(p){if(!$.date)return!1;const G=new Date($.date),C=new Date,R=new Date(C);R.setDate(C.getDate()-30),E=E&&G>=R&&G<=C}if(m&&(E=E&&$.type===m),v.trim()){const G=v.trim().toLowerCase();E=E&&!!($.child?.name&&$.child.name.toLowerCase().includes(G)||$.summary&&$.summary.toLowerCase().includes(G)||$.details&&$.details.toLowerCase().includes(G))}return E}),[T,S]=b.useState(!1),[j,k]=b.useState(null),[_,O]=b.useState({priority:"moyenne",type:"incident",status:"en_attente",childId:"",childName:"",childAge:3,childGroup:"",nannyId:"",nannyName:"",nannyRole:"",summary:"",details:"",date:new Date().toISOString().split("T")[0],time:"14:00",duration:"",childrenInvolved:""}),[q,M]=b.useState([]),[L,U]=b.useState([]),W=q.find($=>$.id===_.childId),Z=W&&Array.isArray(W.nannyIds)&&W.nannyIds.length>0?L.filter($=>W.nannyIds.includes($.id)):L;b.useEffect(()=>{if(!_.nannyId)return;Z.some(E=>E.id===_.nannyId)||O(E=>({...E,nannyId:"",nannyName:"",nannyRole:""}))},[_.childId,_.nannyId,Z]);const[I,P]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const $=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),E=()=>P(!!$.matches);return E(),typeof $.addEventListener=="function"?$.addEventListener("change",E):$.addListener(E),window.addEventListener("resize",E),window.addEventListener("orientationchange",E),()=>{try{typeof $.removeEventListener=="function"?$.removeEventListener("change",E):$.removeListener(E)}catch{}window.removeEventListener("resize",E),window.removeEventListener("orientationchange",E)}},[]),b.useEffect(()=>{fe(`${kn}/children`).then($=>$.json()).then($=>M($)).catch(()=>M([])),fe(`${kn}/nannies`).then($=>$.json()).then($=>U($)).catch(()=>U([]))},[]);async function Q($){$.preventDefault();const E={priority:_.priority,type:_.type,status:_.status,childId:_.childId,nannyId:_.nannyId,summary:_.summary,details:_.details,date:_.date,time:_.time,duration:_.type==="comportement"?_.duration:void 0,childrenInvolved:_.type==="comportement"&&Number(_.childrenInvolved)||void 0};await fe(`${kn}/reports`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),fe(`${kn}/reports`).then(G=>G.json()).then(G=>o(G)).catch(()=>o([])),S(!1),k(null),O({priority:"moyenne",type:"incident",status:"en_attente",childId:"",childName:"",childAge:3,childGroup:"",nannyId:"",nannyName:"",nannyRole:"",summary:"",details:"",date:new Date().toISOString().split("T")[0],time:"14:00",duration:"",childrenInvolved:""})}return a.jsxs("div",{className:"min-h-screen bg-[#f7f8fa] flex flex-col md:flex-row",children:[!I&&a.jsx(Ac,{}),a.jsx("main",{className:`flex-1 flex flex-col items-center py-4 px-2 md:py-8 md:px-2 ${I?"":"md:ml-64"}`,children:a.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:t("page.reports")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:t("page.reports.description")}),a.jsxs("div",{className:"flex flex-col md:flex-row flex-wrap gap-2 mb-4 md:mb-6 items-stretch md:items-center",children:[a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsxs("button",{className:`flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg border text-sm md:text-base font-medium ${p?"bg-[#a9ddf2] border-[#fcdcdf] text-[#0b5566]":"bg-white border-gray-100 text-gray-500"}`,onClick:$=>{$.preventDefault(),f(E=>!E)},children:[a.jsx("span",{children:"📅"})," ",t("reports.filter.last30")]}),a.jsxs("select",{value:m,onChange:$=>x($.target.value),className:"px-3 md:px-4 py-2 rounded-lg border border-gray-100 bg-white text-sm md:text-base font-medium",children:[a.jsx("option",{value:"",children:t("reports.filter.allTypes")}),a.jsx("option",{value:"incident",children:t("reports.type.incident")}),a.jsx("option",{value:"comportement",children:t("reports.type.comportement")}),a.jsx("option",{value:"soin",children:t("reports.type.soin")})]}),a.jsx("input",{type:"text",placeholder:t("reports.search.placeholder"),value:v,onChange:$=>w($.target.value),className:"px-3 md:px-4 py-2 rounded-lg border border-gray-100 bg-white text-sm md:text-base w-full md:w-64"})]}),!(s&&s.role==="parent")&&a.jsx("button",{className:"bg-[#0b5566] text-white px-4 md:px-5 py-2 rounded-lg font-bold shadow hover:bg-[#08323a] transition text-sm md:text-base mt-2 md:mt-0 md:ml-2 w-full md:w-auto",onClick:()=>{k(null),O({priority:"moyenne",type:"incident",status:"en_attente",childId:"",childName:"",childAge:3,childGroup:"",nannyId:"",nannyName:"",nannyRole:"",summary:"",details:"",date:new Date().toISOString().split("T")[0],time:"14:00",duration:"",childrenInvolved:""}),S(!0)},children:t("reports.new")})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3 md:gap-4 mb-4 md:mb-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-3 md:p-4 flex flex-col items-center",children:[a.jsx("div",{className:"text-2xl md:text-3xl font-extrabold",style:{color:"#0b5566"},children:u}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t("reports.card.total")})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-3 md:p-4 flex flex-col items-center",children:[a.jsx("div",{className:"text-xl md:text-2xl font-extrabold",style:{color:"#08323a"},children:d}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t("reports.card.week")})]})]}),a.jsx("div",{className:"flex flex-col gap-4 md:gap-6",children:N.map($=>{const E=$.child?.initials||($.child?.name?$.child.name.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):""),G=$.nanny?.initials||($.nanny?.name?$.nanny.name.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):"");return a.jsxs("div",{className:`rounded-xl shadow border-2 ${mE[$.priority]||""} p-0 overflow-hidden`,style:{minWidth:0},children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between px-4 md:px-6 py-2",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2 sm:mb-0",children:[a.jsx("span",{className:"px-2 md:px-3 py-1 rounded-lg font-bold text-xs",style:{background:$.type==="incident"?"#ffeaea":$.type==="comportement"?"#fff7e6":"#a9ddf2",color:$.type==="incident"?"#7a2a2a":$.type==="comportement"?"#856400":"#08323a"},children:t(gE[$.type]||$.type)}),a.jsx("span",{className:"px-2 md:px-3 py-1 rounded-lg font-bold text-xs",style:{background:$.priority==="haute"?"#dc2626":$.priority==="moyenne"?"#f59e0b":"#0b5566",color:"#ffffff"},children:t(pE[$.priority]||$.priority)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs md:text-sm font-bold border",style:{background:"#a9ddf2",color:"#08323a",borderColor:"#cfeef9"},children:E}),a.jsx("span",{className:"font-bold text-xs md:text-sm ml-1",style:{color:"#08323a"},children:$.child?.name}),a.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs md:text-sm font-bold border",style:{background:"#fff7e6",color:"#856400",borderColor:"#fff1d6"},children:G}),a.jsx("span",{className:"font-bold text-xs md:text-sm ml-1",style:{color:"#856400"},children:$.nanny?.name}),a.jsx("div",{className:"relative ml-2",children:a.jsx("button",{"aria-label":"Actions",className:"text-gray-500 hover:text-gray-800",onClick:()=>{k($),O({priority:$.priority||"moyenne",type:$.type||"incident",status:$.status||"en_attente",childId:$.child?.id||$.child?.id||"",childName:$.child?.name||"",childAge:$.child?.age||3,childGroup:$.child?.group||"",nannyId:$.nanny?.id||$.nanny?.id||"",nannyName:$.nanny?.name||"",nannyRole:$.nanny?.role||"",summary:$.summary||"",details:$.details||"",date:$.date?new Date($.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],time:$.time||"14:00",duration:$.duration||"",childrenInvolved:$.childrenInvolved?String($.childrenInvolved):""}),S(!0)},children:"⋮"})})]})]}),a.jsxs("div",{className:"px-4 md:px-6 pb-4",children:[a.jsx("div",{className:"font-bold text-gray-700 mb-1 text-sm md:text-base",children:$.type==="incident"?t("reports.summary.incident"):$.type==="comportement"?t("reports.summary.comportement"):t("reports.summary.soin")}),a.jsx("div",{className:"text-gray-700 text-sm md:text-base mb-2",children:$.summary}),$.type==="comportement"&&a.jsxs("div",{className:"flex gap-4 md:gap-6 items-center text-xs text-gray-500 mt-2 flex-wrap",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{children:"⏱️"})," ",t("reports.card.duration")," : ",$.duration]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{children:"👧"})," ",t("reports.card.childrenInvolved",{n:String($.childrenInvolved??0)})]})]}),a.jsxs("div",{className:"flex flex-col items-end mt-4",children:[a.jsxs("span",{className:"text-xs italic",style:{color:"#08323a"},children:["Rapport établi par ",a.jsx("span",{className:"font-bold",style:{color:"#856400"},children:$.nanny?.name})," concernant ",a.jsx("span",{className:"font-bold",style:{color:"#08323a"},children:$.child?.name})]}),a.jsx("span",{className:"text-xs text-gray-500",children:(()=>{let C;try{C=new Date($.date)}catch{C=null}if(C&&!isNaN(C.getTime())){const R={day:"2-digit",month:"long",year:"numeric"},Y=C.toLocaleDateString(r||"fr-FR",R),te=$.time?$.time.slice(0,5).replace(":","h"):"";return`${Y}${te?" "+t("common.at")+" "+te:""}`}return`${$.date}${$.time?" à "+$.time:""}`})()})]})]})]},$.id)})}),T&&a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative flex flex-col gap-6 animate-fade-in",style:{border:"4px solid #fcdcdf"},children:[a.jsx("button",{onClick:()=>S(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-2xl font-extrabold mb-2 text-center",style:{color:"#0b5566"},children:t(j?"reports.modal.title.edit":"reports.modal.title.new")}),a.jsxs("form",{className:"space-y-3",onSubmit:async $=>{if(j){$.preventDefault();const E={priority:_.priority,type:_.type,status:_.status,childId:_.childId,nannyId:_.nannyId,summary:_.summary,details:_.details,date:_.date,time:_.time,duration:_.type==="comportement"?_.duration:void 0,childrenInvolved:_.type==="comportement"&&Number(_.childrenInvolved)||void 0};await fe(`${kn}/reports/${j.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),fe(`${kn}/reports`).then(G=>G.json()).then(G=>o(G)).catch(()=>o([])),S(!1),k(null)}else await Q($)},children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:_.priority,onChange:$=>O(E=>({...E,priority:$.target.value})),className:"border rounded px-3 py-2 w-1/2",children:[a.jsx("option",{value:"haute",children:t("reports.priority.haute")}),a.jsx("option",{value:"moyenne",children:t("reports.priority.moyenne")}),a.jsx("option",{value:"basse",children:t("reports.priority.basse")})]}),a.jsxs("select",{value:_.type,onChange:$=>O(E=>({...E,type:$.target.value})),className:"border rounded px-3 py-2 w-1/2",children:[a.jsx("option",{value:"incident",children:t("reports.type.incident")}),a.jsx("option",{value:"comportement",children:t("reports.type.comportement")}),a.jsx("option",{value:"soin",children:t("reports.type.soin")})]})]}),a.jsxs("select",{value:_.childId,onChange:$=>{const E=q.find(G=>G.id===$.target.value);O(G=>({...G,childId:E?E.id:"",childName:E?E.name:"",childAge:E?Number(E.age):3,childGroup:E?E.group:""}))},className:"border rounded px-3 py-2 w-full",required:!0,children:[a.jsx("option",{value:"",children:t("reports.field.child")}),q.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",min:1,max:18,placeholder:t("label.age")||"Âge",value:_.childAge,onChange:$=>O(E=>({...E,childAge:Number($.target.value)})),className:"border rounded px-3 py-2 w-1/2",required:!0}),a.jsxs("select",{value:_.childGroup,onChange:$=>O(E=>({...E,childGroup:$.target.value})),className:"border rounded px-3 py-2 w-1/2",required:!0,children:[a.jsx("option",{value:"",children:t("reports.field.group")}),fE.map($=>a.jsx("option",{value:$.key,children:t($.label)},$.key))]})]}),a.jsxs("select",{value:_.nannyId,onChange:$=>{const E=L.find(G=>G.id===$.target.value);O(G=>({...G,nannyId:E?E.id:"",nannyName:E?E.name:"",nannyRole:E?E.role:""}))},className:"border rounded px-3 py-2 w-full",required:!0,children:[a.jsx("option",{value:"",children:t("reports.field.nanny")}),Z.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))]}),a.jsxs("select",{value:_.nannyRole,onChange:$=>O(E=>({...E,nannyRole:$.target.value})),className:"border rounded px-3 py-2 w-full",required:!0,children:[a.jsx("option",{value:"",children:t("reports.field.role")}),hE.map($=>a.jsx("option",{value:$.key,children:t($.label)},$.key))]}),a.jsx("input",{type:"date",value:_.date,onChange:$=>O(E=>({...E,date:$.target.value})),className:"border rounded px-3 py-2 w-full",required:!0}),a.jsx("input",{type:"time",value:_.time,onChange:$=>O(E=>({...E,time:$.target.value})),className:"border rounded px-3 py-2 w-full",required:!0}),a.jsx("textarea",{placeholder:t("reports.field.summary"),value:_.summary,onChange:$=>O(E=>({...E,summary:$.target.value})),className:"border rounded px-3 py-2 w-full",required:!0}),_.type==="comportement"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:t("reports.field.duration")||"Durée",value:_.duration,onChange:$=>O(E=>({...E,duration:$.target.value})),className:"border rounded px-3 py-2 w-1/2"}),a.jsx("input",{type:"number",min:1,placeholder:t("reports.field.childrenInvolved")||"Nb enfants impliqués",value:_.childrenInvolved,onChange:$=>O(E=>({...E,childrenInvolved:$.target.value})),className:"border rounded px-3 py-2 w-1/2"})]}),a.jsxs("div",{className:"flex gap-2 mt-2",children:[a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded hover:bg-[#08323a] transition",children:t(j?"reports.save":"reports.create")}),j&&a.jsx("button",{type:"button",onClick:async()=>{j&&(await fe(`${kn}/reports/${j.id}`,{method:"DELETE"}),fe(`${kn}/reports`).then($=>$.json()).then($=>o($)).catch(()=>o([])),S(!1),k(null))},className:"bg-red-500 text-white px-4 py-2 rounded",children:t("reports.delete")}),a.jsx("button",{type:"button",onClick:()=>{S(!1),k(null)},className:"bg-gray-300 px-4 py-2 rounded",children:t("reports.cancel")})]})]})]})})]})})]})}function bE({items:s=[],loading:t=!1,onRefresh:r=()=>{},onDeleted:l=()=>{}}){const[o,u]=b.useState(null),[d,p]=b.useState(!1),{t:f}=Rt();function m(S){const j=new Date(String(S)),k=Date.now()-j.getTime(),_=Math.round(k/6e4);if(_<1)return f("time.now");if(_<60)return f("time.minutes",{n:String(_)});const O=Math.round(_/60);if(O<24)return f("time.hours",{n:String(O)});const q=Math.round(O/24);return f("time.days",{n:String(q)})}async function x(S){await fetch(`/api/notifications/${S}/read`,{method:"PUT",credentials:"include"}),r(),typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("notifications:changed",{detail:{action:"read",id:S}}))}async function v(S){await fetch(`/api/notifications/${S}/unread`,{method:"PUT",credentials:"include"}),r(),typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("notifications:changed",{detail:{action:"unread",id:S}}))}function w(S){u(S)}async function N(S){try{p(!0),await fetch(`/api/notifications/${S}`,{method:"DELETE",credentials:"include"}),l(),typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("notifications:changed",{detail:{action:"delete",id:S}}))}catch(j){console.error("Failed to delete notification",j)}finally{p(!1),u(null)}}if(t)return a.jsx("div",{className:"text-gray-600",children:f("notifications.loading")});if(!s||s.length===0)return a.jsx("div",{className:"text-gray-500",children:f("notifications.none")});const T=["bg-blue-50","bg-yellow-50","bg-purple-50","bg-green-50","bg-pink-50","bg-orange-50"];return a.jsxs(a.Fragment,{children:[a.jsx("ul",{className:"space-y-4",children:s.map((S,j)=>{const k=S.data&&typeof S.data=="object"?S.data:null,_=k&&typeof k.type=="string"?k.type:"",q={activity:"bg-emerald-500",message:"bg-sky-500",reminder:"bg-amber-500",report:"bg-violet-500",system:"bg-red-500"}[_]||"bg-indigo-500",M=k&&Array.isArray(k.tags)?k.tags:[];function L(W,Z=!1){const I=Z?16:20,P={width:I,height:I,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};switch(W){case"activity":return a.jsxs("svg",{...P,children:[a.jsx("path",{d:"M12 2v6l4 2",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("circle",{cx:"12",cy:"16",r:"4",fill:"currentColor"})]});case"message":return a.jsx("svg",{...P,children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"reminder":return a.jsxs("svg",{...P,children:[a.jsx("path",{d:"M12 7v5l3 3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M5 3h14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"report":return a.jsx("svg",{...P,children:a.jsx("path",{d:"M3 7h18M6 11h12M9 15h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"system":return a.jsxs("svg",{...P,children:[a.jsx("path",{d:"M12 9v4",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M12 17h.01",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});default:return a.jsxs("svg",{...P,children:[a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z",fill:"currentColor"}),a.jsx("path",{d:"M12 7v6l4 2",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}}const U=S.read?"bg-gray-100 text-gray-500":`${q} text-white`;return a.jsxs("li",{className:`rounded-lg p-4 pb-12 sm:pb-6 relative ${T[j%T.length]} border border-blue-50 shadow-sm`,children:[a.jsxs("div",{className:"w-full flex items-center justify-between sm:hidden",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:`w-8 h-8 rounded-lg ${U} flex items-center justify-center text-base font-bold`,children:L(_,!0)})}),a.jsx("div",{className:"text-xs text-gray-500",children:m(S.createdAt)})]}),a.jsxs("div",{className:"hidden sm:flex items-start gap-3",children:[a.jsx("div",{className:"w-12 flex-shrink-0",children:a.jsx("div",{className:`w-12 h-12 rounded-lg ${U} flex items-center justify-center text-xl font-bold`,children:L(_,!1)})}),a.jsxs("div",{className:"flex-1 px-3",children:[a.jsx("div",{className:"text-sm font-semibold",title:S.title,children:S.title}),S.body?a.jsx("div",{className:"text-sm text-gray-600 mt-1 break-words",children:S.body}):null,M.length>0?a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:M.map(W=>a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white text-gray-700 border border-gray-100",children:W},W))}):null]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("div",{className:"text-xs text-gray-500",children:m(S.createdAt)}),a.jsxs("div",{className:"hidden sm:flex mt-3 gap-2",children:[(()=>{const W=!!S.read,Z=W?"px-3 py-2 rounded-full bg-gray-100 text-gray-600 border border-gray-100":"px-3 py-2 rounded-full bg-blue-600 text-white border border-blue-600";return a.jsx("button",{onClick:()=>W?v(S.id):x(S.id),className:Z,title:f(W?"notifications.mark_unread":"notifications.mark_read"),children:W?a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M21 12a9 9 0 1 0-9 9",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M3 3l6 6",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})]}):a.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M6 12l4 4L18 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})(),a.jsx("button",{onClick:()=>w(S.id),className:"px-3 py-2 rounded-full bg-red-50 text-red-600 border border-red-100",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})]}),a.jsxs("div",{className:"sm:hidden mt-3",children:[a.jsx("div",{className:"text-sm font-semibold",title:S.title,children:S.title}),S.body?a.jsx("div",{className:"text-sm text-gray-600 mt-1 break-words",children:S.body}):null,M.length>0?a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:M.map(W=>a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white text-gray-700 border border-gray-100",children:W},W))}):null]}),a.jsxs("div",{className:"sm:hidden absolute right-4 bottom-4 flex items-center gap-2",children:[(()=>{const W=!!S.read,Z=W?"px-3 py-2 rounded-full bg-gray-100 text-gray-600 border border-gray-100":"px-3 py-2 rounded-full bg-blue-600 text-white border border-blue-600";return a.jsx("button",{onClick:()=>W?v(S.id):x(S.id),className:Z,title:f(W?"notifications.mark_unread":"notifications.mark_read"),children:W?a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M21 12a9 9 0 1 0-9 9",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M3 3l6 6",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})]}):a.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M6 12l4 4L18 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})(),a.jsx("button",{onClick:()=>w(S.id),className:"px-3 py-2 rounded-full bg-red-50 text-red-600 border border-red-100",children:a.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]},S.id)})}),a.jsx(vE,{id:o,open:!!o,onCancel:()=>u(null),onConfirm:N,loading:d})]})}function vE({id:s,open:t,onCancel:r,onConfirm:l,loading:o}){const{t:u}=Rt();return!t||!s?null:a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md relative",children:[a.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500",children:"×"}),a.jsx("div",{className:"text-red-500 text-4xl mb-2 mt-2 flex justify-center",children:"🗑️"}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-900 text-center",children:u("notifications.confirm_delete.title")}),a.jsx("div",{className:"text-gray-500 mb-6 text-center",children:u("notifications.confirm_delete.body")}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:r,className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition",disabled:o,children:u("notifications.confirm_delete.cancel")}),a.jsx("button",{onClick:()=>l(s),className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition shadow",disabled:o,children:u(o?"notifications.deleting":"notifications.confirm_delete.confirm")})]})]})})}function yE(){const[s,t]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const k=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),_=()=>t(!!k.matches);return _(),typeof k.addEventListener=="function"?k.addEventListener("change",_):k.addListener(_),window.addEventListener("resize",_),window.addEventListener("orientationchange",_),()=>{try{typeof k.removeEventListener=="function"?k.removeEventListener("change",_):k.removeListener(_)}catch{}window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_)}},[]);const[r,l]=b.useState(1),[o,u]=b.useState([]),[d,p]=b.useState(!1);async function f(k=1){p(!0);try{const O=await(await fe(`/api/notifications?page=${k}`,{credentials:"include"})).json();u(O.items||[]),l(O.page||k)}catch(_){console.error(_)}finally{p(!1)}}const[m,x]=b.useState({unread:0,today:0,week:0});async function v(){try{const _=await(await fe("/api/notifications/stats",{credentials:"include"})).json();x({unread:_.unread||0,today:_.today||0,week:_.week||0})}catch(k){console.error("Failed to load notification stats",k)}}b.useEffect(()=>{typeof window<"u"&&typeof window.dispatchEvent=="function"&&window.dispatchEvent(new CustomEvent("notifications:viewed")),(async()=>{try{await fe("/api/notifications/mark-all-read",{method:"PUT",credentials:"include"})}catch(_){console.debug("mark-all-read on mount failed",_)}})(),v();const k=()=>{v(),f(r)};return window.addEventListener("notifications:changed",k),()=>window.removeEventListener("notifications:changed",k)},[r]),b.useEffect(()=>{f(1)},[]);const{t:w}=Rt(),[N,T]=b.useState(!1),[S,j]=b.useState(!1);return a.jsx("div",{className:`min-h-screen bg-[#f7f8fa] w-full flex flex-col items-center ${s?"":"md:pl-64"} px-2 md:px-8 py-8`,children:a.jsxs("div",{className:"w-full max-w-6xl mx-auto",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:w("page.notifications.title")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:w("page.notifications.desc")})]}),a.jsxs("div",{className:"flex flex-col items-start sm:items-start justify-start mb-6",children:[a.jsxs("div",{className:"flex gap-2 items-center mb-3 overflow-x-auto no-scrollbar",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-red-200 bg-red-50 text-red-700 font-semibold text-sm sm:text-base",children:[m.unread,a.jsx("div",{className:"text-[10px] sm:text-xs text-red-500",children:w("notifications.stats.unread")})]}),a.jsxs("div",{className:"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-blue-200 bg-blue-50 text-blue-700 font-semibold text-sm sm:text-base",children:[m.today,a.jsx("div",{className:"text-[10px] sm:text-xs text-blue-500",children:w("notifications.stats.today")})]}),a.jsxs("div",{className:"flex-shrink-0 px-2 py-1 sm:px-4 sm:py-2 rounded-md sm:rounded-lg border border-green-200 bg-green-50 text-green-700 font-semibold text-sm sm:text-base",children:[m.week,a.jsx("div",{className:"text-[10px] sm:text-xs text-green-500",children:w("notifications.stats.week")})]})]}),a.jsxs("div",{className:"w-full sm:w-auto mt-3 flex flex-col sm:flex-row sm:items-center gap-2 sm:justify-start",children:[a.jsxs("button",{onClick:async()=>{try{await fe("/api/notifications/mark-all-read",{method:"PUT",credentials:"include"}),v(),f(1),typeof window<"u"&&typeof window.dispatchEvent=="function"&&(window.dispatchEvent(new CustomEvent("notifications:changed")),window.dispatchEvent(new CustomEvent("notifications:viewed")))}catch(k){console.error("Failed to mark all read",k)}},className:"inline-flex items-center justify-center gap-2 px-3 py-1.5 bg-white border border-gray-200 text-gray-700 rounded-full shadow-sm w-auto text-sm",title:w("notifications.mark_all"),style:{pointerEvents:"auto"},children:[a.jsx("svg",{className:"w-3.5 h-3.5 text-gray-500",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:a.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),a.jsx("span",{className:"text-sm font-medium",children:w("notifications.mark_all")})]}),a.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center justify-center gap-2 px-3 py-1.5 bg-red-50 border border-red-200 text-red-700 rounded-full shadow-sm w-auto sm:ml-2 text-sm",title:w("notifications.delete_all"),style:{pointerEvents:"auto"},children:[a.jsxs("svg",{className:"w-3.5 h-3.5 text-red-500",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[a.jsx("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M8 6v14a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M10 11v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M14 11v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M9 6V4h6v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),a.jsx("span",{className:"text-sm font-medium",children:w("notifications.delete_all")})]})]})]}),a.jsx(bE,{items:o,loading:d,onRefresh:()=>f(r),onDeleted:()=>f(r)}),a.jsx(Ov,{open:N,title:w("notifications.confirm_delete.title"),body:w("notifications.confirm_delete_all"),confirmLabel:w("notifications.confirm_delete.confirm"),cancelLabel:w("notifications.confirm_delete.cancel"),loading:S,onCancel:()=>T(!1),onConfirm:async()=>{try{if(j(!0),!(await fe("/api/notifications",{method:"DELETE",credentials:"include"})).ok)throw new Error("Delete failed");T(!1),v(),f(1),typeof window<"u"&&typeof window.dispatchEvent=="function"&&(window.dispatchEvent(new CustomEvent("notifications:changed")),window.dispatchEvent(new CustomEvent("notifications:viewed")))}catch(k){console.error("Failed to delete all notifications",k),alert(w("notifications.delete_all_failed")||"Échec de la suppression")}finally{j(!1)}}})]})})}async function wE(s){const t="=".repeat((4-s.length%4)%4),r=(s+t).replace(/-/g,"+").replace(/_/g,"/"),l=window.atob(r),o=new Uint8Array(l.length);for(let u=0;u<l.length;++u)o[u]=l.charCodeAt(u);return o}async function jE(s){if(!("serviceWorker"in navigator))throw new Error("Service Worker non supporté");if(!("PushManager"in window))throw new Error("Push API non supportée");const t=await navigator.serviceWorker.register("/sw.js");if(await Notification.requestPermission()!=="granted")throw new Error("Permission de notifications refusée");const l=await wE(s);return{subscription:await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l}),registration:t}}async function NE(){if(!("serviceWorker"in navigator))return;const s=await navigator.serviceWorker.getRegistration();if(!s)return;const t=await s.pushManager.getSubscription();t&&await t.unsubscribe()}const jf=[{code:"fr",label:"Français",emoji:"🇫🇷"},{code:"en",label:"English",emoji:"🇬🇧"}];function SE({value:s,onChange:t}){const[r,l]=b.useState(!1),o=b.useRef(null),u=b.useRef(null);b.useEffect(()=>{function p(m){if(!u.current)return;const x=m.target;x&&u.current.contains(x)||x&&o.current&&o.current.contains(x)||l(!1)}function f(m){m.key==="Escape"&&l(!1)}return document.addEventListener("mousedown",p),document.addEventListener("touchstart",p),document.addEventListener("keydown",f),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("touchstart",p),document.removeEventListener("keydown",f)}},[]);const d=jf.find(p=>p.code===s)||jf[0];return a.jsxs("div",{className:"relative inline-block text-left w-full md:w-auto",children:[a.jsxs("button",{ref:o,type:"button",onClick:()=>l(p=>!p),"aria-haspopup":"menu","aria-expanded":r,className:"w-full md:w-auto flex items-center gap-2 justify-between px-3 py-2 bg-gray-100 rounded-md text-sm text-gray-700 hover:bg-gray-200",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-base w-5",children:d.emoji}),a.jsx("span",{className:"truncate max-w-[10rem]",children:d.label})]}),a.jsx("svg",{className:"w-4 h-4 text-gray-500",viewBox:"0 0 20 20",fill:"none","aria-hidden":!0,children:a.jsx("path",{d:"M6 8l4 4 4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r&&a.jsx("div",{ref:u,className:"absolute right-0 mt-2 w-full md:w-48 bg-white border rounded-md shadow-lg z-50",children:a.jsx("div",{className:"py-1",children:jf.map(p=>a.jsxs("button",{onClick:()=>{t(p.code),l(!1)},className:`w-full text-left px-3 py-2 text-sm flex items-center gap-2 hover:bg-gray-50 ${p.code===s?"font-semibold":""}`,children:[a.jsx("span",{className:"w-5",children:p.emoji}),a.jsx("span",{className:"truncate",children:p.label})]},p.code))})})]})}const Fn="https://api.monsite.fr";function _E({onClose:s}){const{t}=Rt(),[r,l]=b.useState(!1),[o,u]=b.useState(!1),[d,p]=b.useState(""),[f,m]=b.useState(""),[x,v]=b.useState(""),[w,N]=b.useState(""),[T,S]=b.useState(!1),[j,k]=b.useState(!1),[_,O]=b.useState(!1),[q,M]=b.useState([]),[L,U]=b.useState(!1),W=b.useCallback(async E=>{try{if(!E||E.length<3){M([]);return}const G=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(E)}&limit=12`);if(!G.ok)throw M([]),new Error("Impossible de récupérer les suggestions");const R=(await G.json()).filter(Y=>Y.street||Y.house_number||Y.name&&/\d/.test(String(Y.name)));M(R.slice(0,8))}catch(G){console.error("geodata fetch error",G),M([])}},[]),Z=async E=>{M([]),U(!1);const G=[E.house_number,E.street].filter(Boolean).join(" ").trim(),C=E.city||E.name||"";P(R=>{const Y=R?{...R}:null;if(!Y)return Y;if(Y.role==="user"){const te=Y;return{...Y,address:G||te.address,city:C||te.city,postalCode:E.postcode||te.postalCode,region:E.state||te.region,country:E.country||te.country,lat:E.lat??null,lon:E.lon??null,geodataRaw:E.raw??E}}if(Y.role==="parent"){const te=Y;return{...Y,address:G||te.address,city:C||te.city,postalCode:E.postcode||te.postalCode,region:E.state||te.region,country:E.country||te.country,lat:E.lat??null,lon:E.lon??null,geodataRaw:E.raw??E}}return Y})},[I,P]=b.useState(null);b.useEffect(()=>{if(!I)return;const G=(R=>R&&(R.role==="user"||R.role==="parent")&&R.address||"")(I);if(!G||G.length<3){M([]);return}const C=setTimeout(()=>W(G),650);return()=>clearTimeout(C)},[I,W]),b.useEffect(()=>{let E=!0;return(async()=>{l(!0),p("");try{const C=await fe(`${Fn}/user/me`,{credentials:"include"});if(!C.ok)throw new Error("Impossible de récupérer l'utilisateur");const R=await C.json();if(R&&R.parentId){const Y=await fe(`${Fn}/parent/${encodeURIComponent(String(R.parentId))}`,{credentials:"include"});if(Y.ok){const te=await Y.json();if(!E)return;P({role:"parent",id:te.id,firstName:te.firstName||"",lastName:te.lastName||"",email:te.email||"",phone:R&&R.phone?R.phone:te.phone||"",address:R&&R.address?R.address:te.address||"",postalCode:R&&R.postalCode?R.postalCode:te.postalCode||"",city:R&&R.city?R.city:te.city||"",region:R&&R.region?R.region:te.region||"",country:R&&R.country?R.country:te.country||"",birthDate:te.birthDate?new Date(te.birthDate).toISOString().slice(0,10):R&&R.birthDate?new Date(R.birthDate).toISOString().slice(0,10):"",lat:R&&typeof R.lat<"u"?R.lat:te.lat??null,lon:R&&typeof R.lon<"u"?R.lon:te.lon??null,geodataRaw:R&&typeof R.geodataRaw<"u"?R.geodataRaw:te.geodataRaw??null});return}}if(R&&R.nannyId){const Y=await fe(`${Fn}/nannies/${encodeURIComponent(String(R.nannyId))}`,{credentials:"include"});if(Y.ok){const te=await Y.json();if(!E)return;P({role:"nanny",id:te.id,name:te.name||"",availability:te.availability||"",experience:te.experience||0,contact:te.contact||"",email:te.email||"",birthDate:te.birthDate?new Date(te.birthDate).toISOString().slice(0,10):""});return}}if(R&&R.email)try{const Y=await fe(`${Fn}/parent/by-email?email=${encodeURIComponent(String(R.email))}`,{credentials:"include"});if(Y.ok){const te=await Y.json();if(!E)return;P({role:"parent",id:te.id,firstName:te.firstName||"",lastName:te.lastName||"",email:te.email||"",phone:R&&R.phone?R.phone:te.phone||"",address:R&&R.address?R.address:te.address||"",postalCode:R&&R.postalCode?R.postalCode:te.postalCode||"",city:R&&R.city?R.city:te.city||"",region:R&&R.region?R.region:te.region||"",country:R&&R.country?R.country:te.country||"",birthDate:te.birthDate?new Date(te.birthDate).toISOString().slice(0,10):R&&R.birthDate?new Date(R.birthDate).toISOString().slice(0,10):"",lat:R&&typeof R.lat<"u"?R.lat:te.lat??null,lon:R&&typeof R.lon<"u"?R.lon:te.lon??null,geodataRaw:R&&typeof R.geodataRaw<"u"?R.geodataRaw:te.geodataRaw??null});return}}catch{}R&&P({role:"user",id:R.id,name:R.name||"",email:R.email||"",phone:R.phone||"",address:R.address||"",postalCode:R.postalCode||"",city:R.city||"",region:R.region||"",country:R.country||"",birthDate:R.birthDate?new Date(R.birthDate).toISOString().slice(0,10):"",lat:R.lat??null,lon:R.lon??null,geodataRaw:R.geodataRaw??null})}catch(C){const R=C instanceof Error?C.message:String(C);p(R)}finally{E&&l(!1)}})(),()=>{E=!1}},[]);const Q=(E,G)=>P(C=>C&&{...C,[E]:G}),$=async()=>{if(I){u(!0),p("");try{if(I.role==="parent"){const E=I,G={firstName:E.firstName,lastName:E.lastName,email:E.email,phone:E.phone,address:E.address,postalCode:E.postalCode,city:E.city,region:E.region,country:E.country};if(E.birthDate&&(G.birthDate=E.birthDate),typeof E.lat<"u"&&(G.lat=E.lat),typeof E.lon<"u"&&(G.lon=E.lon),E.geodataRaw&&(G.geodataRaw=E.geodataRaw),!(await fe(`${Fn}/parent/${encodeURIComponent(String(I.id))}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)})).ok)throw new Error("Erreur lors de la mise à jour du parent")}else if(I.role==="nanny"){const E={name:I.name,availability:I.availability,experience:Number(I.experience||0),contact:I.contact,email:I.email,birthDate:I.birthDate||null};if(!(await fe(`${Fn}/nannies/${encodeURIComponent(String(I.id))}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).ok)throw new Error("Erreur lors de la mise à jour de la nounou")}else{const E=I,G={name:E.name,email:E.email,phone:E.phone,address:E.address,postalCode:E.postalCode,city:E.city,region:E.region,country:E.country};E.birthDate&&(G.birthDate=E.birthDate),typeof E.lat<"u"&&(G.lat=E.lat),typeof E.lon<"u"&&(G.lon=E.lon),E.geodataRaw&&(G.geodataRaw=E.geodataRaw);const C=await fe(`${Fn}/user/me`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!C.ok){const R=await C.text().catch(()=>"");throw new Error(R||"Impossible de mettre à jour l'utilisateur")}}if(f||x||w){if(!f||!x||!w)throw new Error(t("settings.password.all_required"));if(x!==w)throw new Error(t("settings.password.mismatch"));if(!(await fe(`${Fn}/user/password`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldPassword:f,newPassword:x})})).ok)throw new Error("Erreur lors du changement de mot de passe")}s(),window.location.reload()}catch(E){const G=E instanceof Error?E.message:String(E);p(G)}finally{u(!1)}}};return r?a.jsx("div",{className:"text-center py-6",children:t("loading")}):I?a.jsxs("div",{children:[I.role==="parent"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.firstName")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.firstName,onChange:E=>Q("firstName",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.lastName")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.lastName,onChange:E=>Q("lastName",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.email")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.email,onChange:E=>Q("email",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.phone")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.phone,onChange:E=>Q("phone",E.target.value)})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"text-sm",children:t("parent.form.address")||"Adresse"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.address||"",onChange:E=>{Q("address",E.target.value),U(!0)}}),L&&q&&q.length>0&&a.jsx("div",{className:"border rounded bg-white mt-1 max-h-48 overflow-auto",children:q.map((E,G)=>a.jsxs("div",{className:"px-2 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Z(E),children:[(E.house_number||"")+" "+(E.street||E.name||"")," ",E.postcode?` - ${E.postcode}`:""]},G))})]})]}),I.role==="nanny"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.name")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.name,onChange:E=>Q("name",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.email")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.email,onChange:E=>Q("email",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.contact")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.contact,onChange:E=>Q("contact",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.experience")}),a.jsx("input",{type:"number",className:"border rounded px-2 py-1 w-full",value:String(I.experience||0),onChange:E=>Q("experience",Number(E.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.availability")}),a.jsxs("select",{className:"border rounded px-2 py-1 w-full",value:I.availability,onChange:E=>Q("availability",E.target.value),children:[a.jsx("option",{value:"Disponible",children:t("availability.available")}),a.jsx("option",{value:"En_congé",children:t("availability.on_leave")}),a.jsx("option",{value:"Maladie",children:t("availability.sick")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.birthDate")}),a.jsx("input",{type:"date",className:"border rounded px-2 py-1 w-full",value:I.birthDate||"",onChange:E=>Q("birthDate",E.target.value)})]})]}),I.role==="user"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.name")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.name,onChange:E=>Q("name",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.email")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.email,onChange:E=>Q("email",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.phone")}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.phone||"",onChange:E=>Q("phone",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("parent.form.postalCode")||"Code postal"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.postalCode||"",onChange:E=>Q("postalCode",E.target.value)})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"text-sm",children:t("parent.form.address")||"Adresse"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.address||"",onChange:E=>{Q("address",E.target.value),U(!0)}}),L&&q&&q.length>0&&a.jsx("div",{className:"border rounded bg-white mt-1 max-h-48 overflow-auto",children:q.map((E,G)=>a.jsxs("div",{className:"px-2 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Z(E),children:[(E.house_number||"")+" "+(E.street||E.name||"")," ",E.postcode?` - ${E.postcode}`:""]},G))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("parent.form.city")||"Ville"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.city||"",onChange:E=>Q("city",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("parent.form.region")||"Région"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.region||"",onChange:E=>Q("region",E.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("parent.form.country")||"Pays"}),a.jsx("input",{className:"border rounded px-2 py-1 w-full",value:I.country||"",onChange:E=>Q("country",E.target.value)})]})]}),a.jsxs("div",{className:"border-t mt-4 pt-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:t("settings.change_password")}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.oldPassword")}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:T?"text":"password",className:"border rounded px-2 py-1 w-full pr-10",value:f,onChange:E=>m(E.target.value)}),a.jsx("button",{type:"button",onClick:()=>S(E=>!E),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 p-1","aria-label":T?"Masquer l'ancien mot de passe":"Afficher l'ancien mot de passe",children:T?a.jsx(uf,{className:"w-5 h-5"}):a.jsx(df,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.newPassword")}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:j?"text":"password",className:"border rounded px-2 py-1 w-full pr-10",value:x,onChange:E=>v(E.target.value)}),a.jsx("button",{type:"button",onClick:()=>k(E=>!E),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 p-1","aria-label":j?"Masquer le nouveau mot de passe":"Afficher le nouveau mot de passe",children:j?a.jsx(uf,{className:"w-5 h-5"}):a.jsx(df,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm",children:t("label.confirmPassword")}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:_?"text":"password",className:"border rounded px-2 py-1 w-full pr-10",value:w,onChange:E=>N(E.target.value)}),a.jsx("button",{type:"button",onClick:()=>O(E=>!E),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 p-1","aria-label":_?"Masquer la confirmation":"Afficher la confirmation",children:_?a.jsx(uf,{className:"w-5 h-5"}):a.jsx(df,{className:"w-5 h-5"})})]})]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{className:"bg-blue-600 text-white px-3 py-2 rounded",onClick:$,disabled:o,children:t(o?"settings.saving":"settings.save")}),a.jsx("button",{className:"bg-gray-200 px-3 py-2 rounded",onClick:s,children:t("settings.cancel")})]}),d&&a.jsx("div",{className:"text-red-600 text-sm mt-2",children:d})]}):a.jsx("div",{className:"text-sm text-gray-500",children:t("no_profile")})}function CE(){const{t:s}=Rt(),[t,r]=b.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"flex-1 bg-[#a9ddf2] text-[#0b5566] px-4 py-2 rounded-lg font-medium hover:bg-[#cfeef9]",onClick:()=>r(!0),children:s("settings.profile.edit")}),t&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center bg-black/30 backdrop-blur-sm overflow-auto py-8",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-2xl relative",children:[a.jsx("button",{type:"button",onClick:()=>r(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:s("settings.profile.edit")}),a.jsx(_E,{onClose:()=>r(!1)})]})})]})}function EE(){const[s,t]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const _=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),O=()=>t(!!_.matches);return O(),typeof _.addEventListener=="function"?_.addEventListener("change",O):_.addListener(O),window.addEventListener("resize",O),window.addEventListener("orientationchange",O),()=>{try{typeof _.removeEventListener=="function"?_.removeEventListener("change",O):_.removeListener(O)}catch{}window.removeEventListener("resize",O),window.removeEventListener("orientationchange",O)}},[]);const[r,l]=b.useState(!0),[o,u]=b.useState(null),[d,p]=b.useState(null),[f,m]=b.useState(()=>{try{return localStorage.getItem("site_language")==="en"?"en":"fr"}catch{return"fr"}});b.useEffect(()=>{try{document.documentElement.lang=f==="en"?"en":"fr",localStorage.setItem("site_language",f),document.cookie=`site_language=${f};path=/;max-age=${3600*24*365}`}catch{}},[f]);const[x,v]=b.useState(!1),[w,N]=b.useState(""),{t:T,setLocale:S}=Rt(),[j,k]=b.useState(!1);return b.useEffect(()=>{(async()=>{try{const _=await fe(`${Fn}/user/me`,{credentials:"include"});if(!_.ok)return;const O=await _.json();O&&(O.role==="admin"||typeof O.role=="string"&&O.role.toLowerCase().includes("super"))&&k(!0)}catch{}})()},[]),b.useEffect(()=>{(async()=>{try{const _=await fe(`${Fn}/user/me`,{credentials:"include"});if(_.ok){const O=await _.json();O&&typeof O.notifyByEmail=="boolean"&&l(!!O.notifyByEmail)}}catch{}})(),(async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){u(!1);return}try{const _=await navigator.serviceWorker.getRegistration();if(!_)return u(!1);const O=await _.pushManager.getSubscription();u(!!O);try{const q=await fe("/api/push-subscriptions/me",{credentials:"include"});if(q.ok){const M=await q.json();if(O&&Array.isArray(M.subscriptions)){const L=M.subscriptions.find(U=>U.subscription&&U.subscription.endpoint===O.endpoint);L&&L.id&&p(L.id)}}}catch{}}catch{u(!1)}})()},[]),a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${s?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-6 tracking-tight",style:{color:"#0b5566"},children:T("settings.title")}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 items-stretch",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800",children:T("settings.email.title")}),a.jsx("div",{className:"text-gray-500 text-sm",children:T("settings.email.desc")})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r,onChange:async _=>{const O=_.target.checked;l(O);try{await fe(`${Fn}/user/me`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({notifyByEmail:O})})}catch{}},className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#a9ddf2] rounded-full peer peer-checked:bg-[#0b5566] after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-5"})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800",children:T("settings.push.title")}),a.jsx("div",{className:"text-gray-500 text-sm",children:T("settings.push.desc")})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:!!o,onChange:async _=>{const O=_.target.checked;try{if(!O){try{await NE()}catch{}try{d?await fe(`/api/push-subscriptions/${encodeURIComponent(d)}`,{method:"DELETE",credentials:"include"}):await fe("/api/push-subscriptions/me",{method:"DELETE",credentials:"include"})}catch(L){console.error("Failed to delete subscription on server",L)}u(!1),p(null);return}const q="BLFJbu-zMK1zWpjj95TJsTx7bp-NSJcXdeAqoikosTEtWeGVgHt1NEGeWydS9k6pfLz6iFbZu9_1FTyS4v27FeQ",{subscription:M}=await jE(q);try{const L=await fe("/api/push-subscriptions/save",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:M})});if(L.ok){const U=await L.json();U&&U.id&&p(U.id)}}catch{}u(!0)}catch(q){const M=q instanceof Error?q.message:String(q);alert("Impossible d'activer les notifications push: "+M)}},className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#a9ddf2] rounded-full peer peer-checked:bg-[#0b5566] after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-5"})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[a.jsxs("div",{className:"md:flex-1 pr-3",children:[a.jsx("div",{className:"font-semibold text-gray-800",children:T("settings.language.title")}),a.jsx("div",{className:"text-gray-500 text-sm",children:T("settings.language.desc")})]}),a.jsx("div",{className:"md:flex-none w-full md:w-auto",children:a.jsx("div",{className:"max-w-[320px] md:max-w-[420px]",children:a.jsx(SE,{value:f,onChange:_=>{m(_),S(_==="en"?"en":"fr")}})})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 md:col-span-2",children:[a.jsx("div",{className:"font-semibold text-gray-800 mb-4",children:"Gestion du compte"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("button",{className:"flex-1 bg-[#fcdcdf] text-[#7a2a2a] font-semibold rounded-lg px-4 py-2 shadow hover:bg-[#fbd5d8]",onClick:()=>v(!0),children:T("settings.account.delete")}),a.jsx(CE,{})]})]}),j&&a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex flex-col justify-between h-full md:col-span-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold text-gray-800",children:["🧾 ",T("admin.emaillogs.title")]}),a.jsx("div",{className:"text-gray-500 text-sm",children:T("admin.emaillogs.description")})]}),a.jsx("div",{className:"mt-4 flex items-center gap-3",children:a.jsx("button",{onClick:()=>{window.location.href="/admin/emaillogs"},className:"bg-[#a9ddf2] text-[#0b5566] px-4 py-2 rounded-lg font-medium hover:bg-[#cfeef9]",children:T("admin.emaillogs.title")})})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("button",{className:"w-full bg-[#a9ddf2] text-[#0b5566] px-4 py-2 rounded-lg font-medium hover:bg-[#cfeef9]",style:{marginTop:"8px"},onClick:async()=>{try{await fe("/api/auth/logout",{method:"POST",credentials:"include"})}catch{}try{const _=(()=>{try{return localStorage.getItem("cookie_consent")}catch{return null}})();try{localStorage.clear()}catch{}if(_)try{localStorage.setItem("cookie_consent",_)}catch{}}catch{}try{const _=(()=>{try{return sessionStorage.getItem("cookie_consent")}catch{return null}})();try{sessionStorage.clear()}catch{}if(_)try{sessionStorage.setItem("cookie_consent",_)}catch{}}catch{}try{document.cookie.split(";").forEach(function(_){const O=_.split("=")[0].trim();document.cookie=O+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/",document.cookie=O+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain="+window.location.hostname})}catch{}window.location.href="/login"},children:T("settings.logout")})})]})]}),x&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-xs flex flex-col items-center relative",children:[a.jsx("button",{type:"button",onClick:()=>v(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",children:"×"}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-red-700",children:T("settings.delete_confirm.title")}),a.jsx("p",{className:"text-gray-700 text-center mb-4",children:T("settings.delete_confirm.body")}),a.jsxs("div",{className:"flex gap-2 w-full",children:[a.jsx("button",{type:"button",className:"bg-gray-300 px-3 py-1 rounded w-full",onClick:()=>v(!1),children:T("settings.cancel")}),a.jsx("button",{type:"button",className:"bg-red-500 text-white px-3 py-1 rounded w-full font-bold",onClick:async()=>{if(N(""),!(await fe(`${Fn}/user`,{method:"DELETE",credentials:"include"})).ok){N(T("settings.delete_error"));return}v(!1),window.location.href="/login"},children:T("settings.delete_confirm.confirm")})]}),w&&a.jsx("div",{className:"text-red-600 text-xs mt-2 text-center w-full",children:w})]})})]})})}const TE=import.meta,Nf=TE?.env?.VITE_API_URL??"/api";function kE(){const{t:s,locale:t}=Rt(),[r,l]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const C=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),R=()=>l(!!C.matches);return R(),typeof C.addEventListener=="function"?C.addEventListener("change",R):C.addListener(R),window.addEventListener("resize",R),window.addEventListener("orientationchange",R),()=>{try{typeof C.removeEventListener=="function"?C.removeEventListener("change",R):C.removeListener(R)}catch{}window.removeEventListener("resize",R),window.removeEventListener("orientationchange",R)}},[]);const[o,u]=b.useState(new Date().getMonth()+1),[d,p]=b.useState(new Date().getFullYear()),[f,m]=b.useState([]),[x,v]=b.useState(!1),[w,N]=b.useState(""),[T,S]=b.useState(""),[j,k]=b.useState(!1),[_,O]=b.useState(""),{user:q}=fn();function M(C){O(C),k(!0)}const L=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],U=Array.from({length:5},(C,R)=>new Date().getFullYear()-2+R);b.useEffect(()=>{let C=!0;return v(!0),S(""),fe(`${Nf}/payment-history/${d}/${o}`,{credentials:"include"}).then(async R=>{const Y=R.headers.get("content-type")||"";if(!R.ok){let te;try{te=await R.clone().text()}catch(Ne){te=String(Ne)}throw new Error(`HTTP ${R.status} ${R.statusText} - ${te}`)}if(!Y.includes("application/json")){const te=await R.text();throw new Error("Unexpected non-JSON response from API: "+te.slice(0,200))}return R.json()}).then(R=>{C&&m(Array.isArray(R)?R:[])}).catch(R=>{console.error("Failed to fetch payment history",R),C&&m([]),C&&S(String(R.message||R))}).finally(()=>{C&&v(!1)}),()=>{C=!1}},[d,o]);const W=Array.from(new Map(f.filter(C=>C.parent&&C.parent.id).map(C=>[C.parent.id,C.parent])).values()),Z=f.filter(C=>!(w&&(!C.parent||C.parent.id!==w))),I=f.reduce((C,R)=>C+(Number(R.total)||0),0),P=f.length,Q=f.filter(C=>(Number(C.total)||0)>0&&!C.paid).length;function $(){const C=[];C.push(["Parent","Email","Phone","Child","Days","Rate","Subtotal","Total"].join(",")),f.forEach(Ne=>{const z=Ne.parent?`${Ne.parent.firstName||""} ${Ne.parent.lastName||""}`.trim():"",J=Ne.parent?.email||"",se=Ne.parent?.phone||"";(Ne.details||[]).forEach(ue=>{C.push([`"${z}"`,`"${J}"`,`"${se}"`,`"${ue.childName}"`,String(ue.daysPresent),String(ue.ratePerDay),String(ue.subtotal),String(Ne.total)].join(","))})});const R=new Blob([C.join(`
`)],{type:"text/csv;charset=utf-8;"}),Y=URL.createObjectURL(R),te=document.createElement("a");te.href=Y,te.download=`payment-history-${d}-${String(o).padStart(2,"0")}.csv`,te.click(),URL.revokeObjectURL(Y)}async function E(C,R){try{v(!0);const Y=await fe(`${Nf}/payment-history/invoice/${C}`,{credentials:"include"});if(!Y.ok){const se=await Y.text().catch(()=>"");if(Y.status===403){let ue=s("payments.errors.invoice_not_ready");if(se&&se.trim().length>0){const ye=se.trim();try{const Te=JSON.parse(ye);if(Te&&typeof Te=="object")if(typeof Te.message=="string"&&Te.message.trim())ue=Te.message.trim();else if(typeof Te.error=="string"&&Te.error.trim())ue=Te.error.trim();else{const De=Object.values(Te).find(Ce=>typeof Ce=="string"&&Ce.trim());typeof De=="string"&&(ue=De.trim())}else ye.length<500&&(ue=ye)}catch{ye.length<500&&(ue=ye)}}M(ue);return}throw new Error(`HTTP ${Y.status} ${Y.statusText} - ${se}`)}if(!(Y.headers.get("content-type")||"").includes("application/pdf")){const se=await Y.text().catch(()=>"");throw new Error("Unexpected response when fetching invoice: "+se)}const Ne=await Y.blob(),z=URL.createObjectURL(Ne),J=document.createElement("a");J.href=z,J.download=R||`invoice-${C}.pdf`,document.body.appendChild(J),J.click(),J.remove(),URL.revokeObjectURL(z)}catch(Y){console.error("Invoice download failed",Y);const te=z=>{if(!z||typeof z!="object")return!1;const J=z;return"message"in J&&typeof J.message=="string"},Ne=(()=>{if(!Y)return"";if(typeof Y=="string")return Y;if(te(Y))return Y.message;try{return JSON.stringify(Y)}catch{return String(Y)}})();M(Ne||s("payments.errors.invoice_download"))}finally{v(!1)}}async function G(C,R){m(Y=>Y.map(te=>te.id===C?{...te,paid:R}:te));try{const Y=await fetch(`${Nf}/payment-history/${C}/paid`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({paid:R})});if(!Y.ok)throw new Error("Failed to update");const te=await Y.json();te&&te.record&&m(Ne=>Ne.map(z=>z.id===C?te.record:z))}catch(Y){console.error("Failed to toggle paid",Y),m(te=>te.map(Ne=>Ne.id===C?{...Ne,paid:!R}:Ne)),M("Erreur lors de la mise à jour du statut de paiement.")}}return a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${r?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 w-full",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:s("page.payments")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:s("page.payments.description")})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center",children:[a.jsxs("div",{className:"flex gap-2 items-center flex-wrap justify-center md:justify-start w-full md:w-auto",children:[a.jsx("select",{value:o,onChange:C=>u(Number(C.target.value)),className:"border p-2 rounded w-36",children:L.map((C,R)=>a.jsx("option",{value:R+1,children:C},R))}),a.jsx("select",{value:d,onChange:C=>p(Number(C.target.value)),className:"border p-2 rounded w-36",children:U.map(C=>a.jsx("option",{value:C,children:C},C))})]}),a.jsx("div",{className:"flex flex-1 w-full",children:a.jsxs("select",{value:w,onChange:C=>N(C.target.value),className:"border p-2 rounded w-full md:w-64",children:[a.jsx("option",{value:"",children:s("payments.filter.all_parents")}),W.map((C,R)=>{const Y=C?`${C.firstName||""} ${C.lastName||""}`.trim():"—";return a.jsx("option",{value:C?.id||"",children:Y},C?.id||R)})]})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:space-x-2",children:[a.jsx("button",{onClick:async()=>{if(!w){M(s("payments.errors.select_parent"));return}const C=f.find(R=>R.parent&&R.parent.id===w);if(!C){M(s("payments.errors.no_record_parent"));return}await E(C.id,`facture-${d}-${String(o).padStart(2,"0")}-${C.parent?.lastName||C.id}.pdf`)},className:"bg-blue-500 text-white px-4 py-2 rounded w-full md:w-32 text-center",children:s("payments.download_invoice")}),a.jsx("button",{onClick:$,className:"bg-green-500 text-white px-4 py-2 rounded w-full md:w-32 text-center",children:s("payments.export_csv")}),a.jsx("button",{onClick:()=>window.print(),className:"bg-red-500 text-white px-4 py-2 rounded w-full md:w-32 text-center",children:s("payments.print")})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:s("payments.card.month_revenue")}),a.jsx("div",{className:"text-2xl font-bold mt-1",children:new Intl.NumberFormat(t||"fr-FR",{style:"currency",currency:"EUR"}).format(I)})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:s("payments.card.families_active")}),a.jsx("div",{className:"text-2xl font-bold mt-1",children:P})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-4",children:[a.jsx("div",{className:"text-sm text-gray-500",children:s("payments.card.unpaid")}),a.jsx("div",{className:"text-2xl font-bold mt-1",children:Q})]})]}),a.jsxs("div",{className:"grid gap-4",children:[j&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>k(!1)}),a.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-desc",className:"relative max-w-md w-full bg-white rounded-lg shadow-lg p-6 mx-4",children:[a.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-gray-900",children:"Information"}),a.jsx("p",{id:"modal-desc",className:"mt-3 text-sm text-gray-700",children:_}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-green-600 text-white rounded",children:"OK"})})]})]}),T&&a.jsx("div",{className:"bg-red-50 border border-red-100 text-red-700 p-3 rounded",children:T}),x&&a.jsx("div",{children:s("loading")}),!x&&Z.length===0&&a.jsx("div",{className:"text-gray-500",children:s("payments.history.empty")}),Z.map(C=>a.jsxs("div",{className:"rounded-lg overflow-hidden shadow",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between p-4 md:p-6 bg-gradient-to-r from-green-50 to-green-100 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 text-white flex items-center justify-center font-bold",children:(C.parent?`${C.parent.firstName||""}`.slice(0,1)+(C.parent?.lastName||"").slice(0,1):"--").toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:C.parent?`${C.parent.firstName||""} ${C.parent.lastName||""}`.trim():s("common.none")}),a.jsxs("div",{className:"text-sm text-gray-500",children:[C.parent?.email??"",C.parent?.phone?` • ${C.parent?.phone}`:""]})]})]}),a.jsx("div",{className:"text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:[C.invoiceNumber?a.jsx("span",{className:"mr-2 font-medium",children:C.invoiceNumber}):null,C.createdAt?new Date(C.createdAt).toLocaleDateString("fr-FR"):""]}),C.paid?a.jsx("div",{className:"text-sm text-green-700 font-semibold bg-green-100 px-3 py-1 rounded-full",children:s("payments.status.paid")}):a.jsx("div",{className:"text-sm text-gray-500",children:s("payments.status.unpaid")}),q&&(q.role==="admin"||q.role&&q.role.toLowerCase().includes("super"))&&a.jsx("button",{onClick:()=>G(C.id,!C.paid),className:"text-sm px-2 py-1 bg-blue-500 text-white rounded",children:C.paid?s("payments.actions.mark_unpaid"):s("payments.actions.mark_paid")})]})})]}),a.jsxs("div",{className:"px-6 py-4 bg-white border-t",children:[a.jsx("div",{className:"text-sm text-gray-600 font-medium mb-3",children:s("payments.detail.header",{month:new Date(d,o-1).toLocaleString(t||"fr-FR",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"space-y-3",children:Array.isArray(C.details)&&C.details.length>0?C.details.map((R,Y)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex flex-col md:flex-row md:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-200 text-orange-700 flex items-center justify-center font-bold",children:(R.childName||"").slice(0,1).toUpperCase()}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800",children:R.childName}),a.jsx("div",{className:"text-xs text-gray-400"})]})]}),a.jsxs("div",{className:"text-right text-sm",children:[a.jsxs("div",{className:"text-gray-500",children:[a.jsx("span",{className:"inline-block mr-2",children:"📅"}),R.daysPresent," ",s("payments.days")]}),a.jsxs("div",{className:"text-green-600 font-semibold mt-1",children:[R.daysPresent," × ",new Intl.NumberFormat(t||"fr-FR",{style:"currency",currency:"EUR"}).format(R.ratePerDay)," = ",new Intl.NumberFormat(t||"fr-FR",{style:"currency",currency:"EUR"}).format(R.subtotal)]})]})]},Y)):a.jsx("div",{className:"text-gray-500",children:s("payments.no_child_this_month")})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between p-4 md:p-6 bg-gradient-to-r from-green-50 to-green-100 gap-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-gray-800",children:s("payments.family.total_label")}),a.jsx("div",{className:"text-xs text-gray-500",children:Array.isArray(C.details)?s("payments.family.summary",{n:String(C.details.length),days:String(C.details.reduce((R,Y)=>R+(Y.daysPresent||0),0))}):""})]}),a.jsxs("div",{className:"flex items-center gap-4 flex-col md:flex-row w-full md:w-auto",children:[a.jsx("div",{className:"text-2xl font-extrabold text-green-700",children:new Intl.NumberFormat(t||"fr-FR",{style:"currency",currency:"EUR"}).format(Number(C.total))}),a.jsx("div",{className:"w-full md:w-auto flex justify-center md:justify-end",children:a.jsx("a",{href:"#",onClick:R=>{R.preventDefault(),E(C.id,`facture-${d}-${String(o).padStart(2,"0")}-${C.parent?.lastName||C.id}.pdf`)},className:"px-4 py-2 bg-green-600 text-white rounded text-sm w-full md:w-auto text-center",children:C.invoiceNumber?`${s("payments.download_invoice")} (${C.invoiceNumber})`:s("payments.download_invoice")})})]})]})]},C.id))]})]})})}function Tb({parent:s,color:t,parentDue:r,onChildClick:l,onEdit:o,onDelete:u,annualPerChild:d}){const p=Ot(),{t:f,locale:m}=Rt(),x=(s.firstName&&s.lastName?`${s.firstName[0]||""}${s.lastName[0]||""}`:s.name||"U").toUpperCase().slice(0,2),[v,w]=b.useState(!1),N="https://api.monsite.fr",[T,S]=b.useState({}),[j,k]=b.useState({open:!1,url:null,childName:null}),{user:_}=fn(),O=_,q=!!(O&&typeof O.role=="string"&&O.role==="parent"&&O.parentId===s.id),M=s,L=String(M.phone??M.telephone??M.tel??M.mobile??""),U=String(M.email??M.mail??M.emailAddress??""),W=String(M.address??""),Z=String(M.postalCode??""),I=String(M.city??""),P=async(E,G)=>{if(G){S(C=>({...C,[E]:{...C[E]||{},loading:!0}}));try{const C=new FormData;C.append("prescription",G);const R=await fe(`${N}/children/${E}/prescription`,{method:"POST",credentials:"include",body:C});if(!R.ok)throw new Error("Upload failed");const Y=await R.json();S(te=>({...te,[E]:{url:Y.url||null,loading:!1}}))}catch(C){console.error("Upload error",C instanceof Error?C.message:String(C)),S(R=>({...R,[E]:{url:null,loading:!1}})),alert("Échec de l'upload de l'ordonnance.")}}},Q=async E=>{if(confirm("Supprimer l'ordonnance pour cet enfant ?")){S(G=>({...G,[E]:{...G[E]||{},loading:!0}}));try{if(!(await fe(`${N}/children/${E}/prescription`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Delete failed");S(C=>({...C,[E]:{url:null,loading:!1}}))}catch(G){console.error("Delete error",G instanceof Error?G.message:String(G)),S(C=>({...C,[E]:{...C[E]||{},loading:!1}})),alert("Échec de la suppression de l'ordonnance.")}}},$=async E=>{S(G=>({...G,[E]:{...G[E]||{},loading:!0}}));try{const G=await fe(`${N}/children/${E}/prescription`,{credentials:"include"});if(!G.ok){const R=await G.json().catch(()=>({}));return alert(R.message||"Aucune ordonnance disponible"),S(Y=>({...Y,[E]:{url:null,loading:!1}})),null}const C=await G.json();return S(R=>({...R,[E]:{url:C.url||null,loading:!1}})),C.url||null}catch(G){return console.error("Failed to open prescription",G instanceof Error?G.message:String(G)),S(C=>({...C,[E]:{...C[E]||{},loading:!1}})),alert("Erreur lors de la récupération de l'ordonnance"),null}};return a.jsxs("div",{className:`rounded-2xl shadow ${t||"bg-white"} relative flex flex-col min-h-[420px] h-full transition-transform duration-500 perspective-1000`,style:{height:"100%",perspective:"1000px"},children:[a.jsxs("div",{className:`w-full h-full transition-transform duration-500 ${v?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",position:"relative",width:"100%",height:"100%"},children:[a.jsxs("div",{className:`absolute inset-0 w-full h-full p-5 flex flex-col ${v?"opacity-0 pointer-events-none":"opacity-100"} bg-transparent`,style:{backfaceVisibility:"hidden",overflow:"hidden"},children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center text-2xl shadow border border-gray-100 font-bold text-purple-700",children:x}),a.jsx("div",{className:"truncate flex-1",children:a.jsx("div",{className:"font-semibold text-lg text-gray-900 truncate",children:s.firstName||s.lastName?`${s.firstName||""} ${s.lastName||""}`.trim():s.name||"—"})}),a.jsx("div",{className:"ml-auto text-xs font-bold bg-white text-green-600 px-3 py-1 rounded-full shadow border border-green-100",children:(()=>{const E=s.children?s.children.length:0;return m==="en"?`${E} ${E===1?"child":"children"}`:`${E} ${E>1?"enfants":"enfant"}`})()})]}),a.jsx("div",{className:"text-sm text-gray-700 mb-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"text-sm text-gray-600 truncate flex items-center gap-2",children:[a.jsx("span",{"aria-hidden":!0,className:`inline-block ${L?"":"text-gray-300"}`,children:"📞"}),L?a.jsx("a",{href:`tel:${L.replace(/\s+/g,"")}`,className:"text-blue-600 hover:underline touch-manipulation",title:f("parent.form.phone"),children:L}):a.jsx("span",{className:"text-gray-400",children:"—"})]}),a.jsxs("div",{className:"text-sm text-gray-600 truncate flex items-center gap-2",children:[a.jsx("span",{"aria-hidden":!0,className:`inline-block ${U?"":"text-gray-300"}`,children:"✉️"}),U?a.jsx("a",{href:`mailto:${U}`,className:"text-blue-600 hover:underline touch-manipulation",title:f("parent.form.email"),children:U}):a.jsx("span",{className:"text-gray-400",children:"—"})]}),a.jsxs("div",{className:"text-sm text-gray-600 truncate flex items-start gap-2",children:[a.jsx("span",{"aria-hidden":!0,className:`inline-block ${W?"":"text-gray-300"}`,children:"📍"}),a.jsxs("div",{className:"leading-snug",children:[W?a.jsx("div",{className:"truncate",children:W}):a.jsx("div",{className:"text-gray-300",children:"—"}),Z||I?a.jsx("div",{className:"truncate",children:[Z,I].filter(Boolean).join(" ")}):a.jsx("div",{className:"text-gray-300",children:"—"})]})]})]})}),a.jsxs("div",{className:"mb-3 flex-1 overflow-auto",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:(()=>{const E=s.children?s.children.length:0;return m==="en"?E<=1?"Child":"Children":E<=1?"Enfant":"Enfants"})()}),a.jsx("div",{className:"flex flex-wrap gap-2 min-h-[120px]",children:(s.children||[]).map(E=>a.jsxs("div",{className:"bg-white rounded p-2 border w-32 h-20 flex flex-col justify-between",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{className:"w-20 min-w-[5rem]",children:a.jsx("button",{onClick:()=>{l?l(E.child):p(`/parent/child/${E.child.id}/reports`)},className:"text-left text-sm font-medium text-blue-700 hover:underline w-full text-ellipsis overflow-hidden block","aria-label":`Voir les rapports de ${E.child.name}`,children:a.jsx("div",{className:"truncate",children:a.jsxs("div",{className:"truncate flex items-baseline gap-1",children:[a.jsx("span",{className:"truncate",children:E.child.name}),E.child.group?a.jsxs("span",{className:"text-xs text-gray-500",children:["(",E.child.group,")"]}):null]})})})})}),a.jsx("div",{className:"mt-1 min-h-[18px] flex items-center",children:(()=>{const G=E.child.prescriptionUrl||T[E.child.id]&&T[E.child.id].url;return q||!!G?a.jsx("button",{onClick:async()=>{let Y=T[E.child.id]&&T[E.child.id].url||E.child.prescriptionUrl||null;Y||(Y=await $(E.child.id)),Y&&k({open:!0,url:Y,childName:E.child.name})},className:"text-xs text-green-700",children:f("children.prescription.view_button")}):a.jsx("div",{className:"w-full h-4","aria-hidden":!0})})()}),a.jsx("div",{className:"mt-0 flex items-center gap-1 justify-end",children:q?a.jsxs(a.Fragment,{children:[a.jsx("input",{id:`presc-${E.child.id}`,type:"file",accept:"image/*,.pdf",className:"hidden",onChange:async G=>{const C=G.target.files?G.target.files[0]:null;await P(E.child.id,C),G.target.value=""}}),a.jsx("label",{htmlFor:`presc-${E.child.id}`,className:"text-xs bg-[#0b5566] text-white px-2 py-1 rounded cursor-pointer",children:f("parent.prescription.upload")}),T[E.child.id]&&T[E.child.id].url?a.jsx("button",{onClick:()=>Q(E.child.id),className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:f("parent.prescription.delete")}):null]}):null})]},E.child.id))})]}),a.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[a.jsxs("div",{className:"text-sm text-gray-700 mb-3 text-center",children:[a.jsxs("div",{className:"mb-1",children:[f("parent.cotisation.this_month"),": ",a.jsxs("span",{className:"font-bold text-blue-700",children:[r||0,"€"]})]}),a.jsxs("div",{className:"text-xs",children:[f("parent.cotisation.annual_total"),": ",a.jsxs("span",{className:"font-bold text-gray-900",children:[(s.children?.length||0)*(d??15),"€"]})]})]}),a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>{o&&o(s)},className:"bg-white border border-gray-200 text-gray-500 hover:text-yellow-500 rounded-full p-2 shadow-sm touch-manipulation min-w-[40px] min-h-[40px] flex items-center justify-center",title:f("children.action.edit"),children:a.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M15.232 5.232l3.536 3.536M9 13l6-6 3 3-6 6H9v-3z"})})}),a.jsx("button",{onClick:()=>w(!0),className:"bg-white border border-gray-200 text-gray-500 hover:text-red-500 rounded-full p-2 shadow-sm touch-manipulation min-w-[40px] min-h-[40px] flex items-center justify-center",title:f("children.action.delete"),children:a.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0 1 16.138 21H7.862a2 2 0 0 1-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})})})]})]})]}),a.jsxs("div",{className:`absolute inset-0 w-full h-full flex flex-col items-center justify-center bg-white rounded-2xl shadow-xl p-8 ${v?"opacity-100":"opacity-0 pointer-events-none"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[a.jsx("div",{className:"text-red-500 text-4xl mb-2",children:"🗑️"}),a.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-900 text-center",children:f("modal.delete.title")}),a.jsx("div",{className:"text-gray-500 mb-6 text-center",children:f("parent.delete.confirm_body")}),a.jsxs("div",{className:"flex gap-3 w-full",children:[a.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2 font-medium hover:bg-gray-200 transition",children:f("modal.cancel")}),a.jsx("button",{onClick:()=>{u&&u(String(s.id))},className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2 font-medium hover:bg-red-600 transition",children:f("children.action.delete")})]})]})]}),j.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-4 w-full max-w-2xl relative mx-4",children:[a.jsx("button",{onClick:()=>k({open:!1,url:null}),className:"absolute top-3 right-3 text-gray-500",children:"×"}),a.jsxs("div",{className:"text-lg font-bold mb-2",children:["Ordonnance de ",j.childName||"cet enfant"]}),a.jsx("div",{className:"w-full h-[50vh] sm:h-[70vh] flex items-center justify-center overflow-auto",children:j.url&&j.url.endsWith(".pdf")?a.jsx("iframe",{src:j.url,className:"w-full h-full",title:"Ordonnance PDF"}):a.jsx("img",{src:j.url||"",alt:"Ordonnance",className:"h-full w-auto object-contain"})})]})})]})}function kb({child:s,onClose:t}){const r=Ot(),l=b.useRef(null);return b.useEffect(()=>{if(!s)return;const o=u=>{u.key==="Escape"&&t()};return document.addEventListener("keydown",o),setTimeout(()=>l.current?.focus(),0),()=>document.removeEventListener("keydown",o)},[s,t]),s?a.jsx("div",{className:"fixed inset-0 z-50 bg-white/40 backdrop-blur-[2px] flex items-center justify-center",role:"dialog","aria-modal":"true","aria-labelledby":"child-options-title",children:a.jsxs("div",{className:"bg-blue-50 rounded-2xl shadow-lg p-6 w-full max-w-md relative border border-blue-100",children:[a.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-500 hover:text-[#08323a]","aria-label":"Fermer",children:"✕"}),a.jsx("h3",{id:"child-options-title",className:"text-xl font-semibold mb-2 text-[#08323a]",children:s.name}),a.jsx("p",{className:"text-sm text-[#08323a] mb-4",children:"Que voulez-vous faire pour cet enfant ?"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("button",{ref:l,className:"flex-1 bg-[#f7f4d7] border border-[#a9ddf2] rounded-xl px-4 py-2 hover:bg-[#fffdf6] text-[#0b5566] font-semibold",onClick:()=>{t(),r(`/parent/child/${s.id}/schedule`)},children:"Voir le planning"}),a.jsx("button",{className:"flex-1 bg-[#0b5566] text-white rounded-xl px-4 py-2 hover:bg-[#08323a] font-semibold",onClick:()=>{t(),r(`/parent/child/${s.id}/reports`)},children:"Voir les rapports"})]})]})}):null}const AE=()=>{const{user:s}=fn(),{t}=Rt(),[r,l]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const V=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),ce=()=>l(!!V.matches);return ce(),typeof V.addEventListener=="function"?V.addEventListener("change",ce):V.addListener(ce),window.addEventListener("resize",ce),window.addEventListener("orientationchange",ce),()=>{try{typeof V.removeEventListener=="function"?V.removeEventListener("change",ce):V.removeListener(ce)}catch{}window.removeEventListener("resize",ce),window.removeEventListener("orientationchange",ce)}},[]);const o=s,u=V=>{if(!V)return!1;const ce=(V.role||"").toLowerCase();return ce==="admin"||!!V.nannyId||ce.includes("super")},[d,p]=b.useState([]),[f,m]=b.useState(!0),[x,v]=b.useState(null),[w,N]=b.useState(null),[T,S]=b.useState({}),[j,k]=b.useState(null),[_,O]=b.useState(!1),[q,M]=b.useState(!1),[L,U]=b.useState(null),[W,Z]=b.useState(null),[I,P]=b.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",postalCode:"",city:"",region:"",country:""}),[Q,$]=b.useState([]),[E,G]=b.useState(!1),[C,R]=b.useState(null),[Y,te]=b.useState(null),Ne=xt.useRef(null),z=xt.useCallback(async V=>{if(!(Y&&Date.now()<Y)){if(!V||V.length<3){$([]),R(null);return}try{R(null);const ce=await fetch(`/api/geodata/positionstack?q=${encodeURIComponent(V)}&limit=12`);if(ce.status===422){$([]),R("Tapez au moins 3 caractères pour obtenir des suggestions");return}if(ce.status===429){te(Date.now()+6e4),$([]),R("Trop de requêtes vers le service d’adresses — réessayez dans 1 minute");return}if(!ce.ok){$([]),R("Impossible de récupérer les suggestions");return}const Ee=(await ce.json()||[]).filter(Ie=>!!(Ie.house_number||Ie.street));$(Ee)}catch(ce){console.error("geodata fetch error",ce),$([]),R("Erreur réseau lors de la recherche d’adresse")}}},[Y]);xt.useEffect(()=>{const V=(I.address||I.city||"").trim();return Ne.current&&window.clearTimeout(Ne.current),Ne.current=window.setTimeout(()=>{const ce=I.city?` ${I.city}`:"";z(`${V}${ce}`.trim())},600),()=>{Ne.current&&window.clearTimeout(Ne.current)}},[I.address,I.city,z]),xt.useEffect(()=>{const V=ce=>{const le=ce.target;if(!le)return;const ve=document.querySelector("#parent-form-address");ve&&ve.contains(le)||G(!1)};return document.addEventListener("click",V),()=>document.removeEventListener("click",V)},[]);const J=V=>{const ce=V.house_number?String(V.house_number).trim():"",le=V.street?String(V.street).trim():"",Ee=(ce?`${ce} ${le}`.trim():le||"")||V.name||"",Ie=String(I.address||"").trim();let K=Ee;if(!ce){const xe=Ie.match(/^(\d+)\s+(.+)$/);if(xe&&xe[1]){const we=xe[1];Ee.startsWith(we+" ")||(K=`${we} ${Ee}`.trim())}}P({...I,address:K,city:V.city||"",postalCode:V.postcode||"",region:V.state||"",country:V.country||""}),$([]),G(!1)},[se,ue]=b.useState(null),[ye,Te]=b.useState(null),[De,Ce]=b.useState(null),[$e,Ye]=b.useState(null),[Xe,Se]=b.useState(!1),Me=Ot();b.useEffect(()=>{(async()=>{m(!0),v(null);try{if(u(o)){const ce=await fe("api/parent/admin",{credentials:"include"}),le=await ce.text();let ve=null;try{ve=le?JSON.parse(le):null}catch{ve=le}if(!ce.ok){if(ce.status===403){const Ie=await fe("api/parent/children",{credentials:"include"}),K=await Ie.text();let xe=null;try{xe=K?JSON.parse(K):null}catch{xe=K}if(!Ie.ok){const we=typeof xe=="string"?xe:xe&&typeof xe=="object"&&"error"in xe?String(xe.error):"Erreur serveur";throw new Error(we)}p(xe),m(!1);return}const Ee=typeof ve=="string"?ve:ve&&typeof ve=="object"&&"error"in ve?String(ve.error):"Erreur serveur";throw new Error(Ee)}N(ve);try{const Ee=new Date,Ie=`${Ee.getFullYear()}-${String(Ee.getMonth()+1).padStart(2,"0")}`,K=await fe(`api/parent/billing?month=${Ie}`,{credentials:"include"});if(K.ok){const xe=await K.json();S(xe||{})}}catch{}}else{const ce=await fe("api/parent/children",{credentials:"include"}),le=await ce.text();let ve=null;try{ve=le?JSON.parse(le):null}catch{ve=le}if(!ce.ok){const Ie=typeof ve=="string"?ve:ve&&typeof ve=="object"&&"error"in ve?String(ve.error):"Erreur serveur";throw new Error(Ie)}p(ve||[]);try{const Ie=new Date,K=`${Ie.getFullYear()}-${String(Ie.getMonth()+1).padStart(2,"0")}`,xe=await fe(`api/parent/billing?month=${K}`,{credentials:"include"});if(xe.ok){const we=await xe.json();S(we||{})}}catch{}}}catch(ce){console.error("ParentDashboard load error",ce instanceof Error?ce.message:String(ce)),ce instanceof Error?v(ce.message):v("Erreur")}finally{m(!1)}})()},[o,s]);const ke=s??null,Je=ke?{id:ke.parentId??ke.id??"me",name:ke.name??`${ke.firstName??""} ${ke.lastName??""}`.trim()??null,firstName:ke.firstName??null,lastName:ke.lastName??null,email:ke.email??null,phone:ke.phone??null,children:d.map(V=>({child:V}))}:null;if(f)return a.jsx("div",{className:"p-6",children:t("loading")});if(x)return a.jsxs("div",{className:"p-6 text-red-600",children:[t("global.error")||"Erreur",": ",x]});if(u(o)){const V=w?.stats??{parentsCount:0},ce=w?.parents??[];return a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${r?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 w-full",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:t("page.parent")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:t("page.parent.description")})]}),a.jsx("div",{className:"flex gap-2 items-center",children:s&&typeof s.role=="string"&&(s.role.toLowerCase()==="admin"||s.role.toLowerCase().includes("super")||s.nannyId==null)&&a.jsx("button",{onClick:()=>{M(!0),ue(null),P({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",postalCode:"",city:"",region:"",country:""})},className:`bg-[#0b5566] text-white font-semibold rounded-lg px-5 py-2 text-base shadow hover:bg-[#08323a] transition min-h-[44px] md:h-[60px] flex items-center ${r?"-translate-x-3":""}`,style:{transform:r?"translateX(-12px)":void 0},children:t("parent.add")})})]}),a.jsxs("div",{className:"flex flex-col md:items-start gap-3 mb-6 w-full",children:[a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"flex gap-2 items-center flex-wrap w-full",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:t("stats.total")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:V.parentsCount})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:t("stats.active")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:ce.filter(le=>le.children&&le.children.length>0).length})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow px-3 py-2 md:px-4 md:py-2 flex flex-col items-center min-w-[80px] md:min-w-[90px] min-h-[44px] md:h-[60px] justify-center flex-shrink-0",children:[a.jsx("div",{className:"text-xs text-gray-400",children:t("stats.new")}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:ce.filter(le=>{if(!le.createdAt)return!1;const ve=new Date(le.createdAt),Ie=Math.abs(new Date().getTime()-ve.getTime());return Math.ceil(Ie/(1e3*60*60*24))<=30}).length})]})]})}),a.jsx("div",{className:"w-full md:w-auto",children:a.jsx("input",{type:"text",placeholder:t("children.search_placeholder"),className:"border border-gray-200 rounded-lg px-3 py-2 text-gray-700 bg-white shadow-sm text-sm md:text-base w-full md:w-64 min-h-[44px]"})})]}),(q||L)&&a.jsxs("form",{onSubmit:async le=>{if(le.preventDefault(),ue(null),!I.firstName||!I.lastName||!I.email){ue("Les champs Prénom, Nom et Email sont requis");return}if((I.password||I.confirmPassword)&&I.password!==I.confirmPassword){ue("Les mots de passe ne correspondent pas");return}try{const ve=L?`api/parent/${L.id}`:"api/parent",Ee=L?"PUT":"POST",Ie=s&&typeof s.role=="string"&&(s.role.toLowerCase()==="admin"||s.role.toLowerCase().includes("super")),K=s,xe=!!(L&&K&&String(K.parentId??K.id??"")===String(L.id)),we={name:`${I.firstName} ${I.lastName}`,email:I.email};if(I.phone&&(we.phone=I.phone),I.address&&(we.address=I.address),I.postalCode&&(we.postalCode=I.postalCode),I.city&&(we.city=I.city),I.region&&(we.region=I.region),I.country&&(we.country=I.country),L&&I.password&&Ie&&!xe){const Qe={name:String(we.name),email:String(we.email)};we.phone&&(Qe.phone=String(we.phone)),Qe.newPassword=I.password,Ye({payload:Qe,parentId:L.id}),Ce({open:!0,parentId:L.id,password:I.password});return}I.password&&(L&&(Ie||xe)?we.newPassword=I.password:L||(we.password=I.password));const Oe=await fe(ve,{method:Ee,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(we)});let Pe=null;try{Pe=await Oe.json()}catch{}if(!Oe.ok){const Qe=typeof Pe=="object"&&Pe!==null&&"message"in Pe?String(Pe.message):await Oe.text();throw new Error(Qe||"Erreur création parent")}Te(I.password?L?"Parent modifié.":"Parent créé avec mot de passe.":L?"Parent modifié.":"Parent créé — une invitation a été envoyée.");const Ve=await(await fe("api/parent/admin",{credentials:"include"})).text();let Be=null;try{Be=Ve?JSON.parse(Ve):null}catch{Be=Ve}N(Be),M(!1),U(null),P({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",postalCode:"",city:"",region:"",country:""})}catch(ve){console.error("Add parent failed",ve),ve instanceof Error?ue(ve.message):ue("Erreur")}},className:"mb-6 bg-white rounded-2xl shadow p-4 md:p-6 grid gap-2 md:grid-cols-2 lg:grid-cols-3",children:[a.jsx("input",{name:"firstName",value:I.firstName,onChange:le=>P({...I,firstName:le.target.value}),placeholder:t("parent.form.firstName"),required:!0,className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"lastName",value:I.lastName,onChange:le=>P({...I,lastName:le.target.value}),placeholder:t("parent.form.lastName"),required:!0,className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"email",type:"email",value:I.email,onChange:le=>P({...I,email:le.target.value}),placeholder:t("parent.form.email"),required:!0,className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"phone",type:"tel",value:I.phone,onChange:le=>P({...I,phone:le.target.value}),placeholder:t("parent.form.phone"),className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsxs("div",{id:"parent-form-address",className:"relative",children:[a.jsx("input",{name:"address",value:I.address,onChange:le=>{P({...I,address:le.target.value}),G(!0)},onFocus:()=>G(!0),placeholder:t("parent.form.address")||"Adresse",className:"border rounded px-3 py-2 text-xs md:text-base w-full",autoComplete:"off"}),C&&a.jsx("div",{className:"text-sm text-red-500 mt-1",children:C}),E&&Q&&Q.length>0&&a.jsx("div",{className:"absolute z-50 bg-white shadow rounded mt-1 w-full max-h-40 overflow-auto border",children:Q.map((le,ve)=>a.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:()=>J(le),children:[a.jsx("div",{className:"font-medium",children:(le.house_number?`${le.house_number} `:"")+(le.street||le.name||"")}),a.jsx("div",{className:"text-xs text-gray-500",children:[le.postcode,le.city,le.state,le.country].filter(Boolean).join(" • ")})]},ve))})]}),a.jsx("input",{name:"postalCode",value:I.postalCode,onChange:le=>P({...I,postalCode:le.target.value}),placeholder:t("parent.form.postalCode")||"Code postal",className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"city",value:I.city,onChange:le=>P({...I,city:le.target.value}),placeholder:t("parent.form.city")||"Ville",className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"region",value:I.region,onChange:le=>P({...I,region:le.target.value}),placeholder:t("parent.form.region")||"Région",className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsx("input",{name:"country",value:I.country,onChange:le=>P({...I,country:le.target.value}),placeholder:t("parent.form.country")||"Pays",className:"border rounded px-3 py-2 text-xs md:text-base"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"password",type:Xe?"text":"password",value:I.password,onChange:le=>P({...I,password:le.target.value}),placeholder:t("parent.form.password.placeholder"),className:"border rounded px-3 py-2 text-xs md:text-base w-full pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>Se(le=>!le),children:Xe?"🙈":"👁️"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{name:"confirmPassword",type:Xe?"text":"password",value:I.confirmPassword,onChange:le=>P({...I,confirmPassword:le.target.value}),placeholder:t("parent.form.confirmPassword.placeholder"),className:"border rounded px-3 py-2 text-xs md:text-base w-full pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,className:"absolute right-2 top-2 text-gray-400 hover:text-gray-700",onClick:()=>Se(le=>!le),children:Xe?"🙈":"👁️"})]}),a.jsxs("div",{className:"md:col-span-2 flex gap-2",children:[a.jsx("button",{type:"submit",className:"bg-[#0b5566] text-white px-4 py-2 rounded hover:bg-[#08323a] transition",children:t(L?"parent.form.submit.save":"parent.form.submit.add")}),a.jsx("button",{type:"button",onClick:()=>{M(!1),U(null),P({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",postalCode:"",city:"",region:"",country:""}),ue(null)},className:"bg-gray-300 px-4 py-2 rounded",children:t("parent.form.cancel")})]}),se&&a.jsx("div",{className:"text-red-600 md:col-span-2",children:se}),ye&&a.jsx("div",{className:"md:col-span-2 text-[#0b5566] font-semibold text-center bg-[#a9ddf2] border border-[#fcdcdf] rounded-lg py-2",children:ye})]}),a.jsx("div",{children:a.jsx("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 auto-rows-fr items-stretch w-full",children:(()=>{const le=["bg-blue-50","bg-yellow-50","bg-purple-50","bg-[#a9ddf2]","bg-pink-50","bg-orange-50"];return ce.map((ve,Ee)=>{const Ie=le[Ee%le.length];return a.jsx(Tb,{parent:ve,color:Ie,parentDue:T[String(ve.id)]||0,onChildClick:K=>{k(K),O(!0)},onEdit:async K=>{U(K),M(!1),ue(null),P({firstName:K.firstName||"",lastName:K.lastName||"",email:K.email||"",phone:K.phone||"",address:"",postalCode:"",city:"",region:"",country:"",password:"",confirmPassword:""}),window.scrollTo({top:0,behavior:"smooth"});try{if((!K.email||!K.phone)&&K.id){const xe=await fe(`api/parent/${K.id}`,{credentials:"include"});if(xe.ok){const we=await xe.json(),Oe=we&&typeof we=="object"&&"parent"in we?we.parent:we;Oe&&P({firstName:String(Oe.firstName??Oe.name??""),lastName:String(Oe.lastName??""),email:String(Oe.email??""),phone:String(Oe.phone??""),address:String(Oe.address??""),postalCode:String(Oe.postalCode??""),city:String(Oe.city??""),region:String(Oe.region??""),country:String(Oe.country??""),password:"",confirmPassword:""})}}}catch{}},onDelete:K=>{Z(K)}},ve.id)})})()})}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full max-w-md",children:[a.jsx("div",{className:"text-lg font-semibold mb-4 text-gray-900",children:t("modal.delete.title")}),a.jsx("div",{className:"text-sm text-gray-600 mb-4",children:t("parent.delete.confirm_body")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>Z(null),className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:t("modal.cancel")}),a.jsx("button",{onClick:async()=>{try{const le=await fe(`api/parent/${W}`,{method:"DELETE",credentials:"include"}),ve=await le.text();let Ee=null;try{Ee=ve?JSON.parse(ve):null}catch{Ee=ve}if(!le.ok){const we=Ee&&typeof Ee=="object"&&("message"in Ee||"error"in Ee)?Ee.message||Ee.error:typeof Ee=="string"?Ee:"Erreur suppression";throw new Error(String(we))}const K=await(await fe("api/parent/admin",{credentials:"include"})).text();let xe=null;try{xe=K?JSON.parse(K):null}catch{xe=K}N(xe),Z(null)}catch(le){console.error("Delete parent failed",le),le instanceof Error?alert("Suppression échouée: "+le.message):alert("Suppression échouée"),Z(null)}},className:"flex-1 bg-red-500 text-white rounded-lg px-4 py-2",children:t("children.action.delete")})]})]})}),_&&a.jsx(kb,{child:j,onClose:()=>{O(!1),k(null)}}),De&&De.open&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold mb-2",children:"Confirmer la réinitialisation du mot de passe"}),a.jsx("p",{className:"mb-4",children:"Vous allez réinitialiser le mot de passe de ce parent. Voulez-vous continuer ?"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{Ye(null),Ce(null)},className:"flex-1 bg-gray-100 text-gray-700 rounded-lg px-4 py-2",children:"Annuler"}),a.jsx("button",{onClick:async()=>{if($e)try{if(!(await fe(`api/parent/${$e.parentId}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify($e.payload)})).ok)throw new Error("Erreur lors de la mise à jour");const Ee=await(await fe("api/parent/admin",{credentials:"include"})).text();let Ie=null;try{Ie=Ee?JSON.parse(Ee):null}catch{Ie=Ee}N(Ie),Ye(null),Ce(null),U(null),M(!1),P({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",address:"",postalCode:"",city:"",region:"",country:""})}catch(le){console.error("Parent reset failed",le),Ye(null),Ce(null),ue("La réinitialisation a échoué")}},className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2",children:"Confirmer"})]})]})})]})})}return a.jsxs("div",{className:`min-h-screen bg-[#fcfcff] p-2 sm:p-4 ${r?"":"md:pl-64"} w-full`,children:[a.jsxs("div",{className:"max-w-7xl mx-auto w-full px-0 sm:px-2 md:px-4",children:[a.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Espace Parent"}),Je?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsx(Tb,{parent:Je,color:"bg-white",parentDue:T[String(Je.id)]||0,onChildClick:V=>{k(V),O(!0)},onEdit:void 0,onDelete:void 0,annualPerChild:15})}):d.length===0?a.jsx("div",{children:"Aucun enfant trouvé."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(V=>a.jsx("div",{className:"p-4 border rounded shadow-sm",style:{borderColor:"#fcdcdf"},children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"font-medium cursor-pointer text-[#08323a] hover:text-[#0b5566] text-left",onClick:ce=>{ce.stopPropagation(),k(V),O(!0)},children:V.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Groupe: ",V.group]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"btn bg-[#a9ddf2] text-[#0b5566] hover:bg-[#f7f4d7]",onClick:()=>Me(`/parent/child/${V.id}/schedule`),children:"Planning"}),a.jsx("button",{className:"btn bg-[#a9ddf2] text-[#0b5566] hover:bg-[#f7f4d7]",onClick:()=>Me(`/parent/child/${V.id}/reports`),children:"Rapports"})]})]})},V.id))})]}),_&&a.jsx(kb,{child:j,onClose:()=>{O(!1),k(null)}})]})};function OE(s){try{return new Date(s).toLocaleDateString(void 0,{dateStyle:"full"})}catch{return s}}function RE({assignment:s,onClose:t}){const r=Ot();return b.useEffect(()=>{const l=o=>{o.key==="Escape"&&t()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[t]),a.jsx("div",{className:"fixed inset-0 z-60 bg-white/40 backdrop-blur-[2px] flex items-center justify-center",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md relative border border-gray-100",children:[a.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-500 hover:text-[#08323a]","aria-label":"Fermer",children:"✕"}),a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#08323a]",children:"Détail de l'activité"}),a.jsxs("div",{className:"text-sm text-[#08323a] mb-3",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Enfant :"})," ",s.child?.name??"—"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Date :"})," ",OE(s.date)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Nounou :"})," ",s.nanny?.name??"—"]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsx("button",{className:"flex-1 bg-white border border-gray-200 rounded-xl px-4 py-2 hover:bg-gray-50 text-[#0b5566]",onClick:t,children:"Fermer"}),a.jsx("button",{className:"flex-1 bg-[#0b5566] text-white rounded-xl px-4 py-2 hover:bg-[#08323a]",onClick:()=>{t(),r(`/assignments/${s.id}`)},children:"Voir l'affectation"})]})]})})}function DE({activities:s,onClose:t}){b.useEffect(()=>{const o=u=>{u.key==="Escape"&&t()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]);const{t:r,locale:l}=Rt();return!s||s.length===0?a.jsx("div",{className:"fixed inset-0 z-60 bg-white/40 backdrop-blur-[2px] flex items-center justify-center",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md relative border border-gray-100",children:[a.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700","aria-label":r("common.close"),children:"✕"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:r("activities.none")}),a.jsxs("p",{className:"text-sm text-gray-600",children:[r("activities.none")," ",r("common.no")]})]})}):a.jsx("div",{className:"fixed inset-0 z-60 bg-white/40 backdrop-blur-[2px] flex items-center justify-center",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-2xl relative border border-gray-100",children:[a.jsx("button",{onClick:t,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700","aria-label":r("common.close"),children:"✕"}),a.jsx("h3",{className:"text-xl font-semibold mb-4",children:r("page.activities")}),a.jsx("div",{className:"space-y-4",children:s.map(o=>a.jsxs("div",{className:"p-4 rounded-xl border bg-blue-50 border-blue-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"font-bold text-lg",children:o.name}),a.jsxs("div",{className:"text-sm text-gray-600",children:[new Intl.DateTimeFormat(l).format(new Date(o.date))," • ",o.startTime," - ",o.endTime]})]}),o.comment&&a.jsx("div",{className:"text-sm text-gray-700 mb-2",children:o.comment}),o.nannies&&o.nannies.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:o.nannies.map(u=>a.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-700 font-semibold text-sm",children:u.name},u.id))})]},o.id))})]})})}function ME(s){const t=s.getFullYear(),r=s.getMonth(),l=new Date(t,r,1),o=new Date(t,r+1,0),u=new Date(l);u.setDate(l.getDate()-(l.getDay()+6)%7);const d=new Date(o);d.setDate(o.getDate()+(7-d.getDay()===7?0:7-d.getDay()));const p=[];for(let m=new Date(u);m<=d;m.setDate(m.getDate()+1))p.push(new Date(m));const f=[];for(let m=0;m<p.length;m+=7)f.push(p.slice(m,m+7));return f}function Dr(s){const t=new Date(s);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function LE(){const{user:s}=fn(),[t,r]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const Z=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),I=()=>r(!!Z.matches);return I(),typeof Z.addEventListener=="function"?Z.addEventListener("change",I):Z.addListener(I),window.addEventListener("resize",I),window.addEventListener("orientationchange",I),()=>{try{typeof Z.removeEventListener=="function"?Z.removeEventListener("change",I):Z.removeListener(I)}catch{}window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I)}},[]);const{childId:l}=jv(),o=Ot(),[u,d]=b.useState([]),[p,f]=b.useState(!0),[m,x]=b.useState(new Date),[v,w]=b.useState(null),[N,T]=b.useState(null),S=(Z,I)=>{for(const P of I)if(typeof Z[P]=="string")return Z[P];return""},j=Z=>Z?Z.map(I=>{const P=I;return{id:I.id,date:I.date,startTime:S(P,["startTime","start"]),endTime:S(P,["endTime","end"]),name:typeof I.name=="string"?I.name:"",comment:typeof I.comment=="string"?I.comment:null,nannies:Array.isArray(I.nannies)?I.nannies:void 0}}):[],[k,_]=b.useState(null),O=b.useCallback(async(Z,I)=>{let P="/api/assignments";const Q=[];Z&&I&&(Q.push(`start=${Z.toISOString()}`),Q.push(`end=${I.toISOString()}`)),Q.length&&(P+=`?${Q.join("&")}`);const $=await fe(P,{credentials:"include"});return $.ok?$.json():[]},[]);b.useEffect(()=>{if(!l)return;(async()=>{try{const E=await(await fe("/api/children",{credentials:"include"})).json(),G=Array.isArray(E)?E.find(C=>String(C.id)===String(l)):null;_(G?G.name||`${G.firstName||""} ${G.lastName||""}`.trim():null)}catch($){console.error("Failed to load child name",$ instanceof Error?$.message:String($))}})(),f(!0);const Z=m.getFullYear(),I=m.getMonth(),P=new Date(Z,I,1),Q=new Date(Z,I+1,0);(async()=>{try{const $=await O(P,Q),E=Array.isArray($)?$.filter(G=>G.child&&G.child.id===l):[];d(E)}catch($){console.error("Failed to load assignments for child",$ instanceof Error?$.message:String($)),d([])}finally{f(!1)}})()},[l,m,O]);const q=ME(m),M=()=>{const Z=new Date(m);Z.setMonth(Z.getMonth()-1),x(Z)},L=()=>{const Z=new Date(m);Z.setMonth(Z.getMonth()+1),x(Z)},U=Z=>{if(s&&s.role==="parent")return;const I={id:"placeholder",date:Z.toISOString(),startTime:"",endTime:"",name:`Sélection: ${Z.toLocaleDateString()}`,comment:""};T({activities:[I]})},W=m.toLocaleString("default",{month:"long",year:"numeric"});return a.jsx("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${t?"":"md:pl-64"} w-full`,children:a.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 w-full",children:[a.jsx("div",{children:a.jsxs("button",{className:"mr-2 cursor-pointer flex items-center gap-2 bg-[#a9ddf2] text-[#0b5566] px-3 py-1 rounded",onClick:()=>o(-1),children:[a.jsx("span",{className:"text-lg",children:"←"}),a.jsx("span",{children:"Retour"})]})}),a.jsx("div",{className:"flex-1 text-center",children:a.jsxs("div",{className:"text-2xl font-semibold",children:["Planning de ",k??"l'enfant"]})}),a.jsxs("div",{className:"flex items-center gap-2 self-start sm:self-end",children:[a.jsx("button",{onClick:M,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:"‹"}),a.jsx("div",{className:"text-lg font-bold text-[#0b5566]",children:W.charAt(0).toUpperCase()+W.slice(1)}),a.jsx("button",{onClick:L,className:"w-8 h-8 flex items-center justify-center rounded-full border border-gray-200 bg-white hover:bg-gray-100 text-gray-500",children:"›"})]})]}),v&&a.jsx(RE,{assignment:v,onClose:()=>w(null)}),N&&a.jsx(DE,{activities:N.activities,onClose:()=>T(null)}),p?a.jsx("div",{children:"Chargement..."}):a.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",style:{border:"1px solid #fcdcdf"},children:[a.jsx("div",{className:"hidden sm:block w-full",children:a.jsxs("table",{className:"w-full table-fixed bg-white rounded-lg",style:{borderCollapse:"separate",borderSpacing:0,border:"1px solid transparent"},children:[a.jsx("thead",{children:a.jsx("tr",{children:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"].map(Z=>a.jsx("th",{className:"p-2 text-center font-semibold text-base",style:{color:"#08323a"},children:Z},Z))})}),a.jsx("tbody",{children:q.map((Z,I)=>a.jsx("tr",{children:Z.map((P,Q)=>{const $=u.filter(C=>Dr(C.date)===Dr(P)),E=P.toDateString()===new Date().toDateString(),G=P.getMonth()===m.getMonth();return a.jsxs("td",{className:"align-top p-2 h-28 "+(E?"border-2 border-[#a9ddf2] rounded-xl ":"border border-gray-100 ")+(G?"bg-[#f8f8fc]":"bg-gray-50 opacity-60")+" relative",children:[a.jsx("div",{className:"flex items-center justify-between mb-1",children:a.jsx("span",{className:"text-xs font-bold "+(G?"":"text-gray-400"),style:G?{color:"#08323a"}:void 0,children:P.getDate()})}),$.length===0?a.jsx("div",{className:"text-gray-300 text-sm",children:"—"}):a.jsx("div",{className:"space-y-2",children:$.map(C=>a.jsx("div",{className:"rounded px-2 py-1 text-sm shadow-sm",style:{background:"#a9ddf2",color:"#08323a"},children:C.nanny?a.jsx("button",{className:"font-semibold",style:{color:"#0b5566"},onClick:async()=>{try{const R=C.nanny.id,Y=Dr(C.date),Ne=await(await fe(`/api/nannies/${encodeURIComponent(R)}/schedules`,{credentials:"include"})).json(),z=Array.isArray(Ne)?Ne.filter(J=>{const se=J;return(typeof se.date=="string"?Dr(se.date):"")===Y}):[];T({activities:j(z)})}catch(R){console.error("Failed to fetch activities",R),T({activities:[]})}},children:C.nanny.name}):"Affectation"},C.id))})]},Q)})},I))})]})}),a.jsx("div",{className:"block sm:hidden w-full overflow-x-auto",children:a.jsxs("div",{className:"grid grid-cols-7 gap-1 w-full",children:[["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map((Z,I)=>a.jsx("div",{className:"text-center text-gray-500 font-semibold text-xs py-1",children:Z},I)),q.flat().map((Z,I)=>{const P=u.filter(E=>Dr(E.date)===Dr(Z)),Q=Z.toDateString()===new Date().toDateString(),$=Z.getMonth()===m.getMonth();return a.jsxs("div",{className:"box-border align-top p-1 h-full flex flex-col "+(Q?"border-2 border-[#0b5566] rounded-xl ":"border border-gray-100 ")+($?"bg-[#f8f8fc]":"bg-gray-50 opacity-60")+" relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-bold "+($?"text-gray-700":"text-gray-400"),children:Z.getDate()}),!(s&&s.role==="parent")&&a.jsx("button",{onClick:()=>U(Z),className:"text-[#0b5566] hover:text-[#08323a] text-lg font-bold",children:"+"})]}),P.length===0?a.jsx("div",{className:"text-gray-300 text-xs",children:"—"}):P.slice(0,2).map((E,G)=>a.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1 py-1 rounded-lg "+(G===0?"bg-[#a9ddf2]":"bg-[#fff7e6]")+" shadow-sm group",children:[a.jsx("span",{className:"w-2 h-2 rounded-full "+(G===0?"bg-[#08323a]":"bg-[#856400]")}),a.jsx("span",{className:"font-semibold text-gray-800 text-[11px] group-hover:underline cursor-pointer truncate max-w-[70px]",title:E.child.name,children:E.child.name})]},E.id)),P.length>2&&a.jsxs("div",{className:"text-gray-400 text-xs italic truncate max-w-[70px] overflow-hidden whitespace-nowrap",children:["...et ",P.length-2," autres"]})]},I)})]})})]})]})})}async function ul(s){if(!s.ok){const t=await s.text();throw new Error(t||"API error")}return await s.json()}const Ab={async getChildren(){const s=await fe("/api/parent/children",{credentials:"include"});return ul(s)},async getAdminList(){const s=await fe("/api/parent/admin",{credentials:"include"});return ul(s)},async getChildSchedule(s){const t=await fe(`/api/parent/child/${s}/schedule`,{credentials:"include"});return ul(t)},async getChildReports(s){const t=await fe(`/api/parent/child/${s}/reports`,{credentials:"include"});return ul(t)},async getChild(s){const t=await fe(`/api/children/${s}`,{credentials:"include"});return ul(t)}},$E={incident:"INCIDENT",comportement:"COMPORTEMENT",soin:"SOINS"},zE={haute:"bg-[#ffeaea] border-[#ffdddd]",moyenne:"bg-[#fff7e6] border-[#fff1d6]",basse:"bg-[#a9ddf2] border-[#cfeef9]"};function PE(){const{childId:s}=jv(),t=Ot(),[r,l]=b.useState([]),[o,u]=b.useState(!0),[d,p]=b.useState(null),f=(m,x)=>{if(!m)return"";try{const v=m.split(/[T ]/)[0];let w=v,N=null;if(x){const O=(x.includes("h")?x.replace(/h/,":").replace(/[^0-9:]/g,""):x).split(":"),q=(O[0]||"00").padStart(2,"0"),M=(O[1]||"00").padStart(2,"0");N=`${q}:${M}:00`}else{const _=m.includes("T")?m.split("T")[1]:m.includes(" ")?m.split(" ")[1]:void 0;if(_){const O=_.split(":"),q=(O[0]||"00").padStart(2,"0"),M=(O[1]||"00").padStart(2,"0");N=`${q}:${M}:00`}}w=N?`${v}T${N}`:`${v}T00:00:00`;const T=new Date(w);if(isNaN(T.getTime()))return`${m}${x?" à "+x:""}`;const S=new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric"}).format(T);if(!N)return S;const j=T.getHours().toString().padStart(2,"0"),k=T.getMinutes().toString().padStart(2,"0");return`${S} à ${j}h${k}`}catch{return`${m}${x?" à "+x:""}`}};return b.useEffect(()=>{if(!s)return;(async()=>{try{const x=await Ab.getChildReports(s);Array.isArray(x)?l(x.filter(v=>v&&typeof v=="object"&&"id"in v)):l([])}catch{}finally{u(!1)}})()},[s]),b.useEffect(()=>{s&&(async()=>{try{const m=await Ab.getChild(s);p(m&&typeof m=="object"&&"name"in m&&m.name||null)}catch{}})()},[s]),a.jsxs("div",{className:"min-h-screen bg-[#f7f8fa] flex flex-col md:flex-row",children:[a.jsx(Ac,{}),a.jsx("main",{className:"flex-1 flex flex-col items-center py-4 px-2 md:py-8 md:px-4 md:ml-64",children:a.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4 w-full",children:[a.jsx("div",{className:"self-start md:self-auto",children:a.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-100 bg-[#a9ddf2] text-[#0b5566] hover:bg-[#cfeef9] cursor-pointer",onClick:()=>t(-1),children:[a.jsx("span",{className:"text-lg",children:"←"}),a.jsx("span",{className:"font-medium",children:"Retour"})]})}),a.jsxs("div",{className:"flex-1 text-center min-w-0",children:[a.jsxs("h1",{className:"text-2xl sm:text-3xl font-extrabold text-gray-900 mb-1 tracking-tight truncate",children:["Rapports de ",d??"l'enfant"]}),a.jsx("div",{className:"text-base sm:text-lg text-gray-500 font-medium mb-2 sm:mb-4",children:"Consultez les rapports liés à cet enfant."})]}),a.jsx("div",{className:"w-24 md:w-32"})]}),a.jsx("div",{className:"flex flex-col gap-4 md:gap-6",children:o?a.jsx("div",{children:"Chargement..."}):r.length===0?a.jsx("div",{children:"Aucun rapport trouvé."}):r.map(m=>a.jsxs("div",{className:`rounded-xl shadow border-2 ${zE[m.priority]||""} overflow-hidden w-full`,style:{minWidth:0},children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 py-2 md:px-6",style:{background:m.priority==="haute"?"#ffeaea":m.priority==="moyenne"?"#fff7e6":"#a9ddf2"},children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2 md:mb-0 min-w-0",children:[a.jsx("span",{className:"px-2 py-1 rounded-lg font-bold text-xs truncate",style:{background:m.type==="incident"?"#ffeaea":m.type==="comportement"?"#fff7e6":"#a9ddf2",color:m.type==="incident"?"#7a2a2a":m.type==="comportement"?"#856400":"#08323a"},children:$E[m.type]||m.type}),a.jsx("span",{className:"px-2 py-1 rounded-lg font-bold text-xs",style:{background:m.priority==="haute"?"#dc2626":m.priority==="moyenne"?"#f59e0b":"#0b5566",color:"#ffffff"},children:m.priority?.toUpperCase()}),a.jsx("span",{className:"font-bold text-xs md:text-sm ml-1 truncate",style:{color:"#08323a"},children:m.nanny?.name??"—"})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2 md:mt-0 md:ml-4 whitespace-nowrap",children:f(m.date,m.time)})]}),a.jsxs("div",{className:"px-4 py-3 md:px-6 md:py-4",children:[a.jsx("div",{className:"font-bold text-gray-700 mb-1 text-sm md:text-base",children:"Résumé"}),a.jsx("div",{className:"text-gray-700 text-sm md:text-base mb-2 line-clamp-3",children:m.summary}),a.jsx("div",{className:"text-sm text-gray-500 mt-2 line-clamp-4",children:m.details})]})]},m.id))})]})})]})}const UE=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Pa(async()=>{const{default:l}=await Promise.resolve().then(()=>ci);return{default:l}},void 0).then(({default:l})=>l(...r)):t=fetch,(...r)=>t(...r)};class _h extends Error{constructor(t,r="FunctionsError",l){super(t),this.name=r,this.context=l}}class Ob extends _h{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Rb extends _h{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Db extends _h{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kf;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Kf||(Kf={}));var IE=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};class BE{constructor(t,{headers:r={},customFetch:l,region:o=Kf.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=UE(l)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return IE(this,arguments,void 0,function*(r,l={}){var o;try{const{headers:u,method:d,body:p,signal:f}=l;let m={},{region:x}=l;x||(x=this.region);const v=new URL(`${this.url}/${r}`);x&&x!=="any"&&(m["x-region"]=x,v.searchParams.set("forceFunctionRegion",x));let w;p&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",w=p):typeof p=="string"?(m["Content-Type"]="text/plain",w=p):typeof FormData<"u"&&p instanceof FormData?w=p:(m["Content-Type"]="application/json",w=JSON.stringify(p)));const N=yield this.fetch(v.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),u),body:w,signal:f}).catch(k=>{throw k.name==="AbortError"?k:new Ob(k)}),T=N.headers.get("x-relay-error");if(T&&T==="true")throw new Rb(N);if(!N.ok)throw new Db(N);let S=((o=N.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield N.json():S==="application/octet-stream"?j=yield N.blob():S==="text/event-stream"?j=N:S==="multipart/form-data"?j=yield N.formData():j=yield N.text(),{data:j,error:null,response:N}}catch(u){return u instanceof Error&&u.name==="AbortError"?{data:null,error:new Ob(u)}:{data:null,error:u,response:u instanceof Db||u instanceof Rb?u.context:void 0}}})}}var Zt={},Mr={},Lr={},$r={},zr={},Pr={},qE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ri=qE();const HE=ri.fetch,O0=ri.fetch.bind(ri),R0=ri.Headers,VE=ri.Request,FE=ri.Response,ci=Object.freeze(Object.defineProperty({__proto__:null,Headers:R0,Request:VE,Response:FE,default:O0,fetch:HE},Symbol.toStringTag,{value:"Module"})),GE=mj(ci);var Xo={},Mb;function D0(){if(Mb)return Xo;Mb=1,Object.defineProperty(Xo,"__esModule",{value:!0});class s extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Xo.default=s,Xo}var Lb;function M0(){if(Lb)return Pr;Lb=1;var s=Pr&&Pr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Pr,"__esModule",{value:!0});const t=s(GE),r=s(D0());class l{constructor(u){var d,p;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(d=u.shouldThrowOnError)!==null&&d!==void 0?d:!1,this.signal=u.signal,this.isMaybeSingle=(p=u.isMaybeSingle)!==null&&p!==void 0?p:!1,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,d){return this.headers=new Headers(this.headers),this.headers.set(u,d),this}then(u,d){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let f=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var x,v,w,N;let T=null,S=null,j=null,k=m.status,_=m.statusText;if(m.ok){if(this.method!=="HEAD"){const L=await m.text();L===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((x=this.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?S=L:S=JSON.parse(L))}const q=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");q&&M&&M.length>1&&(j=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(T={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,j=null,k=406,_="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const q=await m.text();try{T=JSON.parse(q),Array.isArray(T)&&m.status===404&&(S=[],T=null,k=200,_="OK")}catch{m.status===404&&q===""?(k=204,_="No Content"):T={message:q}}if(T&&this.isMaybeSingle&&(!((N=T?.details)===null||N===void 0)&&N.includes("0 rows"))&&(T=null,k=200,_="OK"),T&&this.shouldThrowOnError)throw new r.default(T)}return{error:T,data:S,count:j,status:k,statusText:_}});return this.shouldThrowOnError||(f=f.catch(m=>{var x,v,w;return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:`${(v=m?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(w=m?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),f.then(u,d)}returns(){return this}overrideTypes(){return this}}return Pr.default=l,Pr}var $b;function L0(){if($b)return zr;$b=1;var s=zr&&zr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(zr,"__esModule",{value:!0});const t=s(M0());class r extends t.default{select(o){let u=!1;const d=(o??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:u=!0,nullsFirst:d,foreignTable:p,referencedTable:f=p}={}){const m=f?`${f}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${o}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:d=u}={}){const p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${o}`),this}range(o,u,{foreignTable:d,referencedTable:p=d}={}){const f=typeof p>"u"?"offset":`${p}.offset`,m=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(f,`${o}`),this.url.searchParams.set(m,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:u=!1,settings:d=!1,buffers:p=!1,wal:f=!1,format:m="text"}={}){var x;const v=[o?"analyze":null,u?"verbose":null,d?"settings":null,p?"buffers":null,f?"wal":null].filter(Boolean).join("|"),w=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${w}"; options=${v};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return zr.default=r,zr}var zb;function Ch(){if(zb)return $r;zb=1;var s=$r&&$r.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty($r,"__esModule",{value:!0});const t=s(L0());class r extends t.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const d=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:d,type:p}={}){let f="";p==="plain"?f="pl":p==="phrase"?f="ph":p==="websearch"&&(f="w");const m=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${f}fts${m}.${u}`),this}match(o){return Object.entries(o).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(o,u,d){return this.url.searchParams.append(o,`not.${u}.${d}`),this}or(o,{foreignTable:u,referencedTable:d=u}={}){const p=d?`${d}.or`:"or";return this.url.searchParams.append(p,`(${o})`),this}filter(o,u,d){return this.url.searchParams.append(o,`${u}.${d}`),this}}return $r.default=r,$r}var Pb;function $0(){if(Pb)return Lr;Pb=1;var s=Lr&&Lr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Lr,"__esModule",{value:!0});const t=s(Ch());class r{constructor(o,{headers:u={},schema:d,fetch:p}){this.url=o,this.headers=new Headers(u),this.schema=d,this.fetch=p}select(o,u){const{head:d=!1,count:p}=u??{},f=d?"HEAD":"GET";let m=!1;const x=(o??"*").split("").map(v=>/\s/.test(v)&&!m?"":(v==='"'&&(m=!m),v)).join("");return this.url.searchParams.set("select",x),p&&this.headers.append("Prefer",`count=${p}`),new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:u,defaultToNull:d=!0}={}){var p;const f="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(m.length>0){const x=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(o,{onConflict:u,ignoreDuplicates:d=!1,count:p,defaultToNull:f=!0}={}){var m;const x="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),p&&this.headers.append("Prefer",`count=${p}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const v=o.reduce((w,N)=>w.concat(Object.keys(N)),[]);if(v.length>0){const w=[...new Set(v)].map(N=>`"${N}"`);this.url.searchParams.set("columns",w.join(","))}}return new t.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:u}={}){var d;const p="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:o}={}){var u;const d="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Lr.default=r,Lr}var Ub;function YE(){if(Ub)return Mr;Ub=1;var s=Mr&&Mr.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Mr,"__esModule",{value:!0});const t=s($0()),r=s(Ch());class l{constructor(u,{headers:d={},schema:p,fetch:f}={}){this.url=u,this.headers=new Headers(d),this.schemaName=p,this.fetch=f}from(u){const d=new URL(`${this.url}/${u}`);return new t.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new l(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:p=!1,get:f=!1,count:m}={}){var x;let v;const w=new URL(`${this.url}/rpc/${u}`);let N;p||f?(v=p?"HEAD":"GET",Object.entries(d).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{w.searchParams.append(S,j)})):(v="POST",N=d);const T=new Headers(this.headers);return m&&T.set("Prefer",`count=${m}`),new r.default({method:v,url:w,headers:T,schema:this.schemaName,body:N,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}}return Mr.default=l,Mr}var Ib;function KE(){if(Ib)return Zt;Ib=1;var s=Zt&&Zt.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.PostgrestError=Zt.PostgrestBuilder=Zt.PostgrestTransformBuilder=Zt.PostgrestFilterBuilder=Zt.PostgrestQueryBuilder=Zt.PostgrestClient=void 0;const t=s(YE());Zt.PostgrestClient=t.default;const r=s($0());Zt.PostgrestQueryBuilder=r.default;const l=s(Ch());Zt.PostgrestFilterBuilder=l.default;const o=s(L0());Zt.PostgrestTransformBuilder=o.default;const u=s(M0());Zt.PostgrestBuilder=u.default;const d=s(D0());return Zt.PostgrestError=d.default,Zt.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:d.default},Zt}var JE=KE();const WE=jl(JE),{PostgrestClient:XE,PostgrestQueryBuilder:L6,PostgrestFilterBuilder:$6,PostgrestTransformBuilder:z6,PostgrestBuilder:P6,PostgrestError:U6}=WE;class QE{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const l=r.node,o=parseInt(l.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const l=this.getWebSocketConstructor();return new l(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ZE="2.75.0",e3=`realtime-js/${ZE}`,t3="1.0.0",Jf=1e4,n3=1e3,a3=100;var hl;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(hl||(hl={}));var Wt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Wt||(Wt={}));var ta;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ta||(ta={}));var Wf;(function(s){s.websocket="websocket"})(Wf||(Wf={}));var Us;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Us||(Us={}));class s3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),l=new TextDecoder;return this._decodeBroadcast(t,r,l)}_decodeBroadcast(t,r,l){const o=r.getUint8(1),u=r.getUint8(2);let d=this.HEADER_LENGTH+2;const p=l.decode(t.slice(d,d+o));d=d+o;const f=l.decode(t.slice(d,d+u));d=d+u;const m=JSON.parse(l.decode(t.slice(d,t.byteLength)));return{ref:null,topic:p,event:f,payload:m}}}class z0{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Ct||(Ct={}));const Bb=(s,t,r={})=>{var l;const o=(l=r.skipTypes)!==null&&l!==void 0?l:[];return t?Object.keys(t).reduce((u,d)=>(u[d]=r3(d,s,t,o),u),{}):{}},r3=(s,t,r,l)=>{const o=t.find(p=>p.name===s),u=o?.type,d=r[s];return u&&!l.includes(u)?P0(u,d):Xf(d)},P0=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return c3(t,r)}switch(s){case Ct.bool:return i3(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return l3(t);case Ct.json:case Ct.jsonb:return o3(t);case Ct.timestamp:return u3(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return Xf(t);default:return Xf(t)}},Xf=s=>s,i3=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},l3=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},o3=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},c3=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,l=s[r];if(s[0]==="{"&&l==="}"){let u;const d=s.slice(1,r);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(p=>P0(t,p))}return s},u3=s=>typeof s=="string"?s.replace(" ","T"):s,U0=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Sf{constructor(t,r,l={},o=Jf){this.channel=t,this.event=r,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var l;return this._hasReceived(t)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(l=>l.status===t).forEach(l=>l.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qb;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(qb||(qb={}));class ml{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ml.syncState(this.state,o,u,d),this.pendingDiffs.forEach(f=>{this.state=ml.syncDiff(this.state,f,u,d)}),this.pendingDiffs=[],p()}),this.channel._on(l.diff,{},o=>{const{onJoin:u,onLeave:d,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ml.syncDiff(this.state,o,u,d),p())}),this.onJoin((o,u,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:d})}),this.onLeave((o,u,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,l,o){const u=this.cloneDeep(t),d=this.transformState(r),p={},f={};return this.map(u,(m,x)=>{d[m]||(f[m]=x)}),this.map(d,(m,x)=>{const v=u[m];if(v){const w=x.map(j=>j.presence_ref),N=v.map(j=>j.presence_ref),T=x.filter(j=>N.indexOf(j.presence_ref)<0),S=v.filter(j=>w.indexOf(j.presence_ref)<0);T.length>0&&(p[m]=T),S.length>0&&(f[m]=S)}else p[m]=x}),this.syncDiff(u,{joins:p,leaves:f},l,o)}static syncDiff(t,r,l,o){const{joins:u,leaves:d}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(u,(p,f)=>{var m;const x=(m=t[p])!==null&&m!==void 0?m:[];if(t[p]=this.cloneDeep(f),x.length>0){const v=t[p].map(N=>N.presence_ref),w=x.filter(N=>v.indexOf(N.presence_ref)<0);t[p].unshift(...w)}l(p,x,f)}),this.map(d,(p,f)=>{let m=t[p];if(!m)return;const x=f.map(v=>v.presence_ref);m=m.filter(v=>x.indexOf(v.presence_ref)<0),t[p]=m,o(p,m,f),m.length===0&&delete t[p]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(l=>r(l,t[l]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,l)=>{const o=t[l];return"metas"in o?r[l]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[l]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hb;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Hb||(Hb={}));var pl;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(pl||(pl={}));var La;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(La||(La={}));class Eh{constructor(t,r={config:{}},l){var o,u;if(this.topic=t,this.params=r,this.socket=l,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Sf(this,ta.join,this.params,this.timeout),this.rejoinTimer=new z0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ta.reply,{},(d,p)=>{this._trigger(this._replyEventName(p),d)}),this.presence=new ml(this),this.broadcastEndpointURL=U0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var l,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:d,presence:p,private:f}}=this.params,m=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(N=>N.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[pl.PRESENCE]&&this.bindings[pl.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},w={broadcast:d,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(N=>t?.(La.CHANNEL_ERROR,N)),this._onClose(()=>t?.(La.CLOSED)),this.updateJoinPayload(Object.assign({config:w},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:N})=>{var T;if(this.socket.setAuth(),N===void 0){t?.(La.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,j=(T=S?.length)!==null&&T!==void 0?T:0,k=[];for(let _=0;_<j;_++){const O=S[_],{filter:{event:q,schema:M,table:L,filter:U}}=O,W=N&&N[_];if(W&&W.event===q&&W.schema===M&&W.table===L&&W.filter===U)k.push(Object.assign(Object.assign({},O),{id:W.id}));else{this.unsubscribe(),this.state=Wt.errored,t?.(La.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(La.SUBSCRIBED);return}}).receive("error",N=>{this.state=Wt.errored,t?.(La.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{t?.(La.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,l){return this.state===Wt.joined&&t===pl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,l)}async send(t,r={}){var l,o;if(!this._canPush()&&t.type==="broadcast"){const{event:u,payload:d}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,p,f;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(p=(d=this.params)===null||d===void 0?void 0:d.config)===null||p===void 0?void 0:p.broadcast)===null||f===void 0)&&f.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ta.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new Sf(this,ta.leave,{},t),l.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(t,r,l){const o=new AbortController,u=setTimeout(()=>o.abort(),l),d=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(u),d}_push(t,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Sf(this,t,r,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>a3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,l){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,l){var o,u;const d=t.toLocaleLowerCase(),{close:p,error:f,leave:m,join:x}=ta;if(l&&[p,f,m,x].indexOf(d)>=0&&l!==this._joinRef())return;let w=this._onMessage(d,r,l);if(r&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(N=>{var T,S,j;return((T=N.filter)===null||T===void 0?void 0:T.event)==="*"||((j=(S=N.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===d}).map(N=>N.callback(w,l)):(u=this.bindings[d])===null||u===void 0||u.filter(N=>{var T,S,j,k,_,O;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in N){const q=N.id,M=(T=N.filter)===null||T===void 0?void 0:T.event;return q&&((S=r.ids)===null||S===void 0?void 0:S.includes(q))&&(M==="*"||M?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const q=(_=(k=N?.filter)===null||k===void 0?void 0:k.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return q==="*"||q===((O=r?.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===d}).map(N=>{if(typeof w=="object"&&"ids"in w){const T=w.data,{schema:S,table:j,commit_timestamp:k,type:_,errors:O}=T;w=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:k,eventType:_,new:{},old:{},errors:O}),this._getPayloadRecords(T))}N.callback(w,l)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,l){const o=t.toLocaleLowerCase(),u={type:o,filter:r,callback:l};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(t,r){const l=t.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Eh.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const l in t)if(t[l]!==r[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ta.close,{},t)}_onError(t){this._on(ta.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Bb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Bb(t.columns,t.old_record)),r}}const _f=()=>{},Qo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d3=[1e3,2e3,5e3,1e4],f3=1e4,h3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m3{constructor(t,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jf,this.transport=null,this.heartbeatIntervalMs=Qo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_f,this.ref=0,this.reconnectTimer=null,this.logger=_f,this.conn=null,this.sendBuffer=[],this.serializer=new s3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...d)=>Pa(async()=>{const{default:p}=await Promise.resolve().then(()=>ci);return{default:p}},void 0).then(({default:p})=>p(...d)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...d)=>u(...d)},!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Wf.websocket}`,this.httpEndpoint=U0(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,l){this.logger(t,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case hl.connecting:return Us.Connecting;case hl.open:return Us.Open;case hl.closing:return Us.Closing;default:return Us.Closed}}isConnected(){return this.connectionState()===Us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const l=`realtime:${t}`,o=this.getChannels().find(u=>u.topic===l);if(o)return o;{const u=new Eh(`realtime:${t}`,r,this);return this.channels.push(u),u}}push(t){const{topic:r,event:l,payload:o,ref:u}=t,d=()=>{this.encode(t,p=>{var f;(f=this.conn)===null||f===void 0||f.send(p)})};this.log("push",`${r} ${l} (${u})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(n3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(l=>l.topic===t&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:o,payload:u,ref:d}=r,p=d?`(${d})`:"",f=u.status||"";this.log("receive",`${f} ${l} ${o} ${p}`.trim(),u),this.channels.filter(m=>m._isMember(l)).forEach(m=>m._trigger(o,u,d)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ta.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const l=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${l}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const l=new Blob([h3],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const o={access_token:r,version:e3};r&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(ta.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(l=>{try{l(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(l){this.log("error",`error triggering ${t} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new z0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,l,o,u,d,p,f,m,x;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=t?.timeout)!==null&&l!==void 0?l:Jf,this.heartbeatIntervalMs=(o=t?.heartbeatIntervalMs)!==null&&o!==void 0?o:Qo.HEARTBEAT_INTERVAL,this.worker=(u=t?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(p=t?.heartbeatCallback)!==null&&p!==void 0?p:_f,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t?.reconnectAfterMs)!==null&&f!==void 0?f:(v=>d3[v-1]||f3),this.encode=(m=t?.encode)!==null&&m!==void 0?m:((v,w)=>w(JSON.stringify(v))),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class Th extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class p3 extends Th{constructor(t,r,l){super(t),this.name="StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qf extends Th{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var g3=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};const I0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Pa(async()=>{const{default:l}=await Promise.resolve().then(()=>ci);return{default:l}},void 0).then(({default:l})=>l(...r)):t=fetch,(...r)=>t(...r)},x3=()=>g3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pa(()=>Promise.resolve().then(()=>ci),void 0)).Response:Response}),Zf=s=>{if(Array.isArray(s))return s.map(r=>Zf(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,l])=>{const o=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[o]=Zf(l)}),t},b3=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Vs=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};const Cf=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),v3=(s,t,r)=>Vs(void 0,void 0,void 0,function*(){const l=yield x3();s instanceof l&&!r?.noResolveJson?s.json().then(o=>{const u=s.status||500,d=o?.statusCode||u+"";t(new p3(Cf(o),u,d))}).catch(o=>{t(new Qf(Cf(o),o))}):t(new Qf(Cf(s),s))}),y3=(s,t,r,l)=>{const o={method:s,headers:t?.headers||{}};return s==="GET"||!l?o:(b3(l)?(o.headers=Object.assign({"Content-Type":"application/json"},t?.headers),o.body=JSON.stringify(l)):o.body=l,t?.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function El(s,t,r,l,o,u){return Vs(this,void 0,void 0,function*(){return new Promise((d,p)=>{s(r,y3(t,l,o,u)).then(f=>{if(!f.ok)throw f;return l?.noResolveJson?f:f.json()}).then(f=>d(f)).catch(f=>v3(f,p,l))})})}function wc(s,t,r,l){return Vs(this,void 0,void 0,function*(){return El(s,"GET",t,r,l)})}function ua(s,t,r,l,o){return Vs(this,void 0,void 0,function*(){return El(s,"POST",t,l,o,r)})}function eh(s,t,r,l,o){return Vs(this,void 0,void 0,function*(){return El(s,"PUT",t,l,o,r)})}function w3(s,t,r,l){return Vs(this,void 0,void 0,function*(){return El(s,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),l)})}function B0(s,t,r,l,o){return Vs(this,void 0,void 0,function*(){return El(s,"DELETE",t,l,o,r)})}var j3=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};class N3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return j3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var S3=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};class _3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new N3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return S3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}var yn=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};const C3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class E3{constructor(t,r={},l,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=l,this.fetch=I0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,l,o){return yn(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},Vb),o);let p=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const f=d.metadata;typeof Blob<"u"&&l instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),f&&u.append("metadata",this.encodeMetadata(f)),u.append("",l)):typeof FormData<"u"&&l instanceof FormData?(u=l,u.append("cacheControl",d.cacheControl),f&&u.append("metadata",this.encodeMetadata(f))):(u=l,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType,f&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),o?.headers&&(p=Object.assign(Object.assign({},p),o.headers));const m=this._removeEmptyFolders(r),x=this._getFinalPath(m),v=yield(t=="PUT"?eh:ua)(this.fetch,`${this.url}/object/${x}`,u,Object.assign({headers:p},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Vt(u))return{data:null,error:u};throw u}})}upload(t,r,l){return yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,l)})}uploadToSignedUrl(t,r,l,o){return yn(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${d}`);p.searchParams.set("token",r);try{let f;const m=Object.assign({upsert:Vb.upsert},o),x=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&l instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",l)):typeof FormData<"u"&&l instanceof FormData?(f=l,f.append("cacheControl",m.cacheControl)):(f=l,x["cache-control"]=`max-age=${m.cacheControl}`,x["content-type"]=m.contentType);const v=yield eh(this.fetch,p.toString(),f,{headers:x});return{data:{path:u,fullPath:v.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Vt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(t,r){return yn(this,void 0,void 0,function*(){try{let l=this._getFinalPath(t);const o=Object.assign({},this.headers);r?.upsert&&(o["x-upsert"]="true");const u=yield ua(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),d=new URL(this.url+u.url),p=d.searchParams.get("token");if(!p)throw new Th("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:p},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}update(t,r,l){return yn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,l)})}move(t,r,l){return yn(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}copy(t,r,l){return yn(this,void 0,void 0,function*(){try{return{data:{path:(yield ua(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,l){return yn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),u=yield ua(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:this.headers});const d=l?.download?`&download=${l.download===!0?"":l.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,l){return yn(this,void 0,void 0,function*(){try{const o=yield ua(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),u=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof r?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(r?.transform||{}),d=u?`?${u}`:"",p=this._getFinalPath(t),f=()=>wc(this.fetch,`${this.url}/${o}/${p}${d}`,{headers:this.headers,noResolveJson:!0});return new _3(f,this.shouldThrowOnError)}info(t){return yn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const l=yield wc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zf(l),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}exists(t){return yn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield w3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l)&&l instanceof Qf){const o=l.originalError;if([400,404].includes(o?.status))return{data:!1,error:l}}throw l}})}getPublicUrl(t,r){const l=this._getFinalPath(t),o=[],u=r?.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&o.push(u);const p=typeof r?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(r?.transform||{});f!==""&&o.push(f);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${l}${m}`)}}}remove(t){return yn(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}list(t,r,l){return yn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},C3),r),{prefix:t||""});return{data:yield ua(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}listV2(t,r){return yn(this,void 0,void 0,function*(){try{const l=Object.assign({},t);return{data:yield ua(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const T3="2.75.0",k3={"X-Client-Info":`storage-js/${T3}`};var Ur=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};class A3{constructor(t,r={},l,o){this.shouldThrowOnError=!1;const u=new URL(t);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k3),r),this.fetch=I0(l)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ur(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}createBucket(t){return Ur(this,arguments,void 0,function*(r,l={public:!1}){try{return{data:yield ua(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:l.type,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return Ur(this,void 0,void 0,function*(){try{return{data:yield eh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}emptyBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ur(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vt(r))return{data:null,error:r};throw r}})}}class O3 extends A3{constructor(t,r={},l,o){super(t,r,l,o)}from(t){return new E3(this.url,this.headers,t,this.fetch)}}const R3="2.75.0";let fl="";typeof Deno<"u"?fl="deno":typeof document<"u"?fl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fl="react-native":fl="node";const D3={"X-Client-Info":`supabase-js-${fl}/${R3}`},M3={headers:D3},L3={schema:"public"},$3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z3={};var P3=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};const U3=s=>{let t;return s?t=s:typeof fetch>"u"?t=O0:t=fetch,(...r)=>t(...r)},I3=()=>typeof Headers>"u"?R0:Headers,B3=(s,t,r)=>{const l=U3(r),o=I3();return(u,d)=>P3(void 0,void 0,void 0,function*(){var p;const f=(p=yield t())!==null&&p!==void 0?p:s;let m=new o(d?.headers);return m.has("apikey")||m.set("apikey",s),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),l(u,Object.assign(Object.assign({},d),{headers:m}))})};var q3=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};function H3(s){return s.endsWith("/")?s:s+"/"}function V3(s,t){var r,l;const{db:o,auth:u,realtime:d,global:p}=s,{db:f,auth:m,realtime:x,global:v}=t,w={db:Object.assign(Object.assign({},f),o),auth:Object.assign(Object.assign({},m),u),realtime:Object.assign(Object.assign({},x),d),storage:{},global:Object.assign(Object.assign(Object.assign({},v),p),{headers:Object.assign(Object.assign({},(r=v?.headers)!==null&&r!==void 0?r:{}),(l=p?.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>q3(this,void 0,void 0,function*(){return""})};return s.accessToken?w.accessToken=s.accessToken:delete w.accessToken,w}function F3(s){const t=s?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(H3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const q0="2.75.0",Fr=30*1e3,th=3,Ef=th*Fr,G3="http://localhost:9999",Y3="supabase.auth.token",K3={"X-Client-Info":`gotrue-js/${q0}`},nh="X-Supabase-Api-Version",H0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},J3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W3=600*1e3;class yl extends Error{constructor(t,r,l){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function Fe(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class X3 extends yl{constructor(t,r,l){super(t,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function Q3(s){return Fe(s)&&s.name==="AuthApiError"}class Is extends yl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class xs extends yl{constructor(t,r,l,o){super(t,l,o),this.name=r,this.status=l}}class ps extends xs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z3(s){return Fe(s)&&s.name==="AuthSessionMissingError"}class Ir extends xs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zo extends xs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ec extends xs{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function e5(s){return Fe(s)&&s.name==="AuthImplicitGrantRedirectError"}class Fb extends xs{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ah extends xs{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Tf(s){return Fe(s)&&s.name==="AuthRetryableFetchError"}class Gb extends xs{constructor(t,r,l){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class sh extends xs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yb=` 	
\r=`.split(""),t5=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<Yb.length;t+=1)s[Yb[t].charCodeAt(0)]=-2;for(let t=0;t<jc.length;t+=1)s[jc[t].charCodeAt(0)]=t;return s})();function Kb(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;r(jc[l]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const l=t.queue>>t.queuedBits-6&63;r(jc[l]),t.queuedBits-=6}}function V0(s,t,r){const l=t5[s];if(l>-1)for(t.queue=t.queue<<6|l,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Jb(s){const t=[],r=d=>{t.push(String.fromCodePoint(d))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=d=>{s5(d,l,r)};for(let d=0;d<s.length;d+=1)V0(s.charCodeAt(d),o,u);return t.join("")}function n5(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function a5(s,t){for(let r=0;r<s.length;r+=1){let l=s.charCodeAt(r);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(s.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}n5(l,t)}}function s5(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){t.utf8seq=l;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ni(s){const t=[],r={queue:0,queuedBits:0},l=o=>{t.push(o)};for(let o=0;o<s.length;o+=1)V0(s.charCodeAt(o),r,l);return new Uint8Array(t)}function r5(s){const t=[];return a5(s,r=>t.push(r)),new Uint8Array(t)}function Bs(s){const t=[],r={queue:0,queuedBits:0},l=o=>{t.push(o)};return s.forEach(o=>Kb(o,r,l)),Kb(null,r,l),t.join("")}function i5(s){return Math.round(Date.now()/1e3)+s}function l5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const An=()=>typeof window<"u"&&typeof document<"u",$s={tested:!1,writable:!1},F0=()=>{if(!An())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($s.tested)return $s.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),$s.tested=!0,$s.writable=!0}catch{$s.tested=!0,$s.writable=!1}return $s.writable};function o5(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,u)=>{t[u]=o})}catch{}return r.searchParams.forEach((l,o)=>{t[o]=l}),t}const G0=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Pa(async()=>{const{default:l}=await Promise.resolve().then(()=>ci);return{default:l}},void 0).then(({default:l})=>l(...r)):t=fetch,(...r)=>t(...r)},c5=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Gr=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},zs=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ms=async(s,t)=>{await s.removeItem(t)};class $c{constructor(){this.promise=new $c.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}$c.promiseConstructor=Promise;function kf(s){const t=s.split(".");if(t.length!==3)throw new sh("Invalid JWT structure");for(let l=0;l<t.length;l++)if(!J3.test(t[l]))throw new sh("JWT not in base64url format");return{header:JSON.parse(Jb(t[0])),payload:JSON.parse(Jb(t[1])),signature:ni(t[2]),raw:{header:t[0],payload:t[1]}}}async function u5(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function d5(s,t){return new Promise((l,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await s(u);if(!t(u,null,d)){l(d);return}}catch(d){if(!t(u,d)){o(d);return}}})()})}function f5(s){return("0"+s.toString(16)).substr(-2)}function h5(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let o="";for(let u=0;u<56;u++)o+=r.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(t),Array.from(t,f5).join("")}async function m5(s){const r=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(l);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function p5(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await m5(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Br(s,t,r=!1){const l=h5();let o=l;r&&(o+="/PASSWORD_RECOVERY"),await Gr(s,`${t}-code-verifier`,o);const u=await p5(l);return[u,l===u?"plain":"s256"]}const g5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function x5(s){const t=s.headers.get(nh);if(!t||!t.match(g5))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function b5(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function v5(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y5=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(s){if(!y5.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Af(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wb(s){return JSON.parse(JSON.stringify(s))}var w5=function(s,t){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&t.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(s);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(s,l[o])&&(r[l[o]]=s[l[o]]);return r};const Ps=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),j5=[502,503,504];async function Xb(s){var t;if(!c5(s))throw new ah(Ps(s),0);if(j5.includes(s.status))throw new ah(Ps(s),s.status);let r;try{r=await s.json()}catch(u){throw new Is(Ps(u),u)}let l;const o=x5(s);if(o&&o.getTime()>=H0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new Gb(Ps(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(l==="session_not_found")throw new ps}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new Gb(Ps(r),s.status,r.weak_password.reasons);throw new X3(Ps(r),s.status||500,l)}const N5=(s,t,r,l)=>{const o={method:s,headers:t?.headers||{}};return s==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),r))};async function et(s,t,r,l){var o;const u=Object.assign({},l?.headers);u[nh]||(u[nh]=H0["2024-01-01"].name),l?.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const d=(o=l?.query)!==null&&o!==void 0?o:{};l?.redirectTo&&(d.redirect_to=l.redirectTo);const p=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",f=await S5(s,t,r+p,{headers:u,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(f):{data:Object.assign({},f),error:null}}async function S5(s,t,r,l,o,u){const d=N5(t,l,o,u);let p;try{p=await s(r,Object.assign({},d))}catch(f){throw console.error(f),new ah(Ps(f),0)}if(p.ok||await Xb(p),l?.noResolveJson)return p;try{return await p.json()}catch(f){await Xb(f)}}function ea(s){var t;let r=null;E5(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=i5(s.expires_in)));const l=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:l},error:null}}function Qb(s){const t=ea(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(t.data.weak_password=s.weak_password),t}function gs(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function _5(s){return{data:s,error:null}}function C5(s){const{action_link:t,email_otp:r,hashed_token:l,redirect_to:o,verification_type:u}=s,d=w5(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:r,hashed_token:l,redirect_to:o,verification_type:u},f=Object.assign({},d);return{data:{properties:p,user:f},error:null}}function Zb(s){return s}function E5(s){return s.access_token&&s.refresh_token&&s.expires_in}const Of=["global","local","others"];var T5=function(s,t){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&t.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(s);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(s,l[o])&&(r[l[o]]=s[l[o]]);return r};class k5{constructor({url:t="",headers:r={},fetch:l}){this.url=t,this.headers=r,this.fetch=G0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Of[0]){if(Of.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Of.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Fe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gs})}catch(l){if(Fe(l))return{data:{user:null},error:l};throw l}}async generateLink(t){try{const{options:r}=t,l=T5(t,["options"]),o=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(o.new_email=l?.newEmail,delete o.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:C5,redirectTo:r?.redirectTo})}catch(r){if(Fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:gs})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,l,o,u,d,p,f;try{const m={nextPage:null,lastPage:0,total:0},x=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Zb});if(x.error)throw x.error;const v=await x.json(),w=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(f=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&f!==void 0?f:[];return N.length>0&&(N.forEach(T=>{const S=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(T.split(";")[1].split("=")[1]);m[`${j}Page`]=S}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Fe(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){qr(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:gs})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){qr(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:gs})}catch(l){if(Fe(l))return{data:{user:null},error:l};throw l}}async deleteUser(t,r=!1){qr(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:gs})}catch(l){if(Fe(l))return{data:{user:null},error:l};throw l}}async _listFactors(t){qr(t.userId);try{const{data:r,error:l}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:l}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){qr(t.userId),qr(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,l,o,u,d,p,f;try{const m={nextPage:null,lastPage:0,total:0},x=await et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=t?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Zb});if(x.error)throw x.error;const v=await x.json(),w=(d=x.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(f=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&f!==void 0?f:[];return N.length>0&&(N.forEach(T=>{const S=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(T.split(";")[1].split("=")[1]);m[`${j}Page`]=S}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Fe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}function ev(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}const Hr={debug:!!(globalThis&&F0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Y0 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A5 extends Y0{}async function O5(s,t,r){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const l=new globalThis.AbortController;return t>0&&setTimeout(()=>{l.abort(),Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,o.name);try{return await r()}finally{Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,o.name)}}else{if(t===0)throw Hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new A5(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Hr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function R5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function K0(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function D5(s){return parseInt(s,16)}function M5(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,l=>l.toString(16).padStart(2,"0")).join("")}function L5(s){var t;const{chainId:r,domain:l,expirationTime:o,issuedAt:u=new Date,nonce:d,notBefore:p,requestId:f,resources:m,scheme:x,uri:v,version:w}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const N=K0(s.address),T=x?`${x}://${l}`:l,S=s.statement?`${s.statement}
`:"",j=`${T} wants you to sign in with your Ethereum account:
${N}

${S}`;let k=`URI: ${v}
Version: ${w}
Chain ID: ${r}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(o&&(k+=`
Expiration Time: ${o.toISOString()}`),p&&(k+=`
Not Before: ${p.toISOString()}`),f&&(k+=`
Request ID: ${f}`),m){let _=`
Resources:`;for(const O of m){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);_+=`
- ${O}`}k+=_}return`${j}
${k}`}class Ht extends Error{constructor({message:t,code:r,cause:l,name:o}){var u;super(t,{cause:l}),this.__isWebAuthnError=!0,this.name=(u=o??(l instanceof Error?l.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class Nc extends Ht{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function $5({error:s,options:t}){var r,l,o;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(t.mediation==="conditional"&&((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(W0(d)){if(u.rp.id!==d)return new Ht({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function z5({error:s,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Ht({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(W0(l)){if(r.rpId!==l)return new Ht({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}var J0=function(s,t){var r={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&t.indexOf(l)<0&&(r[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(s);o<l.length;o++)t.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(s,l[o])&&(r[l[o]]=s[l[o]]);return r};class P5{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const U5=new P5;function I5(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:t,user:r,excludeCredentials:l}=s,o=J0(s,["challenge","user","excludeCredentials"]),u=ni(t).buffer,d=Object.assign(Object.assign({},r),{id:ni(r.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:u,user:d});if(l&&l.length>0){p.excludeCredentials=new Array(l.length);for(let f=0;f<l.length;f++){const m=l[f];p.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:ni(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return p}function B5(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:t,allowCredentials:r}=s,l=J0(s,["challenge","allowCredentials"]),o=ni(t).buffer,u=Object.assign(Object.assign({},l),{challenge:o});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const p=r[d];u.allowCredentials[d]=Object.assign(Object.assign({},p),{id:ni(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function q5(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Bs(new Uint8Array(s.response.attestationObject)),clientDataJSON:Bs(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function H5(s){var t;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,l=s.getClientExtensionResults(),o=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Bs(new Uint8Array(o.authenticatorData)),clientDataJSON:Bs(new Uint8Array(o.clientDataJSON)),signature:Bs(new Uint8Array(o.signature)),userHandle:o.userHandle?Bs(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function W0(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function tv(){var s,t;return!!(An()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function V5(s){try{const t=await navigator.credentials.create(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Nc("Browser returned unexpected credential type",t)}:{data:null,error:new Nc("Empty credential response",t)}}catch(t){return{data:null,error:$5({error:t,options:s})}}}async function F5(s){try{const t=await navigator.credentials.get(s);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Nc("Browser returned unexpected credential type",t)}:{data:null,error:new Nc("Empty credential response",t)}}catch(t){return{data:null,error:z5({error:t,options:s})}}}const G5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Y5={userVerification:"preferred",hints:["security-key"]};function Sc(...s){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),l={};for(const o of s)if(o)for(const u in o){const d=o[u];if(d!==void 0)if(Array.isArray(d))l[u]=d;else if(r(d))l[u]=d;else if(t(d)){const p=l[u];t(p)?l[u]=Sc(p,d):l[u]=Sc(d)}else l[u]=d}return l}function K5(s,t){return Sc(G5,s,t||{})}function J5(s,t){return Sc(Y5,s,t||{})}class W5{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:l,signal:o},u){try{const{data:d,error:p}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!d)return{data:null,error:p};const f=o??U5.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:m}=d.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${l}`),m.displayName||(m.displayName=m.name)}switch(d.webauthn.type){case"create":{const m=K5(d.webauthn.credential_options.publicKey,u?.create),{data:x,error:v}=await V5({publicKey:m,signal:f});return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}case"request":{const m=J5(d.webauthn.credential_options.publicKey,u?.request),{data:x,error:v}=await F5(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:m,signal:f}));return x?{data:{factorId:t,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}}}catch(d){return Fe(d)?{data:null,error:d}:{data:null,error:new Is("Unexpected error in challenge",d)}}}async _verify({challengeId:t,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:l})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o}},u){if(!r)return{data:null,error:new yl("rpId is required for WebAuthn authentication")};try{if(!tv())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:l},signal:o},{request:u});if(!d)return{data:null,error:p};const{webauthn:f}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:f.type,rpId:r,rpOrigins:l,credential_response:f.credential_response}})}catch(d){return Fe(d)?{data:null,error:d}:{data:null,error:new Is("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:o},u){if(!r)return{data:null,error:new yl("rpId is required for WebAuthn registration")};try{if(!tv())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:d,error:p}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(x=>{var v;return(v=x.data)===null||v===void 0?void 0:v.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===t&&w.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:f,error:m}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:o},{create:u});return f?this._verify({factorId:d.id,challengeId:f.challengeId,webauthn:{rpId:r,rpOrigins:l,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(d){return Fe(d)?{data:null,error:d}:{data:null,error:new Is("Unexpected error in register",d)}}}}R5();const X5={url:G3,storageKey:Y3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function nv(s,t,r){return await r()}const Vr={};class wl{get jwks(){var t,r;return(r=(t=Vr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Vr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vr[this.storageKey]=Object.assign(Object.assign({},Vr[this.storageKey]),{cachedAt:t})}constructor(t){var r,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wl.nextInstanceID,wl.nextInstanceID+=1,this.instanceID>0&&An()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},X5),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new k5({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=G0(o.fetch),this.lock=o.lock||nv,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:An()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=O5:this.lock=nv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new W5(this)},this.persistSession?(o.storage?this.storage=o.storage:F0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ev(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ev(this.memoryStorage)),An()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${q0}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=o5(window.location.href);let l="none";if(this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce"),An()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:u}=await this._getSessionFromURL(r,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),e5(u)){const f=(t=u.details)===null||t===void 0?void 0:t.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",p),await this._saveSession(d),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Fe(r)?{error:r}:{error:new Is("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,l,o;try{const u=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=t?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ea}),{data:d,error:p}=u;if(p||!d)return{data:{user:null,session:null},error:p};const f=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(u){if(Fe(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(t){var r,l,o;try{let u;if("email"in t){const{email:x,password:v,options:w}=t;let N=null,T=null;this.flowType==="pkce"&&([N,T]=await Br(this.storage,this.storageKey)),u=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:x,password:v,data:(r=w?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:N,code_challenge_method:T},xform:ea})}else if("phone"in t){const{phone:x,password:v,options:w}=t;u=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:v,data:(l=w?.data)!==null&&l!==void 0?l:{},channel:(o=w?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:ea})}else throw new Zo("You must provide either an email or phone number and a password");const{data:d,error:p}=u;if(p||!d)return{data:{user:null,session:null},error:p};const f=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(u){if(Fe(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(t){try{let r;if("email"in t){const{email:u,password:d,options:p}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qb})}else if("phone"in t){const{phone:u,password:d,options:p}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Qb})}else throw new Zo("You must provide either an email or phone number and a password");const{data:l,error:o}=r;return o?{data:{user:null,session:null},error:o}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ir}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,l,o,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,l,o,u,d,p,f,m,x,v,w;let N,T;if("message"in t)N=t.message,T=t.signature;else{const{chain:S,wallet:j,statement:k,options:_}=t;let O;if(An())if(typeof j=="object")O=j;else{const Z=window;if("ethereum"in Z&&typeof Z.ethereum=="object"&&"request"in Z.ethereum&&typeof Z.ethereum.request=="function")O=Z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=j}const q=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),M=await O.request({method:"eth_requestAccounts"}).then(Z=>Z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=K0(M[0]);let U=(l=_?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!U){const Z=await O.request({method:"eth_chainId"});U=D5(Z)}const W={domain:q.host,address:L,statement:k,uri:q.href,version:"1",chainId:U,nonce:(o=_?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(u=_?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(p=_?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(f=_?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=_?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(x=_?.signInWithEthereum)===null||x===void 0?void 0:x.resources};N=L5(W),T=await O.request({method:"personal_sign",params:[M5(N),L]})}try{const{data:S,error:j}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:N,signature:T},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:ea});if(j)throw j;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Ir}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:j})}catch(S){if(Fe(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var r,l,o,u,d,p,f,m,x,v,w,N;let T,S;if("message"in t)T=t.message,S=t.signature;else{const{chain:j,wallet:k,statement:_,options:O}=t;let q;if(An())if(typeof k=="object")q=k;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))q=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=k}const M=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in q&&q.signIn){const L=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),_?{statement:_}:null));let U;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")U=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)U=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)T=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),S=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${M.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(o=(l=O?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=O?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((p=O?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((v=(x=O?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||v===void 0)&&v.length?["Resources",...O.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const L=await q.signMessage(new TextEncoder().encode(T),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=L}}try{const{data:j,error:k}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:Bs(S)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=t.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:ea});if(k)throw k;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Ir}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:k})}catch(j){if(Fe(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await zs(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(r??"").split("/");try{const{data:u,error:d}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:l},xform:ea});if(await ms(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new Ir}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:d})}catch(u){if(Fe(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(t){try{const{options:r,provider:l,token:o,access_token:u,nonce:d}=t,p=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ea}),{data:f,error:m}=p;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ir}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,l,o,u,d;try{if("email"in t){const{email:p,options:f}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await Br(this.storage,this.storageKey));const{error:v}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=f?.data)!==null&&r!==void 0?r:{},create_user:(l=f?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:x},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in t){const{phone:p,options:f}=t,{data:m,error:x}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(u=f?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(d=f?.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:x}}throw new Zo("You must provide either an email or phone number.")}catch(p){if(Fe(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(t){var r,l;try{let o,u;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,u=(l=t.options)===null||l===void 0?void 0:l.captchaToken);const{data:d,error:p}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:ea});if(p)throw p;if(!d)throw new Error("An error occurred on token verification.");const f=d.session,m=d.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var r,l,o;try{let u=null,d=null;return this.flowType==="pkce"&&([u,d]=await Br(this.storage,this.storageKey)),await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(l=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=t?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:_5})}catch(u){if(Fe(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:l}=t;if(l)throw l;if(!r)throw new ps;const{error:o}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:l,type:o,options:u}=t,{error:d}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in t){const{phone:l,type:o,options:u}=t,{data:d,error:p}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return{data:{user:null,session:null,messageId:d?.message_id},error:p}}throw new Zo("You must provide either an email or phone number and a type")}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const l=t.expires_at?t.expires_at*1e3-Date.now()<Ef:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",t.expires_at),!l){if(this.userStorage){const d=await zs(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=Af()}if(this.storage.isServer&&t.user){let d=this.suppressGetSessionWarning;t=new Proxy(t,{get:(f,m,x)=>(!d&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,x))})}return{data:{session:t},error:null}}const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:gs}):await this._useSession(async r=>{var l,o,u;const{data:d,error:p}=r;if(p)throw p;return!(!((l=d.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ps}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:gs})})}catch(r){if(Fe(r))return Z3(r)&&(await this._removeSession(),await ms(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async l=>{const{data:o,error:u}=l;if(u)throw u;if(!o.session)throw new ps;const d=o.session;let p=null,f=null;this.flowType==="pkce"&&t.email!=null&&([p,f]=await Br(this.storage,this.storageKey));const{data:m,error:x}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:f}),jwt:d.access_token,xform:gs});if(x)throw x;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(l){if(Fe(l))return{data:{user:null},error:l};throw l}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ps;const r=Date.now()/1e3;let l=r,o=!0,u=null;const{payload:d}=kf(t.access_token);if(d.exp&&(l=d.exp,o=l<=r),o){const{data:p,error:f}=await this._callRefreshToken(t.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:f}=await this._getUser(t.access_token);if(f)throw f;u={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(r){if(Fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var l;if(!t){const{data:d,error:p}=r;if(p)throw p;t=(l=d.session)!==null&&l!==void 0?l:void 0}if(!t?.refresh_token)throw new ps;const{data:o,error:u}=await this._callRefreshToken(t.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!An())throw new ec("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ec(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Fb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ec("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Fb("No code detected.");const{data:_,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:u,refresh_token:d,expires_in:p,expires_at:f,token_type:m}=t;if(!u||!p||!d||!m)throw new ec("No session defined in URL");const x=Math.round(Date.now()/1e3),v=parseInt(p);let w=x+v;f&&(w=parseInt(f));const N=w-x;N*1e3<=Fr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${v}s`);const T=w-v;x-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,w,x):x-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,w,x);const{data:S,error:j}=await this._getUser(u);if(j)throw j;const k={provider_token:l,provider_refresh_token:o,access_token:u,expires_in:v,expires_at:w,refresh_token:d,token_type:m,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(l){if(Fe(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await zs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:o,error:u}=r;if(u)return{error:u};const d=(l=o.session)===null||l===void 0?void 0:l.access_token;if(d){const{error:p}=await this.admin.signOut(d,t);if(p&&!(Q3(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return t!=="others"&&(await this._removeSession(),await ms(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=l5(),l={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(t){return await this._useSession(async r=>{var l,o;try{const{data:{session:u},error:d}=r;if(d)throw d;await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,r={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Br(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(Fe(u))return{data:null,error:u};throw u}}async getUserIdentities(){var t;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:l,error:o}=await this._useSession(async u=>{var d,p,f,m,x;const{data:v,error:w}=u;if(w)throw w;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(f=t.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",N,{headers:this.headers,jwt:(x=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return An()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),{data:{provider:t.provider,url:l?.url},error:null}}catch(l){if(Fe(l))return{data:{provider:t.provider,url:null},error:l};throw l}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var l;try{const{error:o,data:{session:u}}=r;if(o)throw o;const{options:d,provider:p,token:f,access_token:m,nonce:x}=t,v=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=u?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:p,id_token:f,access_token:m,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:ea}),{data:w,error:N}=v;return N?{data:{user:null,session:null},error:N}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ir}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:N})}catch(o){if(Fe(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var l,o;const{data:u,error:d}=r;if(d)throw d;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await d5(async o=>(o>0&&await u5(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ea})),(o,u)=>{const d=200*Math.pow(2,o);return u&&Tf(u)&&Date.now()+d-l<Fr})}catch(l){if(this._debug(r,"error",l),Fe(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",l),An()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:t,url:l},error:null}}async _recoverAndRefresh(){var t,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await zs(this.storage,this.storageKey);if(o&&this.userStorage){let d=await zs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await Gr(this.userStorage,this.storageKey+"-user",d)),o.user=(t=d?.user)!==null&&t!==void 0?t:Af()}else if(o&&!o.user&&!o.user){const d=await zs(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await ms(this.storage,this.storageKey+"-user"),await Gr(this.storage,this.storageKey,o)):o.user=Af()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const u=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ef;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${Ef}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Tf(d)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:p}=await this._getUser(o.access_token);!p&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(l,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(t){var r,l;if(!t)throw new ps;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new $c;const{data:u,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!u.session)throw new ps;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(o,"error",u),Fe(u)){const d={data:null,error:u};return Tf(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(d),d}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,l=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:t,session:r});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,r)}catch(f){u.push(f)}});if(await Promise.all(d),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Gr(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const u=Wb(o);await Gr(this.storage,this.storageKey,u)}else{const o=Wb(r);await Gr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ms(this.storage,this.storageKey),await ms(this.storage,this.storageKey+"-code-verifier"),await ms(this.storage,this.storageKey+"-user"),this.userStorage&&await ms(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&An()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Fr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-t)/Fr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Fr}ms, refresh threshold is ${th} ticks`),o<=th&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Y0)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!An()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,l){const o=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,d]=await Br(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(p.toString())}if(l?.queryParams){const u=new URLSearchParams(l.queryParams);o.push(u.toString())}return l?.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;return u?{data:null,error:u}:await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var l,o;const{data:u,error:d}=r;if(d)return{data:null,error:d};const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:f,error:m}=await et(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(l=u?.session)===null||l===void 0?void 0:l.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;if(u)return{data:null,error:u};const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?q5(t.webauthn.credential_response):H5(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:f}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});return f?{data:null,error:f}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),{data:p,error:f})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var l;const{data:o,error:u}=r;if(u)return{data:null,error:u};const d=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(l=o?.session)===null||l===void 0?void 0:l.access_token});if(d.error)return d;const{data:p}=d;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:I5(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:B5(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:l}=await this._challenge({factorId:t.factorId});return l?{data:null,error:l}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=r?.factors)!==null&&t!==void 0?t:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,l;const{data:{session:o},error:u}=t;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=kf(o.access_token);let p=null;d.aal&&(p=d.aal);let f=p;((l=(r=o.user.factors)===null||r===void 0?void 0:r.filter(v=>v.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(f="aal2");const x=d.amr||[];return{data:{currentLevel:p,nextLevel:f,currentAuthenticationMethods:x},error:null}}))}async fetchJwk(t,r={keys:[]}){let l=r.keys.find(p=>p.kid===t);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(p=>p.kid===t),l&&this.jwks_cached_at+W3>o)return l;const{data:u,error:d}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,l=u.keys.find(p=>p.kid===t),!l)?null:l}async getClaims(t,r={}){try{let l=t;if(!l){const{data:N,error:T}=await this.getSession();if(T||!N.session)return{data:null,error:T};l=N.session.access_token}const{header:o,payload:u,signature:d,raw:{header:p,payload:f}}=kf(l);r?.allowExpired||b5(u.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!m){const{error:N}=await this.getUser(l);if(N)throw N;return{data:{claims:u,header:o,signature:d},error:null}}const x=v5(o.alg),v=await crypto.subtle.importKey("jwk",m,x,!0,["verify"]);if(!await crypto.subtle.verify(x,v,d,r5(`${p}.${f}`)))throw new sh("Invalid JWT signature");return{data:{claims:u,header:o,signature:d},error:null}}catch(l){if(Fe(l))return{data:null,error:l};throw l}}}wl.nextInstanceID=0;const Q5=wl;class Z5 extends Q5{constructor(t){super(t)}}var e6=function(s,t,r,l){function o(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(x){try{m(l.next(x))}catch(v){d(v)}}function f(x){try{m(l.throw(x))}catch(v){d(v)}}function m(x){x.done?u(x.value):o(x.value).then(p,f)}m((l=l.apply(s,t||[])).next())})};class t6{constructor(t,r,l){var o,u,d;this.supabaseUrl=t,this.supabaseKey=r;const p=F3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const f=`sb-${p.hostname.split(".")[0]}-auth-token`,m={db:L3,realtime:z3,auth:Object.assign(Object.assign({},$3),{storageKey:f}),global:M3},x=V3(l??{},m);this.storageKey=(o=x.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=x.global.headers)!==null&&u!==void 0?u:{},x.accessToken?(this.accessToken=x.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=x.auth)!==null&&d!==void 0?d:{},this.headers,x.global.fetch),this.fetch=B3(r,this._getAccessToken.bind(this),x.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},x.realtime)),this.rest=new XE(new URL("rest/v1",p).href,{headers:this.headers,schema:x.db.schema,fetch:this.fetch}),this.storage=new O3(this.storageUrl.href,this.headers,this.fetch,l?.storage),x.accessToken||this._listenForAuthEvents()}get functions(){return new BE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,l)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return e6(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(r=(t=l.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:l,storage:o,userStorage:u,storageKey:d,flowType:p,lock:f,debug:m},x,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z5({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),x),storageKey:d,autoRefreshToken:t,persistSession:r,detectSessionInUrl:l,storage:o,userStorage:u,flowType:p,lock:f,debug:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new m3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,l)=>{this._handleTokenChanged(r,"CLIENT",l?.access_token)})}_handleTokenChanged(t,r,l){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const X0=(s,t,r)=>new t6(s,t,r);function n6(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}n6()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function a6({src:s,alt:t,thumb:r,className:l,onOpen:o}){const[u,d]=b.useState(!1),[p,f]=b.useState(null),[m,x]=b.useState(0);function v(){if(o)return o();d(!0)}return b.useEffect(()=>{const w=new Image;return w.src=r||s,w.onload=()=>{w.naturalWidth>w.naturalHeight?f("landscape"):w.naturalWidth<w.naturalHeight?f("portrait"):f("square")},w.onerror=()=>f(null),()=>{w.onload=null,w.onerror=null}},[r,s]),a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:v,className:`block w-full overflow-hidden rounded-lg focus:outline-none ${l||""}`,"aria-label":"Voir l'image en plein écran",children:a.jsx("div",{className:`w-full bg-gray-100 overflow-hidden ${p==="landscape"?"aspect-video":"aspect-square"}`,children:a.jsx("img",{src:r||s,alt:t||"photo",className:"w-full h-full object-cover object-center"})})}),u&&a.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-95 flex items-center justify-center p-4",onClick:()=>d(!1),role:"dialog","aria-modal":"true",children:[a.jsx("div",{onClick:w=>w.stopPropagation(),className:"max-w-full max-h-full flex items-center justify-center",children:a.jsx("img",{src:s,alt:t||"photo plein écran",className:"max-w-full max-h-full object-contain",style:{touchAction:"manipulation",transform:`rotate(${m}deg)`,transition:"transform 200ms"}})}),a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[a.jsx("button",{onClick:()=>x(w=>(w-90)%360),className:"text-white p-2 rounded bg-black bg-opacity-50",children:"⟲"}),a.jsx("button",{onClick:()=>x(w=>(w+90)%360),className:"text-white p-2 rounded bg-black bg-opacity-50",children:"⟳"}),a.jsx("button",{onClick:()=>d(!1),className:"text-white p-2 rounded bg-black bg-opacity-50","aria-label":"Fermer",children:"✕"})]})]})]})}function s6({open:s,medias:t,index:r,onClose:l,onPrev:o,onNext:u}){const[d,p]=b.useState(s),[f,m]=b.useState(!1),[x,v]=b.useState(!0),[w,N]=b.useState(!1),[T,S]=b.useState(0),[j,k]=b.useState(0),_=xt.useRef(null),O=xt.useRef(0);b.useEffect(()=>{let L;return s?(p(!0),L=window.setTimeout(()=>m(!0),20)):(m(!1),L=window.setTimeout(()=>p(!1),220)),()=>{L&&window.clearTimeout(L)}},[s]),b.useEffect(()=>{if(d){try{document.body.style.overflow="hidden"}catch{}return()=>{try{document.body.style.overflow=""}catch{}}}},[d]);const q=b.useCallback(()=>{m(!1),window.setTimeout(()=>l(),220)},[l]);if(b.useEffect(()=>{function L(U){if(d){if(U.key==="Escape")return q();if(U.key==="ArrowLeft")return o();if(U.key==="ArrowRight")return u()}}return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[d,o,u,q]),b.useEffect(()=>{if(!d)return;v(!1);const L=window.setTimeout(()=>v(!0),20);return k(0),()=>window.clearTimeout(L)},[r,d]),!d)return null;const M=a.jsxs("div",{className:`fixed inset-0 z-[9999] bg-black/95 flex items-center justify-center transition-opacity duration-200 ${f?"opacity-100":"opacity-0"}`,onClick:q,children:[a.jsx("div",{className:"pointer-events-none absolute top-0 left-0 right-0 h-16 sm:h-24 z-40 bg-gradient-to-b from-black/90 to-transparent"}),a.jsx("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-16 sm:h-24 z-40 bg-gradient-to-t from-black/90 to-transparent"}),a.jsxs("div",{className:"relative w-screen h-screen flex items-center justify-center",onClick:L=>L.stopPropagation(),onPointerDown:L=>{_.current===null&&(_.current=L.pointerId,L.target.setPointerCapture(L.pointerId),O.current=L.clientX,N(!0),S(0))},onPointerMove:L=>{if(!w||_.current!==L.pointerId)return;const U=L.clientX-O.current;S(U)},onPointerUp:L=>{if(_.current!==L.pointerId)return;try{L.target.releasePointerCapture(L.pointerId)}catch{}_.current=null,N(!1);const U=Math.max(window.innerWidth,1),Z=Math.abs(T)/U,I=60,P=.2;T>I||Z>P?o():(T<-I||Z>P)&&u(),S(0)},onPointerCancel:L=>{if(_.current===L.pointerId){try{L.target.releasePointerCapture(L.pointerId)}catch{}_.current=null,N(!1),S(0)}},children:[a.jsx("button",{onClick:o,"aria-label":"Précédent",className:"absolute left-4 sm:left-8 text-white bg-black/30 hover:bg-black/40 rounded-full p-3 z-50",children:"‹"}),a.jsx("div",{className:`bg-black z-50 flex items-center justify-center ${w?"":"transition-transform duration-200"} rounded-none p-0 sm:rounded-lg sm:p-6 shadow-lg`,style:{width:"100%",height:"100%",maxWidth:"calc(100vw - 96px)",maxHeight:"calc(100vh - 160px)",transform:`translateX(${T}px)`},children:a.jsx("img",{src:t[r].url,className:`w-full h-full sm:max-w-full sm:max-h-full object-contain transition-opacity duration-300 ${x?"opacity-100":"opacity-0"}`,alt:`image ${r+1}`,draggable:!1,style:{transform:`rotate(${j}deg)`,transition:"transform 200ms"}})}),a.jsx("button",{onClick:u,"aria-label":"Suivant",className:"absolute right-4 sm:right-8 text-white bg-black/40 hover:bg-black/50 rounded-full p-4 z-50",children:"›"}),a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-50",children:[a.jsx("button",{onClick:()=>k(L=>(L-90)%360),"aria-label":"Pivoter à gauche",className:"text-white bg-black/40 hover:bg-black/50 rounded-full p-3",children:"⟲"}),a.jsx("button",{onClick:()=>k(L=>(L+90)%360),"aria-label":"Pivoter à droite",className:"text-white bg-black/40 hover:bg-black/50 rounded-full p-3",children:"⟳"}),a.jsx("button",{onClick:q,"aria-label":"Fermer",className:"text-white bg-black/40 rounded-full p-3",children:"✕"})]}),a.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black/30 px-3 py-1 rounded z-50",children:[r+1," / ",t.length]})]})]});return Av.createPortal(M,document.body)}const _c="https://ougpzhkqotzxrijofobo.supabase.co",Yr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91Z3B6aGtxb3R6eHJpam9mb2JvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY3MjE3NTMsImV4cCI6MjA3MjI5Nzc1M30.PrtbMI6Vdr_5F9Pempqt_1sR1BBAbRZQwrOrZRCGlbA",Q0="PrivacyPicture";function rh(s){const t=new Date(s),r=Math.floor((Date.now()-t.getTime())/1e3);return r<60?`${r}s`:r<3600?`${Math.floor(r/60)}m`:r<86400?`${Math.floor(r/3600)}h`:`${Math.floor(r/86400)}j`}function r6({postId:s,onSubmit:t}){const[r,l]=b.useState(""),{t:o}=Rt();return a.jsxs("form",{onSubmit:u=>{u.preventDefault(),r.trim()&&(t(s,r.trim()),l(""))},className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[a.jsx("input",{value:r,onChange:u=>l(u.target.value),placeholder:o("feed.write_comment","Écrire un commentaire..."),className:"flex-1 border rounded px-2 py-2 sm:px-3 sm:py-2 text-sm"}),a.jsx("button",{type:"submit",className:"text-indigo-600 px-3 py-2 text-sm sm:text-base whitespace-nowrap w-full sm:w-auto",children:o("feed.send","Envoyer")})]})}function i6(){const{t:s}=Rt(),[t,r]=b.useState(!1);b.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const ie=window.matchMedia("(max-height: 600px) and (orientation: landscape)"),he=()=>r(!!ie.matches);return he(),typeof ie.addEventListener=="function"?ie.addEventListener("change",he):ie.addListener(he),window.addEventListener("resize",he),window.addEventListener("orientationchange",he),()=>{try{typeof ie.removeEventListener=="function"?ie.removeEventListener("change",he):ie.removeListener(he)}catch{}window.removeEventListener("resize",he),window.removeEventListener("orientationchange",he)}},[]);const[l,o]=b.useState(""),[u,d]=b.useState([]),[p,f]=b.useState([]),[m,x]=b.useState([]),[v,w]=b.useState({}),[N,T]=b.useState(!1),[S,j]=b.useState(!1),[k,_]=b.useState(""),[O,q]=b.useState(""),[M,L]=b.useState([]),[U,W]=b.useState(!1),[Z,I]=b.useState(!1),[P,Q]=b.useState(!1),[$,E]=b.useState([]),[G,C]=b.useState([]),[R,Y]=b.useState(!1),[te,Ne]=b.useState(!1),[z,J]=b.useState([]),se=b.useRef(null),[ue,ye]=b.useState(null),{user:Te}=fn(),De=Te,[Ce,$e]=b.useState(null),Ye=b.useRef(0);b.useEffect(()=>{const ie=qv(he=>{!he||!he.key||he.key===`/api/centers/${De?.centerId}`&&(Ye.current=Math.max(Ye.current,he.until||0))});return()=>ie()},[De]);const[Xe,Se]=b.useState(null),[Me,ke]=b.useState(null),Je=ie=>{if(document.getElementById(`post-${ie}`)){const ee=window.innerWidth,me=ee<768,be=me?280:400,Ue=window.innerHeight/2-500/2+window.scrollY,dt=me?-48:-250,Dt=ee/2-be/2+dt;ke({top:Ue,left:Dt,width:be}),Se(ie)}},[V,ce]=b.useState(!1),[le,ve]=b.useState({}),Ee=["bg-[#fff1f0]","bg-[#f0f9ff]","bg-[#fffbeb]","bg-[#f0fff4]","bg-[#fff7ed]"];async function Ie(ie){ce(!0);try{const he=await fe(`api/feed/${ie}/comments`);if(!he.ok){ve(be=>({...be,[ie]:[]}));return}const me=((await he.json()).comments||[]).map(be=>({id:be.id,authorName:be.authorName,authorId:be.authorId,timeAgo:rh(be.createdAt),text:be.text}));ve(be=>({...be,[ie]:me}))}catch(he){const ee=he;console.error("Failed to load comments",ee instanceof Error?ee.message:String(ee)),ve(me=>({...me,[ie]:[]}))}finally{ce(!1)}}b.useEffect(()=>{async function ie(){const he="/api/feed",ee=Kn(he);if(ee){C(ee.posts||[]);return}try{const me=await fe("api/feed");if(!me||!me.ok)return;const be=await me.json();C(be.posts||[]),sa(he,{posts:be.posts||[]},ai)}catch{}}ie()},[]),b.useEffect(()=>{let ie=!0;async function he(){try{const ee=De?.centerId;if(ee){const me=Date.now();if(Ye.current>me)return;const be=`/api/centers/${ee}`,_e=Kn(be);if(_e){$e(_e.name||null);return}const Ue=await fetch(`api/centers/${ee}`,{credentials:"include"});if(!ie)return;if(Ue.status===429){const dt=Ue.headers.get("Retry-After"),Dt=dt?parseInt(dt,10):NaN,vt=Number.isNaN(Dt)?1e4:Dt*1e3;Ye.current=Math.max(Ye.current,Date.now()+vt),hh(`/api/centers/${ee}`,Ye.current);return}if(Ue.ok){const dt=await Ue.json();$e(dt.name||null),sa(be,{name:dt.name||null},ai);return}}}catch{}ie&&$e(null)}return he(),()=>{ie=!1}},[De]),b.useEffect(()=>{const ie=u.map(he=>URL.createObjectURL(he));return E(ie),u.length===0&&W(!1),()=>ie.forEach(he=>URL.revokeObjectURL(he))},[u]),b.useEffect(()=>{let ie=!0;async function he(){try{if(u.length===0){f([]),x([]),Q(!1),w({});return}const ee=await fe("api/children",{credentials:"include"});if(!ee.ok)return;const me=await ee.json(),be=Array.isArray(me)?me.map(dt=>({id:dt.id,name:dt.name})):[];if(!ie)return;f(be);const _e=await Promise.all(be.map(async dt=>{try{const Dt=await fe(`api/children/${dt.id}/photo-consent-summary`,{credentials:"include"});if(!Dt.ok)return{id:dt.id,allowed:!1};const vt=await Dt.json();return{id:dt.id,allowed:!!vt.allowed}}catch{return{id:dt.id,allowed:!1}}})),Ue={};_e.forEach(dt=>{Ue[dt.id]=!!dt.allowed}),w(Ue)}catch(ee){const me=ee;console.error("Failed to load children/consents",me instanceof Error?me.message:String(me))}}return he(),()=>{ie=!1}},[u]);const K=b.useCallback(async ie=>{try{const he=await fe(`api/feed/${ie}/like`,{method:"POST"});if(!he.ok)return;const ee=await he.json();C(me=>me.map(be=>be.id===ie?{...be,likes:(be.likes||0)+(ee.liked?1:-1)}:be))}catch(he){const ee=he;console.error("Like failed",ee instanceof Error?ee.message:String(ee))}},[C]),xe=b.useCallback(async ie=>{try{const he=await fe(`api/feed/${ie}/likes`);if(!he.ok)return J([]);const ee=await he.json();J(ee.users||[])}catch(he){const ee=he;console.error("Failed to load likers",ee instanceof Error?ee.message:String(ee)),J([])}},[J]),we=b.useCallback(ie=>{se.current&&(clearTimeout(se.current),se.current=null),se.current=window.setTimeout(async()=>{await xe(ie);try{if(document.getElementById(`post-${ie}`)){const ee=window.innerWidth,me=ee<768,be=me?280:400,Ue=window.innerHeight/2-500/2+window.scrollY,dt=me?-48:-300,Dt=ee/2-be/2+dt;ye({top:Ue,left:Dt,width:be})}else ye(null)}catch{ye(null)}Ne(!0),se.current=null},600)},[xe,ye,Ne]),Oe=b.useCallback(ie=>{se.current&&(clearTimeout(se.current),se.current=null,K(ie))},[K]),Pe=b.useCallback(()=>{se.current&&(clearTimeout(se.current),se.current=null)},[]);b.useEffect(()=>{const ie=()=>{const be=window.innerWidth,_e=window.innerHeight,Ue=window.scrollY||window.pageYOffset||0,dt=be<768,Dt=dt?280:400,vt=500,Yt=be-Dt-20,H=20;if(Xe){const je=_e/2,Ae=be/2,Re=je-vt/2+Ue;let ct=Ae-Dt/2+(dt?-48:-300);ct=Math.max(H,Math.min(Yt,ct)),ke({top:Re,left:ct,width:Dt})}if(te&&ue){const je=_e/2,Ae=be/2,Re=je-vt/2+Ue;let ct=Ae-Dt/2+(dt?-48:-300);ct=Math.max(H,Math.min(Yt,ct)),ye({top:Re,left:ct,width:Dt})}};window.addEventListener("resize",ie);const he=()=>{(Xe||te&&ue)&&ie()};window.addEventListener("scroll",he);const ee=be=>{const Ue=be.target.closest("[data-post-id]")?.getAttribute("data-post-id");Ue&&we(Ue)},me=be=>{const Ue=be.target.closest("[data-post-id]")?.getAttribute("data-post-id");Ue&&Oe(Ue)};return document.addEventListener("mousedown",ee,!0),document.addEventListener("mouseup",me,!0),document.addEventListener("touchstart",ee,{capture:!0,passive:!1}),document.addEventListener("touchend",me,{capture:!0,passive:!1}),()=>{window.removeEventListener("resize",ie),window.removeEventListener("scroll",he),document.removeEventListener("mousedown",ee,!0),document.removeEventListener("mouseup",me,!0),document.removeEventListener("touchstart",ee,!0),document.removeEventListener("touchend",me,!0)}},[Xe,te,ue,we,Oe]);async function ut(ie,he){try{const ee=await fe(`api/feed/${ie}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:he})});if(!ee.ok){const _e=await ee.json().catch(()=>({})),Ue=_e&&_e.message?String(_e.message):"";Be("Impossible d'envoyer le commentaire",Qe(Ue,400));return}const me=await ee.json(),be={id:me.id,authorName:me.authorName,authorId:me.authorId,timeAgo:rh(me.createdAt),text:me.text};C(_e=>_e.map(Ue=>Ue.id===ie?{...Ue,commentsCount:(Ue.commentsCount||0)+1,comments:Ue.comments?[be,...Ue.comments]:[be]}:Ue)),ve(_e=>({..._e,[ie]:_e[ie]?[be,..._e[ie]]:[be]}))}catch(ee){console.error("Add comment failed",ee)}}async function Ve(ie){if(ie.preventDefault(),!(!l&&u.length===0)){Y(!0);try{if(!P&&m.length===0&&u.length>0){W(!0),Y(!1);return}const he=m.filter(_e=>!v[_e]);if(he.length>0){const _e=p.filter(Ue=>he.includes(Ue.id)).map(Ue=>Ue.name);L(_e),T(!0),Y(!1);return}if(u.length>0){const _e=["video/mp4","video/webm","video/quicktime"],Ue=["image/jpeg","image/png","image/webp","image/gif","image/heic","image/heif"],vt=H=>H>=1073741824?`${(H/1073741824).toFixed(2)} GB`:`${Math.round(H/1048576)} MB`;let Yt=0;for(const H of u){Yt+=H.size;const je=H.type.startsWith("image/"),Ae=H.type.startsWith("video/");if(!je&&!Ae)return Be("Fichier non supporté",`Le fichier ${H.name} n'est pas un image/vidéo supporté.`);if(Ae&&!_e.includes(H.type))return Be("Format vidéo non supporté",`Le format de ${H.name} (${H.type}) n'est pas pris en charge. Formats acceptés: mp4, webm, mov.`);if(je&&!Ue.includes(H.type)&&!H.type.startsWith("image/"))return Be("Format image non supporté",`Le format de ${H.name} (${H.type}) n'est pas pris en charge.`);if(H.size>1073741824)return Be("Fichier trop volumineux",`Le fichier ${H.name} est trop volumineux (${vt(H.size)}). Taille max par fichier: ${vt(1073741824)}.`)}if(Yt>1073741824)return Be("Taille totale trop importante",`La taille totale des fichiers (${vt(Yt)}) dépasse la limite de ${vt(1073741824)}.`)}const ee=u.some(_e=>_e.size>8*1024*1024||_e.type.startsWith("video/"));if(u.length>0&&ee&&_c&&Yr){const _e=new FormData;_e.append("text",l||"");const Ue=await fe("api/feed",{method:"POST",body:_e});if(!Ue.ok){const vt=await Ue.json().catch(()=>({}));return Be("Échec de la publication",Qe(vt.message||"",Ue.status))}const dt=await Ue.json();C(vt=>[dt,...vt]);const Dt=X0(_c,Yr);for(const vt of u)try{const Yt=await fe("api/uploads/supabase/sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:vt.name,contentType:vt.type,prefix:"feed"})});if(!Yt.ok){const en=await Yt.json().catch(()=>({}));console.error("Sign failed",en);continue}const H=await Yt.json(),je=H.storagePath,Ae=H.bucket||Q0,{error:Re}=await Dt.storage.from(Ae).upload(je,vt,{contentType:vt.type,upsert:!1});if(Re){console.error("Direct upload error",Re);continue}const ct=await fe("api/uploads/supabase/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storagePath:je,postId:dt.id,size:vt.size,originalName:vt.name})});if(!ct.ok){const en=await ct.json().catch(()=>({}));console.error("Finalize failed",en);continue}const Dn=(await ct.json()).medias||[];C(en=>en.map(Jn=>Jn.id===dt.id?{...Jn,medias:(Jn.medias||[]).concat(Dn)}:Jn))}catch(Yt){console.error("Direct upload loop error",Yt);continue}o(""),d([]),W(!1);return}const me=new FormData;me.append("text",l);for(const _e of u)me.append("images",_e,_e.name);if(m&&m.length)for(const _e of m)me.append("taggedChildIds[]",_e);const be=await fe("api/feed",{method:"POST",body:me});if(be.ok){const _e=await be.json();C(Ue=>[_e,...Ue]),o(""),d([]),W(!1)}else{const _e=await be.json().catch(()=>({})),Ue=_e&&_e.message?String(_e.message):"";Be("Échec de la publication",Qe(Ue,be.status))}}catch(he){console.error(he),Be("Erreur réseau","Impossible de joindre le serveur. Vérifiez votre connexion et réessayez.")}finally{Y(!1)}}}function Be(ie,he){_(ie),q(he),j(!0)}function Qe(ie,he){const ee=(ie||"").toLowerCase();return ie?ee.includes("storage backend not configured")||ee.includes("supabase not configured")||ee.includes("storage backend not configured on server")?"Le stockage des images n'est pas configuré sur le serveur. Contactez l'administrateur.":ee.includes("image processing not available")||ee.includes("sharp not available")?"Le serveur ne peut pas traiter les images pour le moment (dépendance manquante). Réessayez plus tard.":ee.includes("too many files")||ee.includes("trop de fichiers")?"Trop d'images : le maximum est de 6.":ee.includes("photo consent absent")||ee.includes("consent")?"Le consentement photo est manquant pour un ou plusieurs enfants identifiés.":ee.includes("failed to upload any media")?"Échec du chargement des images. Aucun fichier n'a été sauvegardé.":ee.includes("forbidden")?"Vous n'avez pas la permission d'effectuer cette action.":ee.includes("unauthorized")||he===401?"Vous devez vous connecter pour publier.":he>=500?"Erreur serveur lors de la publication. Réessayez plus tard.":ie:he===401?"Vous devez être connecté pour effectuer cette action.":he===403?"Vous n'êtes pas autorisé à effectuer cette action.":he===503?"Le service de stockage est temporairement indisponible. Réessayez plus tard.":he===400?"Requête invalide. Vérifiez vos données et réessayez.":"Une erreur est survenue lors de la publication. Réessayez."}return a.jsxs("div",{className:`relative z-0 min-h-screen bg-[#fcfcff] p-4 ${t?"":"md:pl-64"} w-full max-w-full overflow-x-hidden box-border`,children:[a.jsx("div",{className:"max-w-7xl mx-auto w-full max-w-full px-2 sm:px-4 md:px-6 overflow-x-hidden box-border children-responsive-row",children:a.jsx("div",{className:"max-w-4xl mx-auto w-full",children:a.jsx("div",{className:"mb-6 p-0",children:a.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-3xl p-4 md:p-6 space-y-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4 w-full",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold mb-1 tracking-tight",style:{color:"#0b5566"},children:s("page.feed")}),a.jsx("div",{className:"text-base md:text-lg font-medium mb-4 md:mb-6",style:{color:"#08323a"},children:Ce?`• ${Ce}`:s("feed.center_news")})]})}),a.jsx("form",{onSubmit:Ve,className:"bg-[#f0f9ff] rounded-2xl shadow p-3 md:p-6 mb-6 border border-gray-200",children:a.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-xs sm:text-sm font-semibold text-gray-700",children:De?.name||"Utilisateur"}),a.jsx("div",{className:"text-xs text-gray-400 mb-2",children:Ce?`• ${Ce}`:""}),a.jsx("textarea",{value:l,onChange:ie=>o(ie.target.value),placeholder:s("feed.composer_placeholder"),className:"w-full border rounded p-2 sm:p-3 bg-gray-50 min-h-[60px] sm:min-h-[80px] text-sm sm:text-base"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-3 gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-500 w-full sm:w-auto",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",capture:"environment",className:"hidden",onChange:ie=>{const he=ie.currentTarget,ee=Array.from(he.files||[]);ee.length!==0&&(d(me=>[...me,...ee]),he.value="")}}),a.jsxs("span",{className:"inline-flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-1 rounded bg-gray-100 hover:bg-gray-200 text-sm",children:["📷 ",s("feed.photo")]})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:ie=>{const he=ie.currentTarget,ee=Array.from(he.files||[]);ee.length!==0&&(d(me=>[...me,...ee]),he.value="")}}),a.jsxs("span",{className:"inline-flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-1 rounded bg-gray-100 hover:bg-gray-200 text-xs sm:text-sm",children:["🖼 ",s("feed.gallery")]})]}),a.jsx("span",{className:"text-xs text-gray-400",children:u.length===0?s("feed.no_images"):`${u.length} ${s("feed.images")}`})]}),a.jsx("div",{className:"w-full sm:w-auto mt-2 flex justify-center sm:justify-start",children:u.length>0&&a.jsxs("div",{className:"relative w-full sm:w-auto",children:[a.jsx("div",{className:"flex items-center gap-2 justify-center sm:justify-start",children:a.jsxs("button",{type:"button",onClick:()=>I(ie=>!ie),"aria-haspopup":"true","aria-expanded":Z,"aria-label":s("feed.identify"),className:"inline-flex items-center justify-center gap-2 px-4 py-2 sm:px-3 sm:py-1 rounded-full bg-indigo-600 text-white hover:bg-indigo-700 text-sm w-full sm:w-auto shadow-sm",children:[s("feed.identify"),m.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-700",children:m.length})]})}),a.jsx("div",{className:"hidden sm:block",children:Z&&a.jsxs("div",{className:"absolute z-40 mt-2 w-64 bg-white border rounded shadow-lg p-3 max-h-56 overflow-auto",children:[a.jsx("div",{className:"text-sm font-semibold mb-2",children:s("feed.select_children")}),p.length===0?a.jsx("div",{className:"text-sm text-gray-500",children:s("feed.no_children_available")}):a.jsxs("div",{className:"grid gap-2",children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:P,onChange:ie=>{ie.target.checked?(Q(!0),x([])):Q(!1),W(!1)}}),a.jsx("span",{className:"font-medium",children:s("feed.no_child")})]}),p.map(ie=>{const he=v[ie.id]??!1,ee=m.includes(ie.id);return a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:ee,onChange:me=>{me.target.checked?(Q(!1),x(be=>[...be,ie.id])):x(be=>be.filter(_e=>_e!==ie.id)),W(!1)},disabled:P}),a.jsx("span",{className:"truncate",children:ie.name}),!he&&a.jsx("span",{className:"text-xs text-red-500 ml-2",children:"(pas d'autorisation)"})]},ie.id)})]}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{onClick:()=>I(!1),className:"px-3 py-1 bg-gray-100 rounded text-sm",children:s("common.close")})})]})}),Z&&a.jsx("div",{className:"sm:hidden fixed inset-0 z-50 bg-black/40 flex items-start justify-center p-4 pt-10",children:a.jsxs("div",{className:"mx-4 w-full max-w-md bg-white rounded-xl p-4 max-h-[85vh] overflow-auto shadow-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-lg font-semibold",children:s("feed.tag_children")}),a.jsx("button",{onClick:()=>I(!1),className:"text-gray-600",children:s("common.close")})]}),p.length===0?a.jsx("div",{className:"text-sm text-gray-500",children:s("feed.no_children_available")}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-base p-2 border rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:P,onChange:ie=>{ie.target.checked?(Q(!0),x([])):Q(!1),W(!1)}}),a.jsx("span",{className:"break-words font-medium",children:s("feed.no_child")})]}),a.jsx("span",{className:"text-xs text-gray-500 sm:ml-2",children:"Cocher si aucune personne identifiable"})]}),p.map(ie=>{const he=v[ie.id]??!1,ee=m.includes(ie.id);return a.jsxs("label",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-base p-2 border rounded",children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:ee,disabled:P,onChange:me=>{me.target.checked?(Q(!1),x(be=>[...be,ie.id])):x(be=>be.filter(_e=>_e!==ie.id)),W(!1)}}),a.jsx("span",{className:"break-words",children:ie.name})]}),!he&&a.jsx("span",{className:"text-xs text-red-500 sm:ml-2",children:s("feed.no_authorization")})]},ie.id)})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>I(!1),className:"w-full px-4 py-2 bg-indigo-600 text-white rounded",children:s("common.confirm")})})]})})]})}),a.jsx("button",{disabled:R||m.length>0&&m.some(ie=>!v[ie]),className:"bg-indigo-600 text-white px-4 py-2 rounded-full w-full sm:w-auto max-w-full",children:R?"Envoi...":"Publier"})]}),U&&a.jsx("div",{className:"mt-2 text-sm text-red-600 text-center sm:text-left",role:"alert","aria-live":"assertive",children:"Veuillez identifier les enfants."}),m.length>0&&Object.keys(v).length>0&&(()=>{const ie=m.filter(ee=>!v[ee]);if(ie.length===0)return null;const he=p.filter(ee=>ie.includes(ee.id)).map(ee=>ee.name).join(", ");return a.jsxs("div",{className:"mt-2 text-sm text-red-600",children:["Impossible de publier: autorisation photo manquante pour ",he,"."]})})(),N&&a.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg p-6 ring-1 ring-gray-100",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-3xl",children:"🚫"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Autorisation photo manquante"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Vous n'avez pas l'autorisation des parents pour publier des photos des enfants suivants :"}),a.jsx("ul",{className:"mt-3 list-disc list-inside text-sm text-gray-800",children:M.map(ie=>a.jsx("li",{children:ie},ie))}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Veuillez retirer ces enfants de la sélection ou contacter les parents pour obtenir leur autorisation."})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end",children:[a.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-100 rounded-md mr-2",children:"Fermer"}),a.jsx("button",{onClick:()=>{T(!1)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Retour"})]})]})}),$.length>0&&a.jsx("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2",children:$.map((ie,he)=>a.jsxs("div",{className:"w-full h-16 sm:h-20 md:h-24 bg-gray-100 rounded overflow-hidden flex items-center justify-center relative",children:[u[he]&&u[he].type&&u[he].type.startsWith("video/")?a.jsx("video",{src:ie,className:"w-full h-full object-contain",controls:!0}):a.jsx("img",{src:ie,className:"w-full h-full object-contain"}),a.jsx("button",{type:"button","aria-label":`Retirer le fichier ${he+1}`,onClick:()=>{d(ee=>{const me=ee.slice();return me.splice(he,1),me}),E(ee=>{const me=ee.slice();try{URL.revokeObjectURL(me[he])}catch{}return me.splice(he,1),me})},className:"absolute top-1 right-1 bg-white/90 text-red-600 rounded-full p-1 shadow hover:bg-white",children:"✕"})]},he))})]})})}),a.jsxs("div",{className:"space-y-6",children:[G.map((ie,he)=>a.jsx("article",{id:`post-${ie.id}`,className:`${Ee[he%Ee.length]} rounded-2xl border border-gray-100 shadow-sm p-3 md:p-6 w-full mx-auto`,children:a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:gap-4 items-center text-center sm:text-left",children:a.jsxs("div",{className:"flex-1",children:[a.jsx(c6,{post:ie,bgClass:Ee[he%Ee.length],currentUser:De,onUpdatePost:async(ee,me)=>{C(be=>be.map(_e=>_e.id===ee?{..._e,text:me}:_e))},onDeletePost:async ee=>{C(me=>me.filter(be=>be.id!==ee))},onMediasChange:(ee,me)=>{C(be=>be.map(_e=>_e.id===ee?{..._e,medias:me}:_e))}}),a.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center items-center justify-center text-sm text-gray-500 gap-2",children:[a.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[a.jsxs("button",{"data-post-id":ie.id,onPointerDown:()=>we(ie.id),onPointerUp:()=>Oe(ie.id),onPointerLeave:()=>Pe(),onContextMenu:ee=>{ee.preventDefault()},className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-base select-none",children:["❤️ ",a.jsx("span",{children:ie.likes??0})]}),a.jsxs("button",{onClick:async()=>{Je(ie.id),await Ie(ie.id)},className:"flex items-center gap-1 sm:gap-2 text-sm sm:text-base",children:["💬 ",a.jsx("span",{children:ie.commentsCount??0})]})]}),a.jsx("div",{className:"w-full sm:w-auto mt-2 sm:mt-0",children:a.jsx(r6,{postId:ie.id,onSubmit:ut})})]})]})})},ie.id)),te&&a.jsx("div",{className:"fixed inset-0 z-60 bg-black/40 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-h-[90vh] overflow-hidden ring-1 ring-indigo-50",style:ue?{position:"absolute",top:ue.top,left:ue.left,width:ue.width,transform:"none"}:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-indigo-700",children:"Personnes qui ont aimé"}),a.jsxs("div",{className:"text-sm text-indigo-600",children:[z.length," personne",z.length>1?"s":""]})]}),a.jsx("button",{onClick:()=>{Ne(!1),J([]),ye(null)},"aria-label":"Fermer",className:"text-indigo-600 hover:text-indigo-800 rounded-md p-2",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 8.586L15.95 2.636a1 1 0 111.414 1.414L11.414 10l5.95 5.95a1 1 0 01-1.414 1.414L10 11.414l-5.95 5.95A1 1 0 012.636 15.95L8.586 10 2.636 4.05A1 1 0 014.05 2.636L10 8.586z",clipRule:"evenodd"})})})]}),a.jsx("div",{className:"p-4 overflow-auto max-h-[80vh]",children:z.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:"Aucun like trouvé"}):a.jsx("ul",{className:"space-y-2",children:z.map(ie=>a.jsx("li",{className:"text-sm text-gray-800",children:ie.name},ie.id))})})]})})]}),Xe&&a.jsx(l6,{position:Me,onClose:()=>{Se(null),ke(null)},comments:le[Xe]||[],loading:V,currentUser:De,onUpdateComment:async(ie,he)=>{ve(ee=>({...ee,[Xe]:ee[Xe]?.map(me=>me.id===ie?{...me,text:he}:me)||[]})),C(ee=>ee.map(me=>me.id===Xe?{...me,comments:me.comments?me.comments.map(be=>be.id===ie?{...be,text:he}:be):me.comments}:me))},onDeleteComment:async ie=>{ve(he=>({...he,[Xe]:he[Xe]?.filter(ee=>ee.id!==ie)||[]})),C(he=>he.map(ee=>ee.id===Xe?{...ee,commentsCount:Math.max(0,(ee.commentsCount||1)-1),comments:ee.comments?ee.comments.filter(me=>me.id!==ie):ee.comments}:ee))}})]})})})}),S&&a.jsxs("div",{className:"fixed inset-0 z-60 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>j(!1)}),a.jsxs("div",{role:"dialog","aria-modal":"true",className:"bg-white rounded-lg shadow-xl p-6 z-70 max-w-lg w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k||"Erreur"}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-line",children:O}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded",children:"OK"})})]})]})]})}function l6({onClose:s,comments:t,loading:r,currentUser:l,onUpdateComment:o,onDeleteComment:u,position:d}){return a.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-h-[90vh] overflow-hidden ring-1 ring-indigo-50",style:d?{position:"absolute",top:d.top,left:d.left,width:d.width,transform:"none"}:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-indigo-700",children:"Commentaires"}),a.jsxs("div",{className:"text-sm text-indigo-600",children:[t.length," commentaire",t.length>1?"s":""]})]}),a.jsx("button",{onClick:s,"aria-label":"Fermer",className:"text-indigo-600 hover:text-indigo-800 rounded-md p-2",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 8.586L15.95 2.636a1 1 0 111.414 1.414L11.414 10l5.95 5.95a1 1 0 01-1.414 1.414L10 11.414l-5.95 5.95A1 1 0 012.636 15.95L8.586 10 2.636 4.05A1 1 0 014.05 2.636L10 8.586z",clipRule:"evenodd"})})})]}),r?a.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"Chargement des commentaires…"}):a.jsx("div",{className:"p-4 overflow-auto max-h-[80vh]",children:t.length===0?a.jsx("div",{className:"text-center text-gray-500 py-8",children:"Aucun commentaire pour l'instant"}):a.jsx("div",{className:"space-y-4",children:t.map(p=>a.jsx(o6,{comment:p,currentUser:l,onUpdate:o,onDelete:u},p.id||p.authorName+p.timeAgo+p.text))})}),a.jsx("div",{className:"px-5 py-3 border-t text-right bg-white",children:a.jsx("button",{onClick:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-full shadow hover:bg-indigo-700",children:"Fermer"})})]})})}function o6({comment:s,currentUser:t,onUpdate:r,onDelete:l}){const[o,u]=b.useState(!1),[d,p]=b.useState(!1),[f,m]=b.useState(s.text);async function x(){if(!s.id)return;const j=f.trim();if(!j)return alert("Le commentaire ne peut pas être vide");try{const k=await fe(`api/feed/comments/${s.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:j})});if(!k.ok){const _=await k.json().catch(()=>({}));return alert(_.message||"Échec de la modification")}await r(s.id,j),p(!1),u(!1)}catch(k){console.error("Failed to edit comment",k),alert("Erreur réseau")}}const v=t?.role||"",w=!!t&&(t.id===s.authorId||["admin","super-admin"].includes(v)),[N,T]=b.useState(!1);async function S(){if(s.id)try{const j=await fe(`api/feed/comments/${s.id}`,{method:"DELETE"});if(!j.ok){const k=await j.json().catch(()=>({}));return alert(k.message||"Échec de la suppression")}T(!1),await l(s.id)}catch(j){console.error("Failed to delete comment",j),alert("Erreur réseau")}}return a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.authorName}),a.jsx("div",{className:"text-xs text-gray-400",children:s.timeAgo})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>u(j=>!j),className:"text-gray-400 hover:text-gray-600 px-2",children:"⋯"}),o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white w-48 rounded-lg shadow-lg ring-1 ring-gray-100",onClick:j=>j.stopPropagation(),children:a.jsxs("div",{className:"px-2 py-1",children:[w&&a.jsxs("button",{onClick:()=>{p(!0),u(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5h6M11 12h6M11 19h6M5 5h.01M5 12h.01M5 19h.01"})}),"Modifier"]}),w&&a.jsxs("button",{onClick:()=>{u(!1),T(!0)},className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50 rounded",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8 9a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4 0a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zM4 6a1 1 0 011-1h10l-.6 9.6A2 2 0 0112.4 17H7.6a2 2 0 01-1.99-1.99L5 5zM9 3a1 1 0 00-1 1v1h4V4a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Supprimer"]})]})})]})]})]}),d?a.jsxs("div",{className:"mt-2",children:[a.jsx("textarea",{autoFocus:!0,onMouseDown:j=>j.stopPropagation(),value:f,onChange:j=>m(j.target.value),className:"w-full border rounded p-2 text-sm min-h-[64px]"}),a.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{p(!1),m(s.text)},className:"px-3 py-1 rounded bg-gray-100",children:"Annuler"}),a.jsx("button",{onClick:x,className:"px-3 py-1 rounded bg-indigo-600 text-white",children:"Sauvegarder"})]})]}):a.jsx("div",{className:"mt-2 bg-gray-100 border border-gray-100 rounded-lg p-3 text-sm text-gray-800 shadow-sm break-words",children:s.text})]}),N&&a.jsx(Z0,{title:"Supprimer le commentaire",description:"Voulez-vous vraiment supprimer ce commentaire ?",onCancel:()=>T(!1),onConfirm:S})]})}function Z0({title:s,description:t,onCancel:r,onConfirm:l}){const[o,u]=b.useState(!1);async function d(){u(!0);try{await l()}finally{u(!1)}}return a.jsx("div",{className:"fixed inset-0 z-60 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md ring-1 ring-indigo-50",children:[a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 text-center break-words",children:s}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center break-words whitespace-normal",children:t})]}),a.jsxs("div",{className:"px-6 py-3 flex flex-col sm:flex-row justify-center gap-3 border-t",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 rounded bg-gray-100",children:"Annuler"}),a.jsx("button",{onClick:d,disabled:o,className:"px-4 py-2 rounded bg-red-600 text-white",children:o?"Suppression...":"Supprimer"})]})]})})}function c6({post:s,bgClass:t,currentUser:r,onUpdatePost:l,onDeletePost:o,onMediasChange:u}){const[d,p]=b.useState(!1),[f,m]=b.useState(!1),[x,v]=b.useState(s.text||""),[w,N]=b.useState(!1),T=r?.role||"",S=!!r&&(r.id===s.authorId||["admin","super-admin"].includes(T)),j=s.medias?s.medias.length:0,[k,_]=b.useState(!1),[O,q]=b.useState(0);function M($){q($),_(!0)}function L(){_(!1)}function U(){!s.medias||s.medias.length===0||q((O+1)%s.medias.length)}function W(){!s.medias||s.medias.length===0||q((O-1+s.medias.length)%s.medias.length)}b.useEffect(()=>{function $(E){if(k){if(E.key==="Escape")return L();if(!(!s.medias||s.medias.length===0)){if(E.key==="ArrowLeft")return q(G=>(G-1+s.medias.length)%s.medias.length);if(E.key==="ArrowRight")return q(G=>(G+1)%s.medias.length)}}}return k&&window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[k,s.medias]);async function Z(){const $=x.trim();try{const E=await fe(`api/feed/${s.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:$})});if(!E.ok){const G=await E.json().catch(()=>({}));return alert(G.message||"Échec de la modification")}await l(s.id,$),m(!1),p(!1)}catch(E){console.error("Failed to edit post",E),alert("Erreur réseau")}}async function I(){try{const $=await fe(`api/feed/${s.id}`,{method:"DELETE"});if(!$.ok){const E=await $.json().catch(()=>({}));return alert(E.message||"Échec de la suppression")}N(!1),await o(s.id)}catch($){console.error("Failed to delete post",$),alert("Erreur réseau")}}async function P($){if(!$||$.length===0)return;const E=(s.medias||[]).length,G=6,C=Math.max(0,G-E);if(C===0)return alert(`Vous avez déjà ${E} fichiers. Le maximum est ${G}.`);const R=Array.from($);R.length>C&&alert(`Vous pouvez ajouter seulement ${C} fichier(s) supplémentaires. Seules les ${C} premières seront prises.`);const Y=["video/mp4","video/webm","video/quicktime"],te=["image/jpeg","image/png","image/webp","image/gif","image/heic","image/heif"],Ne=1*1024*1024*1024,z=1*1024*1024*1024,J=Ce=>Ce>=1024*1024*1024?`${(Ce/(1024*1024*1024)).toFixed(2)} GB`:`${Math.round(Ce/(1024*1024))} MB`,se=R.slice(0,C);let ue=0;const ye=se.some(Ce=>Ce.size>8*1024*1024||Ce.type.startsWith("video/"));for(const Ce of se){ue+=Ce.size;const $e=Ce.type.startsWith("image/"),Ye=Ce.type.startsWith("video/");if(!$e&&!Ye)return alert(`Type de fichier non supporté: ${Ce.name}`);if(Ye&&!Y.includes(Ce.type))return alert(`Format vidéo non supporté: ${Ce.name} (${Ce.type}). Formats acceptés: mp4, webm, mov.`);if($e&&!te.includes(Ce.type)&&!Ce.type.startsWith("image/"))return alert(`Format d'image non supporté: ${Ce.name} (${Ce.type})`);const Xe=Ce.size>8*1024*1024||Ce.type.startsWith("video/");if(Ce.size>Ne&&!(Xe&&Yr))return alert(`Le fichier ${Ce.name} est trop volumineux (${J(Ce.size)}). Taille max par fichier via le serveur: ${J(Ne)}.`)}if(ue>z&&!(ye&&Yr))return alert(`La taille totale des fichiers sélectionnés est trop importante (${J(ue)}). Limite via le serveur: ${J(z)}.`);if(se.some(Ce=>Ce.size>8*1024*1024||Ce.type.startsWith("video/"))&&_c&&Yr){const Ce=X0(_c,Yr);for(const $e of se)try{const Ye=await fe("api/uploads/supabase/sign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:$e.name,contentType:$e.type,prefix:"feed"})});if(!Ye.ok){const le=await Ye.json().catch(()=>({}));console.error("Sign failed",le);continue}const Xe=await Ye.json(),Se=Xe.storagePath,Me=Xe.bucket||Q0,{error:ke}=await Ce.storage.from(Me).upload(Se,$e,{contentType:$e.type,upsert:!1});if(ke){console.error("Direct upload error",ke);continue}const Je=await fe("api/uploads/supabase/finalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storagePath:Se,postId:s.id,size:$e.size,originalName:$e.name})});if(!Je.ok){const le=await Je.json().catch(()=>({}));console.error("Finalize failed",le);continue}const ce=(await Je.json()).medias||[];u&&u(s.id,(s.medias||[]).concat(ce))}catch(Ye){console.error("Direct upload loop error",Ye)}return}const De=new FormData;for(const Ce of se)De.append("images",Ce,Ce.name);try{const Ce=await fe(`api/feed/${s.id}/media`,{method:"POST",body:De});if(!Ce.ok){const Xe=await Ce.json().catch(()=>({}));return alert(Xe.message||"Échec de l'upload")}const Ye=(await Ce.json()).medias||[];u&&u(s.id,(s.medias||[]).concat(Ye))}catch(Ce){console.error("Upload failed",Ce),alert("Erreur réseau")}}async function Q($){try{const E=await fe(`api/feed/${s.id}/media/${$}`,{method:"DELETE"});if(!E.ok){const C=await E.json().catch(()=>({}));return alert(C.message||"Échec suppression media")}const G=(s.medias||[]).filter(C=>C.id!==$);u&&u(s.id,G)}catch(E){console.error("Delete media failed",E),alert("Erreur réseau")}}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:s.author?.name||"Utilisateur"}),a.jsxs("div",{className:"text-xs text-gray-400",children:["Il y a ",rh(s.createdAt)]})]}),a.jsxs("div",{className:"relative",children:[S&&a.jsx("button",{onClick:()=>p($=>!$),className:"text-gray-400 hover:text-gray-600 px-2",children:"⋯"}),d&&S&&a.jsx("div",{className:"absolute right-0 mt-2 w-44 bg-white border rounded-lg shadow-lg z-10 overflow-hidden",children:a.jsxs("div",{className:"px-2 py-1",children:[S&&a.jsxs("button",{onClick:()=>{m(!0),p(!1)},className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm hover:bg-gray-50 rounded",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5h6M11 12h6M11 19h6M5 5h.01M5 12h.01M5 19h.01"})}),"Modifier"]}),S&&a.jsxs("button",{onClick:()=>{p(!1),N(!0)},className:"flex items-center gap-2 w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-gray-50 rounded",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8 9a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zm4 0a1 1 0 011 1v5a1 1 0 11-2 0v-5a1 1 0 011-1zM4 6a1 1 0 011-1h10l-.6 9.6A2 2 0 0112.4 17H7.6a2 2 0 01-1.99-1.99L5 5zM9 3a1 1 0 00-1 1v1h4V4a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Supprimer"]})]})})]})]}),j>0&&a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:"w-full overflow-hidden rounded-lg border border-gray-200",children:a.jsx("div",{className:`grid gap-2 ${(s.medias||[]).length===1?"grid-cols-1":"grid-cols-2"}`,children:(s.medias||[]).slice(0,4).map(($,E)=>{const G=E===3&&(s.medias||[]).length>4,C=(s.medias||[]).length===1?"aspect-[16/9]":"aspect-[4/3]";return a.jsxs("div",{className:`relative w-full ${C} ${t||"bg-gray-100"} rounded overflow-hidden`,children:[a.jsxs("div",{className:"w-full h-full",children:[a.jsx(a6,{src:$.url,thumb:$.thumbnailUrl,alt:s.text?s.text.slice(0,80):"photo",onOpen:()=>M(E)}),G&&a.jsxs("div",{role:"button",tabIndex:0,onClick:()=>M(E),onKeyDown:R=>{(R.key==="Enter"||R.key===" ")&&M(E)},className:"absolute inset-0 bg-black/40 flex items-center justify-center text-white text-lg font-semibold cursor-pointer z-20","aria-label":`Afficher ${(s.medias||[]).length-4} images supplémentaires en plein écran`,children:["+",(s.medias||[]).length-4]})]}),S&&f&&a.jsx("button",{onClick:()=>Q($.id),className:"absolute top-2 right-2 bg-white rounded-full p-1 text-red-600 shadow",children:"✕"})]},$.id)})})})}),s.medias&&s.medias.length>0&&a.jsx(s6,{open:k,medias:s.medias,index:O,onClose:L,onPrev:W,onNext:U}),S&&f&&a.jsx("div",{className:"mt-3",children:a.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,className:"hidden",onChange:$=>P($.target.files)}),a.jsx("span",{className:"px-3 py-1 rounded bg-gray-100 hover:bg-gray-200 text-sm",children:"Ajouter des fichiers (images/vidéos, max 6)"})]})}),f?a.jsx("div",{className:"mt-3",children:a.jsxs("div",{className:`border border-gray-200 rounded-lg p-2 ${t||"bg-white"}`,children:[a.jsx("textarea",{autoFocus:!0,onMouseDown:$=>$.stopPropagation(),value:x,onChange:$=>v($.target.value),className:"w-full border rounded p-2 text-sm min-h-[80px]"}),a.jsxs("div",{className:"mt-2 flex gap-2 justify-end",children:[a.jsx("button",{onClick:()=>{m(!1),v(s.text||"")},className:"px-3 py-1 rounded bg-gray-100",children:"Annuler"}),a.jsx("button",{onClick:Z,className:"px-3 py-1 rounded bg-indigo-600 text-white",children:"Sauvegarder"})]})]})}):a.jsx("div",{className:"mt-3",children:a.jsx("div",{className:`border border-gray-200 rounded-lg p-3 ${t||"bg-white"} text-gray-800 break-words text-sm sm:text-base`,children:s.text})}),w&&a.jsx(Z0,{title:"Supprimer la publication",description:"Voulez-vous vraiment supprimer cette publication ?",onCancel:()=>N(!1),onConfirm:I})]})}function u6(){const[s,t]=b.useState([]),[r,l]=b.useState(!1),[o,u]=b.useState("all"),[d,p]=b.useState(null),[f,m]=b.useState(1),[x,v]=b.useState(null),[w,N]=b.useState(!1),[T,S]=b.useState(0),j=b.useRef(null),k=b.useRef(null),_=b.useCallback(async(M=o,L=f)=>{l(!0);try{const W=`/api/reviews/admin?status=${encodeURIComponent(M)}&limit=10&page=${L}`,I=await(await fe(W,{credentials:"include"})).json();t(Array.isArray(I.reviews)?I.reviews:[]),v(typeof I.totalCount=="number"?I.totalCount:null)}catch(U){console.error("Failed to load reviews",U),t([])}finally{l(!1)}},[o,f]);b.useEffect(()=>{_(o)},[o,_]),b.useEffect(()=>{const M=async()=>{try{const U=await fe(`/api/reviews/admin?status=${encodeURIComponent(o)}`,{credentials:"include"});if(!U.ok)return;const W=await U.json(),I=(Array.isArray(W.reviews)?W.reviews:W).filter(Q=>!Q.approved).length,P=j.current;if(P===null){j.current=I;return}I>P&&(S(I-P),N(!0))}catch{}},L=window.setTimeout(()=>{M()},1500);return k.current=window.setInterval(()=>{M()},3e4),()=>{clearTimeout(L),k.current!=null&&clearInterval(k.current)}},[o]);const O=async(M,L)=>{try{const U=await fe(`/api/reviews/${encodeURIComponent(M)}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!L})});if(!U.ok)throw new Error("Failed");const W=await U.json();t(Z=>Z.map(I=>I.id===M&&W.review||I)),p(L?"Avis retiré.":"Avis approuvé."),window.setTimeout(()=>p(null),3e3)}catch(U){console.error(U),alert("Impossible de modifier l'avis")}},q=async M=>{if(confirm("Supprimer cet avis ?"))try{if(!(await fe(`/api/reviews/${encodeURIComponent(M)}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed");t(U=>U.filter(W=>W.id!==M)),p("Avis supprimé."),window.setTimeout(()=>p(null),3e3)}catch(L){console.error(L),alert("Impossible de supprimer l'avis")}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[a.jsx(Ac,{}),a.jsxs("main",{className:"flex-1 flex flex-col items-center py-4 px-2 md:py-8 md:px-4 md:ml-64",children:[d&&a.jsx("div",{className:"fixed right-6 top-6 z-50",children:a.jsx("div",{className:"bg-green-600 text-white px-4 py-2 rounded shadow",children:d})}),a.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4 w-full",children:[a.jsx("div",{className:"self-start md:self-auto",children:a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des avis"})}),a.jsx("div",{className:"flex-1 text-center min-w-0",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Seuls les administrateurs peuvent approuver ou supprimer les avis."})}),a.jsx("div",{className:"w-24 md:w-32"})]}),w?a.jsxs("div",{className:"mb-4 p-3 rounded bg-blue-50 border border-blue-100 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-blue-700",children:[T," nouvel",T>1?"s":""," avis en attente"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:async()=>{await _(),j.current=s.filter(M=>!M.approved).length,N(!1)},className:"px-3 py-1 rounded bg-blue-600 text-white text-sm",children:"Voir"}),a.jsx("button",{onClick:()=>{j.current=s.filter(M=>!M.approved).length,N(!1)},className:"px-3 py-1 rounded bg-transparent border border-gray-200 text-sm",children:"Ignorer"})]})]}):null,r?a.jsx("div",{children:"Chargement..."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Filtrer :"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>u("all"),className:`px-3 py-1 rounded text-sm ${o==="all"?"bg-[#0b5566] text-white":"bg-white border"}`,children:"Tous"}),a.jsx("button",{onClick:()=>u("pending"),className:`px-3 py-1 rounded text-sm ${o==="pending"?"bg-[#0b5566] text-white":"bg-white border"}`,children:"En attente"}),a.jsx("button",{onClick:()=>u("approved"),className:`px-3 py-1 rounded text-sm ${o==="approved"?"bg-[#0b5566] text-white":"bg-white border"}`,children:"Publiés"})]})]}),s.length===0?a.jsx("div",{className:"text-gray-500",children:"Aucun avis."}):s.map(M=>a.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:M.authorName||"Anonyme"}),a.jsx("div",{className:"text-xs text-gray-400",children:new Date(M.createdAt).toLocaleString()})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>O(M.id,M.approved),className:`px-3 py-1 rounded text-sm ${M.approved?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:M.approved?"Rejeter":"Approuver"}),a.jsx("button",{onClick:()=>q(M.id),className:"px-3 py-1 rounded bg-red-100 text-red-700 text-sm",children:"Supprimer"})]})]}),a.jsx("div",{className:"mt-3 text-gray-800 whitespace-pre-wrap",children:M.content}),typeof M.rating=="number"&&a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Note: ",M.rating,"/5"]})]},M.id)),x!==null&&x>10&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[a.jsx("button",{disabled:f===1,onClick:()=>{const M=Math.max(1,f-1);m(M),_(o,M)},className:"px-3 py-1 border rounded",children:"Préc."}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Page ",f," / ",Math.ceil((x||0)/10)]}),a.jsx("button",{disabled:f>=Math.ceil((x||0)/10),onClick:()=>{const M=f+1;m(M),_(o,M)},className:"px-3 py-1 border rounded",children:"Suiv."})]})]})]})]})]})}function d6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"À propos de Frimousse | Application de gestion de garde d'enfants",description:"Frimousse, la solution digitale complète pour la gestion des associations de garde d'enfants : sécurité, RGPD, communication, planning, témoignages, FAQ, et bien plus.",url:"https://lesfrimousses.com/a-propos",image:"https://lesfrimousses.com/imgs/LogoFrimousse.webp"}),a.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify({"@context":"https://schema.org","@type":"FAQPage",mainEntity:[{"@type":"Question",name:"Pourquoi utiliser une application pour la gestion de la garde d’enfants ?",acceptedAnswer:{"@type":"Answer",text:"Une application comme Frimousse permet de centraliser toutes les informations, d’automatiser les tâches administratives, d’assurer la sécurité des données et de faciliter la communication entre intervenants et familles."}},{"@type":"Question",name:"Comment Frimousse garantit-elle la sécurité et la confidentialité des données ?",acceptedAnswer:{"@type":"Answer",text:"Frimousse respecte strictement le RGPD, utilise des serveurs sécurisés, des accès personnalisés et des sauvegardes régulières pour garantir la confidentialité et l’intégrité des données."}},{"@type":"Question",name:"Quels bénéfices pour les familles et les intervenants ?",acceptedAnswer:{"@type":"Answer",text:"Les familles bénéficient d’une communication fluide, d’un accès à l’historique, aux documents et aux notifications. Les intervenants gagnent du temps, organisent mieux les plannings et assurent un suivi optimal des enfants."}},{"@type":"Question",name:"Frimousse est-elle adaptée à tous types de structures ?",acceptedAnswer:{"@type":"Answer",text:"Oui, Frimousse s’adresse aux crèches associatives, micro-crèches, MAM, garderies, centres de loisirs, et toute structure d’accueil collectif ou familial."}},{"@type":"Question",name:"Quels sont les avantages concrets de Frimousse ?",acceptedAnswer:{"@type":"Answer",text:"Gain de temps, réduction des erreurs, meilleure organisation, sécurité, conformité RGPD, accès multi-utilisateurs, support réactif, et évolutivité selon les besoins de l’association."}}]})}}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousse"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-gray-100",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx("button",{onClick:()=>s("/"),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#0b5566] mb-6",children:"À propos de Frimousse"}),a.jsx("p",{className:"text-gray-700 text-base sm:text-lg mb-6",children:"Frimousse est une application web moderne dédiée à la gestion des associations de garde d’enfants. Notre mission est de simplifier le quotidien des responsables, des intervenants et des familles en centralisant toutes les informations et outils nécessaires à un accueil de qualité."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Pourquoi choisir une solution digitale pour la garde d’enfants ?"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2",children:[a.jsx("li",{children:"Centralisation des dossiers enfants, informations médicales et autorisations parentales."}),a.jsx("li",{children:"Gestion simplifiée des présences, plannings et affectations des intervenants."}),a.jsx("li",{children:"Communication facilitée avec les familles (notifications, rappels, actualités)."}),a.jsx("li",{children:"Suivi administratif (cotisations, factures, attestations) automatisé."}),a.jsx("li",{children:"Respect des normes RGPD et sécurité des données personnelles."})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-lg mb-2 text-[#0b5566]",children:"Les avantages de Frimousse pour votre association"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2",children:[a.jsx("li",{children:"Gain de temps pour les équipes grâce à une interface intuitive et collaborative."}),a.jsx("li",{children:"Meilleure organisation des activités, sorties et événements."}),a.jsx("li",{children:"Accès sécurisé pour chaque intervenant, parent ou administrateur."}),a.jsx("li",{children:"Historique des présences et rapports d’activité accessibles à tout moment."}),a.jsx("li",{children:"Support réactif et évolutif, adapté aux besoins des associations de toutes tailles."})]})]})]}),a.jsxs("div",{className:"mt-8 text-gray-700 text-base sm:text-lg",children:[a.jsx("strong",{children:"Frimousse"})," s’adresse à toutes les structures d’accueil collectif ou familial : crèches associatives, micro-crèches, garderies, centres de loisirs, MAM, etc. Notre solution accompagne les professionnels dans leur mission d’accueil, de suivi et d’épanouissement des enfants."]}),a.jsxs("div",{className:"mt-12 text-left max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-[#0b5566] mb-4",children:"Pourquoi digitaliser la gestion de la garde d’enfants ?"}),a.jsx("p",{className:"mb-4",children:"La gestion de la garde d’enfants implique de nombreux défis : suivi des présences, gestion des plannings, communication avec les familles, respect des normes administratives et sanitaires, sécurité des données, etc. La digitalisation permet de centraliser toutes ces tâches, d’automatiser les processus répétitifs et de garantir une traçabilité optimale pour chaque enfant accueilli."}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mb-4",children:[a.jsx("li",{children:"Réduction des erreurs humaines et des oublis grâce à des rappels et des notifications automatiques."}),a.jsx("li",{children:"Accès instantané à l’historique des présences, des activités, des documents et des autorisations parentales."}),a.jsx("li",{children:"Meilleure réactivité en cas d’urgence (accès aux contacts, allergies, protocoles médicaux)."}),a.jsx("li",{children:"Gain de temps administratif pour se concentrer sur l’accompagnement des enfants."})]})]}),a.jsxs("div",{className:"mt-12 text-left max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-[#0b5566] mb-4",children:"Sécurité, confidentialité et conformité RGPD"}),a.jsx("p",{className:"mb-4",children:"La sécurité des données des enfants et des familles est une priorité absolue. Frimousse met en œuvre :"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mb-4",children:[a.jsx("li",{children:"Des accès personnalisés et sécurisés pour chaque intervenant, parent ou administrateur."}),a.jsx("li",{children:"Des sauvegardes régulières et un hébergement sur des serveurs conformes aux normes européennes."}),a.jsx("li",{children:"Un respect strict du RGPD : consentement parental, droit à l’oubli, transparence sur l’utilisation des données."}),a.jsx("li",{children:"Un support technique réactif pour accompagner les associations dans la gestion de la conformité."})]})]}),a.jsxs("div",{className:"mt-12 text-left max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-[#0b5566] mb-4",children:"Quels bénéfices pour les familles et les intervenants ?"}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mb-4",children:[a.jsx("li",{children:"Les familles accèdent à un espace personnel pour consulter les plannings, recevoir des notifications, télécharger des documents et échanger avec l’équipe encadrante."}),a.jsx("li",{children:"Les intervenants disposent d’outils pour organiser les activités, suivre les présences, rédiger des rapports et communiquer facilement avec les parents."}),a.jsx("li",{children:"La transparence et la confiance sont renforcées grâce à un suivi partagé et à la disponibilité des informations en temps réel."})]})]}),a.jsxs("div",{className:"mt-12 text-left max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-extrabold text-[#0b5566] mb-4",children:"Impact social"}),a.jsx("p",{className:"mb-4",children:"En centralisant toutes les informations et en fluidifiant la communication, Frimousse permet aux équipes de se concentrer sur l’essentiel : le bien-être, l’éveil et la sécurité des enfants. L’application favorise l’implication des familles, la personnalisation de l’accueil et l’amélioration continue des pratiques professionnelles."}),a.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-2 mb-4",children:[a.jsx("li",{children:"Suivi individualisé du parcours de chaque enfant."}),a.jsx("li",{children:"Valorisation du travail des équipes et simplification des démarches administratives."}),a.jsx("li",{children:"Adaptabilité aux besoins spécifiques de chaque structure et de chaque famille."})]})]})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-8 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"mt-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"})})]})]})}const ey=[{title:"Gestion des enfants",description:"Ajout, modification, suppression et suivi des enfants inscrits à l’association."},{title:"Gestion des familles",description:"Centralisation des informations des familles, contacts, et historique."},{title:"Gestion des nounous",description:"Affectation, plannings, profils et suivi des nounous."},{title:"Planning & Calendrier",description:"Visualisation et édition des plannings de garde, gestion des absences et présences."},{title:"Authentification sécurisée",description:"Connexion par email/mot de passe, gestion des rôles et permissions."},{title:"Notifications",description:"Alertes pour les événements importants, rappels et communications."},{title:"Assistant IA",description:"Obtiens des réponses rapides, des modèles de messages et de l’aide administrative pour gérer ton association."},{title:"Accessibilité",description:"Respect des standards d’accessibilité pour tous les utilisateurs."},{title:"Sécurité & RGPD",description:"Protection des données, conformité RGPD, cookies HTTP-only."}],f6={"@context":"https://schema.org","@type":"ItemList",name:"Fonctionnalités de l’application Frimousse",itemListElement:ey.map((s,t)=>({"@type":"ListItem",position:t+1,name:s.title,description:s.description}))};function h6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Fonctionnalités | Frimousse Association",description:"Découvrez toutes les fonctionnalités de l’application Frimousse : gestion des enfants, familles, nounous, planning, rapports, sécurité, accessibilité et plus encore.",url:"https://lesfrimousses.com/fonctionnalites",image:"/frimousse-cover.png"}),a.jsx("script",{type:"application/ld+json",children:JSON.stringify(f6)}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-gray-100",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx("button",{onClick:()=>s("/"),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#0b5566] mb-6",children:"Fonctionnalités de l’application"}),a.jsx("p",{className:"text-gray-700 text-base sm:text-lg mb-6",children:"Découvrez toutes les fonctionnalités de Frimousse, conçues pour simplifier la gestion de votre association de garde d’enfants, améliorer la communication et garantir la sécurité des données."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:ey.map((t,r)=>a.jsxs("div",{className:"bg-[#f7f4d7] rounded-lg shadow p-5 border border-[#fcdcdf]",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2 text-[#0b5566]",children:t.title}),a.jsx("p",{className:"text-[#08323a]",children:t.description})]},r))})]})}),a.jsx("div",{className:"bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2]max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}const m6=[{name:"Découverte",price:"0€",description:"Pour tester Frimousse sans engagement (15 jours max)",features:["Limite sur la création de compte","Support par email","Accès web responsive"],cta:"Essai gratuit",highlight:!1,buyButtonId:null},{name:"Essentiel",price:"29€ / mois",description:"Pour les MAM, micro-crèches et petites structures",features:["Jusqu’à 10 enfants","Notifications email","Support par email"],cta:"Choisir Essentiel",highlight:!1,buyButtonId:"buy_btn_1Ru88bExeKKlzm3U232ITaMN",productId:"prod_SpdCOBUbbne4oo"},{name:"Pro",price:"59€ / mois",description:"Pour crèches, garderies, centres de loisirs",features:["Création de comptes illimités","facturations détaillées","Assistant IA","Support prioritaire"],cta:"Choisir Pro",highlight:!0,buyButtonId:"buy_btn_1Ru84HExeKKlzm3UMPmR820n",productId:"prod_SpdCOBUbbne4oo"}];function p6(){const s=Ot(),t=typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams(""),r=t.get("subscribeToken"),l=t.get("prefillEmail"),[o,u]=b.useState(null),[d,p]=b.useState(null),[f,m]=b.useState(!0),[x,v]=b.useState(null);b.useEffect(()=>{m(!0),fetch("api/me",{credentials:"include"}).then(N=>N.ok?N.json():null).then(N=>u(N?.role||null)).catch(()=>u(null)).finally(()=>m(!1)),l&&p({type:"info",text:`Continuer l'abonnement pour ${l}`})},[l,r]);async function w(N,T){try{const S=N,j=r?"/subscriptions/create-checkout-with-token":"/subscriptions/create-checkout",k={plan:S,mode:"direct"};r&&(k.subscribeToken=r);const _=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},credentials:r?"omit":"include",body:JSON.stringify(k)}),O=await _.json().catch(()=>({}));if(!_.ok||!O.url)throw new Error(O.error||"Impossible de créer la session de paiement");window.location.href=O.url}catch(S){const j=S&&S.message?S.message:String(S);p({type:"error",text:j||"Erreur lors de la création de l’abonnement."})}finally{}}return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Tarifs | Frimousse Association",description:"Découvrez les tarifs de Frimousse pour crèches associatives, micro-crèches, garderies, centres de loisirs et MAM. Abonnement mensuel, offre gratuite, options modulaires.",url:"https://frimousse-asso.fr/tarifs",image:"/frimousse-cover.png"}),a.jsx("script",{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#a9ddf2] to-[#f7f4d7] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[d&&a.jsx("div",{className:`max-w-4xl mx-auto mt-6 p-3 rounded ${d.type==="success"?"bg-green-50 border border-green-200 text-green-800":d.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-blue-50 border border-blue-200 text-blue-800"}`,role:"status",children:d.text}),a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-gray-100",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[a.jsx("button",{onClick:()=>s("/"),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#0b5566] mb-6",children:"Tarifs"}),a.jsx("p",{className:"text-gray-700 text-base sm:text-lg mb-10",children:"Des forfaits simples et transparents, adaptés à toutes les structures d’accueil d’enfants : crèches associatives, micro-crèches, garderies, centres de loisirs, MAM…"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch w-full",children:m6.map((N,T)=>a.jsxs("div",{className:`rounded-lg border shadow p-6 flex flex-col items-center bg-[#f7f4d7] ${N.highlight?"border-[#0b5566] shadow-lg":"border-[#fcdcdf]"} h-full min-w-0 w-full max-w-md mx-auto md:max-w-[420px] md:w-full md:h-auto min-h-[380px] md:min-h-[420px]`,style:{width:"100%",maxWidth:"420px",margin:"0 auto"},children:[a.jsx("h2",{className:`text-xl font-bold mb-2 ${N.highlight?"text-[#0b5566]":"text-[#08323a]"}`,children:N.name}),a.jsx("div",{className:"text-3xl font-extrabold mb-2",children:N.price}),a.jsx("div",{className:"mb-4 text-[#08323a] text-center",children:N.description}),a.jsx("div",{className:"flex-1 w-full flex flex-col",children:a.jsx("ul",{className:"mb-6 text-left space-y-2 text-[#08323a] flex-1",children:N.features.map((S,j)=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[#0b5566]",children:"✔"})," ",S]},j))})}),N.buyButtonId?a.jsxs("div",{className:"w-full flex flex-col items-center mt-4",children:[x===N.name&&a.jsxs("div",{className:"w-full max-w-xs mb-2 flex items-start justify-between",children:[a.jsx("div",{className:"rounded-md bg-yellow-100 border-l-4 border-yellow-400 p-3 text-sm text-yellow-800 flex-1",children:"Les abonnements payants ne sont pas encore disponibles — contactez-nous pour plus de renseignements."}),a.jsx("button",{"aria-label":"Fermer",onClick:()=>v(null),className:"ml-2 text-sm text-gray-600",children:"✕"})]}),a.jsx("button",{className:"w-full max-w-xs h-11 px-4 font-semibold transition shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2 flex items-center justify-center cursor-not-allowed rounded bg-gray-300 text-gray-600",type:"button","aria-disabled":"true",title:"Les abonnements payants ne sont pas encore disponibles. Contactez-nous pour plus d’informations.",onClick:()=>v(N.name),children:N.cta})]}):a.jsx("div",{className:"w-full flex justify-center mt-4",children:a.jsx("button",{className:"w-full max-w-xs h-11 px-4 font-semibold transition shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2 flex items-center justify-center cursor-pointer rounded",type:"button",style:{backgroundColor:"#0b5566",color:"#fff"},onClick:()=>f?p({type:"info",text:"Chargement en cours…"}):N.name==="Découverte"?o?p({type:"info",text:"Vous êtes déjà connecté."}):s("/register"):o==="super-admin"?p({type:"info",text:"Compte administrateur — l'abonnement n'est pas requis."}):w(N.name.toLowerCase()),children:a.jsx("span",{className:"Text Text-color--default Text-fontWeight--500 Text--truncate","data-testid":"hosted-buy-button-text",children:N.cta})})})]},T))}),a.jsxs("div",{className:"mt-10 text-gray-600 text-sm",children:[a.jsx("p",{children:"Tarifs hors taxes. Sans engagement. Options sur devis : formation, migration de données, modules personnalisés."}),a.jsx("p",{className:"mt-2",children:"Pour les réseaux, fédérations ou structures multi-sites, contactez-nous pour une offre sur-mesure."})]})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}function g6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Support | Frimousse Association",description:"Besoin d'aide sur Frimousse? Contact, guides, assistance technique, documentation et ressources pour les associations, crèches, MAM, garderies.",url:"https://lesfrimousses.com/support",image:"/frimousse-cover.png"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[a.jsx("button",{onClick:()=>s("/"),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#0b5566] mb-6",children:"Support & Aide"}),a.jsx("p",{className:"text-gray-700 text-base sm:text-lg mb-8",children:"Retrouvez ici toutes les ressources pour bien utiliser Frimousse, obtenir de l’aide ou contacter notre équipe."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch text-left",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 border border-[#fcdcdf] h-full flex flex-col",children:[a.jsx("h2",{className:"font-bold text-lg mb-3 text-[#0b5566]",children:"Contact support"}),a.jsxs("ul",{className:"text-[#08323a] space-y-3 flex-1",children:[a.jsxs("li",{children:["Email : ",a.jsx("a",{href:"mailto:bricchi.florian@outlook.com",className:"text-[#0b5566] underline",children:"bricchi.florian@outlook.com"})]}),a.jsxs("li",{children:["Téléphone : ",a.jsx("a",{href:"tel:+33647486734",className:"text-[#0b5566] underline",children:"+33 6 47 48 67 34"})]})]}),a.jsxs("div",{className:"mt-6 bg-[#f7f4d7] rounded-lg p-4 border border-[#fcdcdf]",children:[a.jsx("h3",{className:"font-semibold text-[#0b5566] mb-1",children:"Support premium"}),a.jsx("p",{className:"text-[#08323a] text-sm",children:"Assistance prioritaire pour les abonnés Essentiel & Pro (jours ouvrés, 9h-18h)."})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 border border-[#fcdcdf] h-full flex flex-col",children:[a.jsx("h2",{className:"font-bold text-lg mb-3 text-[#0b5566]",children:"Guides & documentation"}),a.jsxs("ul",{className:"text-[#08323a] space-y-3 flex-1",children:[a.jsx("li",{children:a.jsx("a",{href:"/guide-demarrage",className:"underline text-[#0b5566]",children:"Guide de démarrage rapide"})}),a.jsx("li",{children:a.jsx("a",{href:"/guide-ajouter-enfant",className:"underline text-[#0b5566]",children:"Ajouter un enfant"})}),a.jsx("li",{children:a.jsx("a",{href:"/guide-planning",className:"underline text-[#0b5566]",children:"Gérer un planning"})}),a.jsx("li",{children:a.jsx("a",{href:"/guide-export-rapport",className:"underline text-[#0b5566]",children:"Exporter un rapport"})}),a.jsx("li",{children:a.jsx("a",{href:"/guide-securite",className:"underline text-[#0b5566]",children:"Sécurité & RGPD"})})]}),a.jsxs("div",{className:"mt-6 bg-[#f7f4d7] rounded-lg p-4 border border-[#fcdcdf]",children:[a.jsx("h3",{className:"font-semibold text-[#0b5566] mb-1",children:"Communauté"}),a.jsxs("p",{className:"text-[#08323a] text-sm",children:["Rejoignez notre ",a.jsx("a",{href:"#",className:"underline text-[#0b5566]",children:"groupe d’entraide"})," pour échanger avec d’autres utilisateurs."]})]})]})]}),a.jsxs("div",{className:"mt-12 text-gray-600 text-sm max-w-2xl mx-auto",children:[a.jsx("h2",{className:"font-bold text-[#0b5566] mb-4 text-center",children:"Autres ressources utiles"}),a.jsxs("nav",{className:"flex flex-wrap justify-center items-center gap-6 text-[#08323a]",children:[a.jsx("a",{href:"/confidentialite",className:"underline text-[#0b5566]",children:"Politique de confidentialité"}),a.jsx("a",{href:"/cgu",className:"underline text-[#0b5566]",children:"Conditions générales d’utilisation"}),a.jsx("a",{href:"/mentions-legales",className:"underline text-[#0b5566]",children:"Mentions légales"})]})]})]})}),a.jsx("div",{className:"max-w-6xl mx-auto flex justify-center mt-10 mb-12",children:a.jsx("button",{onClick:()=>s("/"),className:"px-6 py-3 rounded-full bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}function x6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Politique de confidentialité | Frimousse Association",description:"Politique de confidentialité de Frimousse : protection des données, RGPD, droits des utilisateurs, sécurité et gestion des informations personnelles.",url:"https://lesfrimousses.com/politique-confidentialite"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Politique de confidentialité"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Dernière mise à jour : 7 août 2025"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Cette politique de confidentialité décrit comment Frimousse collecte, utilise, protège et partage vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD) et à la législation française."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"1. Responsable du traitement"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L’association Les petites Frimousse, 12 rue de l’Enfance, 75000 Paris, est responsable du traitement des données collectées via l’application Frimousse."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"2. Données collectées"}),a.jsxs("ul",{className:"list-disc list-inside text-[#08323a] mb-4",children:[a.jsx("li",{children:"Données d’identification : nom, prénom, email, téléphone, adresse"}),a.jsx("li",{children:"Données relatives aux enfants : identité, santé, autorisations parentales"}),a.jsx("li",{children:"Données de connexion et d’utilisation de l’application"})]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"3. Finalités du traitement"}),a.jsxs("ul",{className:"list-disc list-inside text-[#08323a] mb-4",children:[a.jsx("li",{children:"Gestion des inscriptions, plannings, présences et activités"}),a.jsx("li",{children:"Communication avec les familles et intervenants"}),a.jsx("li",{children:"Respect des obligations légales et réglementaires"}),a.jsx("li",{children:"Sécurité et amélioration du service"})]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"4. Partage des données"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Les données ne sont jamais vendues. Elles peuvent être partagées avec : les membres autorisés de l’association, les prestataires techniques (hébergement, maintenance), les autorités compétentes en cas d’obligation légale."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"5. Sécurité"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Frimousse met en œuvre des mesures techniques et organisationnelles pour protéger vos données : accès restreint, chiffrement, sauvegardes régulières, audits de sécurité."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"6. Vos droits"}),a.jsxs("ul",{className:"list-disc list-inside text-[#08323a] mb-4",children:[a.jsx("li",{children:"Droit d’accès, de rectification, d’opposition, d’effacement"}),a.jsx("li",{children:"Droit à la portabilité et à la limitation du traitement"}),a.jsx("li",{children:"Exercice des droits : contact@frimousse-asso.fr"})]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"7. Cookies"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L’application utilise des cookies techniques nécessaires à son fonctionnement. Aucun cookie publicitaire n’est utilisé."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"8. Modifications"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Frimousse se réserve le droit de modifier la présente politique. Les utilisateurs seront informés de toute modification importante."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"9. Réclamations"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"En cas de litige, vous pouvez contacter la CNIL (www.cnil.fr)."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}function b6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Conditions générales d'utilisation | Frimousse Association",description:"CGU Frimousse : règles d'utilisation, responsabilités, droits et obligations des utilisateurs et de l'éditeur de l'application.",url:"https://lesfrimousses.com/cgu"}),a.jsx("header",{className:"w-full py-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-4 px-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-left",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Conditions générales d'utilisation"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Dernière mise à jour : 7 août 2025"}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"1. Objet"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Les présentes conditions générales d'utilisation (CGU) régissent l'accès et l'utilisation de l'application Frimousse par les utilisateurs (associations, familles, intervenants)."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"2. Accès au service"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L'accès à Frimousse nécessite la création d'un compte. L'utilisateur s'engage à fournir des informations exactes et à les mettre à jour."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"3. Propriété intellectuelle"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L'ensemble des contenus, marques, logos, interfaces et logiciels sont la propriété exclusive de l'association Les petites Frimousse. Toute reproduction ou utilisation non autorisée est interdite."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"4. Responsabilités"}),a.jsxs("ul",{className:"list-disc list-inside text-[#08323a] mb-4",children:[a.jsx("li",{children:"L’éditeur s’efforce d’assurer la disponibilité et la sécurité du service, mais ne peut garantir l’absence totale d’erreurs ou d’interruptions."}),a.jsx("li",{children:"L’utilisateur est responsable de la confidentialité de ses identifiants et de l’usage de son compte."}),a.jsx("li",{children:"L’éditeur ne saurait être tenu responsable des dommages indirects ou pertes de données résultant de l’utilisation de l’application."})]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"5. Données personnelles"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Les données sont traitées conformément à la politique de confidentialité et au RGPD."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"6. Modifications"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L'éditeur se réserve le droit de modifier les présentes CGU à tout moment. Les utilisateurs seront informés des changements importants."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"7. Loi applicable"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Les présentes CGU sont soumises au droit français. En cas de litige, les tribunaux compétents seront ceux du siège de l'association."})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}function v6(){const s=Ot();return a.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[a.jsx(Rn,{title:"Mentions légales | Frimousse Association",description:"Mentions légales de Frimousse : éditeur, hébergeur, propriété intellectuelle, contact, conformité légale.",url:"https://lesfrimousses.com/mentions-legales"}),a.jsx("header",{className:"w-full bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2] border-b border-[#fcdcdf] sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:a.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"w-full text-center",children:a.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),a.jsxs("main",{className:"flex-1 w-full",children:[a.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-[#fcdcdf]",children:a.jsxs("div",{className:"max-w-3xl mx-auto text-left",children:[a.jsx("button",{onClick:()=>s(-1),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour",children:"← Retour"}),a.jsx("h1",{className:"text-3xl font-bold text-[#0b5566] mb-6",children:"Mentions légales"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Dernière mise à jour : 7 août 2025"}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"1. Éditeur du site"}),a.jsxs("p",{className:"mb-4 text-[#08323a]",children:["Association Les petites Frimousse",a.jsx("br",{}),"12 rue de l’Enfance, 75000 Paris",a.jsx("br",{}),"SIREN : 123 456 789",a.jsx("br",{}),"Email : contact@frimousse-asso.fr"]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"2. Directeur de la publication"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Mme/M. Florian Bricchi, Président(e) de l’association"}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"3. Hébergement"}),a.jsxs("p",{className:"mb-4 text-[#08323a]",children:["OVH SAS",a.jsx("br",{}),"2 rue Kellermann, 59100 Roubaix, France",a.jsx("br",{}),"www.ovh.com"]}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"4. Propriété intellectuelle"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"L’ensemble du contenu du site et de l’application (textes, images, logos, code) est protégé par le droit d’auteur. Toute reproduction ou utilisation non autorisée est interdite."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"5. Données personnelles"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Les données sont traitées conformément à la politique de confidentialité et au RGPD."}),a.jsx("h2",{className:"font-bold text-lg text-[#0b5566] mt-8 mb-2",children:"6. Contact"}),a.jsx("p",{className:"mb-4 text-[#08323a]",children:"Pour toute question ou réclamation, contactez : contact@frimousse-asso.fr"})]})}),a.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:a.jsx("button",{onClick:()=>s("/"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}function y6(){const s=b.lazy(()=>Pa(()=>import("./Assistant-D04Ycr8u.js"),[])),t=b.lazy(()=>Pa(()=>import("./AdminEmailLogs-BdDtV75w.js"),[]));return a.jsx(p1,{children:a.jsxs(F2,{children:[a.jsx(ot,{path:"/",element:a.jsx(O1,{})}),a.jsx(ot,{path:"/login",element:a.jsx(R1,{})}),a.jsx(ot,{path:"/register",element:a.jsx(D1,{})}),a.jsx(ot,{path:"/reset-password",element:a.jsx($1,{})}),a.jsx(ot,{path:"/invite",element:a.jsx(M1,{})}),a.jsx(ot,{path:"/about",element:a.jsx(d6,{})}),a.jsx(ot,{path:"/fonctionnalites",element:a.jsx(h6,{})}),a.jsx(ot,{path:"/tarifs",element:a.jsx(p6,{})}),a.jsx(ot,{path:"/support",element:a.jsx(g6,{})}),a.jsx(ot,{path:"/confidentialite",element:a.jsx(x6,{})}),a.jsx(ot,{path:"/cgu",element:a.jsx(b6,{})}),a.jsx(ot,{path:"/mentions-legales",element:a.jsx(v6,{})}),a.jsx(ot,{path:"/guide-demarrage",element:a.jsx(C1,{})}),a.jsx(ot,{path:"/guide-ajouter-enfant",element:a.jsx(E1,{})}),a.jsx(ot,{path:"/guide-planning",element:a.jsx(T1,{})}),a.jsx(ot,{path:"/guide-export-rapport",element:a.jsx(k1,{})}),a.jsx(ot,{path:"/guide-securite",element:a.jsx(A1,{})}),a.jsxs(ot,{element:a.jsx(pN,{}),children:[a.jsx(ot,{path:"/dashboard",element:a.jsx(U1,{})}),a.jsx(ot,{path:"/children",element:a.jsx(V1,{})}),a.jsx(ot,{path:"/nannies",element:a.jsx(K1,{})}),a.jsx(ot,{path:"/mon-planning",element:a.jsx(gN,{})}),a.jsx(ot,{path:"/feed",element:a.jsx(i6,{})}),a.jsx(ot,{path:"/activites",element:a.jsx(dE,{})}),a.jsx(ot,{path:"/parent",element:a.jsx(AE,{})}),a.jsx(ot,{path:"/parent/child/:childId/schedule",element:a.jsx(LE,{})}),a.jsx(ot,{path:"/parent/child/:childId/reports",element:a.jsx(PE,{})}),a.jsx(ot,{path:"/reports",element:a.jsx(xE,{})}),a.jsx(ot,{path:"/notifications",element:a.jsx(yE,{})}),a.jsx(ot,{path:"/payment-history",element:a.jsx(kE,{})}),a.jsx(ot,{path:"/settings",element:a.jsx(EE,{})}),a.jsx(ot,{path:"/admin/reviews",element:a.jsx(u6,{})}),a.jsx(ot,{path:"/admin/emaillogs",element:a.jsx(b.Suspense,{fallback:a.jsx("div",{children:"Loading..."}),children:a.jsx(t,{})})}),a.jsx(ot,{path:"/assistant",element:a.jsx(b.Suspense,{fallback:a.jsx("div",{children:"Loading..."}),children:a.jsx(s,{})})})]})]})})}const w6=(()=>{}),ty=b.createContext({messages:[],pushMessage:()=>{},setMessages:w6});function j6({children:s}){const{user:t}=fn(),[r,l]=b.useState([{id:"m0",role:"assistant",text:"👋 Bonjour ! Je suis votre assistant spécialisé dans la garde d'enfants. Posez votre question et je vous répondrai de manière claire et bienveillante."}]),o=xt.useMemo(()=>`assistant_convo_${t?.id??"anon"}`,[t?.id]);b.useEffect(()=>{try{const d=localStorage.getItem(o);if(!d)return;const p=JSON.parse(d);Array.isArray(p)&&p.every(f=>f&&typeof f.text=="string"&&(f.role==="assistant"||f.role==="user"))&&l(p)}catch{}},[o]),b.useEffect(()=>{try{localStorage.setItem(o,JSON.stringify(r))}catch{}},[r,o]),b.useEffect(()=>{if(!t){try{localStorage.removeItem(o)}catch{}l([{id:"m0",role:"assistant",text:"👋 Bonjour ! Je suis votre assistant spécialisé dans la garde d'enfants. Posez votre question et je vous répondrai de manière claire et bienveillante."}])}},[t,o]);const u=d=>l(p=>[...p,d]);return a.jsx(ty.Provider,{value:{messages:r,pushMessage:u,setMessages:l},children:s})}function I6(){return b.useContext(ty)}function N6(){const[s,t]=b.useState(null);return b.useEffect(()=>{fe("/api/user/me",{headers:{"x-skip-refresh":"1"}}).then(r=>r&&r.ok?r.json():null).then(async r=>{t(r);try{if(r&&typeof window<"u"&&"serviceWorker"in navigator){const l=await navigator.serviceWorker.getRegistration();if(l){const o=await l.pushManager.getSubscription();if(o)try{const u=await fetch("/api/push-subscriptions/me",{credentials:"include"});if(u&&u.ok){const d=await u.json();(Array.isArray(d.subscriptions)?d.subscriptions:[]).some(m=>m&&m.subscription&&m.subscription.endpoint===o.endpoint)||await fetch("/api/push-subscriptions/associate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:o})}).catch(()=>null)}else await fetch("/api/push-subscriptions/associate",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:o})}).catch(()=>null)}catch{}}}}catch{}}).catch(()=>t(null))},[]),a.jsx(uv,{children:a.jsx(Rv.Provider,{value:{user:s},children:a.jsx(j6,{children:a.jsx(y6,{})})})})}function S6(){const[s,t]=b.useState("idle"),[r,l]=b.useState(!1);b.useEffect(()=>{const u=typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams;u.get("checkout")&&u.get("checkout")==="success"&&s==="idle"&&(async()=>{l(!0),t("loading");try{const d=u.get("session_id");if(d)try{await fetch("/subscriptions/complete-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:d})})}catch(p){console.warn("complete-checkout-session failed",p)}t("ok")}catch(d){console.error("Error during checkout finalization",d),t("error")}})()},[s]);function o(){l(!1);try{const u=new URL(window.location.href);u.searchParams.delete("checkout"),u.searchParams.delete("session_id"),window.history.replaceState({},document.title,u.pathname+u.search)}catch{}}return r?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-lg max-w-md w-full p-6 mx-4",children:[s==="loading"&&a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-[#0b5566]"}),a.jsx("h3",{className:"text-lg font-bold text-[#0b5566]",children:"Finalisation en cours"}),a.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Nous finalisons votre abonnement. Patientez un instant."})]}),s==="ok"&&a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-2xl",children:"✓"}),a.jsx("h3",{className:"text-lg font-bold text-[#0b5566]",children:"Abonnement confirmé"}),a.jsx("p",{className:"text-sm text-gray-700 text-center",children:"Merci — votre abonnement a bien été pris en compte."}),a.jsx("div",{className:"w-full mt-2",children:a.jsx("button",{onClick:o,className:"w-full py-2 border rounded",children:"Fermer"})})]}),s==="error"&&a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-2xl",children:"✕"}),a.jsx("h3",{className:"text-lg font-bold text-red-600",children:"Erreur"}),a.jsx("p",{className:"text-sm text-gray-700 text-center",children:"Un problème est survenu lors de la finalisation de votre abonnement. Les webhooks peuvent encore arriver."}),a.jsx("div",{className:"w-full mt-2",children:a.jsx("button",{onClick:o,className:"w-full py-2 border rounded",children:"Fermer"})})]})]})]}):null}function _6(){const[s,t]=b.useState(!1),[r,l]=b.useState("");return b.useEffect(()=>{function o(u){const d=u?.detail||{};l(d.message||"Cette action nécessite un abonnement."),t(!0)}return window.addEventListener("subscription:required",o),()=>window.removeEventListener("subscription:required",o)},[]),s?a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 px-4",children:a.jsxs("div",{role:"dialog","aria-modal":"true",className:"bg-white rounded-lg p-6 max-w-md w-full shadow-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-[#0b5566] mb-2",children:"Abonnement requis"}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:r}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{window.location.href="/pricing"},className:"px-4 py-2 bg-[#0b5566] text-white rounded-md",children:"Aller aux offres"}),a.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 border rounded-md",children:"Fermer"})]})]})}):null}function C6(){const[s,t]=b.useState(()=>{try{let r=null;try{r=localStorage.getItem("cookie_consent")}catch{r=null}if(!r)try{const l=document.cookie.match(/(?:^|; )cookie_consent=([^;]+)/);l&&l[1]&&(r=decodeURIComponent(l[1]))}catch{}return r?r==="all"?"all":"essential":"unknown"}catch(r){return console.warn("cookie consent read failed",r),"unknown"}});return b.useEffect(()=>{if(s!=="unknown"){try{localStorage.setItem("cookie_consent",s)}catch(r){console.warn("cookie consent write failed",r)}try{document.cookie=`cookie_consent=${encodeURIComponent(s)};path=/;max-age=31536000`}catch{}if(typeof window.gtag=="function")if(s==="all"){try{window.gtag("consent","update",{ad_storage:"granted",analytics_storage:"granted"})}catch(r){console.warn("gtag consent update failed",r)}try{window.gtag("event","consent_granted",{method:"banner"})}catch{}}else try{window.gtag("consent","update",{ad_storage:"denied",analytics_storage:"denied"})}catch(r){console.warn("gtag consent update failed",r)}}},[s]),s!=="unknown"?null:a.jsx("div",{className:"fixed left-0 right-0 bottom-6 z-50 flex justify-center px-4",children:a.jsxs("div",{className:"bg-white shadow-xl rounded-2xl max-w-4xl w-full p-4 md:p-6 flex flex-col md:flex-row items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#e6f7fb] flex items-center justify-center",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[a.jsx("path",{d:"M12 2C7.03 2 3 6.03 3 11c0 4.97 4.03 9 9 9s9-4.03 9-9c0-4.97-4.03-9-9-9z",fill:"#0b5566",opacity:"0.08"}),a.jsx("path",{d:"M12 6a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z",fill:"#0b5566"})]})}),a.jsxs("div",{className:"flex-1 text-center md:text-left",children:[a.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:"Nous utilisons des cookies"}),a.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Ce site utilise des cookies essentiels nécessaires au fonctionnement, ainsi que des cookies optionnels pour améliorer l'expérience et les analyses. Choisissez vos préférences."})]}),a.jsxs("div",{className:"w-full md:w-auto flex flex-col md:flex-row gap-3 md:gap-4 items-stretch",children:[a.jsx("button",{className:"flex-1 md:flex-none md:w-48 bg-[#0b5566] hover:bg-[#094a52] text-white px-4 py-2 rounded-lg font-semibold transition",onClick:()=>t("all"),children:"Tout autoriser"}),a.jsx("button",{className:"flex-1 md:flex-none md:w-64 bg-white border border-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-50 transition",onClick:()=>t("essential"),children:"Accepter uniquement les cookies obligatoires"})]})]})})}const D={fr:{"nav.assistant":"Assistant IA","assistant.title":"Assistant Frimousse","assistant.header.title":"Assistant Frimousse","assistant.header.subtitle":"· Conseils et aide pour la petite enfance","assistant.intro.title":"Assistant","assistant.intro.description":"Je suis votre assistant pour la petite enfance. Je peux vous aider avec :","assistant.option.nutrition":"Conseils nutrition","assistant.option.nutrition.example":"Que cuisiner pour mon enfant ?","assistant.option.education":"Conseils pédagogiques","assistant.option.education.example":"Développement et apprentissages adaptés à l'âge","assistant.option.activities":"Activités suggérées","assistant.option.activities.example":"Jeux et exercices selon l'âge","assistant.user.fallback":"Vous","assistant.input.aria":"Votre question","assistant.input.placeholder":"Posez votre question à l'assistant...","assistant.loading":"Chargement...","assistant.send.button":"Envoyer","common.none":"—","payments.history.title":"Historique des paiements","payments.history.empty":"Aucun enregistrement pour cette période.","payments.total":"Total","payments.days":"jours","payments.export_csv":"Excel","payments.print":"PDF","reports.title":"Rapports","reports.new":"Nouveau Rapport","reports.create":"Créer","reports.save":"Sauvegarder","reports.delete":"Supprimer","reports.cancel":"Annuler","reports.filter.last30":"30 derniers jours","reports.filter.allTypes":"Tous les types","reports.filter.allPriorities":"Toutes priorités","reports.empty":"Aucun rapport disponible","reports.card.total":"Total Rapports","reports.card.week":"Cette Semaine","reports.modal.title.new":"Nouveau rapport","reports.modal.title.edit":"Modifier le rapport","reports.field.title":"Titre","reports.field.type":"Type","reports.field.priority":"Priorité","reports.field.child":"Sélectionner l'enfant","reports.field.nanny":"Sélectionner la nounou","reports.field.role":"Sélectionner le rôle","reports.field.group":"Sélectionner le groupe","reports.field.description":"Description","reports.field.duration":"Durée","reports.field.childrenInvolved":"Nb enfants impliqués","reports.card.duration":"Durée","reports.card.childrenInvolved":"{n} enfants impliqués","label.age":"Âge","reports.field.summary":"Résumé du rapport","reports.summary.incident":"Résumé du Rapport","reports.summary.comportement":"Observation Comportementale","reports.summary.soin":"Observation de Soin","reports.search.placeholder":"Rechercher par nom d'enfant","reports.priority.haute":"PRIORITÉ HAUTE","reports.priority.moyenne":"MOYENNE","reports.priority.basse":"BASSE","reports.type.incident":"INCIDENT","reports.type.comportement":"COMPORTEMENT","reports.type.soin":"SOINS","children.group.G1":"Groupe 1 (0-1 ans)","children.group.G2":"Groupe 2 (1-2 ans)","children.group.G3":"Groupe 3 (2-3 ans)","children.group.G4":"Groupe 4 (3-4 ans)","children.group.G5":"Groupe 5 (4-5 ans)","children.group.G6":"Groupe 6 (5-6 ans)","nanny.role.senior":"Nounou Senior","nanny.role.manager":"Responsable","nanny.role.trainee":"Stagiaire","nanny.role.substitute":"Remplaçante","nanny.role.other":"Autre","global.add":"Ajouter","global.save":"Enregistrer","global.cancel":"Annuler","global.delete":"Supprimer","page.dashboard":"Tableau de bord","dashboard.welcome":"Bienvenue ! Voici ce qui se passe aujourd'hui.","dashboard.children_registered":"Enfants inscrits","dashboard.since_last_month":"depuis le mois dernier","dashboard.present_today":"Présents aujourd'hui","dashboard.presence_rate":"Taux de présence","dashboard.active_caregivers":"Intervenants actifs","dashboard.no_change":"— Pas de changement","dashboard.weekly_average":"Moyenne hebdomadaire","dashboard.since_last_week":"depuis la semaine dernière","page.feed":"Fil d'actualité","page.children":"Enfants","page.children.title":"Gestion des enfants","page.children.description":"Gérez les profils, informations médicales et contacts d'urgence.","children.add":"Ajouter un enfant","children.prescription.noneTitle":"Aucune ordonnance","children.prescription.noneMessage":"Il n'y a pas d'ordonnance pour {name}.","children.thisChild":"cet enfant","children.search_placeholder":"Rechercher par nom, parent...","children.group.all":"Tous les groupes","children.sort.name":"Nom A-Z","children.sort.age":"Âge croissant","children.total":"Total","children.present":"Présents","children.form.name":"Nom","children.form.age":"Âge","children.form.birthDate":"Date de naissance","children.form.sexe.m":"Garçon","children.form.sexe.f":"Fille","children.form.group_placeholder":"Groupe","children.form.parent_placeholder":"Nom du parent (optionnel)","children.form.parentPhone_placeholder":"Téléphone parent (optionnel)","children.form.parentEmail_placeholder":"Email parent (optionnel)","children.nannies.label":"Nounous assignées (sélection multiple)","children.nannies.none":"Aucune nounou disponible","children.form.allergies_placeholder":"Allergies (optionnel)","children.form.edit":"Modifier","children.form.added_success":"L'enfant a bien été ajouté !","children.loading":"Chargement...","children.presence.present_today":"Présent aujourd'hui","children.presence.absent_today":"Absent aujourd'hui","children.new_badge":"Nouveau","children.assigned":"Assigné: {names}","children.not_assigned":"Non assigné","children.birthDate.undefined":"Non définie","children.allergies.label":"Allergies :","children.allergies.none":"Aucune","children.parent.label":"Parent :","children.call_parent_title":"Appeler le parent","children.email_parent_title":"Envoyer un mail au parent","children.cotisation.pay":"Payer","children.cotisation.label":"Cotisation annuelle","children.cotisation.this_month":"À payer ce mois-ci","children.cotisation.up_to_date":"Cotisation à jour","children.cotisation.days_remaining":"{days} jours restants","children.cotisation.renew":"Cotisation à renouveler","children.billing.calculating":"calcul...","children.prescription.view_title":"Ordonnance de {name}","children.delete.confirm_title":"Confirmer la suppression","children.delete.confirm_body":"Voulez-vous vraiment supprimer cet enfant ? Cette action est irréversible.","children.prescription.view_button":"Voir ordonnance","children.action.edit":"Éditer","children.action.delete":"Supprimer","children.deleting":"Suppression...","children.photo_consent.yes":"Autorisation photos: Oui","children.photo_consent.no":"Autorisation photos: Non","children.photo_consent.unknown":"Autorisation: —","common.ok":"OK","common.at":"à","parent.form.firstName":"Prénom","parent.form.lastName":"Nom","parent.form.email":"Email","parent.form.phone":"Téléphone","parent.form.address":"Adresse","parent.form.postalCode":"Code postal","parent.form.city":"Ville","parent.form.region":"Région","parent.form.country":"Pays","parent.form.password.placeholder":"Mot de passe (laisser vide pour envoyer une invitation)","parent.form.confirmPassword.placeholder":"Confirmer le mot de passe","parent.form.submit.add":"Ajouter","parent.form.submit.save":"Enregistrer","parent.form.cancel":"Annuler","parent.form.error.required":"Les champs Prénom, Nom et Email sont requis","parent.form.error.password_mismatch":"Les mots de passe ne correspondent pas","parent.form.success.created_with_password":"Parent créé avec mot de passe.","parent.form.success.created_invited":"Parent créé — une invitation a été envoyée.","parent.form.success.updated":"Parent modifié.","parent.reset.confirm_title":"Confirmer la réinitialisation du mot de passe","parent.reset.confirm_body":"Vous allez réinitialiser le mot de passe de ce parent. Voulez-vous continuer ?","parent.reset.cancel":"Annuler","parent.reset.confirm":"Confirmer","parent.delete.confirm_body":"Voulez-vous vraiment supprimer ce parent ? Cette action est irréversible.","parent.children.count":"{n} enfant(s)","parent.prescription.upload":"Téléverser","parent.prescription.delete":"Supprimer","parent.prescription.upload_failed":"Échec de l'upload de l'ordonnance.","parent.prescription.delete_failed":"Échec de la suppression de l'ordonnance.","parent.prescription.fetch_error":"Erreur lors de la récupération de l'ordonnance","parent.cotisation.this_month":"À payer ce mois","parent.cotisation.annual_total":"Cotisation annuelle totale","common.yes":"Oui","common.no":"Non","common.confirm":"Confirmer","common.close":"Fermer","common.search":"Rechercher","common.all":"Tous","page.parent":"Parents","page.parent.description":"Gérez les comptes parents, contacts et enfants associés.","parent.add":"Ajouter un parent","page.nannies":"Nounous","page.nannies.description":"Gérez les profils, plannings, qualifications et affectations des intervenants.","nanny.add":"Ajouter une nounou","nav.dashboard":"Accueil","nav.feed":"Fil d'actualité","nav.notifications":"Notifications","nav.children":"Enfants","nav.children_my":"Mes enfants","nav.parents":"Parents","nav.nannies":"Nounous","nav.activities":"Planning d'activités","nav.reports":"Rapports","nav.payments":"Historique paiements","nav.settings":"Paramètres","page.activities":"Activités","page.reports":"Rapports","page.reports.description":"Consultez tous les signalements des nounous concernant les incidents, comportements et observations quotidiennes des enfants.","page.payments":"Paiements","page.payments.description":"Consultez les totaux mensuels calculés pour chaque parent.","payments.filter.all_parents":"Tous les parents","payments.download_invoice":"Facture","payments.card.month_revenue":"Revenus du Mois","payments.card.families_active":"Familles Actives","payments.card.unpaid":"Paiements en attente","payments.status.paid":"Payé","payments.status.unpaid":"Non payé","payments.actions.mark_paid":"Marquer payé","payments.actions.mark_unpaid":"Marquer non payé","payments.detail.header":"Détail par enfant - {month}","payments.family.total_label":"Total Famille","payments.family.summary":"{n} enfant(s) • {days} jours total","payments.errors.select_parent":"Sélectionnez d'abord un parent pour générer la facture.","payments.errors.no_record_parent":"Aucun enregistrement pour ce parent ce mois.","payments.errors.invoice_not_ready":"Le mois en cours n'est pas fini : vous ne pouvez pas télécharger cette facture.","payments.errors.invoice_download":"Erreur lors du téléchargement de la facture","payments.no_child_this_month":"Aucun enfant présent ce mois.","feed.write_comment":"Écrire un commentaire...","feed.send":"Envoyer","feed.center_news":"Actualités de votre centre","feed.composer_placeholder":"Que voulez-vous partager aujourd'hui ?","feed.photo":"Photo","feed.gallery":"Galerie","feed.no_images":"Aucune image sélectionnée","feed.images":"image(s)","feed.identify":"Identifier","feed.select_children":"Sélectionner des enfants","feed.no_children_available":"Aucun enfant disponible","feed.no_child":"Pas d'enfant","feed.tag_children":"Taguer des enfants","feed.no_authorization":"Pas d'autorisation","settings.title":"Paramètres","settings.email.title":"Notifications par email","settings.email.desc":"Recevoir un email pour chaque nouveau rapport ou affectation","settings.push.title":"Notifications push","settings.push.desc":"Recevoir des notifications sur votre navigateur (rappels et annonces)","settings.language.title":"Langue","settings.language.desc":"Choisissez la langue de l'interface","settings.account.title":"Gestion du compte","settings.account.delete":"Supprimer le compte","settings.profile.edit":"Modifier le profil","settings.save":"Enregistrer","settings.cancel":"Annuler","settings.logout":"Se déconnecter","settings.change_password":"Changer le mot de passe","settings.delete_confirm.title":"Confirmer la suppression du compte","settings.delete_confirm.body":"Voulez-vous vraiment supprimer votre compte ? Cette action est irréversible et toutes vos données seront perdues.","settings.delete_confirm.confirm":"Supprimer","settings.saving":"Enregistrement...","settings.delete_error":"Erreur lors de la suppression du compte","availability.available":"Disponible","availability.on_leave":"En congé","availability.sick":"Maladie","settings.password.all_required":"Tous les champs de mot de passe sont requis","settings.password.mismatch":"Les mots de passe ne correspondent pas","label.firstName":"Prénom","label.lastName":"Nom","label.email":"Email","label.phone":"Téléphone","label.name":"Nom","label.contact":"Contact","label.experience":"Expérience (années)","label.availability":"Disponibilité","label.birthDate":"Date de naissance","label.oldPassword":"Ancien mot de passe","label.newPassword":"Nouveau mot de passe","label.confirmPassword":"Confirmer le nouveau mot de passe",loading:"Chargement...",no_profile:"Aucune donnée de profil disponible"},en:{"nav.assistant":"Assistant IA","common.none":"—","payments.history.title":"Payment history","payments.history.empty":"No records for this period.","payments.total":"Total","payments.days":"days","payments.export_csv":"Excel","payments.print":"PDF","payments.filter.all_parents":"All parents","payments.download_invoice":"Invoice","payments.card.month_revenue":"Month revenue","payments.card.families_active":"Active families","payments.card.unpaid":"Unpaid payments","payments.status.paid":"Paid","payments.status.unpaid":"Unpaid","payments.actions.mark_paid":"Mark paid","payments.actions.mark_unpaid":"Mark unpaid","payments.detail.header":"Detail by child - {month}","payments.family.total_label":"Family total","payments.family.summary":"{n} child(ren) • {days} total days","payments.errors.select_parent":"Please select a parent first to generate the invoice.","payments.errors.no_record_parent":"No record for this parent this month.","payments.errors.invoice_not_ready":"The current month is not finished: you cannot download this invoice yet.","payments.errors.invoice_download":"Failed to download the invoice","payments.no_child_this_month":"No child present this month.","reports.title":"Reports","reports.new":"New Report","reports.create":"Create","reports.save":"Save","reports.delete":"Delete","reports.cancel":"Cancel","reports.filter.last30":"Last 30 days","reports.filter.allTypes":"All types","reports.filter.allPriorities":"All priorities","reports.empty":"No reports available","reports.card.total":"Total Reports","reports.card.week":"This Week","reports.modal.title.new":"New report","reports.modal.title.edit":"Edit report","reports.field.title":"Title","reports.field.type":"Type","reports.field.priority":"Priority","reports.field.child":"Select child","reports.field.nanny":"Select nanny","reports.field.role":"Select role","reports.field.group":"Select group","reports.field.description":"Description","reports.field.duration":"Duration","reports.field.childrenInvolved":"Children involved","reports.card.duration":"Duration","reports.card.childrenInvolved":"{n} children involved","label.age":"Age","reports.field.summary":"Report summary","reports.summary.incident":"Report summary","reports.summary.comportement":"Behavior observation","reports.summary.soin":"Care observation","reports.search.placeholder":"Search by child name","reports.priority.haute":"HIGH PRIORITY","reports.priority.moyenne":"MEDIUM","reports.priority.basse":"LOW","reports.type.incident":"INCIDENT","reports.type.comportement":"BEHAVIOR","reports.type.soin":"CARE","children.group.G1":"Group 1 (0-1 yrs)","children.group.G2":"Group 2 (1-2 yrs)","children.group.G3":"Group 3 (2-3 yrs)","children.group.G4":"Group 4 (3-4 yrs)","children.group.G5":"Group 5 (4-5 yrs)","children.group.G6":"Group 6 (5-6 yrs)","nanny.role.senior":"Senior Nanny","nanny.role.manager":"Manager","nanny.role.trainee":"Trainee","nanny.role.substitute":"Substitute","nanny.role.other":"Other","global.add":"Add","global.save":"Save","global.cancel":"Cancel","global.delete":"Delete","page.dashboard":"Dashboard","dashboard.welcome":"Welcome! Here's what's happening today.","dashboard.children_registered":"Children registered","dashboard.since_last_month":"since last month","dashboard.present_today":"Present today","dashboard.presence_rate":"Presence rate","dashboard.active_caregivers":"Active caregivers","dashboard.no_change":"— No change","dashboard.weekly_average":"Weekly average","dashboard.since_last_week":"since last week","page.feed":"Feed","page.children":"Children","page.children.title":"Children management","page.children.description":"Manage profiles, medical information and emergency contacts.","children.add":"Add a child","children.prescription.noneTitle":"No prescription","children.prescription.noneMessage":"There is no prescription for {name}.","children.thisChild":"this child","children.search_placeholder":"Search by name, parent...","children.group.all":"All groups","children.sort.name":"Name A-Z","children.sort.age":"Age ascending","children.total":"Total","children.present":"Present","children.form.name":"Name","children.form.age":"Age","children.form.birthDate":"Birth date","children.form.sexe.m":"Boy","children.form.sexe.f":"Girl","children.form.group_placeholder":"Group","children.form.parent_placeholder":"Parent name (optional)","children.form.parentPhone_placeholder":"Parent phone (optional)","children.form.parentEmail_placeholder":"Parent email (optional)","children.nannies.label":"Assigned nannies (multi-select)","children.nannies.none":"No nanny available","children.form.allergies_placeholder":"Allergies (optional)","children.form.edit":"Edit","children.form.added_success":"Child was added successfully!","children.loading":"Loading...","children.presence.present_today":"Present today","children.presence.absent_today":"Absent today","children.new_badge":"New","children.assigned":"Assigned: {names}","children.not_assigned":"Not assigned","children.cotisation.pay":"Pay","children.cotisation.up_to_date":"Cotisation up to date","children.cotisation.days_remaining":"{days} days remaining","children.cotisation.renew":"Cotisation needs renewal","children.billing.calculating":"calculating...","children.prescription.view_title":"Prescription for {name}","children.delete.confirm_title":"Confirm deletion","children.delete.confirm_body":"Are you sure you want to delete this child? This action is irreversible.","children.cotisation.label":"Annual fee","children.cotisation.this_month":"To pay this month","children.prescription.view_button":"View prescription","children.action.edit":"Edit","children.action.delete":"Delete","children.deleting":"Deleting...","common.ok":"OK","common.at":"at","common.yes":"Yes","common.no":"No","common.confirm":"Confirm","common.close":"Close","common.search":"Search","common.all":"All","page.parent":"Parents","page.parent.description":"Manage parent accounts, contacts and associated children.","parent.add":"Add a parent","page.nannies":"Nannies","page.nannies.description":"Manage profiles, schedules, qualifications and assignments of staff.","nanny.add":"Add a nanny","nav.dashboard":"Dashboard","nav.feed":"Feed","nav.notifications":"Notifications","nav.children":"Children","nav.children_my":"My children","nav.parents":"Parents","nav.nannies":"Nannies","nav.activities":"Activities","nav.reports":"Reports","nav.payments":"Payments history","nav.settings":"Settings","page.activities":"Activities","page.reports":"Reports","page.reports.description":"View all nanny reports about incidents, behaviors and daily observations of children.","page.payments":"Payments","page.payments.description":"View monthly totals calculated for each parent.","feed.write_comment":"Write a comment...","feed.send":"Send","feed.center_news":"Center news","feed.composer_placeholder":"What's on your mind today?","feed.photo":"Photo","feed.gallery":"Gallery","feed.no_images":"No image selected","feed.images":"image(s)","feed.identify":"Identify","feed.select_children":"Select children","feed.no_children_available":"No children available","feed.no_child":"No child","feed.tag_children":"Tag children","feed.no_authorization":"No authorization","settings.title":"Settings","settings.email.title":"Email notifications","settings.email.desc":"Receive an email for each new report or assignment","settings.push.title":"Push notifications","settings.push.desc":"Receive notifications in your browser (reminders and announcements)","settings.language.title":"Language","settings.language.desc":"Choose the interface language","settings.account.title":"Account management","settings.account.delete":"Delete account","settings.profile.edit":"Edit profile","settings.save":"Save","settings.cancel":"Cancel","settings.logout":"Log out","settings.change_password":"Change password","settings.delete_confirm.title":"Confirm account deletion","settings.delete_confirm.body":"Are you sure you want to delete your account? This action is irreversible and all your data will be lost.","settings.delete_confirm.confirm":"Delete","settings.saving":"Saving...","availability.available":"Available","availability.on_leave":"On leave","availability.sick":"Sick","settings.password.all_required":"All password fields are required","settings.password.mismatch":"Passwords do not match","label.firstName":"First name","label.lastName":"Last name","label.email":"Email","label.phone":"Phone","label.name":"Name","label.contact":"Contact","label.experience":"Experience (years)","label.availability":"Availability","label.birthDate":"Birth date","label.oldPassword":"Old password","label.newPassword":"New password","label.confirmPassword":"Confirm new password",loading:"Loading...",no_profile:"No profile data available"}};D.fr["admin.emaillogs.title"]="Journal des emails";D.fr["admin.emaillogs.description"]="Historique des envois d'emails et gestion des relances";D.fr["admin.emaillogs.loading"]="Chargement...";D.fr["admin.emaillogs.search_placeholder"]="Rechercher par sujet, destinataire...";D.fr["admin.emaillogs.export"]="Exporter";D.fr["admin.emaillogs.all_recipients"]="Tous les destinataires";D.fr["admin.emaillogs.date_sent"]="Date d'envoi";D.fr["admin.emaillogs.recipients"]="Destinataires";D.fr["admin.emaillogs.send_error"]="Erreur d'envoi";D.fr["admin.emaillogs.view_invoice"]="Voir la facture";D.fr["admin.emaillogs.download"]="Télécharger";D.fr["admin.emaillogs.export_failed"]="Impossible d'exporter les logs.";D.fr["admin.emaillogs.open_invoice_failed"]="Impossible d'ouvrir la facture.";D.fr["admin.emaillogs.download_invoice_failed"]="Impossible de télécharger la facture.";D.fr["admin.emaillogs.last_attempt"]="Dernière tentative {when}";D.fr["emaillogs.status.sent"]="Envoyé";D.fr["emaillogs.status.pending"]="En cours";D.fr["emaillogs.status.error"]="Erreur";D.fr["emaillogs.table.subject"]="Sujet";D.fr["emaillogs.table.date"]="Date";D.fr["emaillogs.table.recipients"]="Destinataires";D.fr["emaillogs.table.invoice_number"]="N° Facture";D.fr["emaillogs.table.status"]="Statut";D.fr["emaillogs.table.error"]="Erreur";D.fr["emaillogs.table.actions"]="Actions";D.fr["emaillogs.pagination.prev"]="Précédent";D.fr["emaillogs.pagination.next"]="Suivant";D.fr["admin.emaillogs.resend"]="Renvoyer";D.fr["menu.open"]="Ouvrir le menu";D.fr["menu.close"]="Fermer le menu";D.fr["nav.reviews"]="Avis";D.fr["admin.emaillogs.displaying"]="Affichage de {from} à {to} sur {total} résultats";D.fr["admin.emaillogs.choose_month"]="Choisir un mois";D.fr["admin.emaillogs.resend_failed"]="Erreur lors du renvoi : {msg}";D.en["admin.emaillogs.title"]="Email log";D.en["admin.emaillogs.description"]="History of sent emails and resend management";D.en["admin.emaillogs.loading"]="Loading...";D.en["admin.emaillogs.search_placeholder"]="Search by subject, recipient...";D.en["admin.emaillogs.export"]="Export";D.en["admin.emaillogs.all_recipients"]="All recipients";D.en["admin.emaillogs.date_sent"]="Date sent";D.en["admin.emaillogs.recipients"]="Recipients";D.en["admin.emaillogs.send_error"]="Send error";D.en["admin.emaillogs.view_invoice"]="View invoice";D.en["admin.emaillogs.download"]="Download";D.en["admin.emaillogs.export_failed"]="Unable to export logs.";D.en["admin.emaillogs.open_invoice_failed"]="Unable to open invoice.";D.en["admin.emaillogs.download_invoice_failed"]="Unable to download invoice.";D.en["admin.emaillogs.last_attempt"]="Last attempt {when}";D.en["emaillogs.status.sent"]="Sent";D.en["emaillogs.status.pending"]="Pending";D.en["emaillogs.status.error"]="Error";D.en["emaillogs.table.subject"]="Subject";D.en["emaillogs.table.date"]="Date";D.en["emaillogs.table.recipients"]="Recipients";D.en["emaillogs.table.invoice_number"]="Invoice #";D.en["emaillogs.table.status"]="Status";D.en["emaillogs.table.error"]="Error";D.en["emaillogs.table.actions"]="Actions";D.en["emaillogs.pagination.prev"]="Previous";D.en["emaillogs.pagination.next"]="Next";D.en["admin.emaillogs.resend"]="Resend";D.en["menu.open"]="Open menu";D.en["menu.close"]="Close menu";D.en["nav.reviews"]="Reviews";D.en["admin.emaillogs.displaying"]="Showing {from} to {to} of {total} results";D.en["admin.emaillogs.choose_month"]="Choose a month";D.en["admin.emaillogs.resend_failed"]="Failed to resend: {msg}";D.fr["stats.total"]="Total";D.fr["stats.active"]="Actifs";D.fr["stats.new"]="Nouveaux";D.en["stats.total"]="Total";D.en["stats.active"]="Active";D.en["stats.new"]="New";D.fr["page.nannies"]="Nounous";D.fr["page.nannies.description"]="Gérez les profils, plannings, qualifications et affectations des intervenants.";D.fr["nanny.add"]="Ajouter une nounou";D.fr["nanny.available_label"]="Disponibles";D.fr["nanny.on_leave_label"]="En congé";D.fr["nanny.search_placeholder"]="Rechercher par nom...";D.fr["nanny.filter.any"]="Toute disponibilité";D.fr["nanny.filter.disponible"]="Disponible";D.fr["nanny.filter.en_conge"]="En congé";D.fr["nanny.filter.experience_any"]="Toute expérience";D.fr["nanny.filter.experience_junior"]="Junior (-3 ans)";D.fr["nanny.filter.experience_senior"]="Senior (3+ ans)";D.fr["nanny.form.name"]="Nom";D.fr["nanny.form.experience"]="Expérience (années)";D.fr["nanny.form.birthDate"]="Date de naissance";D.fr["nanny.form.specializations"]="Spécialisations (séparées par virgule)";D.fr["nanny.form.contact"]="Téléphone";D.fr["nanny.form.email"]="Email";D.fr["nanny.form.password"]="Mot de passe";D.fr["nanny.form.confirmPassword"]="Confirmer le mot de passe";D.fr["nanny.availability.available"]="Disponible";D.fr["nanny.availability.on_leave"]="En congé";D.fr["nanny.availability.sick"]="Maladie";D.fr["nanny.available_today"]="Disponibles aujourd'hui";D.en["page.nannies"]="Nannies";D.en["page.nannies.description"]="Manage profiles, schedules, qualifications and assignments of staff.";D.en["nanny.add"]="Add a nanny";D.en["nanny.available_label"]="Available";D.en["nanny.on_leave_label"]="On leave";D.en["nanny.search_placeholder"]="Search by name...";D.en["nanny.filter.any"]="Any availability";D.en["nanny.filter.disponible"]="Available";D.en["nanny.filter.en_conge"]="On leave";D.en["nanny.filter.experience_any"]="Any experience";D.en["nanny.filter.experience_junior"]="Junior (-3 years)";D.en["nanny.filter.experience_senior"]="Senior (3+ years)";D.en["nanny.form.name"]="Name";D.en["nanny.form.experience"]="Experience (years)";D.en["nanny.form.birthDate"]="Birth date";D.en["nanny.form.specializations"]="Specializations (comma separated)";D.en["nanny.form.contact"]="Phone";D.en["nanny.form.email"]="Email";D.en["nanny.form.password"]="Password";D.en["nanny.form.confirmPassword"]="Confirm password";D.en["nanny.availability.available"]="Available";D.en["nanny.availability.on_leave"]="On leave";D.en["nanny.availability.sick"]="Sick";D.en["nanny.available_today"]="Available today";D.fr["activities.title"]="Planning des activités";D.fr["activities.table.hour"]="Heure";D.fr["activities.none"]="Aucune activité";D.fr["activities.slot.morning"]="Matin";D.fr["activities.slot.afternoon"]="Après-midi";D.fr["activities.modal.nannies_label"]="Nounous";D.fr["activities.modal.no_nannies_loaded"]="Aucune nounou chargée (vérifiez l'API ou la base de données)";D.en["activities.title"]="Activities schedule";D.en["activities.table.hour"]="Hour";D.en["activities.none"]="No activities";D.en["activities.slot.morning"]="Morning";D.en["activities.slot.afternoon"]="Afternoon";D.en["activities.modal.nannies_label"]="Nannies";D.en["activities.modal.no_nannies_loaded"]="No nanny loaded (check API or DB)";D.fr["nanny.planning.of"]="Planning de {name}";D.fr["nanny.planning.button"]="Planning";D.fr["nanny.assignments_today"]="Affectations aujourd'hui";D.fr["nanny.cotisation.label"]="Cotisation mensuelle :";D.fr["nanny.cotisation.days_remaining"]="{n} jour(s) restants";D.fr["nanny.cotisation.renew"]="Cotisation à renouveler";D.fr["nanny.payment.pay"]="Payer";D.fr["nanny.payment.loading"]="Paiement...";D.fr["nanny.payment.confirming"]="Confirmation...";D.fr["nanny.cotisation.total_parents"]="Cotisation totale mensuelle des parents";D.fr["nanny.payment.success"]="Paiement enregistré";D.fr["nanny.payment.error"]="Erreur lors du paiement";D.fr["nanny.payment.confirm_title"]="Confirmer le paiement";D.fr["nanny.payment.confirm_body"]="Voulez-vous enregistrer le paiement de {amount}€ pour cette nounou ?";D.fr["nanny.birth.label"]="Né(e) le";D.fr["nanny.delete.confirm_body"]="Voulez-vous vraiment supprimer cette nounou ? Cette action est irréversible.";D.en["nanny.planning.of"]="{name} schedule";D.en["nanny.planning.button"]="Schedule";D.en["nanny.assignments_today"]="Assignments today";D.en["nanny.cotisation.label"]="Monthly fee:";D.en["nanny.cotisation.days_remaining"]="{n} day(s) remaining";D.en["nanny.cotisation.renew"]="Fee needs renewal";D.en["nanny.payment.pay"]="Pay";D.en["nanny.payment.loading"]="Paying...";D.en["nanny.payment.confirming"]="Confirming...";D.en["nanny.cotisation.total_parents"]="Total monthly contributions from parents";D.en["nanny.payment.success"]="Payment recorded";D.en["nanny.payment.error"]="Payment failed";D.en["nanny.payment.confirm_title"]="Confirm payment";D.en["nanny.payment.confirm_body"]="Do you want to record a payment of {amount}€ for this nanny?";D.en["nanny.birth.label"]="Born on";D.en["nanny.delete.confirm_body"]="Are you sure you want to delete this nanny? This action is irreversible.";D.fr["nanny.planning.of"]="Planning de {name}";D.fr["nanny.planning.button"]="Planning";D.fr["nanny.assignments_today"]="Affectations aujourd'hui";D.fr["nanny.cotisation.label"]="Cotisation mensuelle :";D.fr["nanny.payment.loading"]="Paiement...";D.fr["nanny.payment.confirming"]="Confirmation...";D.fr["nanny.payment.pay"]="Payer";D.fr["nanny.cotisation.days_remaining"]="{n} jour(s) restants";D.fr["nanny.cotisation.renew"]="Cotisation à renouveler";D.fr["nanny.delete.confirm_body"]="Voulez-vous vraiment supprimer cette nounou ? Cette action est irréversible.";D.en["nanny.planning.of"]="Planning of {name}";D.en["nanny.planning.button"]="Planning";D.en["nanny.assignments_today"]="Assignments today";D.en["nanny.cotisation.label"]="Monthly fee:";D.en["nanny.payment.loading"]="Payment...";D.en["nanny.payment.confirming"]="Confirming...";D.en["nanny.payment.pay"]="Pay";D.en["nanny.cotisation.days_remaining"]="{n} day(s) remaining";D.en["nanny.cotisation.renew"]="Fee needs renewal";D.en["nanny.delete.confirm_body"]="Are you sure you want to delete this nanny? This action is irreversible.";D.fr["page.notifications.title"]="Notifications";D.fr["page.notifications.desc"]="Historique des notifications.";D.fr["notifications.mark_all"]="Tout marquer lu";D.fr["notifications.stats.unread"]="Non lues";D.fr["notifications.stats.today"]="Aujourd'hui";D.fr["notifications.stats.week"]="Cette semaine";D.fr["notifications.loading"]="Chargement...";D.fr["notifications.none"]="Aucune notification.";D.fr["notifications.confirm_delete.title"]="Confirmer la suppression";D.fr["notifications.confirm_delete.body"]="Voulez-vous vraiment supprimer cette notification ?";D.fr["notifications.confirm_delete.cancel"]="Annuler";D.fr["notifications.confirm_delete.confirm"]="Supprimer";D.fr["notifications.deleting"]="Suppression...";D.fr["notifications.mark_read"]="Marquer comme lu";D.fr["notifications.mark_unread"]="Marquer comme non lu";D.fr["notifications.delete_all"]="Tout supprimer";D.fr["notifications.confirm_delete_all"]="Voulez-vous vraiment supprimer toutes les notifications ?";D.fr["notifications.delete_all_failed"]="Échec de la suppression de toutes les notifications";D.fr["time.now"]="à l'instant";D.fr["time.minutes"]="{n} min";D.fr["time.hours"]="{n}h";D.fr["time.days"]="{n}j";D.en["page.notifications.title"]="Notifications";D.en["page.notifications.desc"]="Notification history.";D.en["notifications.mark_all"]="Mark all read";D.en["notifications.stats.unread"]="Unread";D.en["notifications.stats.today"]="Today";D.en["notifications.stats.week"]="This week";D.en["notifications.loading"]="Loading...";D.en["notifications.none"]="No notifications.";D.en["notifications.confirm_delete.title"]="Confirm deletion";D.en["notifications.confirm_delete.body"]="Are you sure you want to delete this notification?";D.en["notifications.confirm_delete.cancel"]="Cancel";D.en["notifications.confirm_delete.confirm"]="Delete";D.en["notifications.deleting"]="Deleting...";D.en["notifications.mark_read"]="Mark as read";D.en["notifications.mark_unread"]="Mark as unread";D.en["notifications.delete_all"]="Delete all";D.en["notifications.confirm_delete_all"]="Are you sure you want to delete all notifications?";D.en["notifications.delete_all_failed"]="Failed to delete all notifications";D.en["time.now"]="now";D.en["time.minutes"]="{n} min";D.en["time.hours"]="{n}h";D.en["time.days"]="{n}d";D.fr["activities.add"]="+ Ajouter une activité";D.fr["activities.none"]="Aucune activité";D.fr["activities.slot.morning"]="Matin";D.fr["activities.slot.afternoon"]="Après-midi";D.fr["activities.modal.edit"]="Modifier une activité";D.fr["activities.modal.add"]="Ajouter une activité";D.fr["activities.modal.delete"]="Supprimer";D.en["activities.add"]="+ Add activity";D.en["activities.none"]="No activities";D.en["activities.slot.morning"]="Morning";D.en["activities.slot.afternoon"]="Afternoon";D.en["activities.modal.edit"]="Edit activity";D.en["activities.modal.add"]="Add activity";D.en["activities.modal.delete"]="Delete";D.fr["label.start"]="Début";D.fr["label.end"]="Fin";D.fr["label.activityName"]="Nom de l'activité";D.fr["label.comment"]="Commentaire";D.fr["label.comment.optional"]="Commentaire (optionnel)";D.fr["assignment.modal.title.add"]="Ajouter au planning";D.fr["assignment.modal.title.edit"]="Modifier au planning";D.fr["assignment.modal.date"]="Date";D.fr["assignment.modal.child"]="Enfant";D.fr["assignment.modal.nanny"]="Nounou";D.fr["assignment.modal.select"]="Sélectionner";D.en["label.start"]="Start";D.en["label.end"]="End";D.en["label.activityName"]="Activity name";D.en["label.comment"]="Comment";D.en["label.comment.optional"]="Comment (optional)";D.en["assignment.modal.title.add"]="Add to schedule";D.en["assignment.modal.title.edit"]="Edit schedule";D.en["assignment.modal.date"]="Date";D.en["assignment.modal.child"]="Child";D.en["assignment.modal.nanny"]="Nanny";D.en["assignment.modal.select"]="Select";D.en["children.birthDate.undefined"]="Not defined";D.en["children.allergies.label"]="Allergies :";D.en["children.allergies.none"]="None";D.en["children.parent.label"]="Parent :";D.en["children.call_parent_title"]="Call parent";D.en["children.email_parent_title"]="Email parent";D.en["children.prescription.view_button"]="View prescription";D.en["children.action.edit"]="Edit";D.en["children.action.delete"]="Delete";D.en["children.deleting"]="Deleting...";D.en["children.photo_consent.yes"]="Photo consent: Yes";D.en["children.photo_consent.no"]="Photo consent: No";D.en["children.photo_consent.unknown"]="Photo consent: —";D.en["parent.form.firstName"]="First name";D.en["parent.form.lastName"]="Last name";D.en["parent.form.email"]="Email";D.en["parent.form.phone"]="Phone";D.en["parent.form.address"]="Address";D.en["parent.form.postalCode"]="Postal code";D.en["parent.form.city"]="City";D.en["parent.form.region"]="Region";D.en["parent.form.country"]="Country";D.en["parent.form.password.placeholder"]="Password (leave empty to send an invite)";D.en["parent.form.confirmPassword.placeholder"]="Confirm password";D.en["parent.form.submit.add"]="Add";D.en["parent.form.submit.save"]="Save";D.en["parent.form.cancel"]="Cancel";D.en["parent.form.error.required"]="First name, last name and email are required";D.en["parent.form.error.password_mismatch"]="Passwords do not match";D.en["parent.form.success.created_with_password"]="Parent created with password.";D.en["parent.form.success.created_invited"]="Parent created — an invitation was sent.";D.en["parent.form.success.updated"]="Parent updated.";D.en["parent.reset.confirm_title"]="Confirm password reset";D.en["parent.reset.confirm_body"]="You will reset the parent password. Continue?";D.en["parent.reset.cancel"]="Cancel";D.en["parent.reset.confirm"]="Confirm";D.en["parent.delete.confirm_body"]="Are you sure you want to delete this parent? This action is irreversible.";D.en["parent.children.count"]="{n} child(ren)";D.en["parent.prescription.upload"]="Upload";D.en["parent.prescription.delete"]="Delete";D.en["parent.prescription.upload_failed"]="Prescription upload failed.";D.en["parent.prescription.delete_failed"]="Prescription delete failed.";D.en["parent.prescription.fetch_error"]="Error fetching prescription";D.en["parent.cotisation.this_month"]="To pay this month";D.en["parent.cotisation.annual_total"]="Annual fee total";D.fr["modal.delete.title"]="Confirmer la suppression";D.fr["modal.delete.body.generic"]="Voulez-vous vraiment supprimer cet élément ? Cette action est irréversible.";D.fr["modal.delete.confirm"]="Supprimer";D.fr["modal.cancel"]="Annuler";D.en["modal.delete.title"]="Confirm deletion";D.en["modal.delete.body.generic"]="Are you sure you want to delete this item? This action is irreversible.";D.en["modal.delete.confirm"]="Delete";D.en["modal.cancel"]="Cancel";function E6({children:s}){const[t,r]=b.useState(()=>{try{return localStorage.getItem("site_language")==="en"?"en":"fr"}catch{return"fr"}});b.useEffect(()=>{try{document.documentElement.lang=t==="en"?"en":"fr",localStorage.setItem("site_language",t),document.cookie=`site_language=${t};path=/;max-age=${3600*24*365}`;try{window.__FRIMOUSSE_I18N={locale:t,translations:D}}catch(u){}}catch{}},[t]);const l=b.useMemo(()=>(u,d)=>{const p=D[t]&&D[t][u]?D[t][u]:typeof d=="string"?d:u;if(!(D[t]&&D[t][u]))try{console.warn(`[i18n] missing translation for key "${u}" (locale=${t})`)}catch{}return!d||typeof d=="string"?p:Object.keys(d).reduce((f,m)=>f.replace(new RegExp(`\\{${m}\\}`,"g"),String(d[m]??"")),p)},[t]),o=b.useMemo(()=>({locale:t,setLocale:r,t:l}),[t,l]);return a.jsx(Dv.Provider,{value:o,children:s})}function T6({children:s}){const[t,r]=b.useState(0),[l,o]=b.useState(void 0),u=b.useRef(null),d=b.useRef(!1),p=b.useRef(0),f=b.useRef(3e4),{user:m}=fn(),x=xt.useMemo(()=>typeof window<"u"&&"BroadcastChannel"in window?new BroadcastChannel("__frimousse_notifications__"):null,[]),v=b.useCallback((_,O)=>{r(_);try{x?x.postMessage({unread:_,unreadReviews:typeof O=="number"?O:void 0}):typeof sessionStorage<"u"?(sessionStorage.setItem("__frimousse_unread__",String(_)),typeof O=="number"&&sessionStorage.setItem("__frimousse_unread_reviews__",String(O))):localStorage.setItem("__frimousse_unread__",String(_))}catch{}},[x]);b.useEffect(()=>{function _(M){const L=M,U=L&&L.data?L.data:M;if(U&&typeof U=="object"){const W=U;if("viewedAt"in W&&W.viewedAt){r(0);return}"unread"in W&&r(Number(W.unread||0)),"unreadReviews"in W&&o(Number(W.unreadReviews??0))}}function O(M){if(M.key==="__frimousse_unread__"&&M.newValue!=null){const L=Number(M.newValue||"0");r(L)}M.key==="__frimousse_viewed__"&&M.newValue!=null&&r(0)}try{if(typeof sessionStorage<"u"){const M=sessionStorage.getItem("__frimousse_unread__"),L=sessionStorage.getItem("__frimousse_unread_reviews__");M!=null&&r(Number(M||"0")),L!=null&&o(Number(L||"0"))}}catch{}function q(){try{typeof sessionStorage<"u"&&sessionStorage.setItem("__frimousse_viewed__",String(Date.now()))}catch{}r(0);try{x?x.postMessage({viewedAt:Date.now()}):typeof sessionStorage<"u"&&sessionStorage.setItem("__frimousse_viewed__",String(Date.now()))}catch{}}return x?x.addEventListener("message",_):typeof window<"u"&&window.addEventListener("storage",O),typeof window<"u"&&window.addEventListener("notifications:viewed",q),()=>{x?x.removeEventListener("message",_):typeof window<"u"&&window.removeEventListener("storage",O),typeof window<"u"&&window.removeEventListener("notifications:viewed",q)}},[x]);const w=b.useCallback(async()=>{const _="/api/notifications/unread-count";try{if(!m){v(0);return}const O=Kn(_);if(O){v(Number(O.unread)||0);return}const q=await fe("/api/notifications/unread-count",{credentials:"include"});if(q.status===429){p.current=Math.min(3,p.current+1),f.current=Math.min(3e4*Math.pow(2,p.current-1),12e4);const U=q.headers.get("Retry-After"),W=U?parseInt(U,10):NaN,Z=Number.isNaN(W)?Date.now()+f.current:Date.now()+W*1e3;hh("/api/notifications/unread-count",Z);return}if(!q.ok)return v(0);p.current=0;const M=await q.json(),L=Number(M.unread)||0;sa(_,{unread:L},15e3),v(L)}catch{v(0)}},[v,m]),N=b.useRef(null),T=b.useCallback(async()=>{try{if(!m||!m.role||!String(m.role).toLowerCase().includes("admin")&&!String(m.role).toLowerCase().includes("super")){o(void 0);return}const _="/api/reviews/pending-count",O=Kn(_);if(O){const W=Number(O.pending)||0;o(W);try{x?x.postMessage({unread:t,unreadReviews:W}):typeof sessionStorage<"u"?sessionStorage.setItem("__frimousse_unread_reviews__",String(W)):localStorage.setItem("__frimousse_unread_reviews__",String(W))}catch{}return}const q=await fe("/api/reviews/admin",{credentials:"include"});if(!q.ok)return;const M=await q.json(),U=(Array.isArray(M.reviews)?M.reviews:M).filter(W=>!W||typeof W!="object"?!1:W.approved!==!0).length;sa(_,{pending:U},15e3),o(U);try{x?x.postMessage({unread:t,unreadReviews:U}):typeof sessionStorage<"u"?sessionStorage.setItem("__frimousse_unread_reviews__",String(U)):localStorage.setItem("__frimousse_unread_reviews__",String(U))}catch{}}catch{}},[m,t,x]),S=b.useCallback(()=>{if(m&&u.current==null){try{const _=localStorage.getItem("__frimousse_notifications_leader__");if(!_)localStorage.setItem("__frimousse_notifications_leader__",String(Date.now())),d.current=!0;else{const O=Number(_);(Number.isFinite(O)?Date.now()-O:Number.MAX_SAFE_INTEGER)>6e4&&(localStorage.setItem("__frimousse_notifications_leader__",String(Date.now())),d.current=!0)}}catch{}d.current&&(w(),T(),u.current=window.setInterval(()=>{w()},f.current),N.current=window.setInterval(()=>{T()},f.current))}},[w,T,m]),j=b.useCallback(()=>{if(u.current!=null&&(clearInterval(u.current),u.current=null),N.current!=null&&(clearInterval(N.current),N.current=null),d.current){try{localStorage.removeItem("__frimousse_notifications_leader__")}catch(_){console.debug("failed to release leader",_)}d.current=!1}},[]);b.useEffect(()=>(S(),()=>j()),[S,j]);const k={unreadCount:t,unreadReviews:l,refresh:w,refreshReviews:T};return a.jsx(Iv.Provider,{value:k,children:s})}Nj.createRoot(document.getElementById("root")).render(a.jsxs(a.Fragment,{children:[a.jsx(S6,{}),a.jsx(C6,{}),a.jsx(E6,{children:a.jsxs(T6,{children:[a.jsx(N6,{}),a.jsx(_6,{})]})})]}));export{M6 as H,Ac as S,fn as a,I6 as b,Rn as c,Gn as d,D6 as e,df as f,O6 as g,fe as h,k6 as i,a as j,A6 as k,R6 as l,jl as m,b as r,Rt as u};
//# sourceMappingURL=index-B6oGosDm.js.map
