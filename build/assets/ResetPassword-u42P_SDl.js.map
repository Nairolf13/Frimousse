{"version":3,"file":"ResetPassword-u42P_SDl.js","sources":["../../pages/ResetPassword.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst API_URL = import.meta.env.VITE_API_URL;\n\nexport default function ResetPassword() {\n  const [token, setToken] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirm, setConfirm] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    const qs = new URLSearchParams(window.location.search);\n    const t = qs.get('token') || '';\n    setToken(t);\n  }, []);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setMessage('');\n    if (!token) return setMessage('Token manquant');\n    if (!password) return setMessage('Entrez un mot de passe');\n    if (password !== confirm) return setMessage('Les mots de passe ne correspondent pas');\n    try {\n      const res = await fetch(`${API_URL}/auth/reset`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ token, password }) });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) {\n        setMessage(data?.error || 'Erreur');\n        return;\n      }\n      setMessage('Mot de passe mis √† jour. Vous pouvez vous connecter.');\n      setTimeout(() => { window.location.href = '/login'; }, 1500);\n    } catch (err) {\n      console.error('reset error', err);\n      setMessage('Erreur r√©seau');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen w-screen max-w-full overflow-x-hidden flex items-center justify-center  bg-gradient-to-r from-[#f7f4d7] to-[#a9ddf2]\">\n      <form onSubmit={handleSubmit} className=\"bg-white rounded-2xl shadow-lg p-8 w-full max-w-md flex flex-col items-center\">\n        <h2 className=\"text-2xl font-bold mb-4\">R√©initialiser le mot de passe</h2>\n        {message && <div className=\"mb-4 text-center text-sm\">{message}</div>}\n        <label className=\"block w-full mb-3\">Nouveau mot de passe\n          <div className=\"relative mt-1\">\n            <input\n              type={showPassword ? 'text' : 'password'}\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(s => !s)}\n              className=\"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 hover:text-gray-700\"\n              aria-label={showPassword ? 'Masquer le mot de passe' : 'Afficher le mot de passe'}\n            >\n              {showPassword ? 'üôà' : 'üëÅÔ∏è'}\n            </button>\n          </div>\n        </label>\n        <label className=\"block w-full mb-3\">Confirmer mot de passe\n          <input type={showPassword ? 'text' : 'password'} value={confirm} onChange={e => setConfirm(e.target.value)} className=\"mt-1 w-full border border-gray-300 rounded-lg px-3 py-2\" />\n        </label>\n        <button type=\"submit\" className=\"bg-[#0b5566] text-white px-4 py-2 rounded\">Valider</button>\n      </form>\n    </div>\n  );\n}\n"],"names":["API_URL","ResetPassword","token","setToken","useState","password","setPassword","confirm","setConfirm","showPassword","setShowPassword","message","setMessage","useEffect","t","handleSubmit","e","res","data","err","jsx","jsxs","s"],"mappings":"+CAEA,MAAMA,EAAU,yBAEhB,SAAwBC,GAAgB,CACtC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrC,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAE,EACnC,CAACK,EAAcC,CAAe,EAAIN,EAAAA,SAAS,EAAK,EAChD,CAACO,EAASC,CAAU,EAAIR,EAAAA,SAAS,EAAE,EAEzCS,EAAAA,UAAU,IAAM,CAEd,MAAMC,EADK,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACxC,IAAI,OAAO,GAAK,GAC7BX,EAASW,CAAC,CACZ,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAe,MAAOC,GAAuB,CAGjD,GAFAA,EAAE,eAAA,EACFJ,EAAW,EAAE,EACT,CAACV,EAAO,OAAOU,EAAW,gBAAgB,EAC9C,GAAI,CAACP,EAAU,OAAOO,EAAW,wBAAwB,EACzD,GAAIP,IAAaE,EAAS,OAAOK,EAAW,wCAAwC,EACpF,GAAI,CACF,MAAMK,EAAM,MAAM,MAAM,GAAGjB,CAAO,cAAe,CAAE,OAAQ,OAAQ,QAAS,CAAE,eAAgB,oBAAsB,KAAM,KAAK,UAAU,CAAE,MAAAE,EAAO,SAAAG,CAAA,CAAU,EAAG,EACzJa,EAAO,MAAMD,EAAI,KAAA,EAAO,MAAM,KAAO,CAAA,EAAG,EAC9C,GAAI,CAACA,EAAI,GAAI,CACXL,EAAWM,GAAM,OAAS,QAAQ,EAClC,MACF,CACAN,EAAW,sDAAsD,EACjE,WAAW,IAAM,CAAE,OAAO,SAAS,KAAO,QAAU,EAAG,IAAI,CAC7D,OAASO,EAAK,CACZ,QAAQ,MAAM,cAAeA,CAAG,EAChCP,EAAW,eAAe,CAC5B,CACF,EAEA,OACEQ,EAAAA,IAAC,OAAI,UAAU,oIACb,gBAAC,OAAA,CAAK,SAAUL,EAAc,UAAU,gFACtC,SAAA,OAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,gCAA6B,EACpEJ,SAAY,MAAA,CAAI,UAAU,2BAA4B,SAAAA,EAAQ,EAC/DU,EAAAA,KAAC,QAAA,CAAM,UAAU,oBAAoB,SAAA,CAAA,uBACnCA,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAD,EAAAA,IAAC,QAAA,CACC,KAAMX,EAAe,OAAS,WAC9B,MAAOJ,EACP,SAAUW,GAAKV,EAAYU,EAAE,OAAO,KAAK,EACzC,UAAU,oDAAA,CAAA,EAEZI,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMV,EAAgBY,GAAK,CAACA,CAAC,EACtC,UAAU,sFACV,aAAYb,EAAe,0BAA4B,2BAEtD,WAAe,KAAO,KAAA,CAAA,CACzB,EACF,CAAA,EACF,EACAY,EAAAA,KAAC,QAAA,CAAM,UAAU,oBAAoB,SAAA,CAAA,+BAClC,QAAA,CAAM,KAAMZ,EAAe,OAAS,WAAY,MAAOF,EAAS,SAAUS,GAAKR,EAAWQ,EAAE,OAAO,KAAK,EAAG,UAAU,0DAA0D,CAAA,EAClL,QACC,SAAA,CAAO,KAAK,SAAS,UAAU,4CAA4C,SAAA,SAAA,CAAO,CAAA,CAAA,CACrF,CAAA,CACF,CAEJ"}