import{a as N,r as n,j as e,S as v}from"./index-BlCxgRmJ.js";const S=[{name:"Découverte",price:"0€",description:"Pour tester Frimousse sans engagement (15 jours max)",features:["Limite sur la création de compte","Support par email","Accès web responsive"],cta:"Essai gratuit",highlight:!1,buyButtonId:null},{name:"Essentiel",price:"29€ / mois",description:"Pour les MAM, micro-crèches et petites structures",features:["Jusqu’à 10 enfants","Notifications email","Support par email"],cta:"Choisir Essentiel",highlight:!1,buyButtonId:"buy_btn_1Ru88bExeKKlzm3U232ITaMN",productId:"prod_SpdCOBUbbne4oo"},{name:"Pro",price:"59€ / mois",description:"Pour crèches, garderies, centres de loisirs",features:["Création de comptes illimités","facturations détaillées","Assistant IA","Support prioritaire"],cta:"Choisir Pro",highlight:!0,buyButtonId:"buy_btn_1Ru84HExeKKlzm3UMPmR820n",productId:"prod_SpdCOBUbbne4oo"}];function k(){const l=N(),m=typeof window<"u"?new URLSearchParams(window.location.search):new URLSearchParams(""),r=m.get("subscribeToken"),c=m.get("prefillEmail"),[f,x]=n.useState(null),[a,o]=n.useState(null),[w,b]=n.useState(!0),[j,h]=n.useState(null);n.useEffect(()=>{b(!0),fetch("api/me",{credentials:"include"}).then(s=>s.ok?s.json():null).then(s=>x(s?.role||null)).catch(()=>x(null)).finally(()=>b(!1)),c&&o({type:"info",text:`Continuer l'abonnement pour ${c}`})},[c,r]);async function y(s,d){try{const t=s,i=r?"/subscriptions/create-checkout-with-token":"/subscriptions/create-checkout",p={plan:t,mode:"direct"};r&&(p.subscribeToken=r);const g=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:r?"omit":"include",body:JSON.stringify(p)}),u=await g.json().catch(()=>({}));if(!g.ok||!u.url)throw new Error(u.error||"Impossible de créer la session de paiement");window.location.href=u.url}catch(t){const i=t&&t.message?t.message:String(t);o({type:"error",text:i||"Erreur lors de la création de l’abonnement."})}finally{}}return e.jsxs("div",{className:"min-h-screen w-full flex flex-col overflow-x-hidden bg-[#f7f4d7] p-0 m-0",children:[e.jsx(v,{title:"Tarifs | Frimousse Association",description:"Découvrez les tarifs de Frimousse pour crèches associatives, micro-crèches, garderies, centres de loisirs et MAM. Abonnement mensuel, offre gratuite, options modulaires.",url:"https://frimousse-asso.fr/tarifs",image:"/frimousse-cover.png"}),e.jsx("script",{async:!0,src:"https://js.stripe.com/v3/buy-button.js"}),e.jsx("header",{className:"w-full bg-gradient-to-r from-[#a9ddf2] to-[#f7f4d7] border-b border-[#fcdcdf] sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto flex items-center justify-between py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"/imgs/LogoFrimousse.webp",alt:"Logo Frimousse",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"w-full text-center",children:e.jsx("span",{className:"font-bold text-base text-[#08323a]",children:"Les Frimousses"})})]})})}),e.jsxs("main",{className:"flex-1 w-full",children:[a&&e.jsx("div",{className:`max-w-4xl mx-auto mt-6 p-3 rounded ${a.type==="success"?"bg-green-50 border border-green-200 text-green-800":a.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-blue-50 border border-blue-200 text-blue-800"}`,role:"status",children:a.text}),e.jsx("section",{className:"w-full py-12 px-6 bg-white border-b border-gray-100",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("button",{onClick:()=>l("/"),className:"mb-8 px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil",children:"← Retour à l'accueil"}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-[#0b5566] mb-6",children:"Tarifs"}),e.jsx("p",{className:"text-gray-700 text-base sm:text-lg mb-10",children:"Des forfaits simples et transparents, adaptés à toutes les structures d’accueil d’enfants : crèches associatives, micro-crèches, garderies, centres de loisirs, MAM…"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch w-full",children:S.map((s,d)=>e.jsxs("div",{className:`rounded-lg border shadow p-6 flex flex-col items-center bg-[#f7f4d7] ${s.highlight?"border-[#0b5566] shadow-lg":"border-[#fcdcdf]"} h-full min-w-0 w-full max-w-md mx-auto md:max-w-[420px] md:w-full md:h-auto min-h-[380px] md:min-h-[420px]`,style:{width:"100%",maxWidth:"420px",margin:"0 auto"},children:[e.jsx("h2",{className:`text-xl font-bold mb-2 ${s.highlight?"text-[#0b5566]":"text-[#08323a]"}`,children:s.name}),e.jsx("div",{className:"text-3xl font-extrabold mb-2",children:s.price}),e.jsx("div",{className:"mb-4 text-[#08323a] text-center",children:s.description}),e.jsx("div",{className:"flex-1 w-full flex flex-col",children:e.jsx("ul",{className:"mb-6 text-left space-y-2 text-[#08323a] flex-1",children:s.features.map((t,i)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[#0b5566]",children:"✔"})," ",t]},i))})}),s.buyButtonId?e.jsxs("div",{className:"w-full flex flex-col items-center mt-4",children:[j===s.name&&e.jsxs("div",{className:"w-full max-w-xs mb-2 flex items-start justify-between",children:[e.jsx("div",{className:"rounded-md bg-yellow-100 border-l-4 border-yellow-400 p-3 text-sm text-yellow-800 flex-1",children:"Les abonnements payants ne sont pas encore disponibles — contactez-nous pour plus de renseignements."}),e.jsx("button",{"aria-label":"Fermer",onClick:()=>h(null),className:"ml-2 text-sm text-gray-600",children:"✕"})]}),e.jsx("button",{className:"w-full max-w-xs h-11 px-4 font-semibold transition shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2 flex items-center justify-center cursor-not-allowed rounded bg-gray-300 text-gray-600",type:"button","aria-disabled":"true",title:"Les abonnements payants ne sont pas encore disponibles. Contactez-nous pour plus d’informations.",onClick:()=>h(s.name),children:s.cta})]}):e.jsx("div",{className:"w-full flex justify-center mt-4",children:e.jsx("button",{className:"w-full max-w-xs h-11 px-4 font-semibold transition shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2 flex items-center justify-center cursor-pointer rounded",type:"button",style:{backgroundColor:"#0b5566",color:"#fff"},onClick:()=>w?o({type:"info",text:"Chargement en cours…"}):s.name==="Découverte"?f?o({type:"info",text:"Vous êtes déjà connecté."}):l("/register"):f==="super-admin"?o({type:"info",text:"Compte administrateur — l'abonnement n'est pas requis."}):y(s.name.toLowerCase()),children:e.jsx("span",{className:"Text Text-color--default Text-fontWeight--500 Text--truncate","data-testid":"hosted-buy-button-text",children:s.cta})})})]},d))}),e.jsxs("div",{className:"mt-10 text-gray-600 text-sm",children:[e.jsx("p",{children:"Tarifs hors taxes. Sans engagement. Options sur devis : formation, migration de données, modules personnalisés."}),e.jsx("p",{className:"mt-2",children:"Pour les réseaux, fédérations ou structures multi-sites, contactez-nous pour une offre sur-mesure."})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto text-center mt-10 mb-8",children:e.jsx("button",{onClick:()=>l("/"),className:"px-4 py-2 rounded bg-[#0b5566] text-white hover:opacity-95 transition font-semibold shadow focus:outline-none focus:ring-2 focus:ring-[#a9ddf2] focus:ring-offset-2","aria-label":"Retour à l'accueil (bas de page)",children:"← Retour à l'accueil"})})]})]})}export{k as default};
//# sourceMappingURL=PricingPage-Cpe4bSZ3.js.map
